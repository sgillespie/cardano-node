<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Ouroboros.Consensus.Network.NodeToNode</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">ouroboros-consensus-diffusion-0.10.0.0: Integration for the Ouroboros Network layer</span><ul class="links" id="page-menu"><li id="quick-jump-button"><a href="#">Quick Jump</a></li><li><a href="src/Ouroboros.Consensus.Network.NodeToNode.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>Safe-Inferred</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Ouroboros.Consensus.Network.NodeToNode</p></div><div id="table-of-contents"><div id="contents-list"><p class="caption" onclick="window.scrollTo(0,0)">Contents</p><ul><li><a href="#g:1">Handlers</a></li><li><a href="#g:2">Codecs</a></li><li><a href="#g:3">Byte Limits</a></li><li><a href="#g:4">Tracers</a></li><li><a href="#g:5">Applications</a><ul><li><a href="#g:6">Projections</a></li></ul></li><li><a href="#g:7">Re-exports</a></li></ul></div></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Intended for qualified import</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><span class="keyword">data</span> <a href="#t:Handlers">Handlers</a> m addr blk = <a href="#v:Handlers">Handlers</a> {<ul class="subs"><li><a href="#v:hChainSyncClient">hChainSyncClient</a> :: ConnectionId addr -&gt; IsBigLedgerPeer -&gt; DynamicEnv m blk -&gt; ChainSyncClientPipelined (Header blk) (Point blk) (Tip blk) m ChainSyncClientResult</li><li><a href="#v:hChainSyncServer">hChainSyncServer</a> :: ConnectionId addr -&gt; NodeToNodeVersion -&gt; Follower m blk (WithPoint blk (SerialisedHeader blk)) -&gt; ChainSyncServer (SerialisedHeader blk) (Point blk) (Tip blk) m ()</li><li><a href="#v:hBlockFetchClient">hBlockFetchClient</a> :: NodeToNodeVersion -&gt; ControlMessageSTM m -&gt; FetchedMetricsTracer m -&gt; BlockFetchClient (Header blk) blk m ()</li><li><a href="#v:hBlockFetchServer">hBlockFetchServer</a> :: ConnectionId addr -&gt; NodeToNodeVersion -&gt; ResourceRegistry m -&gt; BlockFetchServer (Serialised blk) (Point blk) m ()</li><li><a href="#v:hTxSubmissionClient">hTxSubmissionClient</a> :: NodeToNodeVersion -&gt; ControlMessageSTM m -&gt; ConnectionId addr -&gt; TxSubmissionClient (GenTxId blk) (GenTx blk) m ()</li><li><a href="#v:hTxSubmissionServer">hTxSubmissionServer</a> :: NodeToNodeVersion -&gt; ConnectionId addr -&gt; TxSubmissionServerPipelined (GenTxId blk) (GenTx blk) m ()</li><li><a href="#v:hKeepAliveClient">hKeepAliveClient</a> :: NodeToNodeVersion -&gt; ControlMessageSTM m -&gt; ConnectionId addr -&gt; StrictTVar m (<a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/containers-0.6.7/Data-Map-Strict.html#t:Map" title="Data.Map.Strict">Map</a> (ConnectionId addr) PeerGSV) -&gt; KeepAliveInterval -&gt; KeepAliveClient m ()</li><li><a href="#v:hKeepAliveServer">hKeepAliveServer</a> :: NodeToNodeVersion -&gt; ConnectionId addr -&gt; KeepAliveServer m ()</li><li><a href="#v:hPeerSharingClient">hPeerSharingClient</a> :: NodeToNodeVersion -&gt; ControlMessageSTM m -&gt; ConnectionId addr -&gt; PeerSharingController addr m -&gt; m (PeerSharingClient addr m ())</li><li><a href="#v:hPeerSharingServer">hPeerSharingServer</a> :: NodeToNodeVersion -&gt; ConnectionId addr -&gt; PeerSharingServer addr m</li></ul>}</li><li class="src short"><a href="#v:mkHandlers">mkHandlers</a> :: <span class="keyword">forall</span> m blk addrNTN addrNTC. (IOLike m, MonadTime m, MonadTimer m, LedgerSupportsMempool blk, HasTxId (GenTx blk), LedgerSupportsProtocol blk, <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> addrNTN) =&gt; <a href="Ouroboros-Consensus-NodeKernel.html#t:NodeKernelArgs" title="Ouroboros.Consensus.NodeKernel">NodeKernelArgs</a> m addrNTN addrNTC blk -&gt; <a href="Ouroboros-Consensus-NodeKernel.html#t:NodeKernel" title="Ouroboros.Consensus.NodeKernel">NodeKernel</a> m addrNTN addrNTC blk -&gt; (PeerSharingAmount -&gt; m [addrNTN]) -&gt; <a href="Ouroboros-Consensus-Network-NodeToNode.html#t:Handlers" title="Ouroboros.Consensus.Network.NodeToNode">Handlers</a> m addrNTN blk</li><li class="src short"><span class="keyword">data</span> <a href="#t:Codecs">Codecs</a> blk addr e m bCS bSCS bBF bSBF bTX bKA bPS = <a href="#v:Codecs">Codecs</a> {<ul class="subs"><li><a href="#v:cChainSyncCodec">cChainSyncCodec</a> :: Codec (ChainSync (Header blk) (Point blk) (Tip blk)) e m bCS</li><li><a href="#v:cChainSyncCodecSerialised">cChainSyncCodecSerialised</a> :: Codec (ChainSync (SerialisedHeader blk) (Point blk) (Tip blk)) e m bSCS</li><li><a href="#v:cBlockFetchCodec">cBlockFetchCodec</a> :: Codec (BlockFetch blk (Point blk)) e m bBF</li><li><a href="#v:cBlockFetchCodecSerialised">cBlockFetchCodecSerialised</a> :: Codec (BlockFetch (Serialised blk) (Point blk)) e m bSBF</li><li><a href="#v:cTxSubmission2Codec">cTxSubmission2Codec</a> :: Codec (TxSubmission2 (GenTxId blk) (GenTx blk)) e m bTX</li><li><a href="#v:cKeepAliveCodec">cKeepAliveCodec</a> :: Codec KeepAlive e m bKA</li><li><a href="#v:cPeerSharingCodec">cPeerSharingCodec</a> :: Codec (PeerSharing addr) e m bPS</li></ul>}</li><li class="src short"><a href="#v:defaultCodecs">defaultCodecs</a> :: <span class="keyword">forall</span> m blk addr. (IOLike m, SerialiseNodeToNodeConstraints blk) =&gt; CodecConfig blk -&gt; BlockNodeToNodeVersion blk -&gt; (NodeToNodeVersion -&gt; addr -&gt; Encoding) -&gt; (NodeToNodeVersion -&gt; <span class="keyword">forall</span> s. Decoder s addr) -&gt; NodeToNodeVersion -&gt; <a href="Ouroboros-Consensus-Network-NodeToNode.html#t:Codecs" title="Ouroboros.Consensus.Network.NodeToNode">Codecs</a> blk addr DeserialiseFailure m <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/Data-ByteString-Lazy.html#t:ByteString" title="Data.ByteString.Lazy">ByteString</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/Data-ByteString-Lazy.html#t:ByteString" title="Data.ByteString.Lazy">ByteString</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/Data-ByteString-Lazy.html#t:ByteString" title="Data.ByteString.Lazy">ByteString</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/Data-ByteString-Lazy.html#t:ByteString" title="Data.ByteString.Lazy">ByteString</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/Data-ByteString-Lazy.html#t:ByteString" title="Data.ByteString.Lazy">ByteString</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/Data-ByteString-Lazy.html#t:ByteString" title="Data.ByteString.Lazy">ByteString</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/Data-ByteString-Lazy.html#t:ByteString" title="Data.ByteString.Lazy">ByteString</a></li><li class="src short"><a href="#v:identityCodecs">identityCodecs</a> :: <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Ouroboros-Consensus-Network-NodeToNode.html#t:Codecs" title="Ouroboros.Consensus.Network.NodeToNode">Codecs</a> blk addr CodecFailure m (AnyMessage (ChainSync (Header blk) (Point blk) (Tip blk))) (AnyMessage (ChainSync (SerialisedHeader blk) (Point blk) (Tip blk))) (AnyMessage (BlockFetch blk (Point blk))) (AnyMessage (BlockFetch (Serialised blk) (Point blk))) (AnyMessage (TxSubmission2 (GenTxId blk) (GenTx blk))) (AnyMessage KeepAlive) (AnyMessage (PeerSharing addr))</li><li class="src short"><span class="keyword">data</span> <a href="#t:ByteLimits">ByteLimits</a> bCS bBF bTX bKA</li><li class="src short"><a href="#v:byteLimits">byteLimits</a> :: <a href="Ouroboros-Consensus-Network-NodeToNode.html#t:ByteLimits" title="Ouroboros.Consensus.Network.NodeToNode">ByteLimits</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/Data-ByteString-Lazy.html#t:ByteString" title="Data.ByteString.Lazy">ByteString</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/Data-ByteString-Lazy.html#t:ByteString" title="Data.ByteString.Lazy">ByteString</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/Data-ByteString-Lazy.html#t:ByteString" title="Data.ByteString.Lazy">ByteString</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/Data-ByteString-Lazy.html#t:ByteString" title="Data.ByteString.Lazy">ByteString</a></li><li class="src short"><a href="#v:noByteLimits">noByteLimits</a> :: <a href="Ouroboros-Consensus-Network-NodeToNode.html#t:ByteLimits" title="Ouroboros.Consensus.Network.NodeToNode">ByteLimits</a> bCS bBF bTX bKA</li><li class="src short"><span class="keyword">type</span> <a href="#t:Tracers">Tracers</a> m peer blk e = <a href="Ouroboros-Consensus-Network-NodeToNode.html#t:Tracers-39-" title="Ouroboros.Consensus.Network.NodeToNode">Tracers'</a> peer blk e (Tracer m)</li><li class="src short"><span class="keyword">data</span> <a href="#t:Tracers-39-">Tracers'</a> peer blk e f = <a href="#v:Tracers">Tracers</a> {<ul class="subs"><li><a href="#v:tChainSyncTracer">tChainSyncTracer</a> :: f (TraceLabelPeer peer (TraceSendRecv (ChainSync (Header blk) (Point blk) (Tip blk))))</li><li><a href="#v:tChainSyncSerialisedTracer">tChainSyncSerialisedTracer</a> :: f (TraceLabelPeer peer (TraceSendRecv (ChainSync (SerialisedHeader blk) (Point blk) (Tip blk))))</li><li><a href="#v:tBlockFetchTracer">tBlockFetchTracer</a> :: f (TraceLabelPeer peer (TraceSendRecv (BlockFetch blk (Point blk))))</li><li><a href="#v:tBlockFetchSerialisedTracer">tBlockFetchSerialisedTracer</a> :: f (TraceLabelPeer peer (TraceSendRecv (BlockFetch (Serialised blk) (Point blk))))</li><li><a href="#v:tTxSubmission2Tracer">tTxSubmission2Tracer</a> :: f (TraceLabelPeer peer (TraceSendRecv (TxSubmission2 (GenTxId blk) (GenTx blk))))</li></ul>}</li><li class="src short"><a href="#v:nullTracers">nullTracers</a> :: <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Ouroboros-Consensus-Network-NodeToNode.html#t:Tracers" title="Ouroboros.Consensus.Network.NodeToNode">Tracers</a> m peer blk e</li><li class="src short"><a href="#v:showTracers">showTracers</a> :: (<a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Text-Show.html#t:Show" title="Text.Show">Show</a> blk, <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Text-Show.html#t:Show" title="Text.Show">Show</a> peer, <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Text-Show.html#t:Show" title="Text.Show">Show</a> (Header blk), <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Text-Show.html#t:Show" title="Text.Show">Show</a> (GenTx blk), <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Text-Show.html#t:Show" title="Text.Show">Show</a> (GenTxId blk), HasHeader blk, HasNestedContent Header blk) =&gt; Tracer m <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-String.html#t:String" title="Data.String">String</a> -&gt; <a href="Ouroboros-Consensus-Network-NodeToNode.html#t:Tracers" title="Ouroboros.Consensus.Network.NodeToNode">Tracers</a> m peer blk e</li><li class="src short"><span class="keyword">data</span> <a href="#t:Apps">Apps</a> m addr bCS bBF bTX bKA bPS a b = <a href="#v:Apps">Apps</a> {<ul class="subs"><li><a href="#v:aChainSyncClient">aChainSyncClient</a> :: <a href="Ouroboros-Consensus-Network-NodeToNode.html#t:ClientApp" title="Ouroboros.Consensus.Network.NodeToNode">ClientApp</a> m addr bCS a</li><li><a href="#v:aChainSyncServer">aChainSyncServer</a> :: <a href="Ouroboros-Consensus-Network-NodeToNode.html#t:ServerApp" title="Ouroboros.Consensus.Network.NodeToNode">ServerApp</a> m addr bCS b</li><li><a href="#v:aBlockFetchClient">aBlockFetchClient</a> :: <a href="Ouroboros-Consensus-Network-NodeToNode.html#t:ClientApp" title="Ouroboros.Consensus.Network.NodeToNode">ClientApp</a> m addr bBF a</li><li><a href="#v:aBlockFetchServer">aBlockFetchServer</a> :: <a href="Ouroboros-Consensus-Network-NodeToNode.html#t:ServerApp" title="Ouroboros.Consensus.Network.NodeToNode">ServerApp</a> m addr bBF b</li><li><a href="#v:aTxSubmission2Client">aTxSubmission2Client</a> :: <a href="Ouroboros-Consensus-Network-NodeToNode.html#t:ClientApp" title="Ouroboros.Consensus.Network.NodeToNode">ClientApp</a> m addr bTX a</li><li><a href="#v:aTxSubmission2Server">aTxSubmission2Server</a> :: <a href="Ouroboros-Consensus-Network-NodeToNode.html#t:ServerApp" title="Ouroboros.Consensus.Network.NodeToNode">ServerApp</a> m addr bTX b</li><li><a href="#v:aKeepAliveClient">aKeepAliveClient</a> :: <a href="Ouroboros-Consensus-Network-NodeToNode.html#t:ClientApp" title="Ouroboros.Consensus.Network.NodeToNode">ClientApp</a> m addr bKA a</li><li><a href="#v:aKeepAliveServer">aKeepAliveServer</a> :: <a href="Ouroboros-Consensus-Network-NodeToNode.html#t:ServerApp" title="Ouroboros.Consensus.Network.NodeToNode">ServerApp</a> m addr bKA b</li><li><a href="#v:aPeerSharingClient">aPeerSharingClient</a> :: <a href="Ouroboros-Consensus-Network-NodeToNode.html#t:ClientApp" title="Ouroboros.Consensus.Network.NodeToNode">ClientApp</a> m addr bPS a</li><li><a href="#v:aPeerSharingServer">aPeerSharingServer</a> :: <a href="Ouroboros-Consensus-Network-NodeToNode.html#t:ServerApp" title="Ouroboros.Consensus.Network.NodeToNode">ServerApp</a> m addr bPS b</li></ul>}</li><li class="src short"><span class="keyword">type</span> <a href="#t:ClientApp">ClientApp</a> m addr bytes a = NodeToNodeVersion -&gt; ExpandedInitiatorContext addr m -&gt; Channel m bytes -&gt; m (a, <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> bytes)</li><li class="src short"><span class="keyword">type</span> <a href="#t:ServerApp">ServerApp</a> m addr bytes a = NodeToNodeVersion -&gt; ResponderContext addr -&gt; Channel m bytes -&gt; m (a, <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> bytes)</li><li class="src short"><a href="#v:mkApps">mkApps</a> :: <span class="keyword">forall</span> m addrNTN addrNTC blk e bCS bBF bTX bKA bPS. (IOLike m, MonadTimer m, <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> addrNTN, <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Control-Exception-Base.html#t:Exception" title="Control.Exception.Base">Exception</a> e, LedgerSupportsProtocol blk, ShowProxy blk, ShowProxy (Header blk), ShowProxy (TxId (GenTx blk)), ShowProxy (GenTx blk)) =&gt; <a href="Ouroboros-Consensus-NodeKernel.html#t:NodeKernel" title="Ouroboros.Consensus.NodeKernel">NodeKernel</a> m addrNTN addrNTC blk -&gt; <a href="Ouroboros-Consensus-Network-NodeToNode.html#t:Tracers" title="Ouroboros.Consensus.Network.NodeToNode">Tracers</a> m (ConnectionId addrNTN) blk e -&gt; (NodeToNodeVersion -&gt; <a href="Ouroboros-Consensus-Network-NodeToNode.html#t:Codecs" title="Ouroboros.Consensus.Network.NodeToNode">Codecs</a> blk addrNTN e m bCS bCS bBF bBF bTX bKA bPS) -&gt; <a href="Ouroboros-Consensus-Network-NodeToNode.html#t:ByteLimits" title="Ouroboros.Consensus.Network.NodeToNode">ByteLimits</a> bCS bBF bTX bKA -&gt; m <a href="Ouroboros-Consensus-Network-NodeToNode.html#t:ChainSyncTimeout" title="Ouroboros.Consensus.Network.NodeToNode">ChainSyncTimeout</a> -&gt; ReportPeerMetrics m (ConnectionId addrNTN) -&gt; <a href="Ouroboros-Consensus-Network-NodeToNode.html#t:Handlers" title="Ouroboros.Consensus.Network.NodeToNode">Handlers</a> m addrNTN blk -&gt; <a href="Ouroboros-Consensus-Network-NodeToNode.html#t:Apps" title="Ouroboros.Consensus.Network.NodeToNode">Apps</a> m addrNTN bCS bBF bTX bKA bPS <a href="Ouroboros-Consensus-Node-ExitPolicy.html#t:NodeToNodeInitiatorResult" title="Ouroboros.Consensus.Node.ExitPolicy">NodeToNodeInitiatorResult</a> ()</li><li class="src short"><a href="#v:initiator">initiator</a> :: MiniProtocolParameters -&gt; NodeToNodeVersion -&gt; PeerSharing -&gt; <a href="Ouroboros-Consensus-Network-NodeToNode.html#t:Apps" title="Ouroboros.Consensus.Network.NodeToNode">Apps</a> m addr b b b b b a c -&gt; OuroborosBundleWithExpandedCtx 'InitiatorMode addr b m a <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Void.html#t:Void" title="Data.Void">Void</a></li><li class="src short"><a href="#v:initiatorAndResponder">initiatorAndResponder</a> :: MiniProtocolParameters -&gt; NodeToNodeVersion -&gt; PeerSharing -&gt; <a href="Ouroboros-Consensus-Network-NodeToNode.html#t:Apps" title="Ouroboros.Consensus.Network.NodeToNode">Apps</a> m addr b b b b b a c -&gt; OuroborosBundleWithExpandedCtx 'InitiatorResponderMode addr b m a c</li><li class="src short"><span class="keyword">data</span> <a href="#t:ChainSyncTimeout">ChainSyncTimeout</a> = <a href="#v:ChainSyncTimeout">ChainSyncTimeout</a> {<ul class="subs"><li><a href="#v:canAwaitTimeout">canAwaitTimeout</a> :: <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/time-1.12.2/Data-Time-Clock.html#t:DiffTime" title="Data.Time.Clock">DiffTime</a></li><li><a href="#v:intersectTimeout">intersectTimeout</a> :: <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/time-1.12.2/Data-Time-Clock.html#t:DiffTime" title="Data.Time.Clock">DiffTime</a></li><li><a href="#v:mustReplyTimeout">mustReplyTimeout</a> :: <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/time-1.12.2/Data-Time-Clock.html#t:DiffTime" title="Data.Time.Clock">DiffTime</a></li><li><a href="#v:idleTimeout">idleTimeout</a> :: <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/time-1.12.2/Data-Time-Clock.html#t:DiffTime" title="Data.Time.Clock">DiffTime</a></li></ul>}</li></ul></details></div><div id="interface"><a href="#g:1" id="g:1"><h1>Handlers</h1></a><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Handlers" class="def">Handlers</a> m addr blk <a href="src/Ouroboros.Consensus.Network.NodeToNode.html#Handlers" class="link">Source</a> <a href="#t:Handlers" class="selflink">#</a></p><div class="doc"><p>Protocol handlers for node-to-node (remote) communication</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:Handlers" class="def">Handlers</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:hChainSyncClient" class="def">hChainSyncClient</a> :: ConnectionId addr -&gt; IsBigLedgerPeer -&gt; DynamicEnv m blk -&gt; ChainSyncClientPipelined (Header blk) (Point blk) (Tip blk) m ChainSyncClientResult</dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:hChainSyncServer" class="def">hChainSyncServer</a> :: ConnectionId addr -&gt; NodeToNodeVersion -&gt; Follower m blk (WithPoint blk (SerialisedHeader blk)) -&gt; ChainSyncServer (SerialisedHeader blk) (Point blk) (Tip blk) m ()</dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:hBlockFetchClient" class="def">hBlockFetchClient</a> :: NodeToNodeVersion -&gt; ControlMessageSTM m -&gt; FetchedMetricsTracer m -&gt; BlockFetchClient (Header blk) blk m ()</dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:hBlockFetchServer" class="def">hBlockFetchServer</a> :: ConnectionId addr -&gt; NodeToNodeVersion -&gt; ResourceRegistry m -&gt; BlockFetchServer (Serialised blk) (Point blk) m ()</dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:hTxSubmissionClient" class="def">hTxSubmissionClient</a> :: NodeToNodeVersion -&gt; ControlMessageSTM m -&gt; ConnectionId addr -&gt; TxSubmissionClient (GenTxId blk) (GenTx blk) m ()</dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:hTxSubmissionServer" class="def">hTxSubmissionServer</a> :: NodeToNodeVersion -&gt; ConnectionId addr -&gt; TxSubmissionServerPipelined (GenTxId blk) (GenTx blk) m ()</dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:hKeepAliveClient" class="def">hKeepAliveClient</a> :: NodeToNodeVersion -&gt; ControlMessageSTM m -&gt; ConnectionId addr -&gt; StrictTVar m (<a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/containers-0.6.7/Data-Map-Strict.html#t:Map" title="Data.Map.Strict">Map</a> (ConnectionId addr) PeerGSV) -&gt; KeepAliveInterval -&gt; KeepAliveClient m ()</dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:hKeepAliveServer" class="def">hKeepAliveServer</a> :: NodeToNodeVersion -&gt; ConnectionId addr -&gt; KeepAliveServer m ()</dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:hPeerSharingClient" class="def">hPeerSharingClient</a> :: NodeToNodeVersion -&gt; ControlMessageSTM m -&gt; ConnectionId addr -&gt; PeerSharingController addr m -&gt; m (PeerSharingClient addr m ())</dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:hPeerSharingServer" class="def">hPeerSharingServer</a> :: NodeToNodeVersion -&gt; ConnectionId addr -&gt; PeerSharingServer addr m</dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr></table></div></div><div class="top"><p class="src"><a id="v:mkHandlers" class="def">mkHandlers</a> <a href="src/Ouroboros.Consensus.Network.NodeToNode.html#mkHandlers" class="link">Source</a> <a href="#v:mkHandlers" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <span class="keyword">forall</span> m blk addrNTN addrNTC. (IOLike m, MonadTime m, MonadTimer m, LedgerSupportsMempool blk, HasTxId (GenTx blk), LedgerSupportsProtocol blk, <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> addrNTN)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">=&gt; <a href="Ouroboros-Consensus-NodeKernel.html#t:NodeKernelArgs" title="Ouroboros.Consensus.NodeKernel">NodeKernelArgs</a> m addrNTN addrNTC blk</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; <a href="Ouroboros-Consensus-NodeKernel.html#t:NodeKernel" title="Ouroboros.Consensus.NodeKernel">NodeKernel</a> m addrNTN addrNTC blk</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; (PeerSharingAmount -&gt; m [addrNTN])</td><td class="doc"><p>Peer Sharing result computation callback</p></td></tr><tr><td class="src">-&gt; <a href="Ouroboros-Consensus-Network-NodeToNode.html#t:Handlers" title="Ouroboros.Consensus.Network.NodeToNode">Handlers</a> m addrNTN blk</td><td class="doc empty">&nbsp;</td></tr></table></div></div><a href="#g:2" id="g:2"><h1>Codecs</h1></a><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Codecs" class="def">Codecs</a> blk addr e m bCS bSCS bBF bSBF bTX bKA bPS <a href="src/Ouroboros.Consensus.Network.NodeToNode.html#Codecs" class="link">Source</a> <a href="#t:Codecs" class="selflink">#</a></p><div class="doc"><p>Node-to-node protocol codecs needed to run <code><a href="Ouroboros-Consensus-Network-NodeToNode.html#t:Handlers" title="Ouroboros.Consensus.Network.NodeToNode">Handlers</a></code>.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:Codecs" class="def">Codecs</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:cChainSyncCodec" class="def">cChainSyncCodec</a> :: Codec (ChainSync (Header blk) (Point blk) (Tip blk)) e m bCS</dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:cChainSyncCodecSerialised" class="def">cChainSyncCodecSerialised</a> :: Codec (ChainSync (SerialisedHeader blk) (Point blk) (Tip blk)) e m bSCS</dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:cBlockFetchCodec" class="def">cBlockFetchCodec</a> :: Codec (BlockFetch blk (Point blk)) e m bBF</dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:cBlockFetchCodecSerialised" class="def">cBlockFetchCodecSerialised</a> :: Codec (BlockFetch (Serialised blk) (Point blk)) e m bSBF</dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:cTxSubmission2Codec" class="def">cTxSubmission2Codec</a> :: Codec (TxSubmission2 (GenTxId blk) (GenTx blk)) e m bTX</dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:cKeepAliveCodec" class="def">cKeepAliveCodec</a> :: Codec KeepAlive e m bKA</dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:cPeerSharingCodec" class="def">cPeerSharingCodec</a> :: Codec (PeerSharing addr) e m bPS</dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr></table></div></div><div class="top"><p class="src"><a id="v:defaultCodecs" class="def">defaultCodecs</a> :: <span class="keyword">forall</span> m blk addr. (IOLike m, SerialiseNodeToNodeConstraints blk) =&gt; CodecConfig blk -&gt; BlockNodeToNodeVersion blk -&gt; (NodeToNodeVersion -&gt; addr -&gt; Encoding) -&gt; (NodeToNodeVersion -&gt; <span class="keyword">forall</span> s. Decoder s addr) -&gt; NodeToNodeVersion -&gt; <a href="Ouroboros-Consensus-Network-NodeToNode.html#t:Codecs" title="Ouroboros.Consensus.Network.NodeToNode">Codecs</a> blk addr DeserialiseFailure m <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/Data-ByteString-Lazy.html#t:ByteString" title="Data.ByteString.Lazy">ByteString</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/Data-ByteString-Lazy.html#t:ByteString" title="Data.ByteString.Lazy">ByteString</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/Data-ByteString-Lazy.html#t:ByteString" title="Data.ByteString.Lazy">ByteString</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/Data-ByteString-Lazy.html#t:ByteString" title="Data.ByteString.Lazy">ByteString</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/Data-ByteString-Lazy.html#t:ByteString" title="Data.ByteString.Lazy">ByteString</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/Data-ByteString-Lazy.html#t:ByteString" title="Data.ByteString.Lazy">ByteString</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/Data-ByteString-Lazy.html#t:ByteString" title="Data.ByteString.Lazy">ByteString</a> <a href="src/Ouroboros.Consensus.Network.NodeToNode.html#defaultCodecs" class="link">Source</a> <a href="#v:defaultCodecs" class="selflink">#</a></p><div class="doc"><p>Protocol codecs for the node-to-node protocols</p></div></div><div class="top"><p class="src"><a id="v:identityCodecs" class="def">identityCodecs</a> :: <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Ouroboros-Consensus-Network-NodeToNode.html#t:Codecs" title="Ouroboros.Consensus.Network.NodeToNode">Codecs</a> blk addr CodecFailure m (AnyMessage (ChainSync (Header blk) (Point blk) (Tip blk))) (AnyMessage (ChainSync (SerialisedHeader blk) (Point blk) (Tip blk))) (AnyMessage (BlockFetch blk (Point blk))) (AnyMessage (BlockFetch (Serialised blk) (Point blk))) (AnyMessage (TxSubmission2 (GenTxId blk) (GenTx blk))) (AnyMessage KeepAlive) (AnyMessage (PeerSharing addr)) <a href="src/Ouroboros.Consensus.Network.NodeToNode.html#identityCodecs" class="link">Source</a> <a href="#v:identityCodecs" class="selflink">#</a></p><div class="doc"><p>Identity codecs used in tests.</p></div></div><a href="#g:3" id="g:3"><h1>Byte Limits</h1></a><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:ByteLimits" class="def">ByteLimits</a> bCS bBF bTX bKA <a href="src/Ouroboros.Consensus.Network.NodeToNode.html#ByteLimits" class="link">Source</a> <a href="#t:ByteLimits" class="selflink">#</a></p><div class="doc"><p>Per mini-protocol byte limits;  For each mini-protocol they provide
 per-state byte size limits, i.e. how much data can arrive from the network.</p><p>They don't depend on the instantiation of the protocol parameters (which
 block type is used, etc.), hence the use of <code>RankNTypes</code>.</p></div></div><div class="top"><p class="src"><a id="v:byteLimits" class="def">byteLimits</a> :: <a href="Ouroboros-Consensus-Network-NodeToNode.html#t:ByteLimits" title="Ouroboros.Consensus.Network.NodeToNode">ByteLimits</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/Data-ByteString-Lazy.html#t:ByteString" title="Data.ByteString.Lazy">ByteString</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/Data-ByteString-Lazy.html#t:ByteString" title="Data.ByteString.Lazy">ByteString</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/Data-ByteString-Lazy.html#t:ByteString" title="Data.ByteString.Lazy">ByteString</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/Data-ByteString-Lazy.html#t:ByteString" title="Data.ByteString.Lazy">ByteString</a> <a href="src/Ouroboros.Consensus.Network.NodeToNode.html#byteLimits" class="link">Source</a> <a href="#v:byteLimits" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:noByteLimits" class="def">noByteLimits</a> :: <a href="Ouroboros-Consensus-Network-NodeToNode.html#t:ByteLimits" title="Ouroboros.Consensus.Network.NodeToNode">ByteLimits</a> bCS bBF bTX bKA <a href="src/Ouroboros.Consensus.Network.NodeToNode.html#noByteLimits" class="link">Source</a> <a href="#v:noByteLimits" class="selflink">#</a></p></div><a href="#g:4" id="g:4"><h1>Tracers</h1></a><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:Tracers" class="def">Tracers</a> m peer blk e = <a href="Ouroboros-Consensus-Network-NodeToNode.html#t:Tracers-39-" title="Ouroboros.Consensus.Network.NodeToNode">Tracers'</a> peer blk e (Tracer m) <a href="src/Ouroboros.Consensus.Network.NodeToNode.html#Tracers" class="link">Source</a> <a href="#t:Tracers" class="selflink">#</a></p><div class="doc"><p>A record of <code>Tracer</code>s for the different protocols.</p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Tracers-39-" class="def">Tracers'</a> peer blk e f <a href="src/Ouroboros.Consensus.Network.NodeToNode.html#Tracers%27" class="link">Source</a> <a href="#t:Tracers-39-" class="selflink">#</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:Tracers" class="def">Tracers</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:tChainSyncTracer" class="def">tChainSyncTracer</a> :: f (TraceLabelPeer peer (TraceSendRecv (ChainSync (Header blk) (Point blk) (Tip blk))))</dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:tChainSyncSerialisedTracer" class="def">tChainSyncSerialisedTracer</a> :: f (TraceLabelPeer peer (TraceSendRecv (ChainSync (SerialisedHeader blk) (Point blk) (Tip blk))))</dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:tBlockFetchTracer" class="def">tBlockFetchTracer</a> :: f (TraceLabelPeer peer (TraceSendRecv (BlockFetch blk (Point blk))))</dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:tBlockFetchSerialisedTracer" class="def">tBlockFetchSerialisedTracer</a> :: f (TraceLabelPeer peer (TraceSendRecv (BlockFetch (Serialised blk) (Point blk))))</dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:tTxSubmission2Tracer" class="def">tTxSubmission2Tracer</a> :: f (TraceLabelPeer peer (TraceSendRecv (TxSubmission2 (GenTxId blk) (GenTx blk))))</dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:Tracers-39-">Instances</h4><details id="i:Tracers-39-" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Tracers-39-:Semigroup:1"></span> (<span class="keyword">forall</span> a. <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Prelude.html#t:Semigroup" title="Prelude">Semigroup</a> (f a)) =&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Prelude.html#t:Semigroup" title="Prelude">Semigroup</a> (<a href="Ouroboros-Consensus-Network-NodeToNode.html#t:Tracers-39-" title="Ouroboros.Consensus.Network.NodeToNode">Tracers'</a> peer blk e f)</span> <a href="src/Ouroboros.Consensus.Network.NodeToNode.html#line-380" class="link">Source</a> <a href="#t:Tracers-39-" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Tracers-39-:Semigroup:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Ouroboros-Consensus-Network-NodeToNode.html">Ouroboros.Consensus.Network.NodeToNode</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-60--62-">(&lt;&gt;)</a> :: <a href="Ouroboros-Consensus-Network-NodeToNode.html#t:Tracers-39-" title="Ouroboros.Consensus.Network.NodeToNode">Tracers'</a> peer blk e f -&gt; <a href="Ouroboros-Consensus-Network-NodeToNode.html#t:Tracers-39-" title="Ouroboros.Consensus.Network.NodeToNode">Tracers'</a> peer blk e f -&gt; <a href="Ouroboros-Consensus-Network-NodeToNode.html#t:Tracers-39-" title="Ouroboros.Consensus.Network.NodeToNode">Tracers'</a> peer blk e f <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src" class="link">Source</a> <a href="#v:-60--62-" class="selflink">#</a></p><p class="src"><a href="#v:sconcat">sconcat</a> :: <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-List-NonEmpty.html#t:NonEmpty" title="Data.List.NonEmpty">NonEmpty</a> (<a href="Ouroboros-Consensus-Network-NodeToNode.html#t:Tracers-39-" title="Ouroboros.Consensus.Network.NodeToNode">Tracers'</a> peer blk e f) -&gt; <a href="Ouroboros-Consensus-Network-NodeToNode.html#t:Tracers-39-" title="Ouroboros.Consensus.Network.NodeToNode">Tracers'</a> peer blk e f <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src" class="link">Source</a> <a href="#v:sconcat" class="selflink">#</a></p><p class="src"><a href="#v:stimes">stimes</a> :: <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Prelude.html#t:Integral" title="Prelude">Integral</a> b =&gt; b -&gt; <a href="Ouroboros-Consensus-Network-NodeToNode.html#t:Tracers-39-" title="Ouroboros.Consensus.Network.NodeToNode">Tracers'</a> peer blk e f -&gt; <a href="Ouroboros-Consensus-Network-NodeToNode.html#t:Tracers-39-" title="Ouroboros.Consensus.Network.NodeToNode">Tracers'</a> peer blk e f <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src" class="link">Source</a> <a href="#v:stimes" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:nullTracers" class="def">nullTracers</a> :: <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Ouroboros-Consensus-Network-NodeToNode.html#t:Tracers" title="Ouroboros.Consensus.Network.NodeToNode">Tracers</a> m peer blk e <a href="src/Ouroboros.Consensus.Network.NodeToNode.html#nullTracers" class="link">Source</a> <a href="#v:nullTracers" class="selflink">#</a></p><div class="doc"><p>Use a <code>nullTracer</code> for each protocol.</p></div></div><div class="top"><p class="src"><a id="v:showTracers" class="def">showTracers</a> :: (<a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Text-Show.html#t:Show" title="Text.Show">Show</a> blk, <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Text-Show.html#t:Show" title="Text.Show">Show</a> peer, <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Text-Show.html#t:Show" title="Text.Show">Show</a> (Header blk), <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Text-Show.html#t:Show" title="Text.Show">Show</a> (GenTx blk), <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Text-Show.html#t:Show" title="Text.Show">Show</a> (GenTxId blk), HasHeader blk, HasNestedContent Header blk) =&gt; Tracer m <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-String.html#t:String" title="Data.String">String</a> -&gt; <a href="Ouroboros-Consensus-Network-NodeToNode.html#t:Tracers" title="Ouroboros.Consensus.Network.NodeToNode">Tracers</a> m peer blk e <a href="src/Ouroboros.Consensus.Network.NodeToNode.html#showTracers" class="link">Source</a> <a href="#v:showTracers" class="selflink">#</a></p></div><a href="#g:5" id="g:5"><h1>Applications</h1></a><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Apps" class="def">Apps</a> m addr bCS bBF bTX bKA bPS a b <a href="src/Ouroboros.Consensus.Network.NodeToNode.html#Apps" class="link">Source</a> <a href="#t:Apps" class="selflink">#</a></p><div class="doc"><p>Applications for the node-to-node protocols</p><p>See <code><a href="Network-Mux-Types.html#v:MuxApplication" title="Network.Mux.Types">MuxApplication</a></code></p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:Apps" class="def">Apps</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:aChainSyncClient" class="def">aChainSyncClient</a> :: <a href="Ouroboros-Consensus-Network-NodeToNode.html#t:ClientApp" title="Ouroboros.Consensus.Network.NodeToNode">ClientApp</a> m addr bCS a</dfn><div class="doc"><p>Start a chain sync client that communicates with the given upstream
 node.</p></div></li><li><dfn class="src"><a id="v:aChainSyncServer" class="def">aChainSyncServer</a> :: <a href="Ouroboros-Consensus-Network-NodeToNode.html#t:ServerApp" title="Ouroboros.Consensus.Network.NodeToNode">ServerApp</a> m addr bCS b</dfn><div class="doc"><p>Start a chain sync server.</p></div></li><li><dfn class="src"><a id="v:aBlockFetchClient" class="def">aBlockFetchClient</a> :: <a href="Ouroboros-Consensus-Network-NodeToNode.html#t:ClientApp" title="Ouroboros.Consensus.Network.NodeToNode">ClientApp</a> m addr bBF a</dfn><div class="doc"><p>Start a block fetch client that communicates with the given
 upstream node.</p></div></li><li><dfn class="src"><a id="v:aBlockFetchServer" class="def">aBlockFetchServer</a> :: <a href="Ouroboros-Consensus-Network-NodeToNode.html#t:ServerApp" title="Ouroboros.Consensus.Network.NodeToNode">ServerApp</a> m addr bBF b</dfn><div class="doc"><p>Start a block fetch server.</p></div></li><li><dfn class="src"><a id="v:aTxSubmission2Client" class="def">aTxSubmission2Client</a> :: <a href="Ouroboros-Consensus-Network-NodeToNode.html#t:ClientApp" title="Ouroboros.Consensus.Network.NodeToNode">ClientApp</a> m addr bTX a</dfn><div class="doc"><p>Start a transaction submission v2 client that communicates with the
 given upstream node.</p></div></li><li><dfn class="src"><a id="v:aTxSubmission2Server" class="def">aTxSubmission2Server</a> :: <a href="Ouroboros-Consensus-Network-NodeToNode.html#t:ServerApp" title="Ouroboros.Consensus.Network.NodeToNode">ServerApp</a> m addr bTX b</dfn><div class="doc"><p>Start a transaction submission v2 server.</p></div></li><li><dfn class="src"><a id="v:aKeepAliveClient" class="def">aKeepAliveClient</a> :: <a href="Ouroboros-Consensus-Network-NodeToNode.html#t:ClientApp" title="Ouroboros.Consensus.Network.NodeToNode">ClientApp</a> m addr bKA a</dfn><div class="doc"><p>Start a keep-alive client.</p></div></li><li><dfn class="src"><a id="v:aKeepAliveServer" class="def">aKeepAliveServer</a> :: <a href="Ouroboros-Consensus-Network-NodeToNode.html#t:ServerApp" title="Ouroboros.Consensus.Network.NodeToNode">ServerApp</a> m addr bKA b</dfn><div class="doc"><p>Start a keep-alive server.</p></div></li><li><dfn class="src"><a id="v:aPeerSharingClient" class="def">aPeerSharingClient</a> :: <a href="Ouroboros-Consensus-Network-NodeToNode.html#t:ClientApp" title="Ouroboros.Consensus.Network.NodeToNode">ClientApp</a> m addr bPS a</dfn><div class="doc"><p>Start a peer-sharing client.</p></div></li><li><dfn class="src"><a id="v:aPeerSharingServer" class="def">aPeerSharingServer</a> :: <a href="Ouroboros-Consensus-Network-NodeToNode.html#t:ServerApp" title="Ouroboros.Consensus.Network.NodeToNode">ServerApp</a> m addr bPS b</dfn><div class="doc"><p>Start a peer-sharing server.</p></div></li></ul></div></td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:ClientApp" class="def">ClientApp</a> m addr bytes a = NodeToNodeVersion -&gt; ExpandedInitiatorContext addr m -&gt; Channel m bytes -&gt; m (a, <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> bytes) <a href="src/Ouroboros.Consensus.Network.NodeToNode.html#ClientApp" class="link">Source</a> <a href="#t:ClientApp" class="selflink">#</a></p><div class="doc"><p>A node-to-node application</p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:ServerApp" class="def">ServerApp</a> m addr bytes a = NodeToNodeVersion -&gt; ResponderContext addr -&gt; Channel m bytes -&gt; m (a, <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> bytes) <a href="src/Ouroboros.Consensus.Network.NodeToNode.html#ServerApp" class="link">Source</a> <a href="#t:ServerApp" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:mkApps" class="def">mkApps</a> <a href="src/Ouroboros.Consensus.Network.NodeToNode.html#mkApps" class="link">Source</a> <a href="#v:mkApps" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <span class="keyword">forall</span> m addrNTN addrNTC blk e bCS bBF bTX bKA bPS. (IOLike m, MonadTimer m, <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> addrNTN, <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Control-Exception-Base.html#t:Exception" title="Control.Exception.Base">Exception</a> e, LedgerSupportsProtocol blk, ShowProxy blk, ShowProxy (Header blk), ShowProxy (TxId (GenTx blk)), ShowProxy (GenTx blk))</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">=&gt; <a href="Ouroboros-Consensus-NodeKernel.html#t:NodeKernel" title="Ouroboros.Consensus.NodeKernel">NodeKernel</a> m addrNTN addrNTC blk</td><td class="doc"><p>Needed for bracketing only</p></td></tr><tr><td class="src">-&gt; <a href="Ouroboros-Consensus-Network-NodeToNode.html#t:Tracers" title="Ouroboros.Consensus.Network.NodeToNode">Tracers</a> m (ConnectionId addrNTN) blk e</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; (NodeToNodeVersion -&gt; <a href="Ouroboros-Consensus-Network-NodeToNode.html#t:Codecs" title="Ouroboros.Consensus.Network.NodeToNode">Codecs</a> blk addrNTN e m bCS bCS bBF bBF bTX bKA bPS)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; <a href="Ouroboros-Consensus-Network-NodeToNode.html#t:ByteLimits" title="Ouroboros.Consensus.Network.NodeToNode">ByteLimits</a> bCS bBF bTX bKA</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; m <a href="Ouroboros-Consensus-Network-NodeToNode.html#t:ChainSyncTimeout" title="Ouroboros.Consensus.Network.NodeToNode">ChainSyncTimeout</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; ReportPeerMetrics m (ConnectionId addrNTN)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; <a href="Ouroboros-Consensus-Network-NodeToNode.html#t:Handlers" title="Ouroboros.Consensus.Network.NodeToNode">Handlers</a> m addrNTN blk</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; <a href="Ouroboros-Consensus-Network-NodeToNode.html#t:Apps" title="Ouroboros.Consensus.Network.NodeToNode">Apps</a> m addrNTN bCS bBF bTX bKA bPS <a href="Ouroboros-Consensus-Node-ExitPolicy.html#t:NodeToNodeInitiatorResult" title="Ouroboros.Consensus.Node.ExitPolicy">NodeToNodeInitiatorResult</a> ()</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Construct the <code>NetworkApplication</code> for the node-to-node protocols</p></div></div><a href="#g:6" id="g:6"><h2>Projections</h2></a><div class="top"><p class="src"><a id="v:initiator" class="def">initiator</a> :: MiniProtocolParameters -&gt; NodeToNodeVersion -&gt; PeerSharing -&gt; <a href="Ouroboros-Consensus-Network-NodeToNode.html#t:Apps" title="Ouroboros.Consensus.Network.NodeToNode">Apps</a> m addr b b b b b a c -&gt; OuroborosBundleWithExpandedCtx 'InitiatorMode addr b m a <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Void.html#t:Void" title="Data.Void">Void</a> <a href="src/Ouroboros.Consensus.Network.NodeToNode.html#initiator" class="link">Source</a> <a href="#v:initiator" class="selflink">#</a></p><div class="doc"><p>A projection from <code>NetworkApplication</code> to a client-side
 <code>OuroborosApplication</code> for the node-to-node protocols.</p><p>Implementation note: network currently doesn't enable protocols conditional
 on the protocol version, but it eventually may; this is why <code>_version</code> is
 currently unused.</p></div></div><div class="top"><p class="src"><a id="v:initiatorAndResponder" class="def">initiatorAndResponder</a> :: MiniProtocolParameters -&gt; NodeToNodeVersion -&gt; PeerSharing -&gt; <a href="Ouroboros-Consensus-Network-NodeToNode.html#t:Apps" title="Ouroboros.Consensus.Network.NodeToNode">Apps</a> m addr b b b b b a c -&gt; OuroborosBundleWithExpandedCtx 'InitiatorResponderMode addr b m a c <a href="src/Ouroboros.Consensus.Network.NodeToNode.html#initiatorAndResponder" class="link">Source</a> <a href="#v:initiatorAndResponder" class="selflink">#</a></p><div class="doc"><p>A bi-directional network application.</p><p>Implementation note: network currently doesn't enable protocols conditional
 on the protocol version, but it eventually may; this is why <code>_version</code> is
 currently unused.</p></div></div><a href="#g:7" id="g:7"><h1>Re-exports</h1></a><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:ChainSyncTimeout" class="def">ChainSyncTimeout</a> <a href="#t:ChainSyncTimeout" class="selflink">#</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:ChainSyncTimeout" class="def">ChainSyncTimeout</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:canAwaitTimeout" class="def">canAwaitTimeout</a> :: <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/time-1.12.2/Data-Time-Clock.html#t:DiffTime" title="Data.Time.Clock">DiffTime</a></dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:intersectTimeout" class="def">intersectTimeout</a> :: <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/time-1.12.2/Data-Time-Clock.html#t:DiffTime" title="Data.Time.Clock">DiffTime</a></dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:mustReplyTimeout" class="def">mustReplyTimeout</a> :: <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/time-1.12.2/Data-Time-Clock.html#t:DiffTime" title="Data.Time.Clock">DiffTime</a></dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:idleTimeout" class="def">idleTimeout</a> :: <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/time-1.12.2/Data-Time-Clock.html#t:DiffTime" title="Data.Time.Clock">DiffTime</a></dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr></table></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.29.1</p></div></body></html>