<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Ouroboros.Consensus.Network.NodeToClient</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">ouroboros-consensus-diffusion-0.10.0.0: Integration for the Ouroboros Network layer</span><ul class="links" id="page-menu"><li id="quick-jump-button"><a href="#">Quick Jump</a></li><li><a href="src/Ouroboros.Consensus.Network.NodeToClient.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>Safe-Inferred</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Ouroboros.Consensus.Network.NodeToClient</p></div><div id="table-of-contents"><div id="contents-list"><p class="caption" onclick="window.scrollTo(0,0)">Contents</p><ul><li><a href="#g:1">Handlers</a></li><li><a href="#g:2">Codecs</a></li><li><a href="#g:3">ClientCodecs</a></li><li><a href="#g:4">Tracers</a></li><li><a href="#g:5">Applications</a><ul><li><a href="#g:6">Projections</a></li></ul></li></ul></div></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Intended for qualified import</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><span class="keyword">data</span> <a href="#t:Handlers">Handlers</a> m peer blk = <a href="#v:Handlers">Handlers</a> {<ul class="subs"><li><a href="#v:hChainSyncServer">hChainSyncServer</a> :: Follower m blk (WithPoint blk (Serialised blk)) -&gt; ChainSyncServer (Serialised blk) (Point blk) (Tip blk) m ()</li><li><a href="#v:hTxSubmissionServer">hTxSubmissionServer</a> :: LocalTxSubmissionServer (GenTx blk) (ApplyTxErr blk) m ()</li><li><a href="#v:hStateQueryServer">hStateQueryServer</a> :: LocalStateQueryServer blk (Point blk) (Query blk) m ()</li><li><a href="#v:hTxMonitorServer">hTxMonitorServer</a> :: LocalTxMonitorServer (GenTxId blk) (GenTx blk) SlotNo m ()</li></ul>}</li><li class="src short"><a href="#v:mkHandlers">mkHandlers</a> :: <span class="keyword">forall</span> m blk addrNTN addrNTC. (IOLike m, LedgerSupportsMempool blk, LedgerSupportsProtocol blk, QueryLedger blk, ConfigSupportsNode blk) =&gt; <a href="Ouroboros-Consensus-NodeKernel.html#t:NodeKernelArgs" title="Ouroboros.Consensus.NodeKernel">NodeKernelArgs</a> m addrNTN addrNTC blk -&gt; <a href="Ouroboros-Consensus-NodeKernel.html#t:NodeKernel" title="Ouroboros.Consensus.NodeKernel">NodeKernel</a> m addrNTN addrNTC blk -&gt; <a href="Ouroboros-Consensus-Network-NodeToClient.html#t:Handlers" title="Ouroboros.Consensus.Network.NodeToClient">Handlers</a> m addrNTC blk</li><li class="src short"><span class="keyword">type</span> <a href="#t:ClientCodecs">ClientCodecs</a> blk m = <a href="Ouroboros-Consensus-Network-NodeToClient.html#t:Codecs-39-" title="Ouroboros.Consensus.Network.NodeToClient">Codecs'</a> blk blk DeserialiseFailure m <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/Data-ByteString-Lazy.html#t:ByteString" title="Data.ByteString.Lazy">ByteString</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/Data-ByteString-Lazy.html#t:ByteString" title="Data.ByteString.Lazy">ByteString</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/Data-ByteString-Lazy.html#t:ByteString" title="Data.ByteString.Lazy">ByteString</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/Data-ByteString-Lazy.html#t:ByteString" title="Data.ByteString.Lazy">ByteString</a></li><li class="src short"><span class="keyword">type</span> <a href="#t:Codecs">Codecs</a> blk e m bCS bTX bSQ bTM = <a href="Ouroboros-Consensus-Network-NodeToClient.html#t:Codecs-39-" title="Ouroboros.Consensus.Network.NodeToClient">Codecs'</a> blk (Serialised blk) e m bCS bTX bSQ bTM</li><li class="src short"><span class="keyword">data</span> <a href="#t:Codecs-39-">Codecs'</a> blk serialisedBlk e m bCS bTX bSQ bTM = <a href="#v:Codecs">Codecs</a> {<ul class="subs"><li><a href="#v:cChainSyncCodec">cChainSyncCodec</a> :: Codec (ChainSync serialisedBlk (Point blk) (Tip blk)) e m bCS</li><li><a href="#v:cTxSubmissionCodec">cTxSubmissionCodec</a> :: Codec (LocalTxSubmission (GenTx blk) (ApplyTxErr blk)) e m bTX</li><li><a href="#v:cStateQueryCodec">cStateQueryCodec</a> :: Codec (LocalStateQuery blk (Point blk) (Query blk)) e m bSQ</li><li><a href="#v:cTxMonitorCodec">cTxMonitorCodec</a> :: Codec (LocalTxMonitor (GenTxId blk) (GenTx blk) SlotNo) e m bTM</li></ul>}</li><li class="src short"><span class="keyword">type</span> <a href="#t:DefaultCodecs">DefaultCodecs</a> blk m = <a href="Ouroboros-Consensus-Network-NodeToClient.html#t:Codecs-39-" title="Ouroboros.Consensus.Network.NodeToClient">Codecs'</a> blk (Serialised blk) DeserialiseFailure m <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/Data-ByteString-Lazy.html#t:ByteString" title="Data.ByteString.Lazy">ByteString</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/Data-ByteString-Lazy.html#t:ByteString" title="Data.ByteString.Lazy">ByteString</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/Data-ByteString-Lazy.html#t:ByteString" title="Data.ByteString.Lazy">ByteString</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/Data-ByteString-Lazy.html#t:ByteString" title="Data.ByteString.Lazy">ByteString</a></li><li class="src short"><a href="#v:clientCodecs">clientCodecs</a> :: <span class="keyword">forall</span> m blk. (MonadST m, SerialiseNodeToClientConstraints blk, ShowQuery (BlockQuery blk), StandardHash blk, Serialise (HeaderHash blk)) =&gt; CodecConfig blk -&gt; BlockNodeToClientVersion blk -&gt; NodeToClientVersion -&gt; <a href="Ouroboros-Consensus-Network-NodeToClient.html#t:ClientCodecs" title="Ouroboros.Consensus.Network.NodeToClient">ClientCodecs</a> blk m</li><li class="src short"><a href="#v:defaultCodecs">defaultCodecs</a> :: <span class="keyword">forall</span> m blk. (MonadST m, SerialiseNodeToClientConstraints blk, ShowQuery (BlockQuery blk), StandardHash blk, Serialise (HeaderHash blk)) =&gt; CodecConfig blk -&gt; BlockNodeToClientVersion blk -&gt; NodeToClientVersion -&gt; <a href="Ouroboros-Consensus-Network-NodeToClient.html#t:DefaultCodecs" title="Ouroboros.Consensus.Network.NodeToClient">DefaultCodecs</a> blk m</li><li class="src short"><a href="#v:identityCodecs">identityCodecs</a> :: (<a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, QueryLedger blk) =&gt; <a href="Ouroboros-Consensus-Network-NodeToClient.html#t:Codecs" title="Ouroboros.Consensus.Network.NodeToClient">Codecs</a> blk CodecFailure m (AnyMessage (ChainSync (Serialised blk) (Point blk) (Tip blk))) (AnyMessage (LocalTxSubmission (GenTx blk) (ApplyTxErr blk))) (AnyMessage (LocalStateQuery blk (Point blk) (Query blk))) (AnyMessage (LocalTxMonitor (GenTxId blk) (GenTx blk) SlotNo))</li><li class="src short"><span class="keyword">type</span> <a href="#t:Tracers">Tracers</a> m peer blk e = <a href="Ouroboros-Consensus-Network-NodeToClient.html#t:Tracers-39-" title="Ouroboros.Consensus.Network.NodeToClient">Tracers'</a> peer blk e (Tracer m)</li><li class="src short"><span class="keyword">data</span> <a href="#t:Tracers-39-">Tracers'</a> peer blk e f = <a href="#v:Tracers">Tracers</a> {<ul class="subs"><li><a href="#v:tChainSyncTracer">tChainSyncTracer</a> :: f (TraceLabelPeer peer (TraceSendRecv (ChainSync (Serialised blk) (Point blk) (Tip blk))))</li><li><a href="#v:tTxSubmissionTracer">tTxSubmissionTracer</a> :: f (TraceLabelPeer peer (TraceSendRecv (LocalTxSubmission (GenTx blk) (ApplyTxErr blk))))</li><li><a href="#v:tStateQueryTracer">tStateQueryTracer</a> :: f (TraceLabelPeer peer (TraceSendRecv (LocalStateQuery blk (Point blk) (Query blk))))</li><li><a href="#v:tTxMonitorTracer">tTxMonitorTracer</a> :: f (TraceLabelPeer peer (TraceSendRecv (LocalTxMonitor (GenTxId blk) (GenTx blk) SlotNo)))</li></ul>}</li><li class="src short"><a href="#v:nullTracers">nullTracers</a> :: <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Ouroboros-Consensus-Network-NodeToClient.html#t:Tracers" title="Ouroboros.Consensus.Network.NodeToClient">Tracers</a> m peer blk e</li><li class="src short"><a href="#v:showTracers">showTracers</a> :: (<a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Text-Show.html#t:Show" title="Text.Show">Show</a> peer, <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Text-Show.html#t:Show" title="Text.Show">Show</a> (GenTx blk), <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Text-Show.html#t:Show" title="Text.Show">Show</a> (GenTxId blk), <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Text-Show.html#t:Show" title="Text.Show">Show</a> (ApplyTxErr blk), ShowQuery (BlockQuery blk), HasHeader blk) =&gt; Tracer m <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-String.html#t:String" title="Data.String">String</a> -&gt; <a href="Ouroboros-Consensus-Network-NodeToClient.html#t:Tracers" title="Ouroboros.Consensus.Network.NodeToClient">Tracers</a> m peer blk e</li><li class="src short"><span class="keyword">type</span> <a href="#t:App">App</a> m peer bytes a = peer -&gt; Channel m bytes -&gt; m (a, <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> bytes)</li><li class="src short"><span class="keyword">data</span> <a href="#t:Apps">Apps</a> m peer bCS bTX bSQ bTM a = <a href="#v:Apps">Apps</a> {<ul class="subs"><li><a href="#v:aChainSyncServer">aChainSyncServer</a> :: <a href="Ouroboros-Consensus-Network-NodeToClient.html#t:App" title="Ouroboros.Consensus.Network.NodeToClient">App</a> m peer bCS a</li><li><a href="#v:aTxSubmissionServer">aTxSubmissionServer</a> :: <a href="Ouroboros-Consensus-Network-NodeToClient.html#t:App" title="Ouroboros.Consensus.Network.NodeToClient">App</a> m peer bTX a</li><li><a href="#v:aStateQueryServer">aStateQueryServer</a> :: <a href="Ouroboros-Consensus-Network-NodeToClient.html#t:App" title="Ouroboros.Consensus.Network.NodeToClient">App</a> m peer bSQ a</li><li><a href="#v:aTxMonitorServer">aTxMonitorServer</a> :: <a href="Ouroboros-Consensus-Network-NodeToClient.html#t:App" title="Ouroboros.Consensus.Network.NodeToClient">App</a> m peer bTM a</li></ul>}</li><li class="src short"><a href="#v:mkApps">mkApps</a> :: <span class="keyword">forall</span> m addrNTN addrNTC blk e bCS bTX bSQ bTM. (IOLike m, <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Control-Exception-Base.html#t:Exception" title="Control.Exception.Base">Exception</a> e, ShowProxy blk, ShowProxy (ApplyTxErr blk), ShowProxy (BlockQuery blk), ShowProxy (GenTx blk), ShowProxy (GenTxId blk), ShowQuery (BlockQuery blk)) =&gt; <a href="Ouroboros-Consensus-NodeKernel.html#t:NodeKernel" title="Ouroboros.Consensus.NodeKernel">NodeKernel</a> m addrNTN addrNTC blk -&gt; <a href="Ouroboros-Consensus-Network-NodeToClient.html#t:Tracers" title="Ouroboros.Consensus.Network.NodeToClient">Tracers</a> m addrNTC blk e -&gt; <a href="Ouroboros-Consensus-Network-NodeToClient.html#t:Codecs" title="Ouroboros.Consensus.Network.NodeToClient">Codecs</a> blk e m bCS bTX bSQ bTM -&gt; <a href="Ouroboros-Consensus-Network-NodeToClient.html#t:Handlers" title="Ouroboros.Consensus.Network.NodeToClient">Handlers</a> m addrNTC blk -&gt; <a href="Ouroboros-Consensus-Network-NodeToClient.html#t:Apps" title="Ouroboros.Consensus.Network.NodeToClient">Apps</a> m addrNTC bCS bTX bSQ bTM ()</li><li class="src short"><a href="#v:responder">responder</a> :: NodeToClientVersion -&gt; <a href="Ouroboros-Consensus-Network-NodeToClient.html#t:Apps" title="Ouroboros.Consensus.Network.NodeToClient">Apps</a> m (ConnectionId peer) b b b b a -&gt; OuroborosApplicationWithMinimalCtx 'ResponderMode peer b m <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Void.html#t:Void" title="Data.Void">Void</a> a</li></ul></details></div><div id="interface"><a href="#g:1" id="g:1"><h1>Handlers</h1></a><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Handlers" class="def">Handlers</a> m peer blk <a href="src/Ouroboros.Consensus.Network.NodeToClient.html#Handlers" class="link">Source</a> <a href="#t:Handlers" class="selflink">#</a></p><div class="doc"><p>Protocol handlers for node-to-client (local) communication</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:Handlers" class="def">Handlers</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:hChainSyncServer" class="def">hChainSyncServer</a> :: Follower m blk (WithPoint blk (Serialised blk)) -&gt; ChainSyncServer (Serialised blk) (Point blk) (Tip blk) m ()</dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:hTxSubmissionServer" class="def">hTxSubmissionServer</a> :: LocalTxSubmissionServer (GenTx blk) (ApplyTxErr blk) m ()</dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:hStateQueryServer" class="def">hStateQueryServer</a> :: LocalStateQueryServer blk (Point blk) (Query blk) m ()</dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:hTxMonitorServer" class="def">hTxMonitorServer</a> :: LocalTxMonitorServer (GenTxId blk) (GenTx blk) SlotNo m ()</dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr></table></div></div><div class="top"><p class="src"><a id="v:mkHandlers" class="def">mkHandlers</a> :: <span class="keyword">forall</span> m blk addrNTN addrNTC. (IOLike m, LedgerSupportsMempool blk, LedgerSupportsProtocol blk, QueryLedger blk, ConfigSupportsNode blk) =&gt; <a href="Ouroboros-Consensus-NodeKernel.html#t:NodeKernelArgs" title="Ouroboros.Consensus.NodeKernel">NodeKernelArgs</a> m addrNTN addrNTC blk -&gt; <a href="Ouroboros-Consensus-NodeKernel.html#t:NodeKernel" title="Ouroboros.Consensus.NodeKernel">NodeKernel</a> m addrNTN addrNTC blk -&gt; <a href="Ouroboros-Consensus-Network-NodeToClient.html#t:Handlers" title="Ouroboros.Consensus.Network.NodeToClient">Handlers</a> m addrNTC blk <a href="src/Ouroboros.Consensus.Network.NodeToClient.html#mkHandlers" class="link">Source</a> <a href="#v:mkHandlers" class="selflink">#</a></p></div><a href="#g:2" id="g:2"><h1>Codecs</h1></a><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:ClientCodecs" class="def">ClientCodecs</a> blk m = <a href="Ouroboros-Consensus-Network-NodeToClient.html#t:Codecs-39-" title="Ouroboros.Consensus.Network.NodeToClient">Codecs'</a> blk blk DeserialiseFailure m <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/Data-ByteString-Lazy.html#t:ByteString" title="Data.ByteString.Lazy">ByteString</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/Data-ByteString-Lazy.html#t:ByteString" title="Data.ByteString.Lazy">ByteString</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/Data-ByteString-Lazy.html#t:ByteString" title="Data.ByteString.Lazy">ByteString</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/Data-ByteString-Lazy.html#t:ByteString" title="Data.ByteString.Lazy">ByteString</a> <a href="src/Ouroboros.Consensus.Network.NodeToClient.html#ClientCodecs" class="link">Source</a> <a href="#t:ClientCodecs" class="selflink">#</a></p></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:Codecs" class="def">Codecs</a> blk e m bCS bTX bSQ bTM = <a href="Ouroboros-Consensus-Network-NodeToClient.html#t:Codecs-39-" title="Ouroboros.Consensus.Network.NodeToClient">Codecs'</a> blk (Serialised blk) e m bCS bTX bSQ bTM <a href="src/Ouroboros.Consensus.Network.NodeToClient.html#Codecs" class="link">Source</a> <a href="#t:Codecs" class="selflink">#</a></p></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Codecs-39-" class="def">Codecs'</a> blk serialisedBlk e m bCS bTX bSQ bTM <a href="src/Ouroboros.Consensus.Network.NodeToClient.html#Codecs%27" class="link">Source</a> <a href="#t:Codecs-39-" class="selflink">#</a></p><div class="doc"><p>Node-to-client protocol codecs needed to run <code><a href="Ouroboros-Consensus-Network-NodeToClient.html#t:Handlers" title="Ouroboros.Consensus.Network.NodeToClient">Handlers</a></code>.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:Codecs" class="def">Codecs</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:cChainSyncCodec" class="def">cChainSyncCodec</a> :: Codec (ChainSync serialisedBlk (Point blk) (Tip blk)) e m bCS</dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:cTxSubmissionCodec" class="def">cTxSubmissionCodec</a> :: Codec (LocalTxSubmission (GenTx blk) (ApplyTxErr blk)) e m bTX</dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:cStateQueryCodec" class="def">cStateQueryCodec</a> :: Codec (LocalStateQuery blk (Point blk) (Query blk)) e m bSQ</dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:cTxMonitorCodec" class="def">cTxMonitorCodec</a> :: Codec (LocalTxMonitor (GenTxId blk) (GenTx blk) SlotNo) e m bTM</dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:DefaultCodecs" class="def">DefaultCodecs</a> blk m = <a href="Ouroboros-Consensus-Network-NodeToClient.html#t:Codecs-39-" title="Ouroboros.Consensus.Network.NodeToClient">Codecs'</a> blk (Serialised blk) DeserialiseFailure m <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/Data-ByteString-Lazy.html#t:ByteString" title="Data.ByteString.Lazy">ByteString</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/Data-ByteString-Lazy.html#t:ByteString" title="Data.ByteString.Lazy">ByteString</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/Data-ByteString-Lazy.html#t:ByteString" title="Data.ByteString.Lazy">ByteString</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/Data-ByteString-Lazy.html#t:ByteString" title="Data.ByteString.Lazy">ByteString</a> <a href="src/Ouroboros.Consensus.Network.NodeToClient.html#DefaultCodecs" class="link">Source</a> <a href="#t:DefaultCodecs" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:clientCodecs" class="def">clientCodecs</a> :: <span class="keyword">forall</span> m blk. (MonadST m, SerialiseNodeToClientConstraints blk, ShowQuery (BlockQuery blk), StandardHash blk, Serialise (HeaderHash blk)) =&gt; CodecConfig blk -&gt; BlockNodeToClientVersion blk -&gt; NodeToClientVersion -&gt; <a href="Ouroboros-Consensus-Network-NodeToClient.html#t:ClientCodecs" title="Ouroboros.Consensus.Network.NodeToClient">ClientCodecs</a> blk m <a href="src/Ouroboros.Consensus.Network.NodeToClient.html#clientCodecs" class="link">Source</a> <a href="#v:clientCodecs" class="selflink">#</a></p><div class="doc"><p>Protocol codecs for the node-to-client protocols which serialise
 <em> deserialise blocks in </em>chain-sync/ protocol.</p></div></div><div class="top"><p class="src"><a id="v:defaultCodecs" class="def">defaultCodecs</a> :: <span class="keyword">forall</span> m blk. (MonadST m, SerialiseNodeToClientConstraints blk, ShowQuery (BlockQuery blk), StandardHash blk, Serialise (HeaderHash blk)) =&gt; CodecConfig blk -&gt; BlockNodeToClientVersion blk -&gt; NodeToClientVersion -&gt; <a href="Ouroboros-Consensus-Network-NodeToClient.html#t:DefaultCodecs" title="Ouroboros.Consensus.Network.NodeToClient">DefaultCodecs</a> blk m <a href="src/Ouroboros.Consensus.Network.NodeToClient.html#defaultCodecs" class="link">Source</a> <a href="#v:defaultCodecs" class="selflink">#</a></p><div class="doc"><p>Protocol codecs for the node-to-client protocols</p><p>We pass the <code>BlockConfig</code> here, even though it is currently unused. If at any
 point we want to introduce local protocols that for example send Byron blocks
 or headers across, we will need to have the epoch size, which comes from the
 Byron config. Unlike the full <code>TopLevelConfig</code>, it should not be difficult
 for a wallet to construct the <code>BlockConfig</code>.</p><p>NOTE: Somewhat confusingly, <code>pcChainSyncCodec</code> currently <em>does</em> send Byron
 blocks across, but it does not deserialize them (the user of the codec is
 itself responsible for doing that), which is why it currently does not need
 the config.</p><p>Implementation mode: currently none of the consensus encoders/decoders do
 anything different based on the version, so <code>_version</code> is unused; it's just
 that not all codecs are used, depending on the version number.</p></div></div><div class="top"><p class="src"><a id="v:identityCodecs" class="def">identityCodecs</a> :: (<a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, QueryLedger blk) =&gt; <a href="Ouroboros-Consensus-Network-NodeToClient.html#t:Codecs" title="Ouroboros.Consensus.Network.NodeToClient">Codecs</a> blk CodecFailure m (AnyMessage (ChainSync (Serialised blk) (Point blk) (Tip blk))) (AnyMessage (LocalTxSubmission (GenTx blk) (ApplyTxErr blk))) (AnyMessage (LocalStateQuery blk (Point blk) (Query blk))) (AnyMessage (LocalTxMonitor (GenTxId blk) (GenTx blk) SlotNo)) <a href="src/Ouroboros.Consensus.Network.NodeToClient.html#identityCodecs" class="link">Source</a> <a href="#v:identityCodecs" class="selflink">#</a></p><div class="doc"><p>Identity codecs used in tests.</p></div></div><a href="#g:3" id="g:3"><h1>ClientCodecs</h1></a><a href="#g:4" id="g:4"><h1>Tracers</h1></a><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:Tracers" class="def">Tracers</a> m peer blk e = <a href="Ouroboros-Consensus-Network-NodeToClient.html#t:Tracers-39-" title="Ouroboros.Consensus.Network.NodeToClient">Tracers'</a> peer blk e (Tracer m) <a href="src/Ouroboros.Consensus.Network.NodeToClient.html#Tracers" class="link">Source</a> <a href="#t:Tracers" class="selflink">#</a></p><div class="doc"><p>A record of <code>Tracer</code>s for the different protocols.</p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Tracers-39-" class="def">Tracers'</a> peer blk e f <a href="src/Ouroboros.Consensus.Network.NodeToClient.html#Tracers%27" class="link">Source</a> <a href="#t:Tracers-39-" class="selflink">#</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:Tracers" class="def">Tracers</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:tChainSyncTracer" class="def">tChainSyncTracer</a> :: f (TraceLabelPeer peer (TraceSendRecv (ChainSync (Serialised blk) (Point blk) (Tip blk))))</dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:tTxSubmissionTracer" class="def">tTxSubmissionTracer</a> :: f (TraceLabelPeer peer (TraceSendRecv (LocalTxSubmission (GenTx blk) (ApplyTxErr blk))))</dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:tStateQueryTracer" class="def">tStateQueryTracer</a> :: f (TraceLabelPeer peer (TraceSendRecv (LocalStateQuery blk (Point blk) (Query blk))))</dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:tTxMonitorTracer" class="def">tTxMonitorTracer</a> :: f (TraceLabelPeer peer (TraceSendRecv (LocalTxMonitor (GenTxId blk) (GenTx blk) SlotNo)))</dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:Tracers-39-">Instances</h4><details id="i:Tracers-39-" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Tracers-39-:Semigroup:1"></span> (<span class="keyword">forall</span> a. <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Prelude.html#t:Semigroup" title="Prelude">Semigroup</a> (f a)) =&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Prelude.html#t:Semigroup" title="Prelude">Semigroup</a> (<a href="Ouroboros-Consensus-Network-NodeToClient.html#t:Tracers-39-" title="Ouroboros.Consensus.Network.NodeToClient">Tracers'</a> peer blk e f)</span> <a href="src/Ouroboros.Consensus.Network.NodeToClient.html#line-321" class="link">Source</a> <a href="#t:Tracers-39-" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Tracers-39-:Semigroup:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Ouroboros-Consensus-Network-NodeToClient.html">Ouroboros.Consensus.Network.NodeToClient</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-60--62-">(&lt;&gt;)</a> :: <a href="Ouroboros-Consensus-Network-NodeToClient.html#t:Tracers-39-" title="Ouroboros.Consensus.Network.NodeToClient">Tracers'</a> peer blk e f -&gt; <a href="Ouroboros-Consensus-Network-NodeToClient.html#t:Tracers-39-" title="Ouroboros.Consensus.Network.NodeToClient">Tracers'</a> peer blk e f -&gt; <a href="Ouroboros-Consensus-Network-NodeToClient.html#t:Tracers-39-" title="Ouroboros.Consensus.Network.NodeToClient">Tracers'</a> peer blk e f <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src" class="link">Source</a> <a href="#v:-60--62-" class="selflink">#</a></p><p class="src"><a href="#v:sconcat">sconcat</a> :: <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-List-NonEmpty.html#t:NonEmpty" title="Data.List.NonEmpty">NonEmpty</a> (<a href="Ouroboros-Consensus-Network-NodeToClient.html#t:Tracers-39-" title="Ouroboros.Consensus.Network.NodeToClient">Tracers'</a> peer blk e f) -&gt; <a href="Ouroboros-Consensus-Network-NodeToClient.html#t:Tracers-39-" title="Ouroboros.Consensus.Network.NodeToClient">Tracers'</a> peer blk e f <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src" class="link">Source</a> <a href="#v:sconcat" class="selflink">#</a></p><p class="src"><a href="#v:stimes">stimes</a> :: <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Prelude.html#t:Integral" title="Prelude">Integral</a> b =&gt; b -&gt; <a href="Ouroboros-Consensus-Network-NodeToClient.html#t:Tracers-39-" title="Ouroboros.Consensus.Network.NodeToClient">Tracers'</a> peer blk e f -&gt; <a href="Ouroboros-Consensus-Network-NodeToClient.html#t:Tracers-39-" title="Ouroboros.Consensus.Network.NodeToClient">Tracers'</a> peer blk e f <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src" class="link">Source</a> <a href="#v:stimes" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:nullTracers" class="def">nullTracers</a> :: <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Ouroboros-Consensus-Network-NodeToClient.html#t:Tracers" title="Ouroboros.Consensus.Network.NodeToClient">Tracers</a> m peer blk e <a href="src/Ouroboros.Consensus.Network.NodeToClient.html#nullTracers" class="link">Source</a> <a href="#v:nullTracers" class="selflink">#</a></p><div class="doc"><p>Use a <code>nullTracer</code> for each protocol.</p></div></div><div class="top"><p class="src"><a id="v:showTracers" class="def">showTracers</a> :: (<a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Text-Show.html#t:Show" title="Text.Show">Show</a> peer, <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Text-Show.html#t:Show" title="Text.Show">Show</a> (GenTx blk), <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Text-Show.html#t:Show" title="Text.Show">Show</a> (GenTxId blk), <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Text-Show.html#t:Show" title="Text.Show">Show</a> (ApplyTxErr blk), ShowQuery (BlockQuery blk), HasHeader blk) =&gt; Tracer m <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-String.html#t:String" title="Data.String">String</a> -&gt; <a href="Ouroboros-Consensus-Network-NodeToClient.html#t:Tracers" title="Ouroboros.Consensus.Network.NodeToClient">Tracers</a> m peer blk e <a href="src/Ouroboros.Consensus.Network.NodeToClient.html#showTracers" class="link">Source</a> <a href="#v:showTracers" class="selflink">#</a></p></div><a href="#g:5" id="g:5"><h1>Applications</h1></a><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:App" class="def">App</a> m peer bytes a = peer -&gt; Channel m bytes -&gt; m (a, <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> bytes) <a href="src/Ouroboros.Consensus.Network.NodeToClient.html#App" class="link">Source</a> <a href="#t:App" class="selflink">#</a></p><div class="doc"><p>A node-to-client application</p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Apps" class="def">Apps</a> m peer bCS bTX bSQ bTM a <a href="src/Ouroboros.Consensus.Network.NodeToClient.html#Apps" class="link">Source</a> <a href="#t:Apps" class="selflink">#</a></p><div class="doc"><p>Applications for the node-to-client (i.e., local) protocols</p><p>See <code><a href="Network-Mux-Types.html#v:MuxApplication" title="Network.Mux.Types">MuxApplication</a></code></p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:Apps" class="def">Apps</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:aChainSyncServer" class="def">aChainSyncServer</a> :: <a href="Ouroboros-Consensus-Network-NodeToClient.html#t:App" title="Ouroboros.Consensus.Network.NodeToClient">App</a> m peer bCS a</dfn><div class="doc"><p>Start a local chain sync server.</p></div></li><li><dfn class="src"><a id="v:aTxSubmissionServer" class="def">aTxSubmissionServer</a> :: <a href="Ouroboros-Consensus-Network-NodeToClient.html#t:App" title="Ouroboros.Consensus.Network.NodeToClient">App</a> m peer bTX a</dfn><div class="doc"><p>Start a local transaction submission server.</p></div></li><li><dfn class="src"><a id="v:aStateQueryServer" class="def">aStateQueryServer</a> :: <a href="Ouroboros-Consensus-Network-NodeToClient.html#t:App" title="Ouroboros.Consensus.Network.NodeToClient">App</a> m peer bSQ a</dfn><div class="doc"><p>Start a local state query server.</p></div></li><li><dfn class="src"><a id="v:aTxMonitorServer" class="def">aTxMonitorServer</a> :: <a href="Ouroboros-Consensus-Network-NodeToClient.html#t:App" title="Ouroboros.Consensus.Network.NodeToClient">App</a> m peer bTM a</dfn><div class="doc"><p>Start a local transaction monitor server</p></div></li></ul></div></td></tr></table></div></div><div class="top"><p class="src"><a id="v:mkApps" class="def">mkApps</a> :: <span class="keyword">forall</span> m addrNTN addrNTC blk e bCS bTX bSQ bTM. (IOLike m, <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Control-Exception-Base.html#t:Exception" title="Control.Exception.Base">Exception</a> e, ShowProxy blk, ShowProxy (ApplyTxErr blk), ShowProxy (BlockQuery blk), ShowProxy (GenTx blk), ShowProxy (GenTxId blk), ShowQuery (BlockQuery blk)) =&gt; <a href="Ouroboros-Consensus-NodeKernel.html#t:NodeKernel" title="Ouroboros.Consensus.NodeKernel">NodeKernel</a> m addrNTN addrNTC blk -&gt; <a href="Ouroboros-Consensus-Network-NodeToClient.html#t:Tracers" title="Ouroboros.Consensus.Network.NodeToClient">Tracers</a> m addrNTC blk e -&gt; <a href="Ouroboros-Consensus-Network-NodeToClient.html#t:Codecs" title="Ouroboros.Consensus.Network.NodeToClient">Codecs</a> blk e m bCS bTX bSQ bTM -&gt; <a href="Ouroboros-Consensus-Network-NodeToClient.html#t:Handlers" title="Ouroboros.Consensus.Network.NodeToClient">Handlers</a> m addrNTC blk -&gt; <a href="Ouroboros-Consensus-Network-NodeToClient.html#t:Apps" title="Ouroboros.Consensus.Network.NodeToClient">Apps</a> m addrNTC bCS bTX bSQ bTM () <a href="src/Ouroboros.Consensus.Network.NodeToClient.html#mkApps" class="link">Source</a> <a href="#v:mkApps" class="selflink">#</a></p><div class="doc"><p>Construct the <code>NetworkApplication</code> for the node-to-client protocols</p></div></div><a href="#g:6" id="g:6"><h2>Projections</h2></a><div class="top"><p class="src"><a id="v:responder" class="def">responder</a> :: NodeToClientVersion -&gt; <a href="Ouroboros-Consensus-Network-NodeToClient.html#t:Apps" title="Ouroboros.Consensus.Network.NodeToClient">Apps</a> m (ConnectionId peer) b b b b a -&gt; OuroborosApplicationWithMinimalCtx 'ResponderMode peer b m <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Void.html#t:Void" title="Data.Void">Void</a> a <a href="src/Ouroboros.Consensus.Network.NodeToClient.html#responder" class="link">Source</a> <a href="#v:responder" class="selflink">#</a></p><div class="doc"><p>A projection from <code>NetworkApplication</code> to a server-side
 <code>OuroborosApplication</code> for the node-to-client protocols.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.29.1</p></div></body></html>