<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE FlexibleContexts #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE LambdaCase #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE OverloadedStrings #-}</span><span>
</span><span id="line-4"></span><span>
</span><span id="line-5"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Cardano.Chain.Epoch.File</span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-6"></span><span>  </span><span class="annot"><a href="Cardano.Chain.Epoch.File.html#mainnetEpochSlots"><span class="hs-identifier">mainnetEpochSlots</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-7"></span><span>  </span><span class="annot"><a href="Cardano.Chain.Epoch.File.html#parseEpochFileWithBoundary"><span class="hs-identifier">parseEpochFileWithBoundary</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-8"></span><span>  </span><span class="annot"><a href="Cardano.Chain.Epoch.File.html#parseEpochFilesWithBoundary"><span class="hs-identifier">parseEpochFilesWithBoundary</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-9"></span><span>  </span><span class="annot"><a href="Cardano.Chain.Epoch.File.html#ParseError"><span class="hs-identifier">ParseError</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-10"></span><span class="hs-special">)</span><span>
</span><span id="line-11"></span><span class="hs-keyword">where</span><span>
</span><span id="line-12"></span><span>
</span><span id="line-13"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Cardano.Chain.Block.Block.html"><span class="hs-identifier">Cardano.Chain.Block.Block</span></a></span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-14"></span><span>  </span><span class="annot"><a href="Cardano.Chain.Block.Block.html#ABlockOrBoundary"><span class="hs-identifier">ABlockOrBoundary</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-15"></span><span>  </span><span class="annot"><a href="Cardano.Chain.Block.Block.html#decCBORABlockOrBoundary"><span class="hs-identifier">decCBORABlockOrBoundary</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-16"></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-17"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Cardano.Chain.Slotting.html"><span class="hs-identifier">Cardano.Chain.Slotting</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Chain.Slotting.EpochSlots.html#EpochSlots"><span class="hs-identifier">EpochSlots</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-18"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Cardano.Ledger.Binary</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">DecoderError</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">byronProtVer</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">decodeFullDecoder</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">slice</span></span><span class="hs-special">)</span><span>
</span><span id="line-19"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Cardano.Prelude</span></span><span>
</span><span id="line-20"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad.Trans.Resource</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">ResIO</span></span><span class="hs-special">)</span><span>
</span><span id="line-21"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/binary-0.8.9.1/src/Data.Binary.html"><span class="hs-identifier">Data.Binary</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">B</span></span><span>
</span><span id="line-22"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/binary-0.8.9.1/src/Data.Binary.Get.html"><span class="hs-identifier">Data.Binary.Get</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/binary-0.8.9.1/src/Data.Binary.Get.html#getWord32be"><span class="hs-identifier">getWord32be</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-23"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/binary-0.8.9.1/src/Data.Binary.Get.html"><span class="hs-identifier">Data.Binary.Get</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">B</span></span><span>
</span><span id="line-24"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/src/Data.ByteString.Lazy.html"><span class="hs-identifier">Data.ByteString.Lazy</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">LBS</span></span><span>
</span><span id="line-25"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/Data.String.html"><span class="hs-identifier">Data.String</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#String"><span class="hs-identifier">String</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-26"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Streaming.Binary</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">decodedWith</span></span><span class="hs-special">)</span><span>
</span><span id="line-27"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Streaming.ByteString</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">SBS</span></span><span>
</span><span id="line-28"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Streaming.Prelude</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Of</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">Stream</span></span><span class="hs-special">)</span><span>
</span><span id="line-29"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Streaming.Prelude</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">S</span></span><span>
</span><span id="line-30"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/directory-1.3.8.1/src/System.Directory.html"><span class="hs-identifier">System.Directory</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/directory-1.3.8.1/src/System.Directory.html#doesFileExist"><span class="hs-identifier">doesFileExist</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-31"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/template-haskell-2.20.0.0/src/System.FilePath.html"><span class="hs-identifier">System.FilePath</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/filepath-1.4.100.4/src/System.FilePath.Posix.html#-%3C.%3E"><span class="hs-operator">(-&lt;.&gt;)</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-32"></span><span>
</span><span id="line-33"></span><span class="hs-comment">-- Epoch file format:</span><span>
</span><span id="line-34"></span><span class="hs-comment">--</span><span>
</span><span id="line-35"></span><span class="hs-comment">-- EpochFile := &quot;Epoch data v1\n&quot; *SlotData</span><span>
</span><span id="line-36"></span><span class="hs-comment">-- SlotData := &quot;blnd&quot; BlockLength UndoLength Block Undo</span><span>
</span><span id="line-37"></span><span class="hs-comment">-- BlockLength := Word32BE</span><span>
</span><span id="line-38"></span><span class="hs-comment">-- UndoLength := Word32BE</span><span>
</span><span id="line-39"></span><span class="hs-comment">-- Block := CBOR</span><span>
</span><span id="line-40"></span><span class="hs-comment">-- Undo := CBOR</span><span>
</span><span id="line-41"></span><span>
</span><span id="line-42"></span><span class="annot"><a href="Cardano.Chain.Epoch.File.html#epochHeader"><span class="hs-identifier hs-type">epochHeader</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/src/Data.ByteString.Lazy.Internal.html#ByteString"><span class="hs-identifier hs-type">LBS.ByteString</span></a></span><span>
</span><span id="line-43"></span><span id="epochHeader"><span class="annot"><span class="annottext">epochHeader :: ByteString
</span><a href="Cardano.Chain.Epoch.File.html#epochHeader"><span class="hs-identifier hs-var hs-var">epochHeader</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ByteString
</span><span class="hs-string">&quot;Epoch data v1\n&quot;</span></span><span>
</span><span id="line-44"></span><span>
</span><span id="line-45"></span><span class="hs-keyword">data</span><span> </span><span id="ParseError"><span class="annot"><a href="Cardano.Chain.Epoch.File.html#ParseError"><span class="hs-identifier hs-var">ParseError</span></a></span></span><span>
</span><span id="line-46"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-comment">-- | The CBOR is invalid</span></span><span>
</span><span id="line-47"></span><span>    </span><span id="ParseErrorDecoder"><span class="annot"><a href="Cardano.Chain.Epoch.File.html#ParseErrorDecoder"><span class="hs-identifier hs-var">ParseErrorDecoder</span></a></span></span><span> </span><span class="hs-glyph">!</span><span class="annot"><span class="hs-identifier hs-type">DecoderError</span></span><span>
</span><span id="line-48"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="ParseErrorBinary"><span class="annot"><a href="Cardano.Chain.Epoch.File.html#ParseErrorBinary"><span class="hs-identifier hs-var">ParseErrorBinary</span></a></span></span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/binary-0.8.9.1/src/Data.Binary.Get.html#ByteOffset"><span class="hs-identifier hs-type">B.ByteOffset</span></a></span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/text-2.0.2/src/Data.Text.Internal.html#Text"><span class="hs-identifier hs-type">Text</span></a></span><span>
</span><span id="line-49"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="ParseErrorMissingHeader"><span class="annot"><a href="Cardano.Chain.Epoch.File.html#ParseErrorMissingHeader"><span class="hs-identifier hs-var">ParseErrorMissingHeader</span></a></span></span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span>
</span><span id="line-50"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679577478"><span id="local-6989586621679577490"><span class="annot"><span class="annottext">ParseError -&gt; ParseError -&gt; Bool
(ParseError -&gt; ParseError -&gt; Bool)
-&gt; (ParseError -&gt; ParseError -&gt; Bool) -&gt; Eq ParseError
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: ParseError -&gt; ParseError -&gt; Bool
== :: ParseError -&gt; ParseError -&gt; Bool
$c/= :: ParseError -&gt; ParseError -&gt; Bool
/= :: ParseError -&gt; ParseError -&gt; Bool
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/ghc-prim-0.10.0/src/GHC.Classes.html#Eq"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679577496"><span id="local-6989586621679577512"><span id="local-6989586621679577516"><span class="annot"><span class="annottext">Int -&gt; ParseError -&gt; ShowS
[ParseError] -&gt; ShowS
ParseError -&gt; FilePath
(Int -&gt; ParseError -&gt; ShowS)
-&gt; (ParseError -&gt; FilePath)
-&gt; ([ParseError] -&gt; ShowS)
-&gt; Show ParseError
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; FilePath) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: Int -&gt; ParseError -&gt; ShowS
showsPrec :: Int -&gt; ParseError -&gt; ShowS
$cshow :: ParseError -&gt; FilePath
show :: ParseError -&gt; FilePath
$cshowList :: [ParseError] -&gt; ShowS
showList :: [ParseError] -&gt; ShowS
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Show.html#Show"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-51"></span><span>
</span><span id="line-52"></span><span class="annot"><a href="Cardano.Chain.Epoch.File.html#loadFileWithHeader"><span class="hs-identifier hs-type">loadFileWithHeader</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-53"></span><span>  </span><span class="annot"><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/src/Data.ByteString.Lazy.Internal.html#ByteString"><span class="hs-identifier hs-type">LBS.ByteString</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">SBS.ByteStream</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/transformers-0.6.1.0/src/Control.Monad.Trans.Except.html#ExceptT"><span class="hs-identifier hs-type">ExceptT</span></a></span><span> </span><span class="annot"><a href="Cardano.Chain.Epoch.File.html#ParseError"><span class="hs-identifier hs-type">ParseError</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">ResIO</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-54"></span><span id="loadFileWithHeader"><span class="annot"><span class="annottext">loadFileWithHeader :: FilePath -&gt; ByteString -&gt; ByteString (ExceptT ParseError ResIO) ()
</span><a href="Cardano.Chain.Epoch.File.html#loadFileWithHeader"><span class="hs-identifier hs-var hs-var">loadFileWithHeader</span></a></span></span><span> </span><span id="local-6989586621679577521"><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679577521"><span class="hs-identifier hs-var">file</span></a></span></span><span> </span><span id="local-6989586621679577522"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679577522"><span class="hs-identifier hs-var">header</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-55"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span class="annot"><a href="#local-6989586621679577523"><span class="hs-identifier hs-type">bytes</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">SBS.ByteStream</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/transformers-0.6.1.0/src/Control.Monad.Trans.Except.html#ExceptT"><span class="hs-identifier hs-type">ExceptT</span></a></span><span> </span><span class="annot"><a href="Cardano.Chain.Epoch.File.html#ParseError"><span class="hs-identifier hs-type">ParseError</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">ResIO</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-56"></span><span>      </span><span id="local-6989586621679577523"><span class="annot"><span class="annottext">bytes :: ByteString (ExceptT ParseError ResIO) ()
</span><a href="#local-6989586621679577523"><span class="hs-identifier hs-var hs-var">bytes</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; ByteString (ExceptT ParseError ResIO) ()
forall (m :: * -&gt; *).
MonadResource m =&gt;
FilePath -&gt; ByteStream m ()
</span><span class="hs-identifier hs-var">SBS.readFile</span></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679577521"><span class="hs-identifier hs-var">file</span></a></span><span>
</span><span id="line-57"></span><span>
</span><span id="line-58"></span><span>      </span><span class="annot"><a href="#local-6989586621679577525"><span class="hs-identifier hs-type">len</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Int.html#Int64"><span class="hs-identifier hs-type">Int64</span></a></span><span>
</span><span id="line-59"></span><span>      </span><span id="local-6989586621679577525"><span class="annot"><span class="annottext">len :: Int64
</span><a href="#local-6989586621679577525"><span class="hs-identifier hs-var hs-var">len</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Int64
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/src/Data.ByteString.Lazy.html#length"><span class="hs-identifier hs-var">LBS.length</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679577522"><span class="hs-identifier hs-var">header</span></a></span><span>
</span><span id="line-60"></span><span>   </span><span class="hs-keyword">in</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-61"></span><span>        </span><span class="hs-special">(</span><span id="local-6989586621679577527"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679577527"><span class="hs-identifier hs-var">h</span></a></span></span><span> </span><span class="annot"><span class="hs-operator hs-type">:&gt;</span></span><span> </span><span id="local-6989586621679577529"><span class="annot"><span class="annottext">ByteString (ExceptT ParseError ResIO) ()
</span><a href="#local-6989586621679577529"><span class="hs-identifier hs-var">rest</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ExceptT
  ParseError
  ResIO
  (Of ByteString (ByteString (ExceptT ParseError ResIO) ()))
-&gt; ByteStream
     (ExceptT ParseError ResIO)
     (Of ByteString (ByteString (ExceptT ParseError ResIO) ()))
forall (m :: * -&gt; *) a. Monad m =&gt; m a -&gt; ByteStream m a
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/transformers-0.6.1.0/src/Control.Monad.Trans.Class.html#lift"><span class="hs-identifier hs-var">lift</span></a></span><span> </span><span class="annot"><span class="annottext">(ExceptT
   ParseError
   ResIO
   (Of ByteString (ByteString (ExceptT ParseError ResIO) ()))
 -&gt; ByteStream
      (ExceptT ParseError ResIO)
      (Of ByteString (ByteString (ExceptT ParseError ResIO) ())))
-&gt; ExceptT
     ParseError
     ResIO
     (Of ByteString (ByteString (ExceptT ParseError ResIO) ()))
-&gt; ByteStream
     (ExceptT ParseError ResIO)
     (Of ByteString (ByteString (ExceptT ParseError ResIO) ()))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ByteStream
  (ExceptT ParseError ResIO)
  (ByteString (ExceptT ParseError ResIO) ())
-&gt; ExceptT
     ParseError
     ResIO
     (Of ByteString (ByteString (ExceptT ParseError ResIO) ()))
forall (m :: * -&gt; *) r.
Monad m =&gt;
ByteStream m r -&gt; m (Of ByteString r)
</span><span class="hs-identifier hs-var">SBS.toLazy</span></span><span> </span><span class="annot"><span class="annottext">(ByteStream
   (ExceptT ParseError ResIO)
   (ByteString (ExceptT ParseError ResIO) ())
 -&gt; ExceptT
      ParseError
      ResIO
      (Of ByteString (ByteString (ExceptT ParseError ResIO) ())))
-&gt; ByteStream
     (ExceptT ParseError ResIO)
     (ByteString (ExceptT ParseError ResIO) ())
-&gt; ExceptT
     ParseError
     ResIO
     (Of ByteString (ByteString (ExceptT ParseError ResIO) ()))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Int64
-&gt; ByteString (ExceptT ParseError ResIO) ()
-&gt; ByteStream
     (ExceptT ParseError ResIO)
     (ByteString (ExceptT ParseError ResIO) ())
forall (m :: * -&gt; *) r.
Monad m =&gt;
Int64 -&gt; ByteStream m r -&gt; ByteStream m (ByteStream m r)
</span><span class="hs-identifier hs-var">SBS.splitAt</span></span><span> </span><span class="annot"><span class="annottext">Int64
</span><a href="#local-6989586621679577525"><span class="hs-identifier hs-var">len</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString (ExceptT ParseError ResIO) ()
</span><a href="#local-6989586621679577523"><span class="hs-identifier hs-var">bytes</span></a></span><span>
</span><span id="line-62"></span><span>        </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679577527"><span class="hs-identifier hs-var">h</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; ByteString -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/ghc-prim-0.10.0/src/GHC.Classes.html#%3D%3D"><span class="hs-operator hs-var">==</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679577522"><span class="hs-identifier hs-var">header</span></a></span><span>
</span><span id="line-63"></span><span>          </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">ByteString (ExceptT ParseError ResIO) ()
</span><a href="#local-6989586621679577529"><span class="hs-identifier hs-var">rest</span></a></span><span>
</span><span id="line-64"></span><span>          </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">ExceptT ParseError ResIO ()
-&gt; ByteString (ExceptT ParseError ResIO) ()
forall (m :: * -&gt; *) a. Monad m =&gt; m a -&gt; ByteStream m a
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/transformers-0.6.1.0/src/Control.Monad.Trans.Class.html#lift"><span class="hs-identifier hs-var">lift</span></a></span><span> </span><span class="annot"><span class="annottext">(ExceptT ParseError ResIO ()
 -&gt; ByteString (ExceptT ParseError ResIO) ())
-&gt; ExceptT ParseError ResIO ()
-&gt; ByteString (ExceptT ParseError ResIO) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ParseError -&gt; ExceptT ParseError ResIO ()
forall a. ParseError -&gt; ExceptT ParseError ResIO a
forall e (m :: * -&gt; *) a. MonadError e m =&gt; e -&gt; m a
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/mtl-2.3.1/src/Control.Monad.Error.Class.html#throwError"><span class="hs-identifier hs-var">throwError</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FilePath -&gt; ParseError
</span><a href="Cardano.Chain.Epoch.File.html#ParseErrorMissingHeader"><span class="hs-identifier hs-var">ParseErrorMissingHeader</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679577521"><span class="hs-identifier hs-var">file</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-65"></span><span>
</span><span id="line-66"></span><span class="hs-comment">-- | Slots per epoch used in mainnet</span><span>
</span><span id="line-67"></span><span class="hs-comment">--</span><span>
</span><span id="line-68"></span><span class="hs-comment">-- This number has been fixed throughout the Byron era.</span><span>
</span><span id="line-69"></span><span class="annot"><a href="Cardano.Chain.Epoch.File.html#mainnetEpochSlots"><span class="hs-identifier hs-type">mainnetEpochSlots</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Chain.Slotting.EpochSlots.html#EpochSlots"><span class="hs-identifier hs-type">EpochSlots</span></a></span><span>
</span><span id="line-70"></span><span id="mainnetEpochSlots"><span class="annot"><span class="annottext">mainnetEpochSlots :: EpochSlots
</span><a href="Cardano.Chain.Epoch.File.html#mainnetEpochSlots"><span class="hs-identifier hs-var hs-var">mainnetEpochSlots</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; EpochSlots
</span><a href="Cardano.Chain.Slotting.EpochSlots.html#EpochSlots"><span class="hs-identifier hs-var">EpochSlots</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">21600</span></span><span>
</span><span id="line-71"></span><span>
</span><span id="line-72"></span><span class="annot"><a href="Cardano.Chain.Epoch.File.html#parseEpochFileWithBoundary"><span class="hs-identifier hs-type">parseEpochFileWithBoundary</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-73"></span><span>  </span><span class="annot"><a href="Cardano.Chain.Slotting.EpochSlots.html#EpochSlots"><span class="hs-identifier hs-type">EpochSlots</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-74"></span><span>  </span><span class="annot"><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-75"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Stream</span></span><span>
</span><span id="line-76"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Of</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Chain.Block.Block.html#ABlockOrBoundary"><span class="hs-identifier hs-type">ABlockOrBoundary</span></a></span><span> </span><span class="annot"><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/src/Data.ByteString.Internal.Type.html#ByteString"><span class="hs-identifier hs-type">ByteString</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-77"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/transformers-0.6.1.0/src/Control.Monad.Trans.Except.html#ExceptT"><span class="hs-identifier hs-type">ExceptT</span></a></span><span> </span><span class="annot"><a href="Cardano.Chain.Epoch.File.html#ParseError"><span class="hs-identifier hs-type">ParseError</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">ResIO</span></span><span class="hs-special">)</span><span>
</span><span id="line-78"></span><span>    </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-79"></span><span id="parseEpochFileWithBoundary"><span class="annot"><span class="annottext">parseEpochFileWithBoundary :: EpochSlots
-&gt; FilePath
-&gt; Stream
     (Of (ABlockOrBoundary ByteString)) (ExceptT ParseError ResIO) ()
</span><a href="Cardano.Chain.Epoch.File.html#parseEpochFileWithBoundary"><span class="hs-identifier hs-var hs-var">parseEpochFileWithBoundary</span></a></span></span><span> </span><span id="local-6989586621679577535"><span class="annot"><span class="annottext">EpochSlots
</span><a href="#local-6989586621679577535"><span class="hs-identifier hs-var">epochSlots</span></a></span></span><span> </span><span id="local-6989586621679577536"><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679577536"><span class="hs-identifier hs-var">file</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-80"></span><span>  </span><span id="local-6989586621679577537"><span class="annot"><span class="annottext">(ByteString (ExceptT ParseError ResIO) (), Int64,
 Either FilePath ())
</span><a href="#local-6989586621679577537"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-81"></span><span>    </span><span class="annot"><span class="annottext">(Either DecoderError (ABlockOrBoundary ByteString)
 -&gt; ExceptT ParseError ResIO (ABlockOrBoundary ByteString))
-&gt; Stream
     (Of (Either DecoderError (ABlockOrBoundary ByteString)))
     (ExceptT ParseError ResIO)
     (ByteString (ExceptT ParseError ResIO) (), Int64,
      Either FilePath ())
-&gt; Stream
     (Of (ABlockOrBoundary ByteString))
     (ExceptT ParseError ResIO)
     (ByteString (ExceptT ParseError ResIO) (), Int64,
      Either FilePath ())
forall (m :: * -&gt; *) a b r.
Monad m =&gt;
(a -&gt; m b) -&gt; Stream (Of a) m r -&gt; Stream (Of b) m r
</span><span class="hs-identifier hs-var">S.mapM</span></span><span> </span><span class="annot"><span class="annottext">Either DecoderError (ABlockOrBoundary ByteString)
-&gt; ExceptT ParseError ResIO (ABlockOrBoundary ByteString)
forall a. Either DecoderError a -&gt; ExceptT ParseError ResIO a
</span><a href="#local-6989586621679577539"><span class="hs-identifier hs-var">liftDecoderError</span></a></span><span>
</span><span id="line-82"></span><span>      </span><span class="annot"><span class="annottext">(Stream
   (Of (Either DecoderError (ABlockOrBoundary ByteString)))
   (ExceptT ParseError ResIO)
   (ByteString (ExceptT ParseError ResIO) (), Int64,
    Either FilePath ())
 -&gt; Stream
      (Of (ABlockOrBoundary ByteString))
      (ExceptT ParseError ResIO)
      (ByteString (ExceptT ParseError ResIO) (), Int64,
       Either FilePath ()))
-&gt; Stream
     (Of (Either DecoderError (ABlockOrBoundary ByteString)))
     (ExceptT ParseError ResIO)
     (ByteString (ExceptT ParseError ResIO) (), Int64,
      Either FilePath ())
-&gt; Stream
     (Of (ABlockOrBoundary ByteString))
     (ExceptT ParseError ResIO)
     (ByteString (ExceptT ParseError ResIO) (), Int64,
      Either FilePath ())
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Get (Either DecoderError (ABlockOrBoundary ByteString))
-&gt; ByteString (ExceptT ParseError ResIO) ()
-&gt; Stream
     (Of (Either DecoderError (ABlockOrBoundary ByteString)))
     (ExceptT ParseError ResIO)
     (ByteString (ExceptT ParseError ResIO) (), Int64,
      Either FilePath ())
forall (m :: * -&gt; *) a r.
Monad m =&gt;
Get a
-&gt; ByteString m r
-&gt; Stream (Of a) m (ByteString m r, Int64, Either FilePath r)
</span><span class="hs-identifier hs-var">decodedWith</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EpochSlots
-&gt; Get (Either DecoderError (ABlockOrBoundary ByteString))
</span><a href="Cardano.Chain.Epoch.File.html#getSlotData"><span class="hs-identifier hs-var">getSlotData</span></a></span><span> </span><span class="annot"><span class="annottext">EpochSlots
</span><a href="#local-6989586621679577535"><span class="hs-identifier hs-var">epochSlots</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ByteString (ExceptT ParseError ResIO) ()
</span><a href="#local-6989586621679577541"><span class="hs-identifier hs-var">boundaryBytes</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString (ExceptT ParseError ResIO) ()
-&gt; ByteString (ExceptT ParseError ResIO) ()
-&gt; ByteString (ExceptT ParseError ResIO) ()
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString (ExceptT ParseError ResIO) ()
</span><a href="#local-6989586621679577542"><span class="hs-identifier hs-var">bytes</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-83"></span><span>  </span><span class="annot"><span class="annottext">(ByteString (ExceptT ParseError ResIO) (), Int64,
 Either FilePath ())
-&gt; Stream
     (Of (ABlockOrBoundary ByteString)) (ExceptT ParseError ResIO) ()
forall a.
(a, Int64, Either FilePath ())
-&gt; Stream
     (Of (ABlockOrBoundary ByteString)) (ExceptT ParseError ResIO) ()
</span><a href="#local-6989586621679577543"><span class="hs-identifier hs-var">liftBinaryError</span></a></span><span> </span><span class="annot"><span class="annottext">(ByteString (ExceptT ParseError ResIO) (), Int64,
 Either FilePath ())
</span><a href="#local-6989586621679577537"><span class="hs-identifier hs-var">s</span></a></span><span>
</span><span id="line-84"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-85"></span><span>    </span><span class="annot"><a href="#local-6989586621679577541"><span class="hs-identifier hs-type">boundaryBytes</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">SBS.ByteStream</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/transformers-0.6.1.0/src/Control.Monad.Trans.Except.html#ExceptT"><span class="hs-identifier hs-type">ExceptT</span></a></span><span> </span><span class="annot"><a href="Cardano.Chain.Epoch.File.html#ParseError"><span class="hs-identifier hs-type">ParseError</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">ResIO</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-86"></span><span>    </span><span id="local-6989586621679577541"><span class="annot"><span class="annottext">boundaryBytes :: ByteString (ExceptT ParseError ResIO) ()
</span><a href="#local-6989586621679577541"><span class="hs-identifier hs-var hs-var">boundaryBytes</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-87"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679577544"><span class="annot"><span class="annottext">boundaryFile :: FilePath
</span><a href="#local-6989586621679577544"><span class="hs-identifier hs-var hs-var">boundaryFile</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679577536"><span class="hs-identifier hs-var">file</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; ShowS
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/filepath-1.4.100.4/src/System.FilePath.Posix.html#-%3C.%3E"><span class="hs-operator hs-var">-&lt;.&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><span class="hs-string">&quot;boundary&quot;</span></span><span>
</span><span id="line-88"></span><span>      </span><span id="local-6989586621679577545"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679577545"><span class="hs-identifier hs-var">boundaryExists</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO Bool -&gt; ByteStream (ExceptT ParseError ResIO) Bool
forall a. IO a -&gt; ByteStream (ExceptT ParseError ResIO) a
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/Control.Monad.IO.Class.html#liftIO"><span class="hs-identifier hs-var">liftIO</span></a></span><span> </span><span class="annot"><span class="annottext">(IO Bool -&gt; ByteStream (ExceptT ParseError ResIO) Bool)
-&gt; IO Bool -&gt; ByteStream (ExceptT ParseError ResIO) Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; IO Bool
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/directory-1.3.8.1/src/System.Directory.html#doesFileExist"><span class="hs-identifier hs-var">doesFileExist</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679577544"><span class="hs-identifier hs-var">boundaryFile</span></a></span><span>
</span><span id="line-89"></span><span>      </span><span class="annot"><span class="annottext">Bool
-&gt; ByteString (ExceptT ParseError ResIO) ()
-&gt; ByteString (ExceptT ParseError ResIO) ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#when"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679577545"><span class="hs-identifier hs-var">boundaryExists</span></a></span><span> </span><span class="annot"><span class="annottext">(ByteString (ExceptT ParseError ResIO) ()
 -&gt; ByteString (ExceptT ParseError ResIO) ())
-&gt; ByteString (ExceptT ParseError ResIO) ()
-&gt; ByteString (ExceptT ParseError ResIO) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; ByteString (ExceptT ParseError ResIO) ()
forall (m :: * -&gt; *).
MonadResource m =&gt;
FilePath -&gt; ByteStream m ()
</span><span class="hs-identifier hs-var">SBS.readFile</span></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679577544"><span class="hs-identifier hs-var">boundaryFile</span></a></span><span>
</span><span id="line-90"></span><span>
</span><span id="line-91"></span><span>    </span><span id="local-6989586621679577542"><span class="annot"><span class="annottext">bytes :: ByteString (ExceptT ParseError ResIO) ()
</span><a href="#local-6989586621679577542"><span class="hs-identifier hs-var hs-var">bytes</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; ByteString -&gt; ByteString (ExceptT ParseError ResIO) ()
</span><a href="Cardano.Chain.Epoch.File.html#loadFileWithHeader"><span class="hs-identifier hs-var">loadFileWithHeader</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679577536"><span class="hs-identifier hs-var">file</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="Cardano.Chain.Epoch.File.html#epochHeader"><span class="hs-identifier hs-var">epochHeader</span></a></span><span>
</span><span id="line-92"></span><span>
</span><span id="line-93"></span><span>    </span><span id="local-6989586621679577300"><span class="annot"><a href="#local-6989586621679577539"><span class="hs-identifier hs-type">liftDecoderError</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/Data.Either.html#Either"><span class="hs-identifier hs-type">Either</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">DecoderError</span></span><span> </span><span class="annot"><a href="#local-6989586621679577300"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/transformers-0.6.1.0/src/Control.Monad.Trans.Except.html#ExceptT"><span class="hs-identifier hs-type">ExceptT</span></a></span><span> </span><span class="annot"><a href="Cardano.Chain.Epoch.File.html#ParseError"><span class="hs-identifier hs-type">ParseError</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">ResIO</span></span><span> </span><span class="annot"><a href="#local-6989586621679577300"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-94"></span><span>    </span><span id="local-6989586621679577539"><span class="annot"><span class="annottext">liftDecoderError :: forall a. Either DecoderError a -&gt; ExceptT ParseError ResIO a
</span><a href="#local-6989586621679577539"><span class="hs-identifier hs-var hs-var">liftDecoderError</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-95"></span><span>      </span><span class="annot"><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/Data.Either.html#Right"><span class="hs-identifier hs-type">Right</span></a></span><span> </span><span id="local-6989586621679577554"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679577554"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">a -&gt; ExceptT ParseError ResIO a
forall a. a -&gt; ExceptT ParseError ResIO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679577554"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-96"></span><span>      </span><span class="annot"><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/Data.Either.html#Left"><span class="hs-identifier hs-type">Left</span></a></span><span> </span><span id="local-6989586621679577555"><span class="annot"><span class="annottext">DecoderError
</span><a href="#local-6989586621679577555"><span class="hs-identifier hs-var">err</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ParseError -&gt; ExceptT ParseError ResIO a
forall a. ParseError -&gt; ExceptT ParseError ResIO a
forall e (m :: * -&gt; *) a. MonadError e m =&gt; e -&gt; m a
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/mtl-2.3.1/src/Control.Monad.Error.Class.html#throwError"><span class="hs-identifier hs-var">throwError</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DecoderError -&gt; ParseError
</span><a href="Cardano.Chain.Epoch.File.html#ParseErrorDecoder"><span class="hs-identifier hs-var">ParseErrorDecoder</span></a></span><span> </span><span class="annot"><span class="annottext">DecoderError
</span><a href="#local-6989586621679577555"><span class="hs-identifier hs-var">err</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-97"></span><span>
</span><span id="line-98"></span><span>    </span><span id="local-6989586621679577305"><span class="annot"><a href="#local-6989586621679577543"><span class="hs-identifier hs-type">liftBinaryError</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-99"></span><span>      </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679577305"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/binary-0.8.9.1/src/Data.Binary.Get.html#ByteOffset"><span class="hs-identifier hs-type">B.ByteOffset</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/Data.Either.html#Either"><span class="hs-identifier hs-type">Either</span></a></span><span> </span><span class="annot"><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#String"><span class="hs-identifier hs-type">String</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-100"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Stream</span></span><span>
</span><span id="line-101"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Of</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Chain.Block.Block.html#ABlockOrBoundary"><span class="hs-identifier hs-type">ABlockOrBoundary</span></a></span><span> </span><span class="annot"><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/src/Data.ByteString.Internal.Type.html#ByteString"><span class="hs-identifier hs-type">ByteString</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-102"></span><span>        </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/transformers-0.6.1.0/src/Control.Monad.Trans.Except.html#ExceptT"><span class="hs-identifier hs-type">ExceptT</span></a></span><span> </span><span class="annot"><a href="Cardano.Chain.Epoch.File.html#ParseError"><span class="hs-identifier hs-type">ParseError</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">ResIO</span></span><span class="hs-special">)</span><span>
</span><span id="line-103"></span><span>        </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-104"></span><span>    </span><span id="local-6989586621679577543"><span class="annot"><span class="annottext">liftBinaryError :: forall a.
(a, Int64, Either FilePath ())
-&gt; Stream
     (Of (ABlockOrBoundary ByteString)) (ExceptT ParseError ResIO) ()
</span><a href="#local-6989586621679577543"><span class="hs-identifier hs-var hs-var">liftBinaryError</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-105"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int64
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/Data.Either.html#Right"><span class="hs-identifier hs-type">Right</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">()
-&gt; Stream
     (Of (ABlockOrBoundary ByteString)) (ExceptT ParseError ResIO) ()
forall a.
a
-&gt; Stream
     (Of (ABlockOrBoundary ByteString)) (ExceptT ParseError ResIO) a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-106"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679577562"><span class="annot"><span class="annottext">Int64
</span><a href="#local-6989586621679577562"><span class="hs-identifier hs-var">offset</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/Data.Either.html#Left"><span class="hs-identifier hs-type">Left</span></a></span><span> </span><span id="local-6989586621679577563"><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679577563"><span class="hs-identifier hs-var">message</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-107"></span><span>        </span><span class="annot"><span class="annottext">ParseError
-&gt; Stream
     (Of (ABlockOrBoundary ByteString)) (ExceptT ParseError ResIO) ()
forall a.
ParseError
-&gt; Stream
     (Of (ABlockOrBoundary ByteString)) (ExceptT ParseError ResIO) a
forall e (m :: * -&gt; *) a. MonadError e m =&gt; e -&gt; m a
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/mtl-2.3.1/src/Control.Monad.Error.Class.html#throwError"><span class="hs-identifier hs-var">throwError</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FilePath -&gt; Int64 -&gt; Text -&gt; ParseError
</span><a href="Cardano.Chain.Epoch.File.html#ParseErrorBinary"><span class="hs-identifier hs-var">ParseErrorBinary</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679577536"><span class="hs-identifier hs-var">file</span></a></span><span> </span><span class="annot"><span class="annottext">Int64
</span><a href="#local-6989586621679577562"><span class="hs-identifier hs-var">offset</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FilePath -&gt; Text
forall a b. ConvertText a b =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">toS</span></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679577563"><span class="hs-identifier hs-var">message</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-108"></span><span>
</span><span id="line-109"></span><span class="annot"><a href="Cardano.Chain.Epoch.File.html#parseEpochFilesWithBoundary"><span class="hs-identifier hs-type">parseEpochFilesWithBoundary</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-110"></span><span>  </span><span class="annot"><a href="Cardano.Chain.Slotting.EpochSlots.html#EpochSlots"><span class="hs-identifier hs-type">EpochSlots</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-111"></span><span>  </span><span class="hs-special">[</span><span class="annot"><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-112"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Stream</span></span><span>
</span><span id="line-113"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Of</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Chain.Block.Block.html#ABlockOrBoundary"><span class="hs-identifier hs-type">ABlockOrBoundary</span></a></span><span> </span><span class="annot"><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/src/Data.ByteString.Internal.Type.html#ByteString"><span class="hs-identifier hs-type">ByteString</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-114"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/transformers-0.6.1.0/src/Control.Monad.Trans.Except.html#ExceptT"><span class="hs-identifier hs-type">ExceptT</span></a></span><span> </span><span class="annot"><a href="Cardano.Chain.Epoch.File.html#ParseError"><span class="hs-identifier hs-type">ParseError</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">ResIO</span></span><span class="hs-special">)</span><span>
</span><span id="line-115"></span><span>    </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-116"></span><span id="parseEpochFilesWithBoundary"><span class="annot"><span class="annottext">parseEpochFilesWithBoundary :: EpochSlots
-&gt; [FilePath]
-&gt; Stream
     (Of (ABlockOrBoundary ByteString)) (ExceptT ParseError ResIO) ()
</span><a href="Cardano.Chain.Epoch.File.html#parseEpochFilesWithBoundary"><span class="hs-identifier hs-var hs-var">parseEpochFilesWithBoundary</span></a></span></span><span> </span><span id="local-6989586621679577565"><span class="annot"><span class="annottext">EpochSlots
</span><a href="#local-6989586621679577565"><span class="hs-identifier hs-var">epochSlots</span></a></span></span><span> </span><span id="local-6989586621679577566"><span class="annot"><span class="annottext">[FilePath]
</span><a href="#local-6989586621679577566"><span class="hs-identifier hs-var">fs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-117"></span><span>  </span><span class="annot"><span class="annottext">(Stream
   (Of (ABlockOrBoundary ByteString)) (ExceptT ParseError ResIO) ()
 -&gt; Stream
      (Of (ABlockOrBoundary ByteString)) (ExceptT ParseError ResIO) ()
 -&gt; Stream
      (Of (ABlockOrBoundary ByteString)) (ExceptT ParseError ResIO) ())
-&gt; Stream
     (Of (ABlockOrBoundary ByteString)) (ExceptT ParseError ResIO) ()
-&gt; [Stream
      (Of (ABlockOrBoundary ByteString)) (ExceptT ParseError ResIO) ()]
-&gt; Stream
     (Of (ABlockOrBoundary ByteString)) (ExceptT ParseError ResIO) ()
forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; [a] -&gt; b
forall (t :: * -&gt; *) a b.
Foldable t =&gt;
(a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/Data.Foldable.html#foldr"><span class="hs-identifier hs-var">foldr</span></a></span><span> </span><span class="annot"><span class="annottext">Stream
  (Of (ABlockOrBoundary ByteString)) (ExceptT ParseError ResIO) ()
-&gt; Stream
     (Of (ABlockOrBoundary ByteString)) (ExceptT ParseError ResIO) ()
-&gt; Stream
     (Of (ABlockOrBoundary ByteString)) (ExceptT ParseError ResIO) ()
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%3C%3E"><span class="hs-operator hs-var">(&lt;&gt;)</span></a></span><span> </span><span class="annot"><span class="annottext">Stream
  (Of (ABlockOrBoundary ByteString)) (ExceptT ParseError ResIO) ()
forall a. Monoid a =&gt; a
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#mempty"><span class="hs-identifier hs-var">mempty</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EpochSlots
-&gt; FilePath
-&gt; Stream
     (Of (ABlockOrBoundary ByteString)) (ExceptT ParseError ResIO) ()
</span><a href="Cardano.Chain.Epoch.File.html#parseEpochFileWithBoundary"><span class="hs-identifier hs-var">parseEpochFileWithBoundary</span></a></span><span> </span><span class="annot"><span class="annottext">EpochSlots
</span><a href="#local-6989586621679577565"><span class="hs-identifier hs-var">epochSlots</span></a></span><span> </span><span class="annot"><span class="annottext">(FilePath
 -&gt; Stream
      (Of (ABlockOrBoundary ByteString)) (ExceptT ParseError ResIO) ())
-&gt; [FilePath]
-&gt; [Stream
      (Of (ABlockOrBoundary ByteString)) (ExceptT ParseError ResIO) ()]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">[FilePath]
</span><a href="#local-6989586621679577566"><span class="hs-identifier hs-var">fs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-118"></span><span>
</span><span id="line-119"></span><span class="annot"><a href="Cardano.Chain.Epoch.File.html#slotDataHeader"><span class="hs-identifier hs-type">slotDataHeader</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/src/Data.ByteString.Lazy.Internal.html#ByteString"><span class="hs-identifier hs-type">LBS.ByteString</span></a></span><span>
</span><span id="line-120"></span><span id="slotDataHeader"><span class="annot"><span class="annottext">slotDataHeader :: ByteString
</span><a href="Cardano.Chain.Epoch.File.html#slotDataHeader"><span class="hs-identifier hs-var hs-var">slotDataHeader</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ByteString
</span><span class="hs-string">&quot;blnd&quot;</span></span><span>
</span><span id="line-121"></span><span>
</span><span id="line-122"></span><span class="annot"><a href="Cardano.Chain.Epoch.File.html#getSlotData"><span class="hs-identifier hs-type">getSlotData</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Chain.Slotting.EpochSlots.html#EpochSlots"><span class="hs-identifier hs-type">EpochSlots</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/binary-0.8.9.1/src/Data.Binary.Get.Internal.html#Get"><span class="hs-identifier hs-type">B.Get</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/Data.Either.html#Either"><span class="hs-identifier hs-type">Either</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">DecoderError</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Chain.Block.Block.html#ABlockOrBoundary"><span class="hs-identifier hs-type">ABlockOrBoundary</span></a></span><span> </span><span class="annot"><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/src/Data.ByteString.Internal.Type.html#ByteString"><span class="hs-identifier hs-type">ByteString</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-123"></span><span id="getSlotData"><span class="annot"><span class="annottext">getSlotData :: EpochSlots
-&gt; Get (Either DecoderError (ABlockOrBoundary ByteString))
</span><a href="Cardano.Chain.Epoch.File.html#getSlotData"><span class="hs-identifier hs-var hs-var">getSlotData</span></a></span></span><span> </span><span id="local-6989586621679577570"><span class="annot"><span class="annottext">EpochSlots
</span><a href="#local-6989586621679577570"><span class="hs-identifier hs-var">epochSlots</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ExceptT DecoderError Get (ABlockOrBoundary ByteString)
-&gt; Get (Either DecoderError (ABlockOrBoundary ByteString))
forall e (m :: * -&gt; *) a. ExceptT e m a -&gt; m (Either e a)
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/transformers-0.6.1.0/src/Control.Monad.Trans.Except.html#runExceptT"><span class="hs-identifier hs-var">runExceptT</span></a></span><span> </span><span class="annot"><span class="annottext">(ExceptT DecoderError Get (ABlockOrBoundary ByteString)
 -&gt; Get (Either DecoderError (ABlockOrBoundary ByteString)))
-&gt; ExceptT DecoderError Get (ABlockOrBoundary ByteString)
-&gt; Get (Either DecoderError (ABlockOrBoundary ByteString))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-124"></span><span>  </span><span id="local-6989586621679577572"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679577572"><span class="hs-identifier hs-var">header</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Get ByteString -&gt; ExceptT DecoderError Get ByteString
forall (m :: * -&gt; *) a. Monad m =&gt; m a -&gt; ExceptT DecoderError m a
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/transformers-0.6.1.0/src/Control.Monad.Trans.Class.html#lift"><span class="hs-identifier hs-var">lift</span></a></span><span> </span><span class="annot"><span class="annottext">(Get ByteString -&gt; ExceptT DecoderError Get ByteString)
-&gt; Get ByteString -&gt; ExceptT DecoderError Get ByteString
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Int64 -&gt; Get ByteString
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/binary-0.8.9.1/src/Data.Binary.Get.html#getLazyByteString"><span class="hs-identifier hs-var">B.getLazyByteString</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ByteString -&gt; Int64
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/src/Data.ByteString.Lazy.html#length"><span class="hs-identifier hs-var">LBS.length</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="Cardano.Chain.Epoch.File.html#slotDataHeader"><span class="hs-identifier hs-var">slotDataHeader</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-125"></span><span>  </span><span class="annot"><span class="annottext">Get () -&gt; ExceptT DecoderError Get ()
forall (m :: * -&gt; *) a. Monad m =&gt; m a -&gt; ExceptT DecoderError m a
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/transformers-0.6.1.0/src/Control.Monad.Trans.Class.html#lift"><span class="hs-identifier hs-var">lift</span></a></span><span> </span><span class="annot"><span class="annottext">(Get () -&gt; ExceptT DecoderError Get ())
-&gt; Get () -&gt; ExceptT DecoderError Get ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Get ()
forall (f :: * -&gt; *). Alternative f =&gt; Bool -&gt; f ()
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/Control.Monad.html#guard"><span class="hs-identifier hs-var">guard</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679577572"><span class="hs-identifier hs-var">header</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; ByteString -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/ghc-prim-0.10.0/src/GHC.Classes.html#%3D%3D"><span class="hs-operator hs-var">==</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="Cardano.Chain.Epoch.File.html#slotDataHeader"><span class="hs-identifier hs-var">slotDataHeader</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-126"></span><span>  </span><span id="local-6989586621679577574"><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621679577574"><span class="hs-identifier hs-var">blockSize</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Get Word32 -&gt; ExceptT DecoderError Get Word32
forall (m :: * -&gt; *) a. Monad m =&gt; m a -&gt; ExceptT DecoderError m a
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/transformers-0.6.1.0/src/Control.Monad.Trans.Class.html#lift"><span class="hs-identifier hs-var">lift</span></a></span><span> </span><span class="annot"><span class="annottext">Get Word32
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/binary-0.8.9.1/src/Data.Binary.Get.html#getWord32be"><span class="hs-identifier hs-var">getWord32be</span></a></span><span>
</span><span id="line-127"></span><span>  </span><span id="local-6989586621679577575"><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621679577575"><span class="hs-identifier hs-var">undoSize</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Get Word32 -&gt; ExceptT DecoderError Get Word32
forall (m :: * -&gt; *) a. Monad m =&gt; m a -&gt; ExceptT DecoderError m a
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/transformers-0.6.1.0/src/Control.Monad.Trans.Class.html#lift"><span class="hs-identifier hs-var">lift</span></a></span><span> </span><span class="annot"><span class="annottext">Get Word32
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/binary-0.8.9.1/src/Data.Binary.Get.html#getWord32be"><span class="hs-identifier hs-var">getWord32be</span></a></span><span>
</span><span id="line-128"></span><span>  </span><span id="local-6989586621679577576"><span class="annot"><span class="annottext">ABlockOrBoundary ByteString
</span><a href="#local-6989586621679577576"><span class="hs-identifier hs-var">block</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-129"></span><span>    </span><span id="local-6989586621679577577"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679577577"><span class="hs-identifier hs-var">blockBytes</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Get ByteString -&gt; ExceptT DecoderError Get ByteString
forall (m :: * -&gt; *) a. Monad m =&gt; m a -&gt; ExceptT DecoderError m a
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/transformers-0.6.1.0/src/Control.Monad.Trans.Class.html#lift"><span class="hs-identifier hs-var">lift</span></a></span><span> </span><span class="annot"><span class="annottext">(Get ByteString -&gt; ExceptT DecoderError Get ByteString)
-&gt; Get ByteString -&gt; ExceptT DecoderError Get ByteString
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Int64 -&gt; Get ByteString
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/binary-0.8.9.1/src/Data.Binary.Get.html#getLazyByteString"><span class="hs-identifier hs-var">B.getLazyByteString</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word32 -&gt; Int64
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Real.html#fromIntegral"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621679577574"><span class="hs-identifier hs-var">blockSize</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-130"></span><span>    </span><span id="local-6989586621679577578"><span class="annot"><span class="annottext">ABlockOrBoundary ByteSpan
</span><a href="#local-6989586621679577578"><span class="hs-identifier hs-var">bb</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-131"></span><span>      </span><span class="annot"><span class="annottext">Get (Either DecoderError (ABlockOrBoundary ByteSpan))
-&gt; ExceptT DecoderError Get (ABlockOrBoundary ByteSpan)
forall e (m :: * -&gt; *) a. m (Either e a) -&gt; ExceptT e m a
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/transformers-0.6.1.0/src/Control.Monad.Trans.Except.html#ExceptT"><span class="hs-identifier hs-var">ExceptT</span></a></span><span>
</span><span id="line-132"></span><span>        </span><span class="annot"><span class="annottext">(Get (Either DecoderError (ABlockOrBoundary ByteSpan))
 -&gt; ExceptT DecoderError Get (ABlockOrBoundary ByteSpan))
-&gt; (Either DecoderError (ABlockOrBoundary ByteSpan)
    -&gt; Get (Either DecoderError (ABlockOrBoundary ByteSpan)))
-&gt; Either DecoderError (ABlockOrBoundary ByteSpan)
-&gt; ExceptT DecoderError Get (ABlockOrBoundary ByteSpan)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
forall {k} (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/Control.Category.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Either DecoderError (ABlockOrBoundary ByteSpan)
-&gt; Get (Either DecoderError (ABlockOrBoundary ByteSpan))
forall a. a -&gt; Get a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span>
</span><span id="line-133"></span><span>        </span><span class="annot"><span class="annottext">(Either DecoderError (ABlockOrBoundary ByteSpan)
 -&gt; ExceptT DecoderError Get (ABlockOrBoundary ByteSpan))
-&gt; Either DecoderError (ABlockOrBoundary ByteSpan)
-&gt; ExceptT DecoderError Get (ABlockOrBoundary ByteSpan)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Version
-&gt; Text
-&gt; (forall s. Decoder s (ABlockOrBoundary ByteSpan))
-&gt; ByteString
-&gt; Either DecoderError (ABlockOrBoundary ByteSpan)
forall a.
Version
-&gt; Text
-&gt; (forall s. Decoder s a)
-&gt; ByteString
-&gt; Either DecoderError a
</span><span class="hs-identifier hs-var">decodeFullDecoder</span></span><span>
</span><span id="line-134"></span><span>          </span><span class="annot"><span class="annottext">Version
</span><span class="hs-identifier hs-var">byronProtVer</span></span><span>
</span><span id="line-135"></span><span>          </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;ABlockOrBoundary&quot;</span></span><span>
</span><span id="line-136"></span><span>          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EpochSlots -&gt; Decoder s (ABlockOrBoundary ByteSpan)
forall s. EpochSlots -&gt; Decoder s (ABlockOrBoundary ByteSpan)
</span><a href="Cardano.Chain.Block.Block.html#decCBORABlockOrBoundary"><span class="hs-identifier hs-var">decCBORABlockOrBoundary</span></a></span><span> </span><span class="annot"><span class="annottext">EpochSlots
</span><a href="#local-6989586621679577570"><span class="hs-identifier hs-var">epochSlots</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-137"></span><span>          </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679577577"><span class="hs-identifier hs-var">blockBytes</span></a></span><span>
</span><span id="line-138"></span><span>    </span><span class="annot"><span class="annottext">ABlockOrBoundary ByteString
-&gt; ExceptT DecoderError Get (ABlockOrBoundary ByteString)
forall a. a -&gt; ExceptT DecoderError Get a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">(ABlockOrBoundary ByteString
 -&gt; ExceptT DecoderError Get (ABlockOrBoundary ByteString))
-&gt; ABlockOrBoundary ByteString
-&gt; ExceptT DecoderError Get (ABlockOrBoundary ByteString)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">(ByteSpan -&gt; ByteString)
-&gt; ABlockOrBoundary ByteSpan -&gt; ABlockOrBoundary ByteString
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ByteString -&gt; ByteString
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/src/Data.ByteString.Lazy.Internal.html#toStrict"><span class="hs-identifier hs-var">LBS.toStrict</span></a></span><span> </span><span class="annot"><span class="annottext">(ByteString -&gt; ByteString)
-&gt; (ByteSpan -&gt; ByteString) -&gt; ByteSpan -&gt; ByteString
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
forall {k} (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/Control.Category.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; ByteSpan -&gt; ByteString
</span><span class="hs-identifier hs-var">slice</span></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679577577"><span class="hs-identifier hs-var">blockBytes</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">ABlockOrBoundary ByteSpan
</span><a href="#local-6989586621679577578"><span class="hs-identifier hs-var">bb</span></a></span><span>
</span><span id="line-139"></span><span>  </span><span class="hs-comment">-- Drop the Undo bytes as we no longer use these</span><span>
</span><span id="line-140"></span><span>  </span><span class="annot"><span class="annottext">ExceptT DecoderError Get ByteString -&gt; ExceptT DecoderError Get ()
forall (f :: * -&gt; *) a. Functor f =&gt; f a -&gt; f ()
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/Data.Functor.html#void"><span class="hs-identifier hs-var">void</span></a></span><span> </span><span class="annot"><span class="annottext">(ExceptT DecoderError Get ByteString
 -&gt; ExceptT DecoderError Get ())
-&gt; (Get ByteString -&gt; ExceptT DecoderError Get ByteString)
-&gt; Get ByteString
-&gt; ExceptT DecoderError Get ()
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
forall {k} (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/Control.Category.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Get ByteString -&gt; ExceptT DecoderError Get ByteString
forall (m :: * -&gt; *) a. Monad m =&gt; m a -&gt; ExceptT DecoderError m a
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/transformers-0.6.1.0/src/Control.Monad.Trans.Class.html#lift"><span class="hs-identifier hs-var">lift</span></a></span><span> </span><span class="annot"><span class="annottext">(Get ByteString -&gt; ExceptT DecoderError Get ())
-&gt; Get ByteString -&gt; ExceptT DecoderError Get ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Int64 -&gt; Get ByteString
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/binary-0.8.9.1/src/Data.Binary.Get.html#getLazyByteString"><span class="hs-identifier hs-var">B.getLazyByteString</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word32 -&gt; Int64
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Real.html#fromIntegral"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621679577575"><span class="hs-identifier hs-var">undoSize</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-141"></span><span>  </span><span class="annot"><span class="annottext">ABlockOrBoundary ByteString
-&gt; ExceptT DecoderError Get (ABlockOrBoundary ByteString)
forall a. a -&gt; ExceptT DecoderError Get a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">ABlockOrBoundary ByteString
</span><a href="#local-6989586621679577576"><span class="hs-identifier hs-var">block</span></a></span><span>
</span><span id="line-142"></span></pre></body></html>