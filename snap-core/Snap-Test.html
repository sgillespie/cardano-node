<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Snap.Test</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">snap-core-1.0.5.1: Snap: A Haskell Web Framework (core interfaces and types)</span><ul class="links" id="page-menu"><li id="quick-jump-button"><a href="#">Quick Jump</a></li><li><a href="src/Snap.Test.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>Safe-Inferred</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Snap.Test</p></div><div id="table-of-contents"><div id="contents-list"><p class="caption" onclick="window.scrollTo(0,0)">Contents</p><ul><li><a href="#g:1">Combinators and types for testing Snap handlers.</a><ul><li><a href="#g:2">Types</a></li><li><a href="#g:3">Building Requests and testing handlers</a><ul><li><a href="#g:4">Convenience functions for generating common types of HTTP requests</a></li><li><a href="#g:5">Precise control over building Requests</a></li></ul></li></ul></li><li><a href="#g:6">HUnit Assertions</a></li><li><a href="#g:7">Getting response bodies</a></li><li><a href="#g:8">Dumping HTTP Messages</a></li></ul></div></div><div id="description"><p class="caption">Description</p><div class="doc"><p>The Snap.Test module contains primitives and combinators for testing Snap
 applications.</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><span class="keyword">data</span> <a href="#t:RequestBuilder">RequestBuilder</a> m a</li><li class="src short"><span class="keyword">type</span> <a href="#t:MultipartParams">MultipartParams</a> = [(<a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a>, <a href="Snap-Test.html#t:MultipartParam" title="Snap.Test">MultipartParam</a>)]</li><li class="src short"><span class="keyword">data</span> <a href="#t:MultipartParam">MultipartParam</a><ul class="subs"><li>= <a href="#v:FormData">FormData</a> [<a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a>]</li><li>| <a href="#v:Files">Files</a> [<a href="Snap-Test.html#t:FileData" title="Snap.Test">FileData</a>]</li></ul></li><li class="src short"><span class="keyword">data</span> <a href="#t:FileData">FileData</a> = <a href="#v:FileData">FileData</a> {<ul class="subs"><li><a href="#v:fdFileName">fdFileName</a> :: <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a></li><li><a href="#v:fdContentType">fdContentType</a> :: <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a></li><li><a href="#v:fdContents">fdContents</a> :: <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a></li></ul>}</li><li class="src short"><span class="keyword">data</span> <a href="#t:RequestType">RequestType</a><ul class="subs"><li>= <a href="#v:GetRequest">GetRequest</a></li><li>| <a href="#v:RequestWithRawBody">RequestWithRawBody</a> <a href="Snap-Internal-Http-Types.html#t:Method" title="Snap.Internal.Http.Types">Method</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a></li><li>| <a href="#v:MultipartPostRequest">MultipartPostRequest</a> <a href="Snap-Test.html#t:MultipartParams" title="Snap.Test">MultipartParams</a></li><li>| <a href="#v:UrlEncodedPostRequest">UrlEncodedPostRequest</a> <a href="Snap-Internal-Http-Types.html#t:Params" title="Snap.Internal.Http.Types">Params</a></li><li>| <a href="#v:DeleteRequest">DeleteRequest</a></li></ul></li><li class="src short"><a href="#v:buildRequest">buildRequest</a> :: <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m =&gt; <a href="Snap-Test.html#t:RequestBuilder" title="Snap.Test">RequestBuilder</a> m () -&gt; m <a href="Snap-Internal-Http-Types.html#t:Request" title="Snap.Internal.Http.Types">Request</a></li><li class="src short"><a href="#v:runHandler">runHandler</a> :: <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m =&gt; <a href="Snap-Test.html#t:RequestBuilder" title="Snap.Test">RequestBuilder</a> m () -&gt; <a href="Snap-Internal-Core.html#t:Snap" title="Snap.Internal.Core">Snap</a> a -&gt; m <a href="Snap-Internal-Http-Types.html#t:Response" title="Snap.Internal.Http.Types">Response</a></li><li class="src short"><a href="#v:runHandlerM">runHandlerM</a> :: (<a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="Snap-Internal-Core.html#t:MonadSnap" title="Snap.Internal.Core">MonadSnap</a> n) =&gt; (<span class="keyword">forall</span> a. <a href="Snap-Internal-Http-Types.html#t:Request" title="Snap.Internal.Http.Types">Request</a> -&gt; n a -&gt; m <a href="Snap-Internal-Http-Types.html#t:Response" title="Snap.Internal.Http.Types">Response</a>) -&gt; <a href="Snap-Test.html#t:RequestBuilder" title="Snap.Test">RequestBuilder</a> m () -&gt; n b -&gt; m <a href="Snap-Internal-Http-Types.html#t:Response" title="Snap.Internal.Http.Types">Response</a></li><li class="src short"><a href="#v:evalHandler">evalHandler</a> :: <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m =&gt; <a href="Snap-Test.html#t:RequestBuilder" title="Snap.Test">RequestBuilder</a> m () -&gt; <a href="Snap-Internal-Core.html#t:Snap" title="Snap.Internal.Core">Snap</a> a -&gt; m a</li><li class="src short"><a href="#v:evalHandlerM">evalHandlerM</a> :: (<a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="Snap-Internal-Core.html#t:MonadSnap" title="Snap.Internal.Core">MonadSnap</a> n) =&gt; (<span class="keyword">forall</span> a. <a href="Snap-Internal-Http-Types.html#t:Request" title="Snap.Internal.Http.Types">Request</a> -&gt; n a -&gt; m a) -&gt; <a href="Snap-Test.html#t:RequestBuilder" title="Snap.Test">RequestBuilder</a> m () -&gt; n b -&gt; m b</li><li class="src short"><a href="#v:get">get</a> :: <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m =&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> -&gt; <a href="Snap-Internal-Http-Types.html#t:Params" title="Snap.Internal.Http.Types">Params</a> -&gt; <a href="Snap-Test.html#t:RequestBuilder" title="Snap.Test">RequestBuilder</a> m ()</li><li class="src short"><a href="#v:head">head</a> :: <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/GHC-Stack.html#t:HasCallStack" title="GHC.Stack">HasCallStack</a> =&gt; [a] -&gt; a</li><li class="src short"><a href="#v:postUrlEncoded">postUrlEncoded</a> :: <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m =&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> -&gt; <a href="Snap-Internal-Http-Types.html#t:Params" title="Snap.Internal.Http.Types">Params</a> -&gt; <a href="Snap-Test.html#t:RequestBuilder" title="Snap.Test">RequestBuilder</a> m ()</li><li class="src short"><a href="#v:postMultipart">postMultipart</a> :: <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m =&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> -&gt; <a href="Snap-Test.html#t:MultipartParams" title="Snap.Test">MultipartParams</a> -&gt; <a href="Snap-Test.html#t:RequestBuilder" title="Snap.Test">RequestBuilder</a> m ()</li><li class="src short"><a href="#v:put">put</a> :: <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m =&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> -&gt; <a href="Snap-Test.html#t:RequestBuilder" title="Snap.Test">RequestBuilder</a> m ()</li><li class="src short"><a href="#v:postRaw">postRaw</a> :: <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m =&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> -&gt; <a href="Snap-Test.html#t:RequestBuilder" title="Snap.Test">RequestBuilder</a> m ()</li><li class="src short"><a href="#v:delete">delete</a> :: <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m =&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> -&gt; <a href="Snap-Internal-Http-Types.html#t:Params" title="Snap.Internal.Http.Types">Params</a> -&gt; <a href="Snap-Test.html#t:RequestBuilder" title="Snap.Test">RequestBuilder</a> m ()</li><li class="src short"><a href="#v:addHeader">addHeader</a> :: <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; CI <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> -&gt; <a href="Snap-Test.html#t:RequestBuilder" title="Snap.Test">RequestBuilder</a> m ()</li><li class="src short"><a href="#v:setContentType">setContentType</a> :: <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> -&gt; <a href="Snap-Test.html#t:RequestBuilder" title="Snap.Test">RequestBuilder</a> m ()</li><li class="src short"><a href="#v:setHeader">setHeader</a> :: <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; CI <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> -&gt; <a href="Snap-Test.html#t:RequestBuilder" title="Snap.Test">RequestBuilder</a> m ()</li><li class="src short"><a href="#v:addCookies">addCookies</a> :: <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; [<a href="Snap-Internal-Http-Types.html#t:Cookie" title="Snap.Internal.Http.Types">Cookie</a>] -&gt; <a href="Snap-Test.html#t:RequestBuilder" title="Snap.Test">RequestBuilder</a> m ()</li><li class="src short"><a href="#v:setHttpVersion">setHttpVersion</a> :: <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (<a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Int.html#t:Int" title="Data.Int">Int</a>, <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Int.html#t:Int" title="Data.Int">Int</a>) -&gt; <a href="Snap-Test.html#t:RequestBuilder" title="Snap.Test">RequestBuilder</a> m ()</li><li class="src short"><a href="#v:setQueryString">setQueryString</a> :: <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Snap-Internal-Http-Types.html#t:Params" title="Snap.Internal.Http.Types">Params</a> -&gt; <a href="Snap-Test.html#t:RequestBuilder" title="Snap.Test">RequestBuilder</a> m ()</li><li class="src short"><a href="#v:setQueryStringRaw">setQueryStringRaw</a> :: <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> -&gt; <a href="Snap-Test.html#t:RequestBuilder" title="Snap.Test">RequestBuilder</a> m ()</li><li class="src short"><a href="#v:setRequestPath">setRequestPath</a> :: <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> -&gt; <a href="Snap-Test.html#t:RequestBuilder" title="Snap.Test">RequestBuilder</a> m ()</li><li class="src short"><a href="#v:setRequestType">setRequestType</a> :: <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m =&gt; <a href="Snap-Test.html#t:RequestType" title="Snap.Test">RequestType</a> -&gt; <a href="Snap-Test.html#t:RequestBuilder" title="Snap.Test">RequestBuilder</a> m ()</li><li class="src short"><a href="#v:setSecure">setSecure</a> :: <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> -&gt; <a href="Snap-Test.html#t:RequestBuilder" title="Snap.Test">RequestBuilder</a> m ()</li><li class="src short"><a href="#v:assertSuccess">assertSuccess</a> :: <a href="Snap-Internal-Http-Types.html#t:Response" title="Snap.Internal.Http.Types">Response</a> -&gt; Assertion</li><li class="src short"><a href="#v:assert404">assert404</a> :: <a href="Snap-Internal-Http-Types.html#t:Response" title="Snap.Internal.Http.Types">Response</a> -&gt; Assertion</li><li class="src short"><a href="#v:assertRedirectTo">assertRedirectTo</a> :: <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> -&gt; <a href="Snap-Internal-Http-Types.html#t:Response" title="Snap.Internal.Http.Types">Response</a> -&gt; Assertion</li><li class="src short"><a href="#v:assertRedirect">assertRedirect</a> :: <a href="Snap-Internal-Http-Types.html#t:Response" title="Snap.Internal.Http.Types">Response</a> -&gt; Assertion</li><li class="src short"><a href="#v:assertBodyContains">assertBodyContains</a> :: <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> -&gt; <a href="Snap-Internal-Http-Types.html#t:Response" title="Snap.Internal.Http.Types">Response</a> -&gt; Assertion</li><li class="src short"><a href="#v:getResponseBody">getResponseBody</a> :: <a href="Snap-Internal-Http-Types.html#t:Response" title="Snap.Internal.Http.Types">Response</a> -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/System-IO.html#t:IO" title="System.IO">IO</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a></li><li class="src short"><a href="#v:requestToString">requestToString</a> :: <a href="Snap-Internal-Http-Types.html#t:Request" title="Snap.Internal.Http.Types">Request</a> -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/System-IO.html#t:IO" title="System.IO">IO</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a></li><li class="src short"><a href="#v:responseToString">responseToString</a> :: <a href="Snap-Internal-Http-Types.html#t:Response" title="Snap.Internal.Http.Types">Response</a> -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/System-IO.html#t:IO" title="System.IO">IO</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a></li></ul></details></div><div id="interface"><a href="#g:1" id="g:1"><h1>Combinators and types for testing Snap handlers.</h1></a><a href="#g:2" id="g:2"><h2>Types</h2></a><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:RequestBuilder" class="def">RequestBuilder</a> m a <a href="src/Snap.Internal.Test.RequestBuilder.html#RequestBuilder" class="link">Source</a> <a href="#t:RequestBuilder" class="selflink">#</a></p><div class="doc"><p>RequestBuilder is a monad transformer that allows you to conveniently
 build a snap <code><a href="Snap-Internal-Http-Types.html#t:Request" title="Snap.Internal.Http.Types">Request</a></code> for testing.</p></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:RequestBuilder">Instances</h4><details id="i:RequestBuilder" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:RequestBuilder:MonadTrans:1"></span> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/transformers-0.6.1.0/Control-Monad-Trans-Class.html#t:MonadTrans" title="Control.Monad.Trans.Class">MonadTrans</a> <a href="Snap-Test.html#t:RequestBuilder" title="Snap.Test">RequestBuilder</a></span> <a href="src/Snap.Internal.Test.RequestBuilder.html#line-85" class="link">Source</a> <a href="#t:RequestBuilder" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:RequestBuilder:MonadTrans:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Snap-Internal-Test-RequestBuilder.html">Snap.Internal.Test.RequestBuilder</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:lift">lift</a> :: <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; m a -&gt; <a href="Snap-Test.html#t:RequestBuilder" title="Snap.Test">RequestBuilder</a> m a <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/transformers-0.6.1.0/src" class="link">Source</a> <a href="#v:lift" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:RequestBuilder:MonadState:2"></span> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/mtl-2.3.1/Control-Monad-State-Class.html#t:MonadState" title="Control.Monad.State.Class">MonadState</a> <a href="Snap-Internal-Http-Types.html#t:Request" title="Snap.Internal.Http.Types">Request</a> (<a href="Snap-Test.html#t:RequestBuilder" title="Snap.Test">RequestBuilder</a> m)</span> <a href="src/Snap.Internal.Test.RequestBuilder.html#line-84" class="link">Source</a> <a href="#t:RequestBuilder" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:RequestBuilder:MonadState:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Snap-Internal-Test-RequestBuilder.html">Snap.Internal.Test.RequestBuilder</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:get">get</a> :: <a href="Snap-Test.html#t:RequestBuilder" title="Snap.Test">RequestBuilder</a> m <a href="Snap-Internal-Http-Types.html#t:Request" title="Snap.Internal.Http.Types">Request</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/mtl-2.3.1/src" class="link">Source</a> <a href="#v:get" class="selflink">#</a></p><p class="src"><a href="#v:put">put</a> :: <a href="Snap-Internal-Http-Types.html#t:Request" title="Snap.Internal.Http.Types">Request</a> -&gt; <a href="Snap-Test.html#t:RequestBuilder" title="Snap.Test">RequestBuilder</a> m () <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/mtl-2.3.1/src" class="link">Source</a> <a href="#v:put" class="selflink">#</a></p><p class="src"><a href="#v:state">state</a> :: (<a href="Snap-Internal-Http-Types.html#t:Request" title="Snap.Internal.Http.Types">Request</a> -&gt; (a, <a href="Snap-Internal-Http-Types.html#t:Request" title="Snap.Internal.Http.Types">Request</a>)) -&gt; <a href="Snap-Test.html#t:RequestBuilder" title="Snap.Test">RequestBuilder</a> m a <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/mtl-2.3.1/src" class="link">Source</a> <a href="#v:state" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:RequestBuilder:MonadFail:3"></span> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Control-Monad-Fail.html#t:MonadFail" title="Control.Monad.Fail">MonadFail</a> m =&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Control-Monad-Fail.html#t:MonadFail" title="Control.Monad.Fail">MonadFail</a> (<a href="Snap-Test.html#t:RequestBuilder" title="Snap.Test">RequestBuilder</a> m)</span> <a href="src/Snap.Internal.Test.RequestBuilder.html#line-81" class="link">Source</a> <a href="#t:RequestBuilder" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:RequestBuilder:MonadFail:3"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Snap-Internal-Test-RequestBuilder.html">Snap.Internal.Test.RequestBuilder</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:fail">fail</a> :: <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-String.html#t:String" title="Data.String">String</a> -&gt; <a href="Snap-Test.html#t:RequestBuilder" title="Snap.Test">RequestBuilder</a> m a <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src" class="link">Source</a> <a href="#v:fail" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:RequestBuilder:MonadIO:4"></span> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m =&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> (<a href="Snap-Test.html#t:RequestBuilder" title="Snap.Test">RequestBuilder</a> m)</span> <a href="src/Snap.Internal.Test.RequestBuilder.html#line-83" class="link">Source</a> <a href="#t:RequestBuilder" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:RequestBuilder:MonadIO:4"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Snap-Internal-Test-RequestBuilder.html">Snap.Internal.Test.RequestBuilder</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:liftIO">liftIO</a> :: <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/System-IO.html#t:IO" title="System.IO">IO</a> a -&gt; <a href="Snap-Test.html#t:RequestBuilder" title="Snap.Test">RequestBuilder</a> m a <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src" class="link">Source</a> <a href="#v:liftIO" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:RequestBuilder:Applicative:5"></span> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Control-Applicative.html#t:Applicative" title="Control.Applicative">Applicative</a> (<a href="Snap-Test.html#t:RequestBuilder" title="Snap.Test">RequestBuilder</a> m)</span> <a href="src/Snap.Internal.Test.RequestBuilder.html#line-77" class="link">Source</a> <a href="#t:RequestBuilder" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:RequestBuilder:Applicative:5"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Snap-Internal-Test-RequestBuilder.html">Snap.Internal.Test.RequestBuilder</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:pure">pure</a> :: a -&gt; <a href="Snap-Test.html#t:RequestBuilder" title="Snap.Test">RequestBuilder</a> m a <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src" class="link">Source</a> <a href="#v:pure" class="selflink">#</a></p><p class="src"><a href="#v:-60--42--62-">(&lt;*&gt;)</a> :: <a href="Snap-Test.html#t:RequestBuilder" title="Snap.Test">RequestBuilder</a> m (a -&gt; b) -&gt; <a href="Snap-Test.html#t:RequestBuilder" title="Snap.Test">RequestBuilder</a> m a -&gt; <a href="Snap-Test.html#t:RequestBuilder" title="Snap.Test">RequestBuilder</a> m b <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src" class="link">Source</a> <a href="#v:-60--42--62-" class="selflink">#</a></p><p class="src"><a href="#v:liftA2">liftA2</a> :: (a -&gt; b -&gt; c) -&gt; <a href="Snap-Test.html#t:RequestBuilder" title="Snap.Test">RequestBuilder</a> m a -&gt; <a href="Snap-Test.html#t:RequestBuilder" title="Snap.Test">RequestBuilder</a> m b -&gt; <a href="Snap-Test.html#t:RequestBuilder" title="Snap.Test">RequestBuilder</a> m c <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src" class="link">Source</a> <a href="#v:liftA2" class="selflink">#</a></p><p class="src"><a href="#v:-42--62-">(*&gt;)</a> :: <a href="Snap-Test.html#t:RequestBuilder" title="Snap.Test">RequestBuilder</a> m a -&gt; <a href="Snap-Test.html#t:RequestBuilder" title="Snap.Test">RequestBuilder</a> m b -&gt; <a href="Snap-Test.html#t:RequestBuilder" title="Snap.Test">RequestBuilder</a> m b <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src" class="link">Source</a> <a href="#v:-42--62-" class="selflink">#</a></p><p class="src"><a href="#v:-60--42-">(&lt;*)</a> :: <a href="Snap-Test.html#t:RequestBuilder" title="Snap.Test">RequestBuilder</a> m a -&gt; <a href="Snap-Test.html#t:RequestBuilder" title="Snap.Test">RequestBuilder</a> m b -&gt; <a href="Snap-Test.html#t:RequestBuilder" title="Snap.Test">RequestBuilder</a> m a <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src" class="link">Source</a> <a href="#v:-60--42-" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:RequestBuilder:Functor:6"></span> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Functor.html#t:Functor" title="Data.Functor">Functor</a> m =&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Functor.html#t:Functor" title="Data.Functor">Functor</a> (<a href="Snap-Test.html#t:RequestBuilder" title="Snap.Test">RequestBuilder</a> m)</span> <a href="src/Snap.Internal.Test.RequestBuilder.html#line-78" class="link">Source</a> <a href="#t:RequestBuilder" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:RequestBuilder:Functor:6"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Snap-Internal-Test-RequestBuilder.html">Snap.Internal.Test.RequestBuilder</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:fmap">fmap</a> :: (a -&gt; b) -&gt; <a href="Snap-Test.html#t:RequestBuilder" title="Snap.Test">RequestBuilder</a> m a -&gt; <a href="Snap-Test.html#t:RequestBuilder" title="Snap.Test">RequestBuilder</a> m b <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src" class="link">Source</a> <a href="#v:fmap" class="selflink">#</a></p><p class="src"><a href="#v:-60--36-">(&lt;$)</a> :: a -&gt; <a href="Snap-Test.html#t:RequestBuilder" title="Snap.Test">RequestBuilder</a> m b -&gt; <a href="Snap-Test.html#t:RequestBuilder" title="Snap.Test">RequestBuilder</a> m a <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src" class="link">Source</a> <a href="#v:-60--36-" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:RequestBuilder:Monad:7"></span> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> (<a href="Snap-Test.html#t:RequestBuilder" title="Snap.Test">RequestBuilder</a> m)</span> <a href="src/Snap.Internal.Test.RequestBuilder.html#line-79" class="link">Source</a> <a href="#t:RequestBuilder" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:RequestBuilder:Monad:7"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Snap-Internal-Test-RequestBuilder.html">Snap.Internal.Test.RequestBuilder</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-62--62--61-">(&gt;&gt;=)</a> :: <a href="Snap-Test.html#t:RequestBuilder" title="Snap.Test">RequestBuilder</a> m a -&gt; (a -&gt; <a href="Snap-Test.html#t:RequestBuilder" title="Snap.Test">RequestBuilder</a> m b) -&gt; <a href="Snap-Test.html#t:RequestBuilder" title="Snap.Test">RequestBuilder</a> m b <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src" class="link">Source</a> <a href="#v:-62--62--61-" class="selflink">#</a></p><p class="src"><a href="#v:-62--62-">(&gt;&gt;)</a> :: <a href="Snap-Test.html#t:RequestBuilder" title="Snap.Test">RequestBuilder</a> m a -&gt; <a href="Snap-Test.html#t:RequestBuilder" title="Snap.Test">RequestBuilder</a> m b -&gt; <a href="Snap-Test.html#t:RequestBuilder" title="Snap.Test">RequestBuilder</a> m b <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src" class="link">Source</a> <a href="#v:-62--62-" class="selflink">#</a></p><p class="src"><a href="#v:return">return</a> :: a -&gt; <a href="Snap-Test.html#t:RequestBuilder" title="Snap.Test">RequestBuilder</a> m a <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src" class="link">Source</a> <a href="#v:return" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:MultipartParams" class="def">MultipartParams</a> = [(<a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a>, <a href="Snap-Test.html#t:MultipartParam" title="Snap.Test">MultipartParam</a>)] <a href="src/Snap.Internal.Test.RequestBuilder.html#MultipartParams" class="link">Source</a> <a href="#t:MultipartParams" class="selflink">#</a></p><div class="doc"><p>A request body of type &quot;<code>multipart/form-data</code>&quot; consists of a set of
 named form parameters, each of which can by either a list of regular form
 values or a set of file uploads.</p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:MultipartParam" class="def">MultipartParam</a> <a href="src/Snap.Internal.Test.RequestBuilder.html#MultipartParam" class="link">Source</a> <a href="#t:MultipartParam" class="selflink">#</a></p><div class="doc"><p>A single &quot;<code>multipart/form-data</code>&quot; form parameter: either a list of regular
 form values or a set of file uploads.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:FormData" class="def">FormData</a> [<a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a>]</td><td class="doc"><p>a form variable consisting of the given <code><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a></code> values.</p></td></tr><tr><td class="src"><a id="v:Files" class="def">Files</a> [<a href="Snap-Test.html#t:FileData" title="Snap.Test">FileData</a>]</td><td class="doc"><p>a file upload consisting of the given <code><a href="Snap-Test.html#t:FileData" title="Snap.Test">FileData</a></code> values.</p></td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:MultipartParam">Instances</h4><details id="i:MultipartParam" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:MultipartParam:Show:1"></span> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Text-Show.html#t:Show" title="Text.Show">Show</a> <a href="Snap-Test.html#t:MultipartParam" title="Snap.Test">MultipartParam</a></span> <a href="src/Snap.Internal.Test.RequestBuilder.html#line-217" class="link">Source</a> <a href="#t:MultipartParam" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:MultipartParam:Show:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Snap-Internal-Test-RequestBuilder.html">Snap.Internal.Test.RequestBuilder</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Snap-Test.html#t:MultipartParam" title="Snap.Test">MultipartParam</a> -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src" class="link">Source</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="Snap-Test.html#t:MultipartParam" title="Snap.Test">MultipartParam</a> -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-String.html#t:String" title="Data.String">String</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src" class="link">Source</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Snap-Test.html#t:MultipartParam" title="Snap.Test">MultipartParam</a>] -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src" class="link">Source</a> <a href="#v:showList" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:FileData" class="def">FileData</a> <a href="src/Snap.Internal.Test.RequestBuilder.html#FileData" class="link">Source</a> <a href="#t:FileData" class="selflink">#</a></p><div class="doc"><p>Represents a single file upload for the <code><a href="Snap-Test.html#t:MultipartParam" title="Snap.Test">MultipartParam</a></code>.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:FileData" class="def">FileData</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:fdFileName" class="def">fdFileName</a> :: <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a></dfn><div class="doc"><p>the file's name</p></div></li><li><dfn class="src"><a id="v:fdContentType" class="def">fdContentType</a> :: <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a></dfn><div class="doc"><p>the file's content-type</p></div></li><li><dfn class="src"><a id="v:fdContents" class="def">fdContents</a> :: <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a></dfn><div class="doc"><p>the file contents</p></div></li></ul></div></td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:FileData">Instances</h4><details id="i:FileData" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:FileData:Show:1"></span> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Text-Show.html#t:Show" title="Text.Show">Show</a> <a href="Snap-Test.html#t:FileData" title="Snap.Test">FileData</a></span> <a href="src/Snap.Internal.Test.RequestBuilder.html#line-227" class="link">Source</a> <a href="#t:FileData" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:FileData:Show:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Snap-Internal-Test-RequestBuilder.html">Snap.Internal.Test.RequestBuilder</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Snap-Test.html#t:FileData" title="Snap.Test">FileData</a> -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src" class="link">Source</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="Snap-Test.html#t:FileData" title="Snap.Test">FileData</a> -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-String.html#t:String" title="Data.String">String</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src" class="link">Source</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Snap-Test.html#t:FileData" title="Snap.Test">FileData</a>] -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src" class="link">Source</a> <a href="#v:showList" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:RequestType" class="def">RequestType</a> <a href="src/Snap.Internal.Test.RequestBuilder.html#RequestType" class="link">Source</a> <a href="#t:RequestType" class="selflink">#</a></p><div class="doc"><p>The <code><a href="Snap-Test.html#t:RequestType" title="Snap.Test">RequestType</a></code> datatype enumerates the different kinds of HTTP
 requests you can generate using the testing interface. Most users will
 prefer to use the <code><a href="Snap-Test.html#v:get" title="Snap.Test">get</a></code>, <code><a href="Snap-Test.html#v:postUrlEncoded" title="Snap.Test">postUrlEncoded</a></code>, <code><a href="Snap-Test.html#v:postMultipart" title="Snap.Test">postMultipart</a></code>, <code><a href="Snap-Test.html#v:put" title="Snap.Test">put</a></code>, and
 <code><a href="Snap-Test.html#v:delete" title="Snap.Test">delete</a></code> convenience functions.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:GetRequest" class="def">GetRequest</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:RequestWithRawBody" class="def">RequestWithRawBody</a> <a href="Snap-Internal-Http-Types.html#t:Method" title="Snap.Internal.Http.Types">Method</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:MultipartPostRequest" class="def">MultipartPostRequest</a> <a href="Snap-Test.html#t:MultipartParams" title="Snap.Test">MultipartParams</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:UrlEncodedPostRequest" class="def">UrlEncodedPostRequest</a> <a href="Snap-Internal-Http-Types.html#t:Params" title="Snap.Internal.Http.Types">Params</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:DeleteRequest" class="def">DeleteRequest</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:RequestType">Instances</h4><details id="i:RequestType" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:RequestType:Show:1"></span> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Text-Show.html#t:Show" title="Text.Show">Show</a> <a href="Snap-Test.html#t:RequestType" title="Snap.Test">RequestType</a></span> <a href="src/Snap.Internal.Test.RequestBuilder.html#line-241" class="link">Source</a> <a href="#t:RequestType" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:RequestType:Show:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Snap-Internal-Test-RequestBuilder.html">Snap.Internal.Test.RequestBuilder</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Snap-Test.html#t:RequestType" title="Snap.Test">RequestType</a> -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src" class="link">Source</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="Snap-Test.html#t:RequestType" title="Snap.Test">RequestType</a> -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-String.html#t:String" title="Data.String">String</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src" class="link">Source</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Snap-Test.html#t:RequestType" title="Snap.Test">RequestType</a>] -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src" class="link">Source</a> <a href="#v:showList" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><a href="#g:3" id="g:3"><h2>Building Requests and testing handlers</h2></a><div class="top"><p class="src"><a id="v:buildRequest" class="def">buildRequest</a> :: <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m =&gt; <a href="Snap-Test.html#t:RequestBuilder" title="Snap.Test">RequestBuilder</a> m () -&gt; m <a href="Snap-Internal-Http-Types.html#t:Request" title="Snap.Internal.Http.Types">Request</a> <a href="src/Snap.Internal.Test.RequestBuilder.html#buildRequest" class="link">Source</a> <a href="#v:buildRequest" class="selflink">#</a></p><div class="doc"><p>Runs a <code><a href="Snap-Test.html#t:RequestBuilder" title="Snap.Test">RequestBuilder</a></code>, producing the desired <code><a href="Snap-Internal-Http-Types.html#t:Request" title="Snap.Internal.Http.Types">Request</a></code>.</p><p>N.B. <em>please</em> don't use the request you get here in a real Snap application;
 things will probably break. Don't say you weren't warned :-)</p><p>Example:</p><pre>ghci&gt; :set -XOverloadedStrings
ghci&gt; import qualified <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/containers-0.6.7/Data-Map.html">Data.Map</a> as M
ghci&gt; <code><a href="Snap-Test.html#v:buildRequest" title="Snap.Test">buildRequest</a></code> $ <code><a href="Snap-Test.html#v:get" title="Snap.Test">get</a></code> &quot;/foo/bar&quot; M.empty
GET /foo/bar HTTP/1.1
host: localhost

sn=&quot;localhost&quot; c=127.0.0.1:60000 s=127.0.0.1:8080 ctx=/ clen=n/a
</pre></div></div><div class="top"><p class="src"><a id="v:runHandler" class="def">runHandler</a> <a href="src/Snap.Internal.Test.RequestBuilder.html#runHandler" class="link">Source</a> <a href="#v:runHandler" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">=&gt; <a href="Snap-Test.html#t:RequestBuilder" title="Snap.Test">RequestBuilder</a> m ()</td><td class="doc"><p>a request builder</p></td></tr><tr><td class="src">-&gt; <a href="Snap-Internal-Core.html#t:Snap" title="Snap.Internal.Core">Snap</a> a</td><td class="doc"><p>a web handler</p></td></tr><tr><td class="src">-&gt; m <a href="Snap-Internal-Http-Types.html#t:Response" title="Snap.Internal.Http.Types">Response</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Given a web handler in the <code><a href="Snap-Internal-Core.html#t:Snap" title="Snap.Internal.Core">Snap</a></code> monad, and a <code><a href="Snap-Test.html#t:RequestBuilder" title="Snap.Test">RequestBuilder</a></code> defining
 a test request, runs the handler, producing an HTTP <code><a href="Snap-Internal-Http-Types.html#t:Response" title="Snap.Internal.Http.Types">Response</a></code>.</p><p>This function will produce almost exactly the same output as running the
 handler in a real server, except that chunked transfer encoding is not
 applied, and the &quot;Transfer-Encoding&quot; header is not set (this makes it
 easier to test response output).</p><p>Example:</p><pre>ghci&gt; :set -XOverloadedStrings
ghci&gt; import qualified <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/containers-0.6.7/Data-Map.html">Data.Map</a> as M
ghci&gt; import <a href="Snap-Core.html">Snap.Core</a>
ghci&gt; <code><a href="Snap-Test.html#v:runHandler" title="Snap.Test">runHandler</a></code> (<code><a href="Snap-Test.html#v:get" title="Snap.Test">get</a></code> &quot;foo/bar&quot; M.empty) (<code><a href="Snap-Core.html#v:writeBS" title="Snap.Core">writeBS</a></code> &quot;Hello, world!&quot;)
HTTP/1.1 200 OK
server: Snap/test
date: Thu, 17 Jul 2014 21:03:23 GMT

Hello, world!
</pre></div></div><div class="top"><p class="src"><a id="v:runHandlerM" class="def">runHandlerM</a> <a href="src/Snap.Internal.Test.RequestBuilder.html#runHandlerM" class="link">Source</a> <a href="#v:runHandlerM" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: (<a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="Snap-Internal-Core.html#t:MonadSnap" title="Snap.Internal.Core">MonadSnap</a> n)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">=&gt; (<span class="keyword">forall</span> a. <a href="Snap-Internal-Http-Types.html#t:Request" title="Snap.Internal.Http.Types">Request</a> -&gt; n a -&gt; m <a href="Snap-Internal-Http-Types.html#t:Response" title="Snap.Internal.Http.Types">Response</a>)</td><td class="doc"><p>a function defining how the <code><a href="Snap-Internal-Core.html#t:MonadSnap" title="Snap.Internal.Core">MonadSnap</a></code> monad should be run</p></td></tr><tr><td class="src">-&gt; <a href="Snap-Test.html#t:RequestBuilder" title="Snap.Test">RequestBuilder</a> m ()</td><td class="doc"><p>a request builder</p></td></tr><tr><td class="src">-&gt; n b</td><td class="doc"><p>a web handler</p></td></tr><tr><td class="src">-&gt; m <a href="Snap-Internal-Http-Types.html#t:Response" title="Snap.Internal.Http.Types">Response</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Given a web handler in some arbitrary <code><a href="Snap-Internal-Core.html#t:MonadSnap" title="Snap.Internal.Core">MonadSnap</a></code> monad, a function
 specifying how to evaluate it within the context of the test monad, and a
 <code><a href="Snap-Test.html#t:RequestBuilder" title="Snap.Test">RequestBuilder</a></code> defining a test request, runs the handler, producing an
 HTTP <code><a href="Snap-Internal-Http-Types.html#t:Response" title="Snap.Internal.Http.Types">Response</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:evalHandler" class="def">evalHandler</a> :: <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m =&gt; <a href="Snap-Test.html#t:RequestBuilder" title="Snap.Test">RequestBuilder</a> m () -&gt; <a href="Snap-Internal-Core.html#t:Snap" title="Snap.Internal.Core">Snap</a> a -&gt; m a <a href="src/Snap.Internal.Test.RequestBuilder.html#evalHandler" class="link">Source</a> <a href="#v:evalHandler" class="selflink">#</a></p><div class="doc"><p>Given a web handler in the <code><a href="Snap-Internal-Core.html#t:Snap" title="Snap.Internal.Core">Snap</a></code> monad, and a <code><a href="Snap-Test.html#t:RequestBuilder" title="Snap.Test">RequestBuilder</a></code> defining a
 test request, runs the handler and returns the monadic value it produces.</p><p>Throws an exception if the <code><a href="Snap-Internal-Core.html#t:Snap" title="Snap.Internal.Core">Snap</a></code> handler early-terminates with
 <code><a href="Snap-Core.html#v:finishWith" title="Snap.Core">finishWith</a></code> or <code><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Control-Monad.html#v:mzero" title="Control.Monad">mzero</a></code>.</p><p>Example:</p><pre>ghci&gt; :set -XOverloadedStrings
ghci&gt; import <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Control-Monad.html">Control.Monad</a>
ghci&gt; import qualified <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/containers-0.6.7/Data-Map.html">Data.Map</a> as M
ghci&gt; import <a href="Snap-Core.html">Snap.Core</a>
ghci&gt; <code><a href="Snap-Test.html#v:evalHandler" title="Snap.Test">evalHandler</a></code> (<code><a href="Snap-Test.html#v:get" title="Snap.Test">get</a></code> &quot;foo/bar&quot; M.empty) (<code><a href="Snap-Core.html#v:writeBS" title="Snap.Core">writeBS</a></code> &quot;Hello, world!&quot; &gt;&gt; return 42)
42
ghci&gt; <code><a href="Snap-Test.html#v:evalHandler" title="Snap.Test">evalHandler</a></code> (<code><a href="Snap-Test.html#v:get" title="Snap.Test">get</a></code> &quot;foo/bar&quot; M.empty) <code><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Control-Monad.html#v:mzero" title="Control.Monad">mzero</a></code>
*** Exception: No handler for request: failure was pass
</pre></div></div><div class="top"><p class="src"><a id="v:evalHandlerM" class="def">evalHandlerM</a> <a href="src/Snap.Internal.Test.RequestBuilder.html#evalHandlerM" class="link">Source</a> <a href="#v:evalHandlerM" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: (<a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="Snap-Internal-Core.html#t:MonadSnap" title="Snap.Internal.Core">MonadSnap</a> n)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">=&gt; (<span class="keyword">forall</span> a. <a href="Snap-Internal-Http-Types.html#t:Request" title="Snap.Internal.Http.Types">Request</a> -&gt; n a -&gt; m a)</td><td class="doc"><p>a function defining
 how the <code><a href="Snap-Internal-Core.html#t:MonadSnap" title="Snap.Internal.Core">MonadSnap</a></code>
 monad should be run</p></td></tr><tr><td class="src">-&gt; <a href="Snap-Test.html#t:RequestBuilder" title="Snap.Test">RequestBuilder</a> m ()</td><td class="doc"><p>a request builder</p></td></tr><tr><td class="src">-&gt; n b</td><td class="doc"><p>a web handler</p></td></tr><tr><td class="src">-&gt; m b</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Given a web handler in some arbitrary <code><a href="Snap-Internal-Core.html#t:MonadSnap" title="Snap.Internal.Core">MonadSnap</a></code> monad, a function
 specifying how to evaluate it within the context of the test monad, and a
 <code><a href="Snap-Test.html#t:RequestBuilder" title="Snap.Test">RequestBuilder</a></code> defining a test request, runs the handler, returning the
 monadic value it produces.</p><p>Throws an exception if the <code><a href="Snap-Internal-Core.html#t:Snap" title="Snap.Internal.Core">Snap</a></code> handler early-terminates with
 <code><a href="Snap-Core.html#v:finishWith" title="Snap.Core">finishWith</a></code> or <code><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Control-Monad.html#v:mzero" title="Control.Monad">mzero</a></code>.</p></div></div><a href="#g:4" id="g:4"><h3>Convenience functions for generating common types of HTTP requests</h3></a><div class="top"><p class="src"><a id="v:get" class="def">get</a> <a href="src/Snap.Internal.Test.RequestBuilder.html#get" class="link">Source</a> <a href="#v:get" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">=&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a></td><td class="doc"><p>request path</p></td></tr><tr><td class="src">-&gt; <a href="Snap-Internal-Http-Types.html#t:Params" title="Snap.Internal.Http.Types">Params</a></td><td class="doc"><p>request's form parameters</p></td></tr><tr><td class="src">-&gt; <a href="Snap-Test.html#t:RequestBuilder" title="Snap.Test">RequestBuilder</a> m ()</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Builds an HTTP &quot;GET&quot; request with the given query parameters.</p><p>Example:</p><pre>ghci&gt; :set -XOverloadedStrings
ghci&gt; import qualified <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/containers-0.6.7/Data-Map.html">Data.Map</a> as M
ghci&gt; <code><a href="Snap-Test.html#v:buildRequest" title="Snap.Test">buildRequest</a></code> $ <code><a href="Snap-Test.html#v:get" title="Snap.Test">get</a></code> &quot;/foo/bar&quot; (M.fromList [(&quot;param0&quot;, [&quot;baz&quot;, &quot;quux&quot;])])
GET /foo/bar?param0=baz&amp;param0=quux HTTP/1.1
host: localhost

sn=&quot;localhost&quot; c=127.0.0.1:60000 s=127.0.0.1:8080 ctx=/ clen=n/a
params: param0: [&quot;baz&quot;,&quot;quux&quot;]
</pre></div></div><div class="top"><p class="src"><a id="v:head" class="def">head</a> :: <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/GHC-Stack.html#t:HasCallStack" title="GHC.Stack">HasCallStack</a> =&gt; [a] -&gt; a <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src" class="link">Source</a> <a href="#v:head" class="selflink">#</a></p><div class="doc"><p><span class="mathjax">\(\mathcal{O}(1)\)</span>. Extract the first element of a list, which must be non-empty.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>head [1, 2, 3]
</code></strong>1
<code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>head [1..]
</code></strong>1
<code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>head []
</code></strong>*** Exception: Prelude.head: empty list
</pre><p>WARNING: This function is partial. You can use case-matching, <code><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/GHC-List.html#v:uncons" title="GHC.List">uncons</a></code> or
 <code><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Maybe.html#v:listToMaybe" title="Data.Maybe">listToMaybe</a></code> instead.</p></div></div><div class="top"><p class="src"><a id="v:postUrlEncoded" class="def">postUrlEncoded</a> <a href="src/Snap.Internal.Test.RequestBuilder.html#postUrlEncoded" class="link">Source</a> <a href="#v:postUrlEncoded" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">=&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a></td><td class="doc"><p>request path</p></td></tr><tr><td class="src">-&gt; <a href="Snap-Internal-Http-Types.html#t:Params" title="Snap.Internal.Http.Types">Params</a></td><td class="doc"><p>request's form parameters</p></td></tr><tr><td class="src">-&gt; <a href="Snap-Test.html#t:RequestBuilder" title="Snap.Test">RequestBuilder</a> m ()</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Builds an HTTP &quot;POST&quot; request with the given form parameters, using the
 &quot;application/x-www-form-urlencoded&quot; MIME type.</p><p>Example:</p><pre>ghci&gt; :set -XOverloadedStrings
ghci&gt; import qualified <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/containers-0.6.7/Data-Map.html">Data.Map</a> as M
ghci&gt; <code><a href="Snap-Test.html#v:buildRequest" title="Snap.Test">buildRequest</a></code> $ <code><a href="Snap-Test.html#v:postUrlEncoded" title="Snap.Test">postUrlEncoded</a></code> &quot;/foo/bar&quot; (M.fromList [(&quot;param0&quot;, [&quot;baz&quot;, &quot;quux&quot;])])
POST /foo/bar HTTP/1.1
content-type: application/x-www-form-urlencoded
content-length: 22
host: localhost

sn=&quot;localhost&quot; c=127.0.0.1:60000 s=127.0.0.1:8080 ctx=/ clen=22
params: param0: [&quot;baz&quot;,&quot;quux&quot;]
</pre></div></div><div class="top"><p class="src"><a id="v:postMultipart" class="def">postMultipart</a> <a href="src/Snap.Internal.Test.RequestBuilder.html#postMultipart" class="link">Source</a> <a href="#v:postMultipart" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">=&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a></td><td class="doc"><p>request path</p></td></tr><tr><td class="src">-&gt; <a href="Snap-Test.html#t:MultipartParams" title="Snap.Test">MultipartParams</a></td><td class="doc"><p>multipart form parameters</p></td></tr><tr><td class="src">-&gt; <a href="Snap-Test.html#t:RequestBuilder" title="Snap.Test">RequestBuilder</a> m ()</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Builds an HTTP &quot;POST&quot; request with the given form parameters, using the
 &quot;form-data/multipart&quot; MIME type.</p><p>Example:</p><pre>ghci&gt; :set -XOverloadedStrings
ghci&gt; <code><a href="Snap-Test.html#v:buildRequest" title="Snap.Test">buildRequest</a></code> $ <code><a href="Snap-Test.html#v:postMultipart" title="Snap.Test">postMultipart</a></code> &quot;/foo/bar&quot; [(&quot;param0&quot;, FormData [&quot;baz&quot;, &quot;quux&quot;])]
POST /foo/bar HTTP/1.1
content-type: multipart/form-data; boundary=snap-boundary-572334111ec0c05ad4812481e8585dfa
content-length: 406
host: localhost

sn=&quot;localhost&quot; c=127.0.0.1:60000 s=127.0.0.1:8080 ctx=/ clen=406
</pre></div></div><div class="top"><p class="src"><a id="v:put" class="def">put</a> <a href="src/Snap.Internal.Test.RequestBuilder.html#put" class="link">Source</a> <a href="#v:put" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">=&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a></td><td class="doc"><p>request path</p></td></tr><tr><td class="src">-&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a></td><td class="doc"><p>request body MIME content-type</p></td></tr><tr><td class="src">-&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a></td><td class="doc"><p>request body contents</p></td></tr><tr><td class="src">-&gt; <a href="Snap-Test.html#t:RequestBuilder" title="Snap.Test">RequestBuilder</a> m ()</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Builds an HTTP &quot;PUT&quot; request.</p><p>Example:</p><pre>ghci&gt; :set -XOverloadedStrings
ghci&gt; <code><a href="Snap-Test.html#v:buildRequest" title="Snap.Test">buildRequest</a></code> $ <code><a href="Snap-Test.html#v:put" title="Snap.Test">put</a></code> &quot;/foo/bar&quot; &quot;text/plain&quot; &quot;some text&quot;
PUT /foo/bar HTTP/1.1
content-type: text/plain
content-length: 9
host: localhost

sn=&quot;localhost&quot; c=127.0.0.1:60000 s=127.0.0.1:8080 ctx=/ clen=9
</pre></div></div><div class="top"><p class="src"><a id="v:postRaw" class="def">postRaw</a> <a href="src/Snap.Internal.Test.RequestBuilder.html#postRaw" class="link">Source</a> <a href="#v:postRaw" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">=&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a></td><td class="doc"><p>request path</p></td></tr><tr><td class="src">-&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a></td><td class="doc"><p>request body MIME content-type</p></td></tr><tr><td class="src">-&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a></td><td class="doc"><p>request body contents</p></td></tr><tr><td class="src">-&gt; <a href="Snap-Test.html#t:RequestBuilder" title="Snap.Test">RequestBuilder</a> m ()</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Builds a &quot;raw&quot; HTTP &quot;POST&quot; request, with the given MIME type and body
 contents.</p><p>Example:</p><pre>ghci&gt; :set -XOverloadedStrings
ghci&gt; <code><a href="Snap-Test.html#v:buildRequest" title="Snap.Test">buildRequest</a></code> $ <code><a href="Snap-Test.html#v:postRaw" title="Snap.Test">postRaw</a></code> &quot;/foo/bar&quot; &quot;text/plain&quot; &quot;some text&quot;
POST /foo/bar HTTP/1.1
content-type: text/plain
content-length: 9
host: localhost

sn=&quot;localhost&quot; c=127.0.0.1:60000 s=127.0.0.1:8080 ctx=/ clen=9
</pre></div></div><div class="top"><p class="src"><a id="v:delete" class="def">delete</a> <a href="src/Snap.Internal.Test.RequestBuilder.html#delete" class="link">Source</a> <a href="#v:delete" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">=&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a></td><td class="doc"><p>request path</p></td></tr><tr><td class="src">-&gt; <a href="Snap-Internal-Http-Types.html#t:Params" title="Snap.Internal.Http.Types">Params</a></td><td class="doc"><p>request's form parameters</p></td></tr><tr><td class="src">-&gt; <a href="Snap-Test.html#t:RequestBuilder" title="Snap.Test">RequestBuilder</a> m ()</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Builds an HTTP &quot;DELETE&quot; request with the given query parameters.</p><p>Example:</p><pre>ghci&gt; :set -XOverloadedStrings
ghci&gt; import qualified <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/containers-0.6.7/Data-Map.html">Data.Map</a> as M
ghci&gt; <code><a href="Snap-Test.html#v:buildRequest" title="Snap.Test">buildRequest</a></code> $ <code><a href="Snap-Test.html#v:delete" title="Snap.Test">delete</a></code> &quot;/foo/bar&quot; M.empty
DELETE /foo/bar HTTP/1.1
host: localhost

sn=&quot;localhost&quot; c=127.0.0.1:60000 s=127.0.0.1:8080 ctx=/ clen=n/a
</pre></div></div><a href="#g:5" id="g:5"><h3>Precise control over building Requests</h3></a><div class="top"><p class="src"><a id="v:addHeader" class="def">addHeader</a> :: <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; CI <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> -&gt; <a href="Snap-Test.html#t:RequestBuilder" title="Snap.Test">RequestBuilder</a> m () <a href="src/Snap.Internal.Test.RequestBuilder.html#addHeader" class="link">Source</a> <a href="#v:addHeader" class="selflink">#</a></p><div class="doc"><p>Adds the given header to the request being built.</p><p>Example:</p><pre>ghci&gt; :set -XOverloadedStrings
ghci&gt; import qualified <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/containers-0.6.7/Data-Map.html">Data.Map</a> as M
ghci&gt; :{
ghci| <code><a href="Snap-Test.html#v:buildRequest" title="Snap.Test">buildRequest</a></code> $ do <code><a href="Snap-Test.html#v:get" title="Snap.Test">get</a></code> &quot;/foo/bar&quot; M.empty
ghci|                   <code><a href="Snap-Test.html#v:addHeader" title="Snap.Test">addHeader</a></code> &quot;Accept&quot; &quot;text/html&quot;
ghci|                   <code><a href="Snap-Test.html#v:addHeader" title="Snap.Test">addHeader</a></code> &quot;Accept&quot; &quot;text/plain&quot;
ghci| :}
GET /foo/bar HTTP/1.1
accept: text/html,text/plain
host: localhost

sn=&quot;localhost&quot; c=127.0.0.1:60000 s=127.0.0.1:8080 ctx=/ clen=n/a
</pre></div></div><div class="top"><p class="src"><a id="v:setContentType" class="def">setContentType</a> :: <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> -&gt; <a href="Snap-Test.html#t:RequestBuilder" title="Snap.Test">RequestBuilder</a> m () <a href="src/Snap.Internal.Test.RequestBuilder.html#setContentType" class="link">Source</a> <a href="#v:setContentType" class="selflink">#</a></p><div class="doc"><p>Sets the request's <code>content-type</code> to the given MIME type.</p><p>Example:</p><pre>ghci&gt; :set -XOverloadedStrings
ghci&gt; import qualified <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/containers-0.6.7/Data-Map.html">Data.Map</a> as M
ghci&gt; <code><a href="Snap-Test.html#v:buildRequest" title="Snap.Test">buildRequest</a></code> $ <code><a href="Snap-Test.html#v:put" title="Snap.Test">put</a></code> &quot;/foo/bar&quot; &quot;text/html&quot; &quot;some text&quot; &gt;&gt; <code><a href="Snap-Test.html#v:setContentType" title="Snap.Test">setContentType</a></code> &quot;text/plain&quot;
PUT /foo/bar HTTP/1.1
content-type: text/plain
content-length: 9
host: localhost

sn=&quot;localhost&quot; c=127.0.0.1:60000 s=127.0.0.1:8080 ctx=/ clen=9
</pre></div></div><div class="top"><p class="src"><a id="v:setHeader" class="def">setHeader</a> :: <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; CI <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> -&gt; <a href="Snap-Test.html#t:RequestBuilder" title="Snap.Test">RequestBuilder</a> m () <a href="src/Snap.Internal.Test.RequestBuilder.html#setHeader" class="link">Source</a> <a href="#v:setHeader" class="selflink">#</a></p><div class="doc"><p>Sets the given header in the request being built, overwriting any header
 with the same name already present.</p><p>Example:</p><pre>ghci&gt; :set -XOverloadedStrings
ghci&gt; import qualified <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/containers-0.6.7/Data-Map.html">Data.Map</a> as M
ghci&gt; :{
ghci| <code><a href="Snap-Test.html#v:buildRequest" title="Snap.Test">buildRequest</a></code> $ do get &quot;/foo/bar&quot; M.empty
ghci|                   <code><a href="Snap-Test.html#v:setHeader" title="Snap.Test">setHeader</a></code> &quot;Accept&quot; &quot;text/html&quot;
ghci|                   <code><a href="Snap-Test.html#v:setHeader" title="Snap.Test">setHeader</a></code> &quot;Accept&quot; &quot;text/plain&quot;
ghci| :}
GET /foo/bar HTTP/1.1
accept: text/plain
host: localhost

sn=&quot;localhost&quot; c=127.0.0.1:60000 s=127.0.0.1:8080 ctx=/ clen=n/a
</pre></div></div><div class="top"><p class="src"><a id="v:addCookies" class="def">addCookies</a> :: <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; [<a href="Snap-Internal-Http-Types.html#t:Cookie" title="Snap.Internal.Http.Types">Cookie</a>] -&gt; <a href="Snap-Test.html#t:RequestBuilder" title="Snap.Test">RequestBuilder</a> m () <a href="src/Snap.Internal.Test.RequestBuilder.html#addCookies" class="link">Source</a> <a href="#v:addCookies" class="selflink">#</a></p><div class="doc"><p>Adds the given cookies to the request being built.</p><p>Example:</p><pre>ghci&gt; :set -XOverloadedStrings
ghci&gt; import qualified <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/containers-0.6.7/Data-Map.html">Data.Map</a> as M
ghci&gt; import <a href="Snap-Core.html">Snap.Core</a>
ghci&gt; let cookie = <code><a href="Snap-Internal-Http-Types.html#t:Cookie" title="Snap.Internal.Http.Types">Cookie</a></code> &quot;name&quot; &quot;value&quot; Nothing Nothing Nothing False False
ghci&gt; <code><a href="Snap-Test.html#v:buildRequest" title="Snap.Test">buildRequest</a></code> $ <code><a href="Snap-Test.html#v:get" title="Snap.Test">get</a></code> &quot;/foo/bar&quot; M.empty &gt;&gt; <code><a href="Snap-Test.html#v:addCookies" title="Snap.Test">addCookies</a></code> [cookie]
GET /foo/bar HTTP/1.1
cookie: name=value
host: localhost

sn=&quot;localhost&quot; c=127.0.0.1:60000 s=127.0.0.1:8080 ctx=/ clen=n/a
cookies: Cookie {cookieName = &quot;name&quot;, cookieValue = &quot;value&quot;, ...}
</pre></div></div><div class="top"><p class="src"><a id="v:setHttpVersion" class="def">setHttpVersion</a> :: <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (<a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Int.html#t:Int" title="Data.Int">Int</a>, <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Int.html#t:Int" title="Data.Int">Int</a>) -&gt; <a href="Snap-Test.html#t:RequestBuilder" title="Snap.Test">RequestBuilder</a> m () <a href="src/Snap.Internal.Test.RequestBuilder.html#setHttpVersion" class="link">Source</a> <a href="#v:setHttpVersion" class="selflink">#</a></p><div class="doc"><p>Sets the test request's http version</p><p>Example:</p><pre>ghci&gt; :set -XOverloadedStrings
ghci&gt; import qualified <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/containers-0.6.7/Data-Map.html">Data.Map</a> as M
ghci&gt; <code><a href="Snap-Test.html#v:buildRequest" title="Snap.Test">buildRequest</a></code> $ <code><a href="Snap-Test.html#v:delete" title="Snap.Test">delete</a></code> &quot;/foo/bar&quot; M.empty &gt;&gt; <code><a href="Snap-Test.html#v:setHttpVersion" title="Snap.Test">setHttpVersion</a></code> (1,0)
DELETE /foo/bar HTTP/1.0
host: localhost

sn=&quot;localhost&quot; c=127.0.0.1:60000 s=127.0.0.1:8080 ctx=/ clen=n/a
</pre></div></div><div class="top"><p class="src"><a id="v:setQueryString" class="def">setQueryString</a> :: <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Snap-Internal-Http-Types.html#t:Params" title="Snap.Internal.Http.Types">Params</a> -&gt; <a href="Snap-Test.html#t:RequestBuilder" title="Snap.Test">RequestBuilder</a> m () <a href="src/Snap.Internal.Test.RequestBuilder.html#setQueryString" class="link">Source</a> <a href="#v:setQueryString" class="selflink">#</a></p><div class="doc"><p>Escapes the given parameter mapping and sets it as the request's query
 string.</p><p>Example:</p><pre>ghci&gt; :set -XOverloadedStrings
ghci&gt; import qualified <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/containers-0.6.7/Data-Map.html">Data.Map</a> as M
ghci&gt; <code><a href="Snap-Test.html#v:buildRequest" title="Snap.Test">buildRequest</a></code> $ <code><a href="Snap-Test.html#v:get" title="Snap.Test">get</a></code> &quot;/foo/bar&quot; M.empty &gt;&gt; <code><a href="Snap-Test.html#v:setQueryString" title="Snap.Test">setQueryString</a></code> (M.fromList [(&quot;param0&quot;, [&quot;baz&quot;]), (&quot;param1&quot;, [&quot;qux&quot;])])
GET /foo/bar?param0=baz&amp;param1=qux HTTP/1.1
host: localhost

sn=&quot;localhost&quot; c=127.0.0.1:60000 s=127.0.0.1:8080 ctx=/ clen=n/a
params: param0: [&quot;baz&quot;], param1: [&quot;qux&quot;]
</pre></div></div><div class="top"><p class="src"><a id="v:setQueryStringRaw" class="def">setQueryStringRaw</a> :: <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> -&gt; <a href="Snap-Test.html#t:RequestBuilder" title="Snap.Test">RequestBuilder</a> m () <a href="src/Snap.Internal.Test.RequestBuilder.html#setQueryStringRaw" class="link">Source</a> <a href="#v:setQueryStringRaw" class="selflink">#</a></p><div class="doc"><p>Sets the request's query string to be the raw bytestring provided,
 without any escaping or other interpretation. Most users should instead
 choose the <code><a href="Snap-Test.html#v:setQueryString" title="Snap.Test">setQueryString</a></code> function, which takes a parameter mapping.</p><p>Example:</p><pre>ghci&gt; :set -XOverloadedStrings
ghci&gt; import qualified <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/containers-0.6.7/Data-Map.html">Data.Map</a> as M
ghci&gt; <code><a href="Snap-Test.html#v:buildRequest" title="Snap.Test">buildRequest</a></code> $ <code><a href="Snap-Test.html#v:get" title="Snap.Test">get</a></code> &quot;/foo/bar&quot; M.empty &gt;&gt; <code><a href="Snap-Test.html#v:setQueryStringRaw" title="Snap.Test">setQueryStringRaw</a></code> &quot;param0=baz&amp;param1=qux&quot;
GET /foo/bar?param0=baz&amp;param1=qux HTTP/1.1
host: localhost

sn=&quot;localhost&quot; c=127.0.0.1:60000 s=127.0.0.1:8080 ctx=/ clen=n/a
params: param0: [&quot;baz&quot;], param1: [&quot;qux&quot;]
</pre></div></div><div class="top"><p class="src"><a id="v:setRequestPath" class="def">setRequestPath</a> :: <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> -&gt; <a href="Snap-Test.html#t:RequestBuilder" title="Snap.Test">RequestBuilder</a> m () <a href="src/Snap.Internal.Test.RequestBuilder.html#setRequestPath" class="link">Source</a> <a href="#v:setRequestPath" class="selflink">#</a></p><div class="doc"><p>Sets the request's path. The path provided must begin with a &quot;<code>/</code>&quot; and
 must <em>not</em> contain a query string; if you want to provide a query string
 in your test request, you must use <code><a href="Snap-Test.html#v:setQueryString" title="Snap.Test">setQueryString</a></code> or <code><a href="Snap-Test.html#v:setQueryStringRaw" title="Snap.Test">setQueryStringRaw</a></code>.
 Note that <code><a href="Snap-Internal-Http-Types.html#v:rqContextPath" title="Snap.Internal.Http.Types">rqContextPath</a></code> is never set by any <code><a href="Snap-Test.html#t:RequestBuilder" title="Snap.Test">RequestBuilder</a></code> function.</p><p>Example:</p><pre>ghci&gt; :set -XOverloadedStrings
ghci&gt; import qualified <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/containers-0.6.7/Data-Map.html">Data.Map</a> as M
ghci&gt; <code><a href="Snap-Test.html#v:buildRequest" title="Snap.Test">buildRequest</a></code> $ <code><a href="Snap-Test.html#v:get" title="Snap.Test">get</a></code> &quot;/foo/bar&quot; M.empty &gt;&gt; <code><a href="Snap-Test.html#v:setRequestPath" title="Snap.Test">setRequestPath</a></code> &quot;/bar/foo&quot;
GET /bar/foo HTTP/1.1
host: localhost

sn=&quot;localhost&quot; c=127.0.0.1:60000 s=127.0.0.1:8080 ctx=/ clen=n/a
</pre></div></div><div class="top"><p class="src"><a id="v:setRequestType" class="def">setRequestType</a> :: <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m =&gt; <a href="Snap-Test.html#t:RequestType" title="Snap.Test">RequestType</a> -&gt; <a href="Snap-Test.html#t:RequestBuilder" title="Snap.Test">RequestBuilder</a> m () <a href="src/Snap.Internal.Test.RequestBuilder.html#setRequestType" class="link">Source</a> <a href="#v:setRequestType" class="selflink">#</a></p><div class="doc"><p>Sets the type of the <code><a href="Snap-Internal-Http-Types.html#t:Request" title="Snap.Internal.Http.Types">Request</a></code> being built.</p><p>Example:</p><pre>ghci&gt; :set -XOverloadedStrings
ghci&gt; import qualified <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/containers-0.6.7/Data-Map.html">Data.Map</a> as M
ghci&gt; <code><a href="Snap-Test.html#v:buildRequest" title="Snap.Test">buildRequest</a></code> $ <code><a href="Snap-Test.html#v:delete" title="Snap.Test">delete</a></code> &quot;/foo/bar&quot; M.empty &gt;&gt; <code><a href="Snap-Test.html#v:setRequestType" title="Snap.Test">setRequestType</a></code> GetRequest
GET /foo/bar HTTP/1.1
host: localhost

sn=&quot;localhost&quot; c=127.0.0.1:60000 s=127.0.0.1:8080 ctx=/ clen=n/a
</pre></div></div><div class="top"><p class="src"><a id="v:setSecure" class="def">setSecure</a> :: <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> -&gt; <a href="Snap-Test.html#t:RequestBuilder" title="Snap.Test">RequestBuilder</a> m () <a href="src/Snap.Internal.Test.RequestBuilder.html#setSecure" class="link">Source</a> <a href="#v:setSecure" class="selflink">#</a></p><div class="doc"><p>Controls whether the test request being generated appears to be an https
 request or not.</p><p>Example:</p><pre>ghci&gt; :set -XOverloadedStrings
ghci&gt; import qualified <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/containers-0.6.7/Data-Map.html">Data.Map</a> as M
ghci&gt; <code><a href="Snap-Test.html#v:buildRequest" title="Snap.Test">buildRequest</a></code> $ <code><a href="Snap-Test.html#v:delete" title="Snap.Test">delete</a></code> &quot;/foo/bar&quot; M.empty &gt;&gt; <code><a href="Snap-Test.html#v:setSecure" title="Snap.Test">setSecure</a></code> True
DELETE /foo/bar HTTP/1.1
host: localhost

sn=&quot;localhost&quot; c=127.0.0.1:60000 s=127.0.0.1:8080 ctx=/ clen=n/a secure
</pre></div></div><a href="#g:6" id="g:6"><h1>HUnit Assertions</h1></a><div class="top"><p class="src"><a id="v:assertSuccess" class="def">assertSuccess</a> :: <a href="Snap-Internal-Http-Types.html#t:Response" title="Snap.Internal.Http.Types">Response</a> -&gt; Assertion <a href="src/Snap.Internal.Test.Assertions.html#assertSuccess" class="link">Source</a> <a href="#v:assertSuccess" class="selflink">#</a></p><div class="doc"><p>Given a <code><a href="Snap-Internal-Http-Types.html#t:Response" title="Snap.Internal.Http.Types">Response</a></code>, assert that its HTTP status code is 200 (success).</p><p>Example:</p><pre>ghci&gt; :set -XOverloadedStrings
ghci&gt; import qualified <a href="Test-HUnit.html">Test.HUnit</a> as T
ghci&gt; let test = T.runTestTT . T.TestCase
ghci&gt; test $ <code><a href="Snap-Test.html#v:assertSuccess" title="Snap.Test">assertSuccess</a></code> <code><a href="Snap-Core.html#v:emptyResponse" title="Snap.Core">emptyResponse</a></code>
Cases: 1  Tried: 1  Errors: 0  Failures: 0
Counts {cases = 1, tried = 1, errors = 0, failures = 0}
ghci&gt; test $ <code><a href="Snap-Test.html#v:assertSuccess" title="Snap.Test">assertSuccess</a></code> (<code><a href="Snap-Core.html#v:setResponseStatus" title="Snap.Core">setResponseStatus</a></code> 500 &quot;Internal Server Error&quot; <code><a href="Snap-Core.html#v:emptyResponse" title="Snap.Core">emptyResponse</a></code>)
### Failure:
Expected success (200) but got (500)
expected: 200
 but got: 500
Cases: 1  Tried: 1  Errors: 0  Failures: 1
Counts {cases = 1, tried = 1, errors = 0, failures = 1}
</pre></div></div><div class="top"><p class="src"><a id="v:assert404" class="def">assert404</a> :: <a href="Snap-Internal-Http-Types.html#t:Response" title="Snap.Internal.Http.Types">Response</a> -&gt; Assertion <a href="src/Snap.Internal.Test.Assertions.html#assert404" class="link">Source</a> <a href="#v:assert404" class="selflink">#</a></p><div class="doc"><p>Given a <code><a href="Snap-Internal-Http-Types.html#t:Response" title="Snap.Internal.Http.Types">Response</a></code>, assert that its HTTP status code is 404 (Not Found).</p><p>Example:</p><pre>ghci&gt; :set -XOverloadedStrings
ghci&gt; <code><a href="Snap-Test.html#v:assert404" title="Snap.Test">assert404</a></code> $ <code><a href="Snap-Core.html#v:setResponseStatus" title="Snap.Core">setResponseStatus</a></code> 404 &quot;Not Found&quot; <code><a href="Snap-Core.html#v:emptyResponse" title="Snap.Core">emptyResponse</a></code>
ghci&gt; <code><a href="Snap-Test.html#v:assert404" title="Snap.Test">assert404</a></code> <code><a href="Snap-Core.html#v:emptyResponse" title="Snap.Core">emptyResponse</a></code>
*** Exception: HUnitFailure &quot;Expected Not Found (404) but got (200)\nexpected: 404\n but got: 200&quot;
</pre></div></div><div class="top"><p class="src"><a id="v:assertRedirectTo" class="def">assertRedirectTo</a> <a href="src/Snap.Internal.Test.Assertions.html#assertRedirectTo" class="link">Source</a> <a href="#v:assertRedirectTo" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a></td><td class="doc"><p>The Response should redirect to this
 URI</p></td></tr><tr><td class="src">-&gt; <a href="Snap-Internal-Http-Types.html#t:Response" title="Snap.Internal.Http.Types">Response</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; Assertion</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Given a <code><a href="Snap-Internal-Http-Types.html#t:Response" title="Snap.Internal.Http.Types">Response</a></code>, assert that its HTTP status code is between 300 and 399
 (a redirect), and that the Location header of the <code><a href="Snap-Internal-Http-Types.html#t:Response" title="Snap.Internal.Http.Types">Response</a></code> points to the
 specified URI.</p><p>Example:</p><pre>ghci&gt; :set -XOverloadedStrings
ghci&gt; let r' = <code><a href="Snap-Core.html#v:setResponseStatus" title="Snap.Core">setResponseStatus</a></code> 301 &quot;Moved Permanently&quot; <code><a href="Snap-Core.html#v:emptyResponse" title="Snap.Core">emptyResponse</a></code>
ghci&gt; let r  = <code><a href="Snap-Core.html#v:setHeader" title="Snap.Core">setHeader</a></code> &quot;Location&quot; &quot;www.example.com&quot; r'
ghci&gt; <code><a href="Snap-Test.html#v:assertRedirectTo" title="Snap.Test">assertRedirectTo</a></code> &quot;www.example.com&quot; r
ghci&gt; <code><a href="Snap-Test.html#v:assertRedirectTo" title="Snap.Test">assertRedirectTo</a></code> &quot;www.example.com&quot; <code><a href="Snap-Core.html#v:emptyResponse" title="Snap.Core">emptyResponse</a></code>
*** Exception: HUnitFailure &quot;Expected redirect but got status code (200)&quot;
</pre></div></div><div class="top"><p class="src"><a id="v:assertRedirect" class="def">assertRedirect</a> :: <a href="Snap-Internal-Http-Types.html#t:Response" title="Snap.Internal.Http.Types">Response</a> -&gt; Assertion <a href="src/Snap.Internal.Test.Assertions.html#assertRedirect" class="link">Source</a> <a href="#v:assertRedirect" class="selflink">#</a></p><div class="doc"><p>Given a <code><a href="Snap-Internal-Http-Types.html#t:Response" title="Snap.Internal.Http.Types">Response</a></code>, assert that its HTTP status code is between 300 and 399
 (a redirect).</p><p>Example:</p><pre>ghci&gt; :set -XOverloadedStrings
ghci&gt; <code><a href="Snap-Test.html#v:assertRedirect" title="Snap.Test">assertRedirect</a></code> $ <code><a href="Snap-Core.html#v:setResponseStatus" title="Snap.Core">setResponseStatus</a></code> 301 &quot;Moved Permanently&quot; <code><a href="Snap-Core.html#v:emptyResponse" title="Snap.Core">emptyResponse</a></code>
ghci&gt; <code><a href="Snap-Test.html#v:assertRedirect" title="Snap.Test">assertRedirect</a></code> <code><a href="Snap-Core.html#v:emptyResponse" title="Snap.Core">emptyResponse</a></code>
*** Exception: HUnitFailure &quot;Expected redirect but got status code (200)&quot;
</pre></div></div><div class="top"><p class="src"><a id="v:assertBodyContains" class="def">assertBodyContains</a> <a href="src/Snap.Internal.Test.Assertions.html#assertBodyContains" class="link">Source</a> <a href="#v:assertBodyContains" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a></td><td class="doc"><p>Regexp that will match the body content</p></td></tr><tr><td class="src">-&gt; <a href="Snap-Internal-Http-Types.html#t:Response" title="Snap.Internal.Http.Types">Response</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; Assertion</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Given a <code><a href="Snap-Internal-Http-Types.html#t:Response" title="Snap.Internal.Http.Types">Response</a></code>, assert that its body matches the given regular
 expression.</p><p>Example:</p><pre>ghci&gt; :set -XOverloadedStrings
ghci&gt; import qualified <a href="System-IO-Streams.html">System.IO.Streams</a> as Streams
ghci&gt; import qualified <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/Data-ByteString-Builder.html">Data.ByteString.Builder</a> as Builder
ghci&gt; :{
ghci| let r = <code><a href="Snap-Core.html#v:setResponseBody" title="Snap.Core">setResponseBody</a></code>
ghci|         (out -&gt; do
ghci|             Streams.write (Just $ Builder.byteString &quot;Hello, world!&quot;) out
ghci|             return out)
ghci|         <code><a href="Snap-Core.html#v:emptyResponse" title="Snap.Core">emptyResponse</a></code>
ghci| :}
ghci&gt; <code><a href="Snap-Test.html#v:assertBodyContains" title="Snap.Test">assertBodyContains</a></code> &quot;^Hello&quot; r
ghci&gt; <code><a href="Snap-Test.html#v:assertBodyContains" title="Snap.Test">assertBodyContains</a></code> &quot;Bye&quot; r
*** Exception: HUnitFailure &quot;Expected body to match regexp \&quot;\&quot;Bye\&quot;\&quot;, but didn't&quot;
</pre></div></div><a href="#g:7" id="g:7"><h1>Getting response bodies</h1></a><div class="top"><p class="src"><a id="v:getResponseBody" class="def">getResponseBody</a> :: <a href="Snap-Internal-Http-Types.html#t:Response" title="Snap.Internal.Http.Types">Response</a> -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/System-IO.html#t:IO" title="System.IO">IO</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> <a href="src/Snap.Internal.Test.Assertions.html#getResponseBody" class="link">Source</a> <a href="#v:getResponseBody" class="selflink">#</a></p><div class="doc"><p>Given a <code><a href="Snap-Internal-Http-Types.html#t:Response" title="Snap.Internal.Http.Types">Response</a></code>, return its body as a <code><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a></code>.</p><p>Example:</p><pre>ghci&gt; <code><a href="Snap-Test.html#v:getResponseBody" title="Snap.Test">getResponseBody</a></code> <code>emptyResponse</code>
&quot;&quot;
</pre></div></div><a href="#g:8" id="g:8"><h1>Dumping HTTP Messages</h1></a><div class="top"><p class="src"><a id="v:requestToString" class="def">requestToString</a> :: <a href="Snap-Internal-Http-Types.html#t:Request" title="Snap.Internal.Http.Types">Request</a> -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/System-IO.html#t:IO" title="System.IO">IO</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> <a href="src/Snap.Internal.Test.RequestBuilder.html#requestToString" class="link">Source</a> <a href="#v:requestToString" class="selflink">#</a></p><div class="doc"><p>Converts the given <code><a href="Snap-Internal-Http-Types.html#t:Request" title="Snap.Internal.Http.Types">Request</a></code> to a bytestring.</p><p>Since: 1.0.0.0</p><p>Example:</p><pre>ghci&gt; :set -XOverloadedStrings
ghci&gt; import qualified <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/containers-0.6.7/Data-Map.html">Data.Map</a> as M
ghci&gt; r &lt;- <code><a href="Snap-Test.html#v:buildRequest" title="Snap.Test">buildRequest</a></code> $ get &quot;/foo/bar&quot; M.empty
ghci&gt; <code><a href="Snap-Test.html#v:requestToString" title="Snap.Test">requestToString</a></code> r
&quot;GET /foo/bar HTTP/1.1\r\nhost: localhost\r\n\r\n&quot;
</pre></div></div><div class="top"><p class="src"><a id="v:responseToString" class="def">responseToString</a> :: <a href="Snap-Internal-Http-Types.html#t:Response" title="Snap.Internal.Http.Types">Response</a> -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/System-IO.html#t:IO" title="System.IO">IO</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> <a href="src/Snap.Internal.Test.RequestBuilder.html#responseToString" class="link">Source</a> <a href="#v:responseToString" class="selflink">#</a></p><div class="doc"><p>Converts the given <code><a href="Snap-Internal-Http-Types.html#t:Response" title="Snap.Internal.Http.Types">Response</a></code> to a bytestring.</p><p>Example:</p><pre>ghci&gt; import <a href="Snap-Core.html">Snap.Core</a>
ghci&gt; <code><a href="Snap-Test.html#v:responseToString" title="Snap.Test">responseToString</a></code> <code><a href="Snap-Core.html#v:emptyResponse" title="Snap.Core">emptyResponse</a></code>
&quot;HTTP/1.1 200 OK\r\n\r\n&quot;
</pre></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.29.1</p></div></body></html>