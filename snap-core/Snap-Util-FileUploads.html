<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Snap.Util.FileUploads</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">snap-core-1.0.5.1: Snap: A Haskell Web Framework (core interfaces and types)</span><ul class="links" id="page-menu"><li id="quick-jump-button"><a href="#">Quick Jump</a></li><li><a href="src/Snap.Util.FileUploads.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>Safe-Inferred</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Snap.Util.FileUploads</p></div><div id="table-of-contents"><div id="contents-list"><p class="caption" onclick="window.scrollTo(0,0)">Contents</p><ul><li><a href="#g:1">Functions</a><ul><li><a href="#g:2">Backwards compatible API</a></li></ul></li><li><a href="#g:3">Uploaded parts</a><ul><li><a href="#g:4">Policy</a><ul><li><a href="#g:5">General upload policy</a></li><li><a href="#g:6">File upload policy</a></li><li><a href="#g:7">Per-file upload policy</a></li></ul></li></ul></li><li><a href="#g:8">Exceptions</a></li></ul></div></div><div id="description"><p class="caption">Description</p><div class="doc"><p>This module contains primitives and helper functions for handling
 requests with <code>Content-type: multipart/form-data</code>, i.e. HTML forms and file
 uploads.</p><p>Typically most users will want to use <code><a href="Snap-Util-FileUploads.html#v:handleFileUploads" title="Snap.Util.FileUploads">handleFileUploads</a></code>, which writes
 uploaded files to a temporary directory before sending them on to a handler
 specified by the user.</p><p>Users who wish to handle their file uploads differently can use the
 lower-level interface called <code><a href="Snap-Util-FileUploads.html#v:handleMultipart" title="Snap.Util.FileUploads">handleMultipart</a></code>. That function takes
 uploaded files and streams them to a consumer of the user's choosing.</p><p>Using these functions requires making &quot;policy&quot; decisions which Snap can't
 really make for users, such as &quot;what's the largest PDF file a user is
 allowed to upload?&quot; and &quot;should we read form inputs into the parameters
 mapping?&quot;. Policy is specified on a &quot;global&quot; basis (using
 <code><a href="Snap-Util-FileUploads.html#t:UploadPolicy" title="Snap.Util.FileUploads">UploadPolicy</a></code>), and on a per-file basis (using <code><a href="Snap-Util-FileUploads.html#t:PartUploadPolicy" title="Snap.Util.FileUploads">PartUploadPolicy</a></code>, which
 allows you to reject or limit the size of certain uploaded
 <code>Content-type</code>s).</p><p>Example usage:</p><pre>{-# LANGUAGE OverloadedStrings #-}

module Main where

import qualified Data.ByteString.Char8 as B8
import           Data.Functor          ((&lt;$&gt;))
import           <a href="Snap-Core.html">Snap.Core</a>             (<code><a href="Snap-Core.html#v:Snap" title="Snap.Core">Snap</a></code>, <code><a href="Snap-Core.html#v:route" title="Snap.Core">route</a></code>, <code><a href="Snap-Core.html#v:writeBS" title="Snap.Core">writeBS</a></code>)
import           Snap.Http.Server      (quickHttpServe)
import           <a href="Snap-Util-FileUploads.html">Snap.Util.FileUploads</a>
import           System.Posix          (FileOffset, fileSize, getFileStatus)

uploadForm :: <code><a href="Snap-Core.html#v:Snap" title="Snap.Core">Snap</a></code> ()
uploadForm = <code><a href="Snap-Core.html#v:writeBS" title="Snap.Core">writeBS</a></code> &quot;&lt;form enctype=\&quot;multipart/form-data\&quot; action=\&quot;/do-upload\&quot; method=\&quot;POST\&quot;&gt;\
    \&lt;input name=\&quot;file\&quot; type=\&quot;file\&quot; /&gt;\
    \&lt;input type=\&quot;submit\&quot; value=\&quot;Send File\&quot; /&gt;\
    \&lt;/form&gt;&quot;

getFileSize :: FilePath -&gt; IO FileOffset
getFileSize path = fileSize &lt;$&gt; getFileStatus path

-- Upload handler that prints out the uploaded file's size.
doUpload :: <code><a href="Snap-Core.html#v:Snap" title="Snap.Core">Snap</a></code> ()
doUpload = do
  l &lt;- <code><a href="Snap-Util-FileUploads.html#v:handleFileUploads" title="Snap.Util.FileUploads">handleFileUploads</a></code> &quot;/tmp&quot; <code><a href="Snap-Util-FileUploads.html#v:defaultUploadPolicy" title="Snap.Util.FileUploads">defaultUploadPolicy</a></code>
       (const $ <code><a href="Snap-Util-FileUploads.html#v:allowWithMaximumSize" title="Snap.Util.FileUploads">allowWithMaximumSize</a></code> (<code><a href="Snap-Util-FileUploads.html#v:getMaximumFormInputSize" title="Snap.Util.FileUploads">getMaximumFormInputSize</a></code> <code><a href="Snap-Util-FileUploads.html#v:defaultUploadPolicy" title="Snap.Util.FileUploads">defaultUploadPolicy</a></code>))
       (\pinfo mbfname -&gt; do fsize &lt;- either (const $ return 0) getFileSize mbfname
                             return (<code><a href="Snap-Util-FileUploads.html#v:partFileName" title="Snap.Util.FileUploads">partFileName</a></code> pinfo, fsize))
  <code>writeBS</code> . B8.pack . show $ l

site :: <code><a href="Snap-Core.html#v:Snap" title="Snap.Core">Snap</a></code> ()
site = <code><a href="Snap-Core.html#v:route" title="Snap.Core">route</a></code>
  [ (&quot;/upload&quot;,    uploadForm)
  , (&quot;/do-upload&quot;, doUpload)]

main :: IO ()
main = quickHttpServe site
</pre></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><a href="#v:handleFormUploads">handleFormUploads</a> :: <a href="Snap-Internal-Core.html#t:MonadSnap" title="Snap.Internal.Core">MonadSnap</a> m =&gt; <a href="Snap-Util-FileUploads.html#t:UploadPolicy" title="Snap.Util.FileUploads">UploadPolicy</a> -&gt; <a href="Snap-Util-FileUploads.html#t:FileUploadPolicy" title="Snap.Util.FileUploads">FileUploadPolicy</a> -&gt; (<a href="Snap-Util-FileUploads.html#t:PartInfo" title="Snap.Util.FileUploads">PartInfo</a> -&gt; InputStream <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/System-IO.html#t:IO" title="System.IO">IO</a> a) -&gt; m ([<a href="Snap-Util-FileUploads.html#t:FormParam" title="Snap.Util.FileUploads">FormParam</a>], [<a href="Snap-Util-FileUploads.html#t:FormFile" title="Snap.Util.FileUploads">FormFile</a> a])</li><li class="src short"><a href="#v:foldMultipart">foldMultipart</a> :: <a href="Snap-Internal-Core.html#t:MonadSnap" title="Snap.Internal.Core">MonadSnap</a> m =&gt; <a href="Snap-Util-FileUploads.html#t:UploadPolicy" title="Snap.Util.FileUploads">UploadPolicy</a> -&gt; <a href="Snap-Util-FileUploads.html#t:PartFold" title="Snap.Util.FileUploads">PartFold</a> a -&gt; a -&gt; m ([<a href="Snap-Util-FileUploads.html#t:FormParam" title="Snap.Util.FileUploads">FormParam</a>], a)</li><li class="src short"><span class="keyword">type</span> <a href="#t:PartFold">PartFold</a> a = <a href="Snap-Util-FileUploads.html#t:PartInfo" title="Snap.Util.FileUploads">PartInfo</a> -&gt; InputStream <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> -&gt; a -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/System-IO.html#t:IO" title="System.IO">IO</a> a</li><li class="src short"><span class="keyword">type</span> <a href="#t:FormParam">FormParam</a> = (<a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a>, <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a>)</li><li class="src short"><span class="keyword">data</span> <a href="#t:FormFile">FormFile</a> a = <a href="#v:FormFile">FormFile</a> {<ul class="subs"><li><a href="#v:formFileName">formFileName</a> :: !<a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a></li><li><a href="#v:formFileValue">formFileValue</a> :: a</li></ul>}</li><li class="src short"><a href="#v:storeAsLazyByteString">storeAsLazyByteString</a> :: InputStream <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/System-IO.html#t:IO" title="System.IO">IO</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/Data-ByteString-Lazy.html#t:ByteString" title="Data.ByteString.Lazy">ByteString</a></li><li class="src short"><a href="#v:withTemporaryStore">withTemporaryStore</a> :: <a href="Snap-Internal-Core.html#t:MonadSnap" title="Snap.Internal.Core">MonadSnap</a> m =&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/System-IO.html#t:FilePath" title="System.IO">FilePath</a> -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-String.html#t:String" title="Data.String">String</a> -&gt; ((InputStream <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/System-IO.html#t:IO" title="System.IO">IO</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/System-IO.html#t:FilePath" title="System.IO">FilePath</a>) -&gt; m a) -&gt; m a</li><li class="src short"><a href="#v:handleFileUploads">handleFileUploads</a> :: <a href="Snap-Internal-Core.html#t:MonadSnap" title="Snap.Internal.Core">MonadSnap</a> m =&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/System-IO.html#t:FilePath" title="System.IO">FilePath</a> -&gt; <a href="Snap-Util-FileUploads.html#t:UploadPolicy" title="Snap.Util.FileUploads">UploadPolicy</a> -&gt; (<a href="Snap-Util-FileUploads.html#t:PartInfo" title="Snap.Util.FileUploads">PartInfo</a> -&gt; <a href="Snap-Util-FileUploads.html#t:PartUploadPolicy" title="Snap.Util.FileUploads">PartUploadPolicy</a>) -&gt; (<a href="Snap-Util-FileUploads.html#t:PartInfo" title="Snap.Util.FileUploads">PartInfo</a> -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Either.html#t:Either" title="Data.Either">Either</a> <a href="Snap-Util-FileUploads.html#t:PolicyViolationException" title="Snap.Util.FileUploads">PolicyViolationException</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/System-IO.html#t:FilePath" title="System.IO">FilePath</a> -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/System-IO.html#t:IO" title="System.IO">IO</a> a) -&gt; m [a]</li><li class="src short"><a href="#v:handleMultipart">handleMultipart</a> :: <a href="Snap-Internal-Core.html#t:MonadSnap" title="Snap.Internal.Core">MonadSnap</a> m =&gt; <a href="Snap-Util-FileUploads.html#t:UploadPolicy" title="Snap.Util.FileUploads">UploadPolicy</a> -&gt; <a href="Snap-Util-FileUploads.html#t:PartProcessor" title="Snap.Util.FileUploads">PartProcessor</a> a -&gt; m [a]</li><li class="src short"><span class="keyword">type</span> <a href="#t:PartProcessor">PartProcessor</a> a = <a href="Snap-Util-FileUploads.html#t:PartInfo" title="Snap.Util.FileUploads">PartInfo</a> -&gt; InputStream <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/System-IO.html#t:IO" title="System.IO">IO</a> a</li><li class="src short"><span class="keyword">data</span> <a href="#t:PartInfo">PartInfo</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:PartDisposition">PartDisposition</a><ul class="subs"><li>= <a href="#v:DispositionAttachment">DispositionAttachment</a></li><li>| <a href="#v:DispositionFile">DispositionFile</a></li><li>| <a href="#v:DispositionFormData">DispositionFormData</a></li><li>| <a href="#v:DispositionOther">DispositionOther</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a></li></ul></li><li class="src short"><a href="#v:partFieldName">partFieldName</a> :: <a href="Snap-Util-FileUploads.html#t:PartInfo" title="Snap.Util.FileUploads">PartInfo</a> -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a></li><li class="src short"><a href="#v:partFileName">partFileName</a> :: <a href="Snap-Util-FileUploads.html#t:PartInfo" title="Snap.Util.FileUploads">PartInfo</a> -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a></li><li class="src short"><a href="#v:partContentType">partContentType</a> :: <a href="Snap-Util-FileUploads.html#t:PartInfo" title="Snap.Util.FileUploads">PartInfo</a> -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a></li><li class="src short"><a href="#v:partHeaders">partHeaders</a> :: <a href="Snap-Util-FileUploads.html#t:PartInfo" title="Snap.Util.FileUploads">PartInfo</a> -&gt; <a href="Snap-Types-Headers.html#t:Headers" title="Snap.Types.Headers">Headers</a></li><li class="src short"><a href="#v:partDisposition">partDisposition</a> :: <a href="Snap-Util-FileUploads.html#t:PartInfo" title="Snap.Util.FileUploads">PartInfo</a> -&gt; <a href="Snap-Util-FileUploads.html#t:PartDisposition" title="Snap.Util.FileUploads">PartDisposition</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:UploadPolicy">UploadPolicy</a></li><li class="src short"><a href="#v:defaultUploadPolicy">defaultUploadPolicy</a> :: <a href="Snap-Util-FileUploads.html#t:UploadPolicy" title="Snap.Util.FileUploads">UploadPolicy</a></li><li class="src short"><a href="#v:doProcessFormInputs">doProcessFormInputs</a> :: <a href="Snap-Util-FileUploads.html#t:UploadPolicy" title="Snap.Util.FileUploads">UploadPolicy</a> -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></li><li class="src short"><a href="#v:setProcessFormInputs">setProcessFormInputs</a> :: <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> -&gt; <a href="Snap-Util-FileUploads.html#t:UploadPolicy" title="Snap.Util.FileUploads">UploadPolicy</a> -&gt; <a href="Snap-Util-FileUploads.html#t:UploadPolicy" title="Snap.Util.FileUploads">UploadPolicy</a></li><li class="src short"><a href="#v:getMaximumFormInputSize">getMaximumFormInputSize</a> :: <a href="Snap-Util-FileUploads.html#t:UploadPolicy" title="Snap.Util.FileUploads">UploadPolicy</a> -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Int.html#t:Int64" title="Data.Int">Int64</a></li><li class="src short"><a href="#v:setMaximumFormInputSize">setMaximumFormInputSize</a> :: <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Int.html#t:Int64" title="Data.Int">Int64</a> -&gt; <a href="Snap-Util-FileUploads.html#t:UploadPolicy" title="Snap.Util.FileUploads">UploadPolicy</a> -&gt; <a href="Snap-Util-FileUploads.html#t:UploadPolicy" title="Snap.Util.FileUploads">UploadPolicy</a></li><li class="src short"><a href="#v:getMaximumNumberOfFormInputs">getMaximumNumberOfFormInputs</a> :: <a href="Snap-Util-FileUploads.html#t:UploadPolicy" title="Snap.Util.FileUploads">UploadPolicy</a> -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Int.html#t:Int" title="Data.Int">Int</a></li><li class="src short"><a href="#v:setMaximumNumberOfFormInputs">setMaximumNumberOfFormInputs</a> :: <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Snap-Util-FileUploads.html#t:UploadPolicy" title="Snap.Util.FileUploads">UploadPolicy</a> -&gt; <a href="Snap-Util-FileUploads.html#t:UploadPolicy" title="Snap.Util.FileUploads">UploadPolicy</a></li><li class="src short"><a href="#v:getMinimumUploadRate">getMinimumUploadRate</a> :: <a href="Snap-Util-FileUploads.html#t:UploadPolicy" title="Snap.Util.FileUploads">UploadPolicy</a> -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Prelude.html#t:Double" title="Prelude">Double</a></li><li class="src short"><a href="#v:setMinimumUploadRate">setMinimumUploadRate</a> :: <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Prelude.html#t:Double" title="Prelude">Double</a> -&gt; <a href="Snap-Util-FileUploads.html#t:UploadPolicy" title="Snap.Util.FileUploads">UploadPolicy</a> -&gt; <a href="Snap-Util-FileUploads.html#t:UploadPolicy" title="Snap.Util.FileUploads">UploadPolicy</a></li><li class="src short"><a href="#v:getMinimumUploadSeconds">getMinimumUploadSeconds</a> :: <a href="Snap-Util-FileUploads.html#t:UploadPolicy" title="Snap.Util.FileUploads">UploadPolicy</a> -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Int.html#t:Int" title="Data.Int">Int</a></li><li class="src short"><a href="#v:setMinimumUploadSeconds">setMinimumUploadSeconds</a> :: <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Snap-Util-FileUploads.html#t:UploadPolicy" title="Snap.Util.FileUploads">UploadPolicy</a> -&gt; <a href="Snap-Util-FileUploads.html#t:UploadPolicy" title="Snap.Util.FileUploads">UploadPolicy</a></li><li class="src short"><a href="#v:getUploadTimeout">getUploadTimeout</a> :: <a href="Snap-Util-FileUploads.html#t:UploadPolicy" title="Snap.Util.FileUploads">UploadPolicy</a> -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Int.html#t:Int" title="Data.Int">Int</a></li><li class="src short"><a href="#v:setUploadTimeout">setUploadTimeout</a> :: <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Snap-Util-FileUploads.html#t:UploadPolicy" title="Snap.Util.FileUploads">UploadPolicy</a> -&gt; <a href="Snap-Util-FileUploads.html#t:UploadPolicy" title="Snap.Util.FileUploads">UploadPolicy</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:FileUploadPolicy">FileUploadPolicy</a></li><li class="src short"><a href="#v:defaultFileUploadPolicy">defaultFileUploadPolicy</a> :: <a href="Snap-Util-FileUploads.html#t:FileUploadPolicy" title="Snap.Util.FileUploads">FileUploadPolicy</a></li><li class="src short"><a href="#v:setMaximumFileSize">setMaximumFileSize</a> :: <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Int.html#t:Int64" title="Data.Int">Int64</a> -&gt; <a href="Snap-Util-FileUploads.html#t:FileUploadPolicy" title="Snap.Util.FileUploads">FileUploadPolicy</a> -&gt; <a href="Snap-Util-FileUploads.html#t:FileUploadPolicy" title="Snap.Util.FileUploads">FileUploadPolicy</a></li><li class="src short"><a href="#v:setMaximumNumberOfFiles">setMaximumNumberOfFiles</a> :: <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Snap-Util-FileUploads.html#t:FileUploadPolicy" title="Snap.Util.FileUploads">FileUploadPolicy</a> -&gt; <a href="Snap-Util-FileUploads.html#t:FileUploadPolicy" title="Snap.Util.FileUploads">FileUploadPolicy</a></li><li class="src short"><a href="#v:setSkipFilesWithoutNames">setSkipFilesWithoutNames</a> :: <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> -&gt; <a href="Snap-Util-FileUploads.html#t:FileUploadPolicy" title="Snap.Util.FileUploads">FileUploadPolicy</a> -&gt; <a href="Snap-Util-FileUploads.html#t:FileUploadPolicy" title="Snap.Util.FileUploads">FileUploadPolicy</a></li><li class="src short"><a href="#v:setMaximumSkippedFileSize">setMaximumSkippedFileSize</a> :: <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Int.html#t:Int64" title="Data.Int">Int64</a> -&gt; <a href="Snap-Util-FileUploads.html#t:FileUploadPolicy" title="Snap.Util.FileUploads">FileUploadPolicy</a> -&gt; <a href="Snap-Util-FileUploads.html#t:FileUploadPolicy" title="Snap.Util.FileUploads">FileUploadPolicy</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:PartUploadPolicy">PartUploadPolicy</a></li><li class="src short"><a href="#v:disallow">disallow</a> :: <a href="Snap-Util-FileUploads.html#t:PartUploadPolicy" title="Snap.Util.FileUploads">PartUploadPolicy</a></li><li class="src short"><a href="#v:allowWithMaximumSize">allowWithMaximumSize</a> :: <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Int.html#t:Int64" title="Data.Int">Int64</a> -&gt; <a href="Snap-Util-FileUploads.html#t:PartUploadPolicy" title="Snap.Util.FileUploads">PartUploadPolicy</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:FileUploadException">FileUploadException</a></li><li class="src short"><a href="#v:fileUploadExceptionReason">fileUploadExceptionReason</a> :: <a href="Snap-Util-FileUploads.html#t:FileUploadException" title="Snap.Util.FileUploads">FileUploadException</a> -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/text-2.0.2/Data-Text.html#t:Text" title="Data.Text">Text</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:BadPartException">BadPartException</a></li><li class="src short"><a href="#v:badPartExceptionReason">badPartExceptionReason</a> :: <a href="Snap-Util-FileUploads.html#t:BadPartException" title="Snap.Util.FileUploads">BadPartException</a> -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/text-2.0.2/Data-Text.html#t:Text" title="Data.Text">Text</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:PolicyViolationException">PolicyViolationException</a></li><li class="src short"><a href="#v:policyViolationExceptionReason">policyViolationExceptionReason</a> :: <a href="Snap-Util-FileUploads.html#t:PolicyViolationException" title="Snap.Util.FileUploads">PolicyViolationException</a> -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/text-2.0.2/Data-Text.html#t:Text" title="Data.Text">Text</a></li></ul></details></div><div id="interface"><a href="#g:1" id="g:1"><h1>Functions</h1></a><div class="top"><p class="src"><a id="v:handleFormUploads" class="def">handleFormUploads</a> <a href="src/Snap.Internal.Util.FileUploads.html#handleFormUploads" class="link">Source</a> <a href="#v:handleFormUploads" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="Snap-Internal-Core.html#t:MonadSnap" title="Snap.Internal.Core">MonadSnap</a> m</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">=&gt; <a href="Snap-Util-FileUploads.html#t:UploadPolicy" title="Snap.Util.FileUploads">UploadPolicy</a></td><td class="doc"><p>general upload policy</p></td></tr><tr><td class="src">-&gt; <a href="Snap-Util-FileUploads.html#t:FileUploadPolicy" title="Snap.Util.FileUploads">FileUploadPolicy</a></td><td class="doc"><p>Upload policy for files</p></td></tr><tr><td class="src">-&gt; (<a href="Snap-Util-FileUploads.html#t:PartInfo" title="Snap.Util.FileUploads">PartInfo</a> -&gt; InputStream <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/System-IO.html#t:IO" title="System.IO">IO</a> a)</td><td class="doc"><p>A file storage function</p></td></tr><tr><td class="src">-&gt; m ([<a href="Snap-Util-FileUploads.html#t:FormParam" title="Snap.Util.FileUploads">FormParam</a>], [<a href="Snap-Util-FileUploads.html#t:FormFile" title="Snap.Util.FileUploads">FormFile</a> a])</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Processes form data and calls provided storage function on
 file parts.</p><p>You can use this together with <code><a href="Snap-Util-FileUploads.html#v:withTemporaryStore" title="Snap.Util.FileUploads">withTemporaryStore</a></code>, <code><a href="Snap-Util-FileUploads.html#v:storeAsLazyByteString" title="Snap.Util.FileUploads">storeAsLazyByteString</a></code>
 or provide your own callback to store uploaded files.</p><p>If you need to process uploaded file mime type or file name, do it in the
 store callback function.</p><p>See also <code><a href="Snap-Util-FileUploads.html#v:foldMultipart" title="Snap.Util.FileUploads">foldMultipart</a></code>.</p><p>Example using with small files which can safely be stored in memory.</p><pre>
import qualified Data.ByteString.Lazy as Lazy

handleSmallFiles :: MonadSnap m =&gt; [(ByteString, ByteString, Lazy.ByteString)]
handleSmallFiles = handleFormUploads uploadPolicy filePolicy store

  where
    uploadPolicy = defaultUploadPolicy
    filePolicy = setMaximumFileSize (64*1024)
                 $ setMaximumNumberOfFiles 5
                   defaultUploadPolicy
    store partInfo stream = do
       content &lt;- storeAsLazyByteString partInfo stream
       let
         fileName = partFileName partInfo
         fileMime = partContentType partInfo
       in (fileName, fileMime, content)
</pre></div></div><div class="top"><p class="src"><a id="v:foldMultipart" class="def">foldMultipart</a> <a href="src/Snap.Internal.Util.FileUploads.html#foldMultipart" class="link">Source</a> <a href="#v:foldMultipart" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="Snap-Internal-Core.html#t:MonadSnap" title="Snap.Internal.Core">MonadSnap</a> m</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">=&gt; <a href="Snap-Util-FileUploads.html#t:UploadPolicy" title="Snap.Util.FileUploads">UploadPolicy</a></td><td class="doc"><p>global upload policy</p></td></tr><tr><td class="src">-&gt; <a href="Snap-Util-FileUploads.html#t:PartFold" title="Snap.Util.FileUploads">PartFold</a> a</td><td class="doc"><p>part processor</p></td></tr><tr><td class="src">-&gt; a</td><td class="doc"><p>seed accumulator</p></td></tr><tr><td class="src">-&gt; m ([<a href="Snap-Util-FileUploads.html#t:FormParam" title="Snap.Util.FileUploads">FormParam</a>], a)</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Given an upload policy and a function to consume uploaded &quot;parts&quot;,
 consume a request body uploaded with <code>Content-type: multipart/form-data</code>.</p><p>If <code><a href="Snap-Util-FileUploads.html#v:setProcessFormInputs" title="Snap.Util.FileUploads">setProcessFormInputs</a></code> is <code><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Bool.html#v:True" title="Data.Bool">True</a></code>, then parts with disposition <code>form-data</code>
 (a form parameter) will be processed and returned as first element of
 resulting pair. Parts with other disposition will be fed to <code><a href="Snap-Util-FileUploads.html#t:PartFold" title="Snap.Util.FileUploads">PartFold</a></code>
 handler.</p><p>If <code><a href="Snap-Util-FileUploads.html#v:setProcessFormInputs" title="Snap.Util.FileUploads">setProcessFormInputs</a></code> is <code><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Bool.html#v:False" title="Data.Bool">False</a></code>, then parts with any disposition will
 be fed to <code><a href="Snap-Util-FileUploads.html#t:PartFold" title="Snap.Util.FileUploads">PartFold</a></code> handler and first element of returned pair will be
 empty. In this case it is important that you limit number of form inputs
 and sizes of inputs in your <code><a href="Snap-Util-FileUploads.html#t:PartFold" title="Snap.Util.FileUploads">PartFold</a></code> handler to avoid common DOS attacks.</p><p>Note: <em>THE REQUEST MUST BE CORRECTLY ENCODED</em>. If the request's
 <code>Content-type</code> is not &quot;<code>multipart/formdata</code>&quot;, this function skips
 processing using <code>pass</code>.</p><p>Most users will opt for the higher-level <code><a href="Snap-Util-FileUploads.html#v:handleFileUploads" title="Snap.Util.FileUploads">handleFileUploads</a></code>, which writes
 to temporary files, rather than <code><a href="Snap-Util-FileUploads.html#v:handleMultipart" title="Snap.Util.FileUploads">handleMultipart</a></code>. This function should be
 chosen, however, if you need to stream uploaded files directly to your own
 processing function: e.g. to a database or a remote service via RPC.</p><p>If the client's upload rate passes below the configured minimum (see
 <code><a href="Snap-Util-FileUploads.html#v:setMinimumUploadRate" title="Snap.Util.FileUploads">setMinimumUploadRate</a></code> and <code><a href="Snap-Util-FileUploads.html#v:setMinimumUploadSeconds" title="Snap.Util.FileUploads">setMinimumUploadSeconds</a></code>), this function
 terminates the connection. This setting is there to protect the server
 against slowloris-style denial of service attacks.</p><p><em>Exceptions</em></p><p>If the given <code><a href="Snap-Util-FileUploads.html#t:UploadPolicy" title="Snap.Util.FileUploads">UploadPolicy</a></code> stipulates that you wish form inputs to be
 processed (using <code><a href="Snap-Util-FileUploads.html#v:setProcessFormInputs" title="Snap.Util.FileUploads">setProcessFormInputs</a></code>), and a form input exceeds the
 maximum allowable size or the form exceeds maximum number of inputs, this
 function will throw a <code><a href="Snap-Util-FileUploads.html#t:PolicyViolationException" title="Snap.Util.FileUploads">PolicyViolationException</a></code>.</p><p>If an uploaded part contains MIME headers longer than a fixed internal
 threshold (currently 32KB), this function will throw a <code><a href="Snap-Util-FileUploads.html#t:BadPartException" title="Snap.Util.FileUploads">BadPartException</a></code>.</p><p><em>Since: 1.0.3.0</em></p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:PartFold" class="def">PartFold</a> a = <a href="Snap-Util-FileUploads.html#t:PartInfo" title="Snap.Util.FileUploads">PartInfo</a> -&gt; InputStream <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> -&gt; a -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/System-IO.html#t:IO" title="System.IO">IO</a> a <a href="src/Snap.Internal.Util.FileUploads.html#PartFold" class="link">Source</a> <a href="#t:PartFold" class="selflink">#</a></p><div class="doc"><p>A type alias for a function that will process one of the parts of a
 <code>multipart/form-data</code> HTTP request body with accumulator.</p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:FormParam" class="def">FormParam</a> = (<a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a>, <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a>) <a href="src/Snap.Internal.Util.FileUploads.html#FormParam" class="link">Source</a> <a href="#t:FormParam" class="selflink">#</a></p><div class="doc"><p>A form parameter name-value pair</p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:FormFile" class="def">FormFile</a> a <a href="src/Snap.Internal.Util.FileUploads.html#FormFile" class="link">Source</a> <a href="#t:FormFile" class="selflink">#</a></p><div class="doc"><p>Contents of form field of type <code>file</code></p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:FormFile" class="def">FormFile</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:formFileName" class="def">formFileName</a> :: !<a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a></dfn><div class="doc"><p>Name of a field</p></div></li><li><dfn class="src"><a id="v:formFileValue" class="def">formFileValue</a> :: a</dfn><div class="doc"><p>Result of storing file</p></div></li></ul></div></td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:FormFile">Instances</h4><details id="i:FormFile" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:FormFile:Show:1"></span> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Text-Show.html#t:Show" title="Text.Show">Show</a> a =&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Text-Show.html#t:Show" title="Text.Show">Show</a> (<a href="Snap-Util-FileUploads.html#t:FormFile" title="Snap.Util.FileUploads">FormFile</a> a)</span> <a href="src/Snap.Internal.Util.FileUploads.html#line-201" class="link">Source</a> <a href="#t:FormFile" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:FormFile:Show:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Snap-Internal-Util-FileUploads.html">Snap.Internal.Util.FileUploads</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Snap-Util-FileUploads.html#t:FormFile" title="Snap.Util.FileUploads">FormFile</a> a -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src" class="link">Source</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="Snap-Util-FileUploads.html#t:FormFile" title="Snap.Util.FileUploads">FormFile</a> a -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-String.html#t:String" title="Data.String">String</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src" class="link">Source</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Snap-Util-FileUploads.html#t:FormFile" title="Snap.Util.FileUploads">FormFile</a> a] -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src" class="link">Source</a> <a href="#v:showList" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:FormFile:Eq:2"></span> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> a =&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> (<a href="Snap-Util-FileUploads.html#t:FormFile" title="Snap.Util.FileUploads">FormFile</a> a)</span> <a href="src/Snap.Internal.Util.FileUploads.html#line-201" class="link">Source</a> <a href="#t:FormFile" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:FormFile:Eq:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Snap-Internal-Util-FileUploads.html">Snap.Internal.Util.FileUploads</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-61--61-">(==)</a> :: <a href="Snap-Util-FileUploads.html#t:FormFile" title="Snap.Util.FileUploads">FormFile</a> a -&gt; <a href="Snap-Util-FileUploads.html#t:FormFile" title="Snap.Util.FileUploads">FormFile</a> a -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/ghc-prim-0.10.0/src" class="link">Source</a> <a href="#v:-61--61-" class="selflink">#</a></p><p class="src"><a href="#v:-47--61-">(/=)</a> :: <a href="Snap-Util-FileUploads.html#t:FormFile" title="Snap.Util.FileUploads">FormFile</a> a -&gt; <a href="Snap-Util-FileUploads.html#t:FormFile" title="Snap.Util.FileUploads">FormFile</a> a -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/ghc-prim-0.10.0/src" class="link">Source</a> <a href="#v:-47--61-" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:FormFile:Ord:3"></span> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> a =&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> (<a href="Snap-Util-FileUploads.html#t:FormFile" title="Snap.Util.FileUploads">FormFile</a> a)</span> <a href="src/Snap.Internal.Util.FileUploads.html#line-201" class="link">Source</a> <a href="#t:FormFile" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:FormFile:Ord:3"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Snap-Internal-Util-FileUploads.html">Snap.Internal.Util.FileUploads</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:compare">compare</a> :: <a href="Snap-Util-FileUploads.html#t:FormFile" title="Snap.Util.FileUploads">FormFile</a> a -&gt; <a href="Snap-Util-FileUploads.html#t:FormFile" title="Snap.Util.FileUploads">FormFile</a> a -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Ord.html#t:Ordering" title="Data.Ord">Ordering</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/ghc-prim-0.10.0/src" class="link">Source</a> <a href="#v:compare" class="selflink">#</a></p><p class="src"><a href="#v:-60-">(&lt;)</a> :: <a href="Snap-Util-FileUploads.html#t:FormFile" title="Snap.Util.FileUploads">FormFile</a> a -&gt; <a href="Snap-Util-FileUploads.html#t:FormFile" title="Snap.Util.FileUploads">FormFile</a> a -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/ghc-prim-0.10.0/src" class="link">Source</a> <a href="#v:-60-" class="selflink">#</a></p><p class="src"><a href="#v:-60--61-">(&lt;=)</a> :: <a href="Snap-Util-FileUploads.html#t:FormFile" title="Snap.Util.FileUploads">FormFile</a> a -&gt; <a href="Snap-Util-FileUploads.html#t:FormFile" title="Snap.Util.FileUploads">FormFile</a> a -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/ghc-prim-0.10.0/src" class="link">Source</a> <a href="#v:-60--61-" class="selflink">#</a></p><p class="src"><a href="#v:-62-">(&gt;)</a> :: <a href="Snap-Util-FileUploads.html#t:FormFile" title="Snap.Util.FileUploads">FormFile</a> a -&gt; <a href="Snap-Util-FileUploads.html#t:FormFile" title="Snap.Util.FileUploads">FormFile</a> a -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/ghc-prim-0.10.0/src" class="link">Source</a> <a href="#v:-62-" class="selflink">#</a></p><p class="src"><a href="#v:-62--61-">(&gt;=)</a> :: <a href="Snap-Util-FileUploads.html#t:FormFile" title="Snap.Util.FileUploads">FormFile</a> a -&gt; <a href="Snap-Util-FileUploads.html#t:FormFile" title="Snap.Util.FileUploads">FormFile</a> a -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/ghc-prim-0.10.0/src" class="link">Source</a> <a href="#v:-62--61-" class="selflink">#</a></p><p class="src"><a href="#v:max">max</a> :: <a href="Snap-Util-FileUploads.html#t:FormFile" title="Snap.Util.FileUploads">FormFile</a> a -&gt; <a href="Snap-Util-FileUploads.html#t:FormFile" title="Snap.Util.FileUploads">FormFile</a> a -&gt; <a href="Snap-Util-FileUploads.html#t:FormFile" title="Snap.Util.FileUploads">FormFile</a> a <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/ghc-prim-0.10.0/src" class="link">Source</a> <a href="#v:max" class="selflink">#</a></p><p class="src"><a href="#v:min">min</a> :: <a href="Snap-Util-FileUploads.html#t:FormFile" title="Snap.Util.FileUploads">FormFile</a> a -&gt; <a href="Snap-Util-FileUploads.html#t:FormFile" title="Snap.Util.FileUploads">FormFile</a> a -&gt; <a href="Snap-Util-FileUploads.html#t:FormFile" title="Snap.Util.FileUploads">FormFile</a> a <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/ghc-prim-0.10.0/src" class="link">Source</a> <a href="#v:min" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:storeAsLazyByteString" class="def">storeAsLazyByteString</a> :: InputStream <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/System-IO.html#t:IO" title="System.IO">IO</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/Data-ByteString-Lazy.html#t:ByteString" title="Data.ByteString.Lazy">ByteString</a> <a href="src/Snap.Internal.Util.FileUploads.html#storeAsLazyByteString" class="link">Source</a> <a href="#v:storeAsLazyByteString" class="selflink">#</a></p><div class="doc"><p>Stores file body in memory as Lazy ByteString.</p></div></div><div class="top"><p class="src"><a id="v:withTemporaryStore" class="def">withTemporaryStore</a> <a href="src/Snap.Internal.Util.FileUploads.html#withTemporaryStore" class="link">Source</a> <a href="#v:withTemporaryStore" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="Snap-Internal-Core.html#t:MonadSnap" title="Snap.Internal.Core">MonadSnap</a> m</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">=&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/System-IO.html#t:FilePath" title="System.IO">FilePath</a></td><td class="doc"><p>temporary directory</p></td></tr><tr><td class="src">-&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-String.html#t:String" title="Data.String">String</a></td><td class="doc"><p>file name pattern</p></td></tr><tr><td class="src">-&gt; ((InputStream <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/System-IO.html#t:IO" title="System.IO">IO</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/System-IO.html#t:FilePath" title="System.IO">FilePath</a>) -&gt; m a)</td><td class="doc"><p>Action taking store function</p></td></tr><tr><td class="src">-&gt; m a</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Store files in a temporary directory, and clean up on function exit.</p><p>Files are safe to move until function exists.</p><p>If asynchronous exception is thrown during cleanup, temporary files may
 remain.</p><pre>uploadsHandler = withTemporaryStore &quot;<em>var</em>tmp&quot; &quot;upload-&quot; $ store -&gt; do
    (inputs, files) &lt;- handleFormUploads defaultUploadpolicy
                                         defaultFileUploadPolicy
                                         (const store)
    saveFiles files

</pre></div></div><a href="#g:2" id="g:2"><h2>Backwards compatible API</h2></a><div class="top"><p class="src"><a id="v:handleFileUploads" class="def">handleFileUploads</a> <a href="src/Snap.Internal.Util.FileUploads.html#handleFileUploads" class="link">Source</a> <a href="#v:handleFileUploads" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="Snap-Internal-Core.html#t:MonadSnap" title="Snap.Internal.Core">MonadSnap</a> m</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">=&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/System-IO.html#t:FilePath" title="System.IO">FilePath</a></td><td class="doc"><p>temporary directory</p></td></tr><tr><td class="src">-&gt; <a href="Snap-Util-FileUploads.html#t:UploadPolicy" title="Snap.Util.FileUploads">UploadPolicy</a></td><td class="doc"><p>general upload policy</p></td></tr><tr><td class="src">-&gt; (<a href="Snap-Util-FileUploads.html#t:PartInfo" title="Snap.Util.FileUploads">PartInfo</a> -&gt; <a href="Snap-Util-FileUploads.html#t:PartUploadPolicy" title="Snap.Util.FileUploads">PartUploadPolicy</a>)</td><td class="doc"><p>per-part upload policy</p></td></tr><tr><td class="src">-&gt; (<a href="Snap-Util-FileUploads.html#t:PartInfo" title="Snap.Util.FileUploads">PartInfo</a> -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Either.html#t:Either" title="Data.Either">Either</a> <a href="Snap-Util-FileUploads.html#t:PolicyViolationException" title="Snap.Util.FileUploads">PolicyViolationException</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/System-IO.html#t:FilePath" title="System.IO">FilePath</a> -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/System-IO.html#t:IO" title="System.IO">IO</a> a)</td><td class="doc"><p>user handler (see function
 description)</p></td></tr><tr><td class="src">-&gt; m [a]</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Reads uploaded files into a temporary directory and calls a user handler
 to process them.</p><p>Note: <em>THE REQUEST MUST BE CORRECTLY ENCODED</em>. If the request's
 <code>Content-type</code> is not &quot;<code>multipart/formdata</code>&quot;, this function skips
 processing using <code>pass</code>.</p><p>Given a temporary directory, global and file-specific upload policies, and a
 user handler, this function consumes a request body uploaded with
 <code>Content-type: multipart/form-data</code>. Each file is read into the temporary
 directory, and is then passed to the user handler. After the user handler
 runs (but before the <code>Response</code> body is streamed to the client), the files
 are deleted from disk; so if you want to retain or use the uploaded files in
 the generated response, you need to move or otherwise process them.</p><p>The argument passed to the user handler is a tuple:</p><pre>(PartInfo, Either PolicyViolationException FilePath)</pre><p>The first half of this tuple is a <code><a href="Snap-Util-FileUploads.html#t:PartInfo" title="Snap.Util.FileUploads">PartInfo</a></code>, which contains the
 information the client browser sent about the given upload part (like
 filename, content-type, etc). The second half of this tuple is an <code><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Either.html#t:Either" title="Data.Either">Either</a></code>
 stipulating that either:</p><ol><li value="1">the file was rejected on a policy basis because of the provided
    <code><a href="Snap-Util-FileUploads.html#t:PartUploadPolicy" title="Snap.Util.FileUploads">PartUploadPolicy</a></code> handler</li><li value="2">the file was accepted and exists at the given path.</li></ol><p><em>Exceptions</em></p><p>If the client's upload rate passes below the configured minimum (see
 <code><a href="Snap-Util-FileUploads.html#v:setMinimumUploadRate" title="Snap.Util.FileUploads">setMinimumUploadRate</a></code> and <code><a href="Snap-Util-FileUploads.html#v:setMinimumUploadSeconds" title="Snap.Util.FileUploads">setMinimumUploadSeconds</a></code>), this function
 terminates the connection. This setting is there to protect the server
 against slowloris-style denial of service attacks.</p><p>If the given <code><a href="Snap-Util-FileUploads.html#t:UploadPolicy" title="Snap.Util.FileUploads">UploadPolicy</a></code> stipulates that you wish form inputs to be
 placed in the <code><a href="Snap-Internal-Http-Types.html#v:rqParams" title="Snap.Internal.Http.Types">rqParams</a></code> parameter map (using <code><a href="Snap-Util-FileUploads.html#v:setProcessFormInputs" title="Snap.Util.FileUploads">setProcessFormInputs</a></code>), and
 a form input exceeds the maximum allowable size, this function will throw a
 <code><a href="Snap-Util-FileUploads.html#t:PolicyViolationException" title="Snap.Util.FileUploads">PolicyViolationException</a></code>.</p><p>If an uploaded part contains MIME headers longer than a fixed internal
 threshold (currently 32KB), this function will throw a <code><a href="Snap-Util-FileUploads.html#t:BadPartException" title="Snap.Util.FileUploads">BadPartException</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:handleMultipart" class="def">handleMultipart</a> <a href="src/Snap.Internal.Util.FileUploads.html#handleMultipart" class="link">Source</a> <a href="#v:handleMultipart" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="Snap-Internal-Core.html#t:MonadSnap" title="Snap.Internal.Core">MonadSnap</a> m</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">=&gt; <a href="Snap-Util-FileUploads.html#t:UploadPolicy" title="Snap.Util.FileUploads">UploadPolicy</a></td><td class="doc"><p>global upload policy</p></td></tr><tr><td class="src">-&gt; <a href="Snap-Util-FileUploads.html#t:PartProcessor" title="Snap.Util.FileUploads">PartProcessor</a> a</td><td class="doc"><p>part processor</p></td></tr><tr><td class="src">-&gt; m [a]</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>A variant of <code><a href="Snap-Util-FileUploads.html#v:foldMultipart" title="Snap.Util.FileUploads">foldMultipart</a></code> accumulating results into a list.
 Also puts captured <code><a href="Snap-Util-FileUploads.html#t:FormParam" title="Snap.Util.FileUploads">FormParam</a></code>s into rqPostParams and rqParams maps.</p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:PartProcessor" class="def">PartProcessor</a> a = <a href="Snap-Util-FileUploads.html#t:PartInfo" title="Snap.Util.FileUploads">PartInfo</a> -&gt; InputStream <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/System-IO.html#t:IO" title="System.IO">IO</a> a <a href="src/Snap.Internal.Util.FileUploads.html#PartProcessor" class="link">Source</a> <a href="#t:PartProcessor" class="selflink">#</a></p><div class="doc"><p>A type alias for a function that will process one of the parts of a
 <code>multipart/form-data</code> HTTP request body without usinc accumulator.</p></div></div><a href="#g:3" id="g:3"><h1>Uploaded parts</h1></a><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:PartInfo" class="def">PartInfo</a> <a href="src/Snap.Internal.Util.FileUploads.html#PartInfo" class="link">Source</a> <a href="#t:PartInfo" class="selflink">#</a></p><div class="doc"><p><code><a href="Snap-Util-FileUploads.html#t:PartInfo" title="Snap.Util.FileUploads">PartInfo</a></code> contains information about a &quot;part&quot; in a request uploaded
 with <code>Content-type: multipart/form-data</code>.</p></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:PartInfo">Instances</h4><details id="i:PartInfo" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:PartInfo:Show:1"></span> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Text-Show.html#t:Show" title="Text.Show">Show</a> <a href="Snap-Util-FileUploads.html#t:PartInfo" title="Snap.Util.FileUploads">PartInfo</a></span> <a href="src/Snap.Internal.Util.FileUploads.html#line-450" class="link">Source</a> <a href="#t:PartInfo" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:PartInfo:Show:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Snap-Internal-Util-FileUploads.html">Snap.Internal.Util.FileUploads</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Snap-Util-FileUploads.html#t:PartInfo" title="Snap.Util.FileUploads">PartInfo</a> -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src" class="link">Source</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="Snap-Util-FileUploads.html#t:PartInfo" title="Snap.Util.FileUploads">PartInfo</a> -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-String.html#t:String" title="Data.String">String</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src" class="link">Source</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Snap-Util-FileUploads.html#t:PartInfo" title="Snap.Util.FileUploads">PartInfo</a>] -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src" class="link">Source</a> <a href="#v:showList" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:PartDisposition" class="def">PartDisposition</a> <a href="src/Snap.Internal.Util.FileUploads.html#PartDisposition" class="link">Source</a> <a href="#t:PartDisposition" class="selflink">#</a></p><div class="doc"><p>Represents the disposition type specified via the <code>Content-Disposition</code>
 header field. See <a href="https://www.ietf.org/rfc/rfc1806.txt">RFC 1806</a>.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:DispositionAttachment" class="def">DispositionAttachment</a></td><td class="doc"><p><code>Content-Disposition: attachment</code>.</p></td></tr><tr><td class="src"><a id="v:DispositionFile" class="def">DispositionFile</a></td><td class="doc"><p><code>Content-Disposition: file</code>.</p></td></tr><tr><td class="src"><a id="v:DispositionFormData" class="def">DispositionFormData</a></td><td class="doc"><p><code>Content-Disposition: form-data</code>.</p></td></tr><tr><td class="src"><a id="v:DispositionOther" class="def">DispositionOther</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a></td><td class="doc"><p>Any other value.</p></td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:PartDisposition">Instances</h4><details id="i:PartDisposition" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:PartDisposition:Show:1"></span> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Text-Show.html#t:Show" title="Text.Show">Show</a> <a href="Snap-Util-FileUploads.html#t:PartDisposition" title="Snap.Util.FileUploads">PartDisposition</a></span> <a href="src/Snap.Internal.Util.FileUploads.html#line-430" class="link">Source</a> <a href="#t:PartDisposition" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:PartDisposition:Show:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Snap-Internal-Util-FileUploads.html">Snap.Internal.Util.FileUploads</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Snap-Util-FileUploads.html#t:PartDisposition" title="Snap.Util.FileUploads">PartDisposition</a> -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src" class="link">Source</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="Snap-Util-FileUploads.html#t:PartDisposition" title="Snap.Util.FileUploads">PartDisposition</a> -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-String.html#t:String" title="Data.String">String</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src" class="link">Source</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Snap-Util-FileUploads.html#t:PartDisposition" title="Snap.Util.FileUploads">PartDisposition</a>] -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src" class="link">Source</a> <a href="#v:showList" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:PartDisposition:Eq:2"></span> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> <a href="Snap-Util-FileUploads.html#t:PartDisposition" title="Snap.Util.FileUploads">PartDisposition</a></span> <a href="src/Snap.Internal.Util.FileUploads.html#line-430" class="link">Source</a> <a href="#t:PartDisposition" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:PartDisposition:Eq:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Snap-Internal-Util-FileUploads.html">Snap.Internal.Util.FileUploads</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-61--61-">(==)</a> :: <a href="Snap-Util-FileUploads.html#t:PartDisposition" title="Snap.Util.FileUploads">PartDisposition</a> -&gt; <a href="Snap-Util-FileUploads.html#t:PartDisposition" title="Snap.Util.FileUploads">PartDisposition</a> -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/ghc-prim-0.10.0/src" class="link">Source</a> <a href="#v:-61--61-" class="selflink">#</a></p><p class="src"><a href="#v:-47--61-">(/=)</a> :: <a href="Snap-Util-FileUploads.html#t:PartDisposition" title="Snap.Util.FileUploads">PartDisposition</a> -&gt; <a href="Snap-Util-FileUploads.html#t:PartDisposition" title="Snap.Util.FileUploads">PartDisposition</a> -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/ghc-prim-0.10.0/src" class="link">Source</a> <a href="#v:-47--61-" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:partFieldName" class="def">partFieldName</a> :: <a href="Snap-Util-FileUploads.html#t:PartInfo" title="Snap.Util.FileUploads">PartInfo</a> -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> <a href="src/Snap.Internal.Util.FileUploads.html#partFieldName" class="link">Source</a> <a href="#v:partFieldName" class="selflink">#</a></p><div class="doc"><p>Field name associated with this part (i.e., the name specified with
 <code>&lt;input name=&quot;partFieldName&quot; ...</code>).</p></div></div><div class="top"><p class="src"><a id="v:partFileName" class="def">partFileName</a> :: <a href="Snap-Util-FileUploads.html#t:PartInfo" title="Snap.Util.FileUploads">PartInfo</a> -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> <a href="src/Snap.Internal.Util.FileUploads.html#partFileName" class="link">Source</a> <a href="#v:partFileName" class="selflink">#</a></p><div class="doc"><p>Name of the uploaded file.</p></div></div><div class="top"><p class="src"><a id="v:partContentType" class="def">partContentType</a> :: <a href="Snap-Util-FileUploads.html#t:PartInfo" title="Snap.Util.FileUploads">PartInfo</a> -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> <a href="src/Snap.Internal.Util.FileUploads.html#partContentType" class="link">Source</a> <a href="#v:partContentType" class="selflink">#</a></p><div class="doc"><p>Content type of this part.</p></div></div><div class="top"><p class="src"><a id="v:partHeaders" class="def">partHeaders</a> :: <a href="Snap-Util-FileUploads.html#t:PartInfo" title="Snap.Util.FileUploads">PartInfo</a> -&gt; <a href="Snap-Types-Headers.html#t:Headers" title="Snap.Types.Headers">Headers</a> <a href="src/Snap.Internal.Util.FileUploads.html#partHeaders" class="link">Source</a> <a href="#v:partHeaders" class="selflink">#</a></p><div class="doc"><p>Remaining headers associated with this part.</p></div></div><div class="top"><p class="src"><a id="v:partDisposition" class="def">partDisposition</a> :: <a href="Snap-Util-FileUploads.html#t:PartInfo" title="Snap.Util.FileUploads">PartInfo</a> -&gt; <a href="Snap-Util-FileUploads.html#t:PartDisposition" title="Snap.Util.FileUploads">PartDisposition</a> <a href="src/Snap.Internal.Util.FileUploads.html#partDisposition" class="link">Source</a> <a href="#v:partDisposition" class="selflink">#</a></p><div class="doc"><p>Disposition type of this part. See <code><a href="Snap-Util-FileUploads.html#t:PartDisposition" title="Snap.Util.FileUploads">PartDisposition</a></code>.</p></div></div><a href="#g:4" id="g:4"><h2>Policy</h2></a><a href="#g:5" id="g:5"><h3>General upload policy</h3></a><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:UploadPolicy" class="def">UploadPolicy</a> <a href="src/Snap.Internal.Util.FileUploads.html#UploadPolicy" class="link">Source</a> <a href="#t:UploadPolicy" class="selflink">#</a></p><div class="doc"><p><code><a href="Snap-Util-FileUploads.html#t:UploadPolicy" title="Snap.Util.FileUploads">UploadPolicy</a></code> controls overall policy decisions relating to
 <code>multipart/form-data</code> uploads, specifically:</p><ul><li>whether to treat parts without filenames as form input (reading them into
   the <code><a href="Snap-Internal-Http-Types.html#v:rqParams" title="Snap.Internal.Http.Types">rqParams</a></code> map)</li><li>because form input is read into memory, the maximum size of a form input
   read in this manner, and the maximum number of form inputs</li><li>the minimum upload rate a client must maintain before we kill the
   connection; if very low-bitrate uploads were allowed then a Snap server
   would be vulnerable to a trivial denial-of-service using a
   &quot;slowloris&quot;-type attack</li><li>the minimum number of seconds which must elapse before we start killing
   uploads for having too low an upload rate.</li><li>the amount of time we should wait before timing out the connection
   whenever we receive input from the client.</li></ul></div></div><div class="top"><p class="src"><a id="v:defaultUploadPolicy" class="def">defaultUploadPolicy</a> :: <a href="Snap-Util-FileUploads.html#t:UploadPolicy" title="Snap.Util.FileUploads">UploadPolicy</a> <a href="src/Snap.Internal.Util.FileUploads.html#defaultUploadPolicy" class="link">Source</a> <a href="#v:defaultUploadPolicy" class="selflink">#</a></p><div class="doc"><p>A reasonable set of defaults for upload policy. The default policy is:</p><dl><dt><code>maximum form input size</code></dt><dd>128kB</dd><dt><code>maximum number of form inputs</code></dt><dd>10</dd><dt><code>minimum upload rate</code></dt><dd>1kB/s</dd><dt><code>seconds before rate limiting kicks in</code></dt><dd>10</dd><dt><code>inactivity timeout</code></dt><dd>20 seconds</dd></dl></div></div><div class="top"><p class="src"><a id="v:doProcessFormInputs" class="def">doProcessFormInputs</a> :: <a href="Snap-Util-FileUploads.html#t:UploadPolicy" title="Snap.Util.FileUploads">UploadPolicy</a> -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="src/Snap.Internal.Util.FileUploads.html#doProcessFormInputs" class="link">Source</a> <a href="#v:doProcessFormInputs" class="selflink">#</a></p><div class="doc"><p>Does this upload policy stipulate that we want to treat parts without
 filenames as form input?</p></div></div><div class="top"><p class="src"><a id="v:setProcessFormInputs" class="def">setProcessFormInputs</a> :: <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> -&gt; <a href="Snap-Util-FileUploads.html#t:UploadPolicy" title="Snap.Util.FileUploads">UploadPolicy</a> -&gt; <a href="Snap-Util-FileUploads.html#t:UploadPolicy" title="Snap.Util.FileUploads">UploadPolicy</a> <a href="src/Snap.Internal.Util.FileUploads.html#setProcessFormInputs" class="link">Source</a> <a href="#v:setProcessFormInputs" class="selflink">#</a></p><div class="doc"><p>Set the upload policy for treating parts without filenames as form input.</p></div></div><div class="top"><p class="src"><a id="v:getMaximumFormInputSize" class="def">getMaximumFormInputSize</a> :: <a href="Snap-Util-FileUploads.html#t:UploadPolicy" title="Snap.Util.FileUploads">UploadPolicy</a> -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Int.html#t:Int64" title="Data.Int">Int64</a> <a href="src/Snap.Internal.Util.FileUploads.html#getMaximumFormInputSize" class="link">Source</a> <a href="#v:getMaximumFormInputSize" class="selflink">#</a></p><div class="doc"><p>Get the maximum size of a form input which will be read into our
   <code><a href="Snap-Internal-Http-Types.html#v:rqParams" title="Snap.Internal.Http.Types">rqParams</a></code> map.</p></div></div><div class="top"><p class="src"><a id="v:setMaximumFormInputSize" class="def">setMaximumFormInputSize</a> :: <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Int.html#t:Int64" title="Data.Int">Int64</a> -&gt; <a href="Snap-Util-FileUploads.html#t:UploadPolicy" title="Snap.Util.FileUploads">UploadPolicy</a> -&gt; <a href="Snap-Util-FileUploads.html#t:UploadPolicy" title="Snap.Util.FileUploads">UploadPolicy</a> <a href="src/Snap.Internal.Util.FileUploads.html#setMaximumFormInputSize" class="link">Source</a> <a href="#v:setMaximumFormInputSize" class="selflink">#</a></p><div class="doc"><p>Set the maximum size of a form input which will be read into our
   <code><a href="Snap-Internal-Http-Types.html#v:rqParams" title="Snap.Internal.Http.Types">rqParams</a></code> map.</p></div></div><div class="top"><p class="src"><a id="v:getMaximumNumberOfFormInputs" class="def">getMaximumNumberOfFormInputs</a> :: <a href="Snap-Util-FileUploads.html#t:UploadPolicy" title="Snap.Util.FileUploads">UploadPolicy</a> -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Int.html#t:Int" title="Data.Int">Int</a> <a href="src/Snap.Internal.Util.FileUploads.html#getMaximumNumberOfFormInputs" class="link">Source</a> <a href="#v:getMaximumNumberOfFormInputs" class="selflink">#</a></p><div class="doc"><p>Get the maximum size of a form input which will be read into our
   <code><a href="Snap-Internal-Http-Types.html#v:rqParams" title="Snap.Internal.Http.Types">rqParams</a></code> map.</p></div></div><div class="top"><p class="src"><a id="v:setMaximumNumberOfFormInputs" class="def">setMaximumNumberOfFormInputs</a> :: <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Snap-Util-FileUploads.html#t:UploadPolicy" title="Snap.Util.FileUploads">UploadPolicy</a> -&gt; <a href="Snap-Util-FileUploads.html#t:UploadPolicy" title="Snap.Util.FileUploads">UploadPolicy</a> <a href="src/Snap.Internal.Util.FileUploads.html#setMaximumNumberOfFormInputs" class="link">Source</a> <a href="#v:setMaximumNumberOfFormInputs" class="selflink">#</a></p><div class="doc"><p>Set the maximum size of a form input which will be read into our
   <code><a href="Snap-Internal-Http-Types.html#v:rqParams" title="Snap.Internal.Http.Types">rqParams</a></code> map.</p></div></div><div class="top"><p class="src"><a id="v:getMinimumUploadRate" class="def">getMinimumUploadRate</a> :: <a href="Snap-Util-FileUploads.html#t:UploadPolicy" title="Snap.Util.FileUploads">UploadPolicy</a> -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Prelude.html#t:Double" title="Prelude">Double</a> <a href="src/Snap.Internal.Util.FileUploads.html#getMinimumUploadRate" class="link">Source</a> <a href="#v:getMinimumUploadRate" class="selflink">#</a></p><div class="doc"><p>Get the minimum rate (in <em>bytes/second</em>) a client must maintain before
   we kill the connection.</p></div></div><div class="top"><p class="src"><a id="v:setMinimumUploadRate" class="def">setMinimumUploadRate</a> :: <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Prelude.html#t:Double" title="Prelude">Double</a> -&gt; <a href="Snap-Util-FileUploads.html#t:UploadPolicy" title="Snap.Util.FileUploads">UploadPolicy</a> -&gt; <a href="Snap-Util-FileUploads.html#t:UploadPolicy" title="Snap.Util.FileUploads">UploadPolicy</a> <a href="src/Snap.Internal.Util.FileUploads.html#setMinimumUploadRate" class="link">Source</a> <a href="#v:setMinimumUploadRate" class="selflink">#</a></p><div class="doc"><p>Set the minimum rate (in <em>bytes/second</em>) a client must maintain before
   we kill the connection.</p></div></div><div class="top"><p class="src"><a id="v:getMinimumUploadSeconds" class="def">getMinimumUploadSeconds</a> :: <a href="Snap-Util-FileUploads.html#t:UploadPolicy" title="Snap.Util.FileUploads">UploadPolicy</a> -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Int.html#t:Int" title="Data.Int">Int</a> <a href="src/Snap.Internal.Util.FileUploads.html#getMinimumUploadSeconds" class="link">Source</a> <a href="#v:getMinimumUploadSeconds" class="selflink">#</a></p><div class="doc"><p>Get the amount of time which must elapse before we begin enforcing the
   upload rate minimum</p></div></div><div class="top"><p class="src"><a id="v:setMinimumUploadSeconds" class="def">setMinimumUploadSeconds</a> :: <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Snap-Util-FileUploads.html#t:UploadPolicy" title="Snap.Util.FileUploads">UploadPolicy</a> -&gt; <a href="Snap-Util-FileUploads.html#t:UploadPolicy" title="Snap.Util.FileUploads">UploadPolicy</a> <a href="src/Snap.Internal.Util.FileUploads.html#setMinimumUploadSeconds" class="link">Source</a> <a href="#v:setMinimumUploadSeconds" class="selflink">#</a></p><div class="doc"><p>Set the amount of time which must elapse before we begin enforcing the
   upload rate minimum</p></div></div><div class="top"><p class="src"><a id="v:getUploadTimeout" class="def">getUploadTimeout</a> :: <a href="Snap-Util-FileUploads.html#t:UploadPolicy" title="Snap.Util.FileUploads">UploadPolicy</a> -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Int.html#t:Int" title="Data.Int">Int</a> <a href="src/Snap.Internal.Util.FileUploads.html#getUploadTimeout" class="link">Source</a> <a href="#v:getUploadTimeout" class="selflink">#</a></p><div class="doc"><p>Get the &quot;upload timeout&quot;. Whenever input is received from the client,
   the connection timeout is set this many seconds in the future.</p></div></div><div class="top"><p class="src"><a id="v:setUploadTimeout" class="def">setUploadTimeout</a> :: <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Snap-Util-FileUploads.html#t:UploadPolicy" title="Snap.Util.FileUploads">UploadPolicy</a> -&gt; <a href="Snap-Util-FileUploads.html#t:UploadPolicy" title="Snap.Util.FileUploads">UploadPolicy</a> <a href="src/Snap.Internal.Util.FileUploads.html#setUploadTimeout" class="link">Source</a> <a href="#v:setUploadTimeout" class="selflink">#</a></p><div class="doc"><p>Set the upload timeout.</p></div></div><a href="#g:6" id="g:6"><h3>File upload policy</h3></a><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:FileUploadPolicy" class="def">FileUploadPolicy</a> <a href="src/Snap.Internal.Util.FileUploads.html#FileUploadPolicy" class="link">Source</a> <a href="#t:FileUploadPolicy" class="selflink">#</a></p><div class="doc"><p>File upload policy, if any policy is violated then
 <code><a href="Snap-Util-FileUploads.html#t:PolicyViolationException" title="Snap.Util.FileUploads">PolicyViolationException</a></code> is thrown</p></div></div><div class="top"><p class="src"><a id="v:defaultFileUploadPolicy" class="def">defaultFileUploadPolicy</a> :: <a href="Snap-Util-FileUploads.html#t:FileUploadPolicy" title="Snap.Util.FileUploads">FileUploadPolicy</a> <a href="src/Snap.Internal.Util.FileUploads.html#defaultFileUploadPolicy" class="link">Source</a> <a href="#v:defaultFileUploadPolicy" class="selflink">#</a></p><div class="doc"><p>A default <code><a href="Snap-Util-FileUploads.html#t:FileUploadPolicy" title="Snap.Util.FileUploads">FileUploadPolicy</a></code></p><dl><dt><code>maximum file size</code></dt><dd>1MB</dd><dt><code>maximum number of files</code></dt><dd>10</dd><dt><code>skip files without name</code></dt><dd>yes</dd><dt><code>maximum size of skipped file</code></dt><dd>0</dd></dl></div></div><div class="top"><p class="src"><a id="v:setMaximumFileSize" class="def">setMaximumFileSize</a> :: <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Int.html#t:Int64" title="Data.Int">Int64</a> -&gt; <a href="Snap-Util-FileUploads.html#t:FileUploadPolicy" title="Snap.Util.FileUploads">FileUploadPolicy</a> -&gt; <a href="Snap-Util-FileUploads.html#t:FileUploadPolicy" title="Snap.Util.FileUploads">FileUploadPolicy</a> <a href="src/Snap.Internal.Util.FileUploads.html#setMaximumFileSize" class="link">Source</a> <a href="#v:setMaximumFileSize" class="selflink">#</a></p><div class="doc"><p>Maximum size of single uploaded file.</p></div></div><div class="top"><p class="src"><a id="v:setMaximumNumberOfFiles" class="def">setMaximumNumberOfFiles</a> :: <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Snap-Util-FileUploads.html#t:FileUploadPolicy" title="Snap.Util.FileUploads">FileUploadPolicy</a> -&gt; <a href="Snap-Util-FileUploads.html#t:FileUploadPolicy" title="Snap.Util.FileUploads">FileUploadPolicy</a> <a href="src/Snap.Internal.Util.FileUploads.html#setMaximumNumberOfFiles" class="link">Source</a> <a href="#v:setMaximumNumberOfFiles" class="selflink">#</a></p><div class="doc"><p>Maximum number of uploaded files.</p></div></div><div class="top"><p class="src"><a id="v:setSkipFilesWithoutNames" class="def">setSkipFilesWithoutNames</a> :: <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> -&gt; <a href="Snap-Util-FileUploads.html#t:FileUploadPolicy" title="Snap.Util.FileUploads">FileUploadPolicy</a> -&gt; <a href="Snap-Util-FileUploads.html#t:FileUploadPolicy" title="Snap.Util.FileUploads">FileUploadPolicy</a> <a href="src/Snap.Internal.Util.FileUploads.html#setSkipFilesWithoutNames" class="link">Source</a> <a href="#v:setSkipFilesWithoutNames" class="selflink">#</a></p><div class="doc"><p>Skip files with empty file names.</p><p>If set, parts without filenames will not be fed to storage function.</p><p>HTML5 form data encoding standard states that form input fields of type
 file, without value set, are encoded same way as if file with empty body,
 empty file name, and type <code>application/octet-stream</code> was set as value.</p><p>You most likely want to use this with zero bytes allowed to avoid storing
 such fields (see <code><a href="Snap-Util-FileUploads.html#v:setMaximumSkippedFileSize" title="Snap.Util.FileUploads">setMaximumSkippedFileSize</a></code>).</p><p>By default files without names are skipped.</p><p><em>Since: 1.0.3.0</em></p></div></div><div class="top"><p class="src"><a id="v:setMaximumSkippedFileSize" class="def">setMaximumSkippedFileSize</a> :: <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Int.html#t:Int64" title="Data.Int">Int64</a> -&gt; <a href="Snap-Util-FileUploads.html#t:FileUploadPolicy" title="Snap.Util.FileUploads">FileUploadPolicy</a> -&gt; <a href="Snap-Util-FileUploads.html#t:FileUploadPolicy" title="Snap.Util.FileUploads">FileUploadPolicy</a> <a href="src/Snap.Internal.Util.FileUploads.html#setMaximumSkippedFileSize" class="link">Source</a> <a href="#v:setMaximumSkippedFileSize" class="selflink">#</a></p><div class="doc"><p>Maximum size of file without name which can be skipped.</p><p>Ignored if <code><a href="Snap-Util-FileUploads.html#v:setSkipFilesWithoutNames" title="Snap.Util.FileUploads">setSkipFilesWithoutNames</a></code> is <code>False</code>.</p><p>If skipped file is larger than this setting then <code><a href="Snap-Util-FileUploads.html#t:FileUploadException" title="Snap.Util.FileUploads">FileUploadException</a></code>
 is thrown.</p><p>By default maximum file size is 0.</p><p><em>Since: 1.0.3.0</em></p></div></div><a href="#g:7" id="g:7"><h3>Per-file upload policy</h3></a><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:PartUploadPolicy" class="def">PartUploadPolicy</a> <a href="src/Snap.Internal.Util.FileUploads.html#PartUploadPolicy" class="link">Source</a> <a href="#t:PartUploadPolicy" class="selflink">#</a></p><div class="doc"><p>Upload policy can be set on an &quot;general&quot; basis (using <code><a href="Snap-Util-FileUploads.html#t:UploadPolicy" title="Snap.Util.FileUploads">UploadPolicy</a></code>),
   but handlers can also make policy decisions on individual files/parts
   uploaded. For each part uploaded, handlers can decide:</p><ul><li>whether to allow the file upload at all</li><li>the maximum size of uploaded files, if allowed</li></ul></div></div><div class="top"><p class="src"><a id="v:disallow" class="def">disallow</a> :: <a href="Snap-Util-FileUploads.html#t:PartUploadPolicy" title="Snap.Util.FileUploads">PartUploadPolicy</a> <a href="src/Snap.Internal.Util.FileUploads.html#disallow" class="link">Source</a> <a href="#v:disallow" class="selflink">#</a></p><div class="doc"><p>Disallows the file to be uploaded.</p></div></div><div class="top"><p class="src"><a id="v:allowWithMaximumSize" class="def">allowWithMaximumSize</a> :: <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Int.html#t:Int64" title="Data.Int">Int64</a> -&gt; <a href="Snap-Util-FileUploads.html#t:PartUploadPolicy" title="Snap.Util.FileUploads">PartUploadPolicy</a> <a href="src/Snap.Internal.Util.FileUploads.html#allowWithMaximumSize" class="link">Source</a> <a href="#v:allowWithMaximumSize" class="selflink">#</a></p><div class="doc"><p>Allows the file to be uploaded, with maximum size <em>n</em> in bytes.</p></div></div><a href="#g:8" id="g:8"><h1>Exceptions</h1></a><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:FileUploadException" class="def">FileUploadException</a> <a href="src/Snap.Internal.Util.FileUploads.html#FileUploadException" class="link">Source</a> <a href="#t:FileUploadException" class="selflink">#</a></p><div class="doc"><p>All of the exceptions defined in this package inherit from
 <code><a href="Snap-Util-FileUploads.html#t:FileUploadException" title="Snap.Util.FileUploads">FileUploadException</a></code>, so if you write</p><pre>foo `catch` \(e :: FileUploadException) -&gt; ...</pre><p>you can catch a <code><a href="Snap-Util-FileUploads.html#t:BadPartException" title="Snap.Util.FileUploads">BadPartException</a></code>, a <code><a href="Snap-Util-FileUploads.html#t:PolicyViolationException" title="Snap.Util.FileUploads">PolicyViolationException</a></code>, etc.</p></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:FileUploadException">Instances</h4><details id="i:FileUploadException" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:FileUploadException:Exception:1"></span> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Control-Exception-Base.html#t:Exception" title="Control.Exception.Base">Exception</a> <a href="Snap-Util-FileUploads.html#t:FileUploadException" title="Snap.Util.FileUploads">FileUploadException</a></span> <a href="src/Snap.Internal.Util.FileUploads.html#line-484" class="link">Source</a> <a href="#t:FileUploadException" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:FileUploadException:Exception:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Snap-Internal-Util-FileUploads.html">Snap.Internal.Util.FileUploads</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:toException">toException</a> :: <a href="Snap-Util-FileUploads.html#t:FileUploadException" title="Snap.Util.FileUploads">FileUploadException</a> -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Control-Exception-Base.html#t:SomeException" title="Control.Exception.Base">SomeException</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src" class="link">Source</a> <a href="#v:toException" class="selflink">#</a></p><p class="src"><a href="#v:fromException">fromException</a> :: <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Control-Exception-Base.html#t:SomeException" title="Control.Exception.Base">SomeException</a> -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="Snap-Util-FileUploads.html#t:FileUploadException" title="Snap.Util.FileUploads">FileUploadException</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src" class="link">Source</a> <a href="#v:fromException" class="selflink">#</a></p><p class="src"><a href="#v:displayException">displayException</a> :: <a href="Snap-Util-FileUploads.html#t:FileUploadException" title="Snap.Util.FileUploads">FileUploadException</a> -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-String.html#t:String" title="Data.String">String</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src" class="link">Source</a> <a href="#v:displayException" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:FileUploadException:Show:2"></span> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Text-Show.html#t:Show" title="Text.Show">Show</a> <a href="Snap-Util-FileUploads.html#t:FileUploadException" title="Snap.Util.FileUploads">FileUploadException</a></span> <a href="src/Snap.Internal.Util.FileUploads.html#line-479" class="link">Source</a> <a href="#t:FileUploadException" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:FileUploadException:Show:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Snap-Internal-Util-FileUploads.html">Snap.Internal.Util.FileUploads</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Snap-Util-FileUploads.html#t:FileUploadException" title="Snap.Util.FileUploads">FileUploadException</a> -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src" class="link">Source</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="Snap-Util-FileUploads.html#t:FileUploadException" title="Snap.Util.FileUploads">FileUploadException</a> -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-String.html#t:String" title="Data.String">String</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src" class="link">Source</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Snap-Util-FileUploads.html#t:FileUploadException" title="Snap.Util.FileUploads">FileUploadException</a>] -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src" class="link">Source</a> <a href="#v:showList" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:fileUploadExceptionReason" class="def">fileUploadExceptionReason</a> :: <a href="Snap-Util-FileUploads.html#t:FileUploadException" title="Snap.Util.FileUploads">FileUploadException</a> -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/text-2.0.2/Data-Text.html#t:Text" title="Data.Text">Text</a> <a href="src/Snap.Internal.Util.FileUploads.html#fileUploadExceptionReason" class="link">Source</a> <a href="#v:fileUploadExceptionReason" class="selflink">#</a></p><div class="doc"><p>Human-readable error message corresponding to the <code><a href="Snap-Util-FileUploads.html#t:FileUploadException" title="Snap.Util.FileUploads">FileUploadException</a></code>.</p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:BadPartException" class="def">BadPartException</a> <a href="src/Snap.Internal.Util.FileUploads.html#BadPartException" class="link">Source</a> <a href="#t:BadPartException" class="selflink">#</a></p><div class="doc"><p>Thrown when a part is invalid in some way (e.g. the headers are too large).</p></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:BadPartException">Instances</h4><details id="i:BadPartException" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:BadPartException:Exception:1"></span> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Control-Exception-Base.html#t:Exception" title="Control.Exception.Base">Exception</a> <a href="Snap-Util-FileUploads.html#t:BadPartException" title="Snap.Util.FileUploads">BadPartException</a></span> <a href="src/Snap.Internal.Util.FileUploads.html#line-513" class="link">Source</a> <a href="#t:BadPartException" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:BadPartException:Exception:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Snap-Internal-Util-FileUploads.html">Snap.Internal.Util.FileUploads</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:toException">toException</a> :: <a href="Snap-Util-FileUploads.html#t:BadPartException" title="Snap.Util.FileUploads">BadPartException</a> -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Control-Exception-Base.html#t:SomeException" title="Control.Exception.Base">SomeException</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src" class="link">Source</a> <a href="#v:toException" class="selflink">#</a></p><p class="src"><a href="#v:fromException">fromException</a> :: <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Control-Exception-Base.html#t:SomeException" title="Control.Exception.Base">SomeException</a> -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="Snap-Util-FileUploads.html#t:BadPartException" title="Snap.Util.FileUploads">BadPartException</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src" class="link">Source</a> <a href="#v:fromException" class="selflink">#</a></p><p class="src"><a href="#v:displayException">displayException</a> :: <a href="Snap-Util-FileUploads.html#t:BadPartException" title="Snap.Util.FileUploads">BadPartException</a> -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-String.html#t:String" title="Data.String">String</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src" class="link">Source</a> <a href="#v:displayException" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:BadPartException:Show:2"></span> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Text-Show.html#t:Show" title="Text.Show">Show</a> <a href="Snap-Util-FileUploads.html#t:BadPartException" title="Snap.Util.FileUploads">BadPartException</a></span> <a href="src/Snap.Internal.Util.FileUploads.html#line-520" class="link">Source</a> <a href="#t:BadPartException" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:BadPartException:Show:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Snap-Internal-Util-FileUploads.html">Snap.Internal.Util.FileUploads</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Snap-Util-FileUploads.html#t:BadPartException" title="Snap.Util.FileUploads">BadPartException</a> -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src" class="link">Source</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="Snap-Util-FileUploads.html#t:BadPartException" title="Snap.Util.FileUploads">BadPartException</a> -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-String.html#t:String" title="Data.String">String</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src" class="link">Source</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Snap-Util-FileUploads.html#t:BadPartException" title="Snap.Util.FileUploads">BadPartException</a>] -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src" class="link">Source</a> <a href="#v:showList" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:badPartExceptionReason" class="def">badPartExceptionReason</a> :: <a href="Snap-Util-FileUploads.html#t:BadPartException" title="Snap.Util.FileUploads">BadPartException</a> -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/text-2.0.2/Data-Text.html#t:Text" title="Data.Text">Text</a> <a href="src/Snap.Internal.Util.FileUploads.html#badPartExceptionReason" class="link">Source</a> <a href="#v:badPartExceptionReason" class="selflink">#</a></p><div class="doc"><p>Human-readable error message corresponding to the <code><a href="Snap-Util-FileUploads.html#t:BadPartException" title="Snap.Util.FileUploads">BadPartException</a></code>.</p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:PolicyViolationException" class="def">PolicyViolationException</a> <a href="src/Snap.Internal.Util.FileUploads.html#PolicyViolationException" class="link">Source</a> <a href="#t:PolicyViolationException" class="selflink">#</a></p><div class="doc"><p>Thrown when an <code><a href="Snap-Util-FileUploads.html#t:UploadPolicy" title="Snap.Util.FileUploads">UploadPolicy</a></code> or <code><a href="Snap-Util-FileUploads.html#t:PartUploadPolicy" title="Snap.Util.FileUploads">PartUploadPolicy</a></code> is violated.</p></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:PolicyViolationException">Instances</h4><details id="i:PolicyViolationException" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:PolicyViolationException:Exception:1"></span> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Control-Exception-Base.html#t:Exception" title="Control.Exception.Base">Exception</a> <a href="Snap-Util-FileUploads.html#t:PolicyViolationException" title="Snap.Util.FileUploads">PolicyViolationException</a></span> <a href="src/Snap.Internal.Util.FileUploads.html#line-532" class="link">Source</a> <a href="#t:PolicyViolationException" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:PolicyViolationException:Exception:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Snap-Internal-Util-FileUploads.html">Snap.Internal.Util.FileUploads</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:toException">toException</a> :: <a href="Snap-Util-FileUploads.html#t:PolicyViolationException" title="Snap.Util.FileUploads">PolicyViolationException</a> -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Control-Exception-Base.html#t:SomeException" title="Control.Exception.Base">SomeException</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src" class="link">Source</a> <a href="#v:toException" class="selflink">#</a></p><p class="src"><a href="#v:fromException">fromException</a> :: <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Control-Exception-Base.html#t:SomeException" title="Control.Exception.Base">SomeException</a> -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="Snap-Util-FileUploads.html#t:PolicyViolationException" title="Snap.Util.FileUploads">PolicyViolationException</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src" class="link">Source</a> <a href="#v:fromException" class="selflink">#</a></p><p class="src"><a href="#v:displayException">displayException</a> :: <a href="Snap-Util-FileUploads.html#t:PolicyViolationException" title="Snap.Util.FileUploads">PolicyViolationException</a> -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-String.html#t:String" title="Data.String">String</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src" class="link">Source</a> <a href="#v:displayException" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:PolicyViolationException:Show:2"></span> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Text-Show.html#t:Show" title="Text.Show">Show</a> <a href="Snap-Util-FileUploads.html#t:PolicyViolationException" title="Snap.Util.FileUploads">PolicyViolationException</a></span> <a href="src/Snap.Internal.Util.FileUploads.html#line-541" class="link">Source</a> <a href="#t:PolicyViolationException" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:PolicyViolationException:Show:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Snap-Internal-Util-FileUploads.html">Snap.Internal.Util.FileUploads</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Snap-Util-FileUploads.html#t:PolicyViolationException" title="Snap.Util.FileUploads">PolicyViolationException</a> -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src" class="link">Source</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="Snap-Util-FileUploads.html#t:PolicyViolationException" title="Snap.Util.FileUploads">PolicyViolationException</a> -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-String.html#t:String" title="Data.String">String</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src" class="link">Source</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Snap-Util-FileUploads.html#t:PolicyViolationException" title="Snap.Util.FileUploads">PolicyViolationException</a>] -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src" class="link">Source</a> <a href="#v:showList" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:policyViolationExceptionReason" class="def">policyViolationExceptionReason</a> :: <a href="Snap-Util-FileUploads.html#t:PolicyViolationException" title="Snap.Util.FileUploads">PolicyViolationException</a> -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/text-2.0.2/Data-Text.html#t:Text" title="Data.Text">Text</a> <a href="src/Snap.Internal.Util.FileUploads.html#policyViolationExceptionReason" class="link">Source</a> <a href="#v:policyViolationExceptionReason" class="selflink">#</a></p><div class="doc"><p>Human-readable error message corresponding to the
 <code><a href="Snap-Util-FileUploads.html#t:PolicyViolationException" title="Snap.Util.FileUploads">PolicyViolationException</a></code>.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.29.1</p></div></body></html>