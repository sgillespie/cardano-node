<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE NamedFieldPuns #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE PackageImports #-}</span><span>
</span><span id="line-3"></span><span>
</span><span id="line-4"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Cardano.Tracer.Acceptors.Run</span><span>
</span><span id="line-5"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Cardano.Tracer.Acceptors.Run.html#runAcceptors"><span class="hs-identifier">runAcceptors</span></a></span><span>
</span><span id="line-6"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-7"></span><span>
</span><span id="line-8"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="file:///nix/store/pynpvrqwp66sbnvq2f023izyjl66fmgb-tasty-lib-tasty-1.5-haddock-doc/share/doc/tasty/html/src/Control.Concurrent.Async.html"><span class="hs-identifier">Control.Concurrent.Async</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/wzp72s9ln83is2xklh1avj8cxbh17al4-async-lib-async-2.2.5-haddock-doc/share/doc/async/html/src/Control.Concurrent.Async.Internal.html#forConcurrently_"><span class="hs-identifier">forConcurrently_</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-9"></span><span class="hs-keyword">import</span><span>           </span><span class="hs-string">&quot;contra-tracer&quot;</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-node/cardano-node/dist-newstyle/build/x86_64-linux/ghc-9.6.3/trace-dispatcher-2.5.2/doc/html/trace-dispatcher/src/Control.Tracer.html"><span class="hs-identifier">Control.Tracer</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/dkmky2ci646kg44ca5yvqjsbpllsmy3f-contra-tracer-lib-contra-tracer-0.1.0.2-haddock-doc/share/doc/contra-tracer/html/src/Control.Tracer.html#Tracer"><span class="hs-identifier">Tracer</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/Data.Functor.Contravariant.html#contramap"><span class="hs-identifier">contramap</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///nix/store/dkmky2ci646kg44ca5yvqjsbpllsmy3f-contra-tracer-lib-contra-tracer-0.1.0.2-haddock-doc/share/doc/contra-tracer/html/src/Control.Tracer.html#nullTracer"><span class="hs-identifier">nullTracer</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///nix/store/dkmky2ci646kg44ca5yvqjsbpllsmy3f-contra-tracer-lib-contra-tracer-0.1.0.2-haddock-doc/share/doc/contra-tracer/html/src/Control.Tracer.html#stdoutTracer"><span class="hs-identifier">stdoutTracer</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-10"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/Data.List.NonEmpty.html"><span class="hs-identifier">Data.List.NonEmpty</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">NE</span></span><span>
</span><span id="line-11"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/Data.Maybe.html"><span class="hs-identifier">Data.Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/Data.Maybe.html#fromMaybe"><span class="hs-identifier">fromMaybe</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-12"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/time-1.12.2/src/Data.Time.Clock.html"><span class="hs-identifier">Data.Time.Clock</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/time-1.12.2/src/Data.Time.Clock.Internal.NominalDiffTime.html#secondsToNominalDiffTime"><span class="hs-identifier">secondsToNominalDiffTime</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-13"></span><span>
</span><span id="line-14"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="file:///nix/store/pvsml2cjx9ldw53ic2xi4jhkibfir2mi-ekg-forward-lib-ekg-forward-0.4-haddock-doc/share/doc/ekg-forward/html/src/System.Metrics.Configuration.html"><span class="hs-identifier">System.Metrics.Configuration</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">EKGF</span></span><span>
</span><span id="line-15"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="file:///nix/store/pvsml2cjx9ldw53ic2xi4jhkibfir2mi-ekg-forward-lib-ekg-forward-0.4-haddock-doc/share/doc/ekg-forward/html/src/System.Metrics.ReqResp.html"><span class="hs-identifier">System.Metrics.ReqResp</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">EKGF</span></span><span>
</span><span id="line-16"></span><span>
</span><span id="line-17"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-node/cardano-node/dist-newstyle/build/x86_64-linux/ghc-9.6.3/trace-forward-2.2.2/doc/html/trace-forward/src/Trace.Forward.Configuration.DataPoint.html"><span class="hs-identifier">Trace.Forward.Configuration.DataPoint</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">DPF</span></span><span>
</span><span id="line-18"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-node/cardano-node/dist-newstyle/build/x86_64-linux/ghc-9.6.3/trace-forward-2.2.2/doc/html/trace-forward/src/Trace.Forward.Configuration.TraceObject.html"><span class="hs-identifier">Trace.Forward.Configuration.TraceObject</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">TOF</span></span><span>
</span><span id="line-19"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-node/cardano-node/dist-newstyle/build/x86_64-linux/ghc-9.6.3/trace-forward-2.2.2/doc/html/trace-forward/src/Trace.Forward.Protocol.TraceObject.Type.html"><span class="hs-identifier">Trace.Forward.Protocol.TraceObject.Type</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">TOF</span></span><span>
</span><span id="line-20"></span><span>
</span><span id="line-21"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Cardano.Tracer.Acceptors.Client.html"><span class="hs-identifier">Cardano.Tracer.Acceptors.Client</span></a></span><span>
</span><span id="line-22"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Cardano.Tracer.Acceptors.Server.html"><span class="hs-identifier">Cardano.Tracer.Acceptors.Server</span></a></span><span>
</span><span id="line-23"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Cardano.Tracer.Configuration.html"><span class="hs-identifier">Cardano.Tracer.Configuration</span></a></span><span>
</span><span id="line-24"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Cardano.Tracer.Environment.html"><span class="hs-identifier">Cardano.Tracer.Environment</span></a></span><span>
</span><span id="line-25"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Cardano.Tracer.MetaTrace.html"><span class="hs-identifier">Cardano.Tracer.MetaTrace</span></a></span><span>
</span><span id="line-26"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Cardano.Tracer.Utils.html"><span class="hs-identifier">Cardano.Tracer.Utils</span></a></span><span>
</span><span id="line-27"></span><span>
</span><span id="line-28"></span><span class="hs-comment">-- | Run acceptors for all supported protocols.</span><span>
</span><span id="line-29"></span><span class="hs-comment">--</span><span>
</span><span id="line-30"></span><span class="hs-comment">--   There are two &quot;network modes&quot; for acceptors:</span><span>
</span><span id="line-31"></span><span class="hs-comment">--   1. Server mode, when the tracer accepts connections from any number of nodes.</span><span>
</span><span id="line-32"></span><span class="hs-comment">--   2. Client mode, when the tracer initiates connections to specified number of nodes.</span><span>
</span><span id="line-33"></span><span class="annot"><a href="Cardano.Tracer.Acceptors.Run.html#runAcceptors"><span class="hs-identifier hs-type">runAcceptors</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Tracer.Environment.html#TracerEnv"><span class="hs-identifier hs-type">TracerEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-34"></span><span id="runAcceptors"><span class="annot"><span class="annottext">runAcceptors :: TracerEnv -&gt; IO ()
</span><a href="Cardano.Tracer.Acceptors.Run.html#runAcceptors"><span class="hs-identifier hs-var hs-var">runAcceptors</span></a></span></span><span> </span><span id="local-6989586621679634145"><span class="annot"><span class="annottext">tracerEnv :: TracerEnv
</span><a href="#local-6989586621679634145"><span class="hs-identifier hs-var">tracerEnv</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="Cardano.Tracer.Environment.html#TracerEnv"><span class="hs-identifier hs-type">TracerEnv</span></a></span><span class="hs-special">{</span><span id="local-6989586621679634147"><span class="annot"><span class="annottext">Trace IO TracerTrace
teTracer :: Trace IO TracerTrace
teTracer :: TracerEnv -&gt; Trace IO TracerTrace
</span><a href="#local-6989586621679634147"><span class="hs-identifier hs-var hs-var">teTracer</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-35"></span><span>  </span><span class="annot"><span class="annottext">Trace IO TracerTrace -&gt; TracerTrace -&gt; IO ()
forall (m :: * -&gt; *) a. Monad m =&gt; Trace m a -&gt; a -&gt; m ()
</span><a href="file:///home/runner/work/cardano-node/cardano-node/dist-newstyle/build/x86_64-linux/ghc-9.6.3/trace-dispatcher-2.5.2/doc/html/trace-dispatcher/src/Cardano.Logging.Trace.html#traceWith"><span class="hs-identifier hs-var">traceWith</span></a></span><span> </span><span class="annot"><span class="annottext">Trace IO TracerTrace
</span><a href="#local-6989586621679634147"><span class="hs-identifier hs-var">teTracer</span></a></span><span> </span><span class="annot"><span class="annottext">(TracerTrace -&gt; IO ()) -&gt; TracerTrace -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Network -&gt; TracerTrace
</span><a href="Cardano.Tracer.MetaTrace.html#TracerStartedAcceptors"><span class="hs-identifier hs-var">TracerStartedAcceptors</span></a></span><span> </span><span class="annot"><span class="annottext">Network
</span><a href="#local-6989586621679634151"><span class="hs-identifier hs-var">network</span></a></span><span>
</span><span id="line-36"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Network
</span><a href="#local-6989586621679634151"><span class="hs-identifier hs-var">network</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-37"></span><span>    </span><span class="annot"><a href="Cardano.Tracer.Configuration.html#AcceptAt"><span class="hs-identifier hs-type">AcceptAt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Tracer.Configuration.html#LocalSocket"><span class="hs-identifier hs-type">LocalSocket</span></a></span><span> </span><span id="local-6989586621679634154"><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679634154"><span class="hs-identifier hs-var">p</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-38"></span><span>      </span><span class="hs-comment">-- Run one server that accepts connections from the nodes.</span><span>
</span><span id="line-39"></span><span>      </span><span class="annot"><span class="annottext">IO () -&gt; Maybe Verbosity -&gt; FilePath -&gt; Word -&gt; IO ()
</span><a href="Cardano.Tracer.Utils.html#runInLoop"><span class="hs-identifier hs-var">runInLoop</span></a></span><span>
</span><span id="line-40"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TracerEnv
-&gt; FilePath
-&gt; (AcceptorConfiguration, AcceptorConfiguration TraceObject,
    AcceptorConfiguration)
-&gt; IO ()
</span><a href="Cardano.Tracer.Acceptors.Server.html#runAcceptorsServer"><span class="hs-identifier hs-var">runAcceptorsServer</span></a></span><span> </span><span class="annot"><span class="annottext">TracerEnv
</span><a href="#local-6989586621679634145"><span class="hs-identifier hs-var">tracerEnv</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679634154"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">((AcceptorConfiguration, AcceptorConfiguration TraceObject,
  AcceptorConfiguration)
 -&gt; IO ())
-&gt; (AcceptorConfiguration, AcceptorConfiguration TraceObject,
    AcceptorConfiguration)
-&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
-&gt; (AcceptorConfiguration, AcceptorConfiguration TraceObject,
    AcceptorConfiguration)
forall {lo}.
Show lo =&gt;
FilePath
-&gt; (AcceptorConfiguration, AcceptorConfiguration lo,
    AcceptorConfiguration)
</span><a href="#local-6989586621679634157"><span class="hs-identifier hs-var">acceptorsConfigs</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679634154"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-41"></span><span>        </span><span class="annot"><span class="annottext">Maybe Verbosity
</span><a href="#local-6989586621679634158"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679634154"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679634159"><span class="hs-identifier hs-var">initialPauseInSec</span></a></span><span>
</span><span id="line-42"></span><span>    </span><span class="annot"><a href="Cardano.Tracer.Configuration.html#ConnectTo"><span class="hs-identifier hs-type">ConnectTo</span></a></span><span> </span><span id="local-6989586621679634161"><span class="annot"><span class="annottext">NonEmpty Address
</span><a href="#local-6989586621679634161"><span class="hs-identifier hs-var">localSocks</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-43"></span><span>      </span><span class="hs-comment">-- Run N clients that initiate connections to the nodes.</span><span>
</span><span id="line-44"></span><span>      </span><span class="annot"><span class="annottext">NonEmpty Address -&gt; (Address -&gt; IO ()) -&gt; IO ()
forall (f :: * -&gt; *) a b. Foldable f =&gt; f a -&gt; (a -&gt; IO b) -&gt; IO ()
</span><a href="file:///nix/store/wzp72s9ln83is2xklh1avj8cxbh17al4-async-lib-async-2.2.5-haddock-doc/share/doc/async/html/src/Control.Concurrent.Async.Internal.html#forConcurrently_"><span class="hs-identifier hs-var">forConcurrently_</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NonEmpty Address -&gt; NonEmpty Address
forall a. Eq a =&gt; NonEmpty a -&gt; NonEmpty a
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/Data.List.NonEmpty.html#nub"><span class="hs-identifier hs-var">NE.nub</span></a></span><span> </span><span class="annot"><span class="annottext">NonEmpty Address
</span><a href="#local-6989586621679634161"><span class="hs-identifier hs-var">localSocks</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">((Address -&gt; IO ()) -&gt; IO ()) -&gt; (Address -&gt; IO ()) -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Tracer.Configuration.html#LocalSocket"><span class="hs-identifier hs-type">LocalSocket</span></a></span><span> </span><span id="local-6989586621679634163"><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679634163"><span class="hs-identifier hs-var">p</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-45"></span><span>        </span><span class="annot"><span class="annottext">IO () -&gt; Maybe Verbosity -&gt; FilePath -&gt; Word -&gt; IO ()
</span><a href="Cardano.Tracer.Utils.html#runInLoop"><span class="hs-identifier hs-var">runInLoop</span></a></span><span>
</span><span id="line-46"></span><span>          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TracerEnv
-&gt; FilePath
-&gt; (AcceptorConfiguration, AcceptorConfiguration TraceObject,
    AcceptorConfiguration)
-&gt; IO ()
</span><a href="Cardano.Tracer.Acceptors.Client.html#runAcceptorsClient"><span class="hs-identifier hs-var">runAcceptorsClient</span></a></span><span> </span><span class="annot"><span class="annottext">TracerEnv
</span><a href="#local-6989586621679634145"><span class="hs-identifier hs-var">tracerEnv</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679634163"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">((AcceptorConfiguration, AcceptorConfiguration TraceObject,
  AcceptorConfiguration)
 -&gt; IO ())
-&gt; (AcceptorConfiguration, AcceptorConfiguration TraceObject,
    AcceptorConfiguration)
-&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
-&gt; (AcceptorConfiguration, AcceptorConfiguration TraceObject,
    AcceptorConfiguration)
forall {lo}.
Show lo =&gt;
FilePath
-&gt; (AcceptorConfiguration, AcceptorConfiguration lo,
    AcceptorConfiguration)
</span><a href="#local-6989586621679634157"><span class="hs-identifier hs-var">acceptorsConfigs</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679634163"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-47"></span><span>          </span><span class="annot"><span class="annottext">Maybe Verbosity
</span><a href="#local-6989586621679634158"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679634163"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679634159"><span class="hs-identifier hs-var">initialPauseInSec</span></a></span><span>
</span><span id="line-48"></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-49"></span><span>  </span><span class="annot"><a href="Cardano.Tracer.Configuration.html#TracerConfig"><span class="hs-identifier hs-type">TracerConfig</span></a></span><span class="hs-special">{</span><span id="local-6989586621679634151"><span class="annot"><span class="annottext">Network
network :: Network
network :: TracerConfig -&gt; Network
</span><a href="#local-6989586621679634151"><span class="hs-identifier hs-var hs-var">network</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679634167"><span class="annot"><span class="annottext">Maybe Pico
ekgRequestFreq :: Maybe Pico
ekgRequestFreq :: TracerConfig -&gt; Maybe Pico
</span><a href="#local-6989586621679634167"><span class="hs-identifier hs-var hs-var">ekgRequestFreq</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679634169"><span class="annot"><span class="annottext">Maybe Word16
loRequestNum :: Maybe Word16
loRequestNum :: TracerConfig -&gt; Maybe Word16
</span><a href="#local-6989586621679634169"><span class="hs-identifier hs-var hs-var">loRequestNum</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679634158"><span class="annot"><span class="annottext">Maybe Verbosity
verbosity :: Maybe Verbosity
verbosity :: TracerConfig -&gt; Maybe Verbosity
</span><a href="#local-6989586621679634158"><span class="hs-identifier hs-var hs-var">verbosity</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TracerEnv -&gt; TracerConfig
</span><a href="Cardano.Tracer.Environment.html#teConfig"><span class="hs-identifier hs-var">teConfig</span></a></span><span> </span><span class="annot"><span class="annottext">TracerEnv
</span><a href="#local-6989586621679634145"><span class="hs-identifier hs-var">tracerEnv</span></a></span><span>
</span><span id="line-50"></span><span>
</span><span id="line-51"></span><span>  </span><span id="local-6989586621679634157"><span class="annot"><span class="annottext">acceptorsConfigs :: FilePath
-&gt; (AcceptorConfiguration, AcceptorConfiguration lo,
    AcceptorConfiguration)
</span><a href="#local-6989586621679634157"><span class="hs-identifier hs-var hs-var">acceptorsConfigs</span></a></span></span><span> </span><span id="local-6989586621679634197"><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679634197"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-52"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="file:///nix/store/pvsml2cjx9ldw53ic2xi4jhkibfir2mi-ekg-forward-lib-ekg-forward-0.4-haddock-doc/share/doc/ekg-forward/html/src/System.Metrics.Configuration.html#AcceptorConfiguration"><span class="hs-identifier hs-type">EKGF.AcceptorConfiguration</span></a></span><span>
</span><span id="line-53"></span><span>        </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">acceptorTracer :: Tracer IO (TraceSendRecv (EKGForward Request Response))
</span><a href="file:///nix/store/pvsml2cjx9ldw53ic2xi4jhkibfir2mi-ekg-forward-lib-ekg-forward-0.4-haddock-doc/share/doc/ekg-forward/html/src/System.Metrics.Configuration.html#acceptorTracer"><span class="hs-identifier hs-var">EKGF.acceptorTracer</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe Verbosity
-&gt; Tracer IO (TraceSendRecv (EKGForward Request Response))
forall a. Show a =&gt; Maybe Verbosity -&gt; Tracer IO a
</span><a href="#local-6989586621679634200"><span class="hs-identifier hs-var">mkVerbosity</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Verbosity
</span><a href="#local-6989586621679634158"><span class="hs-identifier hs-var">verbosity</span></a></span><span>
</span><span id="line-54"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forwarderEndpoint :: HowToConnect
</span><a href="file:///nix/store/pvsml2cjx9ldw53ic2xi4jhkibfir2mi-ekg-forward-lib-ekg-forward-0.4-haddock-doc/share/doc/ekg-forward/html/src/System.Metrics.Configuration.html#forwarderEndpoint"><span class="hs-identifier hs-var">EKGF.forwarderEndpoint</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; HowToConnect
</span><a href="file:///nix/store/pvsml2cjx9ldw53ic2xi4jhkibfir2mi-ekg-forward-lib-ekg-forward-0.4-haddock-doc/share/doc/ekg-forward/html/src/System.Metrics.Configuration.html#LocalPipe"><span class="hs-identifier hs-var">EKGF.LocalPipe</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679634197"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-55"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">requestFrequency :: NominalDiffTime
</span><a href="file:///nix/store/pvsml2cjx9ldw53ic2xi4jhkibfir2mi-ekg-forward-lib-ekg-forward-0.4-haddock-doc/share/doc/ekg-forward/html/src/System.Metrics.Configuration.html#requestFrequency"><span class="hs-identifier hs-var">EKGF.requestFrequency</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Pico -&gt; NominalDiffTime
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/time-1.12.2/src/Data.Time.Clock.Internal.NominalDiffTime.html#secondsToNominalDiffTime"><span class="hs-identifier hs-var">secondsToNominalDiffTime</span></a></span><span> </span><span class="annot"><span class="annottext">(Pico -&gt; NominalDiffTime) -&gt; Pico -&gt; NominalDiffTime
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Pico -&gt; Maybe Pico -&gt; Pico
forall a. a -&gt; Maybe a -&gt; a
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/Data.Maybe.html#fromMaybe"><span class="hs-identifier hs-var">fromMaybe</span></a></span><span> </span><span class="annot"><span class="annottext">Pico
</span><span class="hs-number">1.0</span></span><span> </span><span class="annot"><span class="annottext">Maybe Pico
</span><a href="#local-6989586621679634167"><span class="hs-identifier hs-var">ekgRequestFreq</span></a></span><span>
</span><span id="line-56"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">whatToRequest :: Request
</span><a href="file:///nix/store/pvsml2cjx9ldw53ic2xi4jhkibfir2mi-ekg-forward-lib-ekg-forward-0.4-haddock-doc/share/doc/ekg-forward/html/src/System.Metrics.Configuration.html#whatToRequest"><span class="hs-identifier hs-var">EKGF.whatToRequest</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Request
</span><a href="file:///nix/store/pvsml2cjx9ldw53ic2xi4jhkibfir2mi-ekg-forward-lib-ekg-forward-0.4-haddock-doc/share/doc/ekg-forward/html/src/System.Metrics.ReqResp.html#GetAllMetrics"><span class="hs-identifier hs-var">EKGF.GetAllMetrics</span></a></span><span>
</span><span id="line-57"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">shouldWeStop :: TVar Bool
</span><a href="file:///nix/store/pvsml2cjx9ldw53ic2xi4jhkibfir2mi-ekg-forward-lib-ekg-forward-0.4-haddock-doc/share/doc/ekg-forward/html/src/System.Metrics.Configuration.html#shouldWeStop"><span class="hs-identifier hs-var">EKGF.shouldWeStop</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TracerEnv -&gt; TVar Bool
</span><a href="Cardano.Tracer.Environment.html#teProtocolsBrake"><span class="hs-identifier hs-var">teProtocolsBrake</span></a></span><span> </span><span class="annot"><span class="annottext">TracerEnv
</span><a href="#local-6989586621679634145"><span class="hs-identifier hs-var">tracerEnv</span></a></span><span>
</span><span id="line-58"></span><span>        </span><span class="hs-special">}</span><span>
</span><span id="line-59"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-node/cardano-node/dist-newstyle/build/x86_64-linux/ghc-9.6.3/trace-forward-2.2.2/doc/html/trace-forward/src/Trace.Forward.Configuration.TraceObject.html#AcceptorConfiguration"><span class="hs-identifier hs-type">TOF.AcceptorConfiguration</span></a></span><span>
</span><span id="line-60"></span><span>        </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">acceptorTracer :: Tracer IO (TraceSendRecv (TraceObjectForward lo))
</span><a href="file:///home/runner/work/cardano-node/cardano-node/dist-newstyle/build/x86_64-linux/ghc-9.6.3/trace-forward-2.2.2/doc/html/trace-forward/src/Trace.Forward.Configuration.TraceObject.html#acceptorTracer"><span class="hs-identifier hs-var">TOF.acceptorTracer</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe Verbosity
-&gt; Tracer IO (TraceSendRecv (TraceObjectForward lo))
forall a. Show a =&gt; Maybe Verbosity -&gt; Tracer IO a
</span><a href="#local-6989586621679634200"><span class="hs-identifier hs-var">mkVerbosity</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Verbosity
</span><a href="#local-6989586621679634158"><span class="hs-identifier hs-var">verbosity</span></a></span><span>
</span><span id="line-61"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forwarderEndpoint :: FilePath
</span><a href="#local-6989586621679634210"><span class="hs-identifier hs-var">TOF.forwarderEndpoint</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679634197"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-62"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">whatToRequest :: NumberOfTraceObjects
</span><a href="#local-6989586621679634211"><span class="hs-identifier hs-var">TOF.whatToRequest</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word16 -&gt; NumberOfTraceObjects
</span><a href="file:///home/runner/work/cardano-node/cardano-node/dist-newstyle/build/x86_64-linux/ghc-9.6.3/trace-forward-2.2.2/doc/html/trace-forward/src/Trace.Forward.Protocol.TraceObject.Type.html#NumberOfTraceObjects"><span class="hs-identifier hs-var">TOF.NumberOfTraceObjects</span></a></span><span> </span><span class="annot"><span class="annottext">(Word16 -&gt; NumberOfTraceObjects) -&gt; Word16 -&gt; NumberOfTraceObjects
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Word16 -&gt; Maybe Word16 -&gt; Word16
forall a. a -&gt; Maybe a -&gt; a
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/Data.Maybe.html#fromMaybe"><span class="hs-identifier hs-var">fromMaybe</span></a></span><span> </span><span class="annot"><span class="annottext">Word16
</span><span class="hs-number">100</span></span><span> </span><span class="annot"><span class="annottext">Maybe Word16
</span><a href="#local-6989586621679634169"><span class="hs-identifier hs-var">loRequestNum</span></a></span><span>
</span><span id="line-63"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">shouldWeStop :: TVar Bool
</span><a href="#local-6989586621679634213"><span class="hs-identifier hs-var">TOF.shouldWeStop</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TracerEnv -&gt; TVar Bool
</span><a href="Cardano.Tracer.Environment.html#teProtocolsBrake"><span class="hs-identifier hs-var">teProtocolsBrake</span></a></span><span> </span><span class="annot"><span class="annottext">TracerEnv
</span><a href="#local-6989586621679634145"><span class="hs-identifier hs-var">tracerEnv</span></a></span><span>
</span><span id="line-64"></span><span>        </span><span class="hs-special">}</span><span>
</span><span id="line-65"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-node/cardano-node/dist-newstyle/build/x86_64-linux/ghc-9.6.3/trace-forward-2.2.2/doc/html/trace-forward/src/Trace.Forward.Configuration.DataPoint.html#AcceptorConfiguration"><span class="hs-identifier hs-type">DPF.AcceptorConfiguration</span></a></span><span>
</span><span id="line-66"></span><span>        </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">acceptorTracer :: Tracer IO (TraceSendRecv DataPointForward)
</span><a href="#local-6989586621679634215"><span class="hs-identifier hs-var">DPF.acceptorTracer</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe Verbosity -&gt; Tracer IO (TraceSendRecv DataPointForward)
forall a. Show a =&gt; Maybe Verbosity -&gt; Tracer IO a
</span><a href="#local-6989586621679634200"><span class="hs-identifier hs-var">mkVerbosity</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Verbosity
</span><a href="#local-6989586621679634158"><span class="hs-identifier hs-var">verbosity</span></a></span><span>
</span><span id="line-67"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forwarderEndpoint :: FilePath
</span><a href="#local-6989586621679634216"><span class="hs-identifier hs-var">DPF.forwarderEndpoint</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679634197"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-68"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">shouldWeStop :: TVar Bool
</span><a href="#local-6989586621679634217"><span class="hs-identifier hs-var">DPF.shouldWeStop</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TracerEnv -&gt; TVar Bool
</span><a href="Cardano.Tracer.Environment.html#teProtocolsBrake"><span class="hs-identifier hs-var">teProtocolsBrake</span></a></span><span> </span><span class="annot"><span class="annottext">TracerEnv
</span><a href="#local-6989586621679634145"><span class="hs-identifier hs-var">tracerEnv</span></a></span><span>
</span><span id="line-69"></span><span>        </span><span class="hs-special">}</span><span>
</span><span id="line-70"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-71"></span><span>
</span><span id="line-72"></span><span>  </span><span id="local-6989586621679634159"><span class="annot"><span class="annottext">initialPauseInSec :: Word
</span><a href="#local-6989586621679634159"><span class="hs-identifier hs-var hs-var">initialPauseInSec</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word
</span><span class="hs-number">1</span></span><span>
</span><span id="line-73"></span><span>
</span><span id="line-74"></span><span>  </span><span id="local-6989586621679634114"><span class="annot"><a href="#local-6989586621679634200"><span class="hs-identifier hs-type">mkVerbosity</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Show.html#Show"><span class="hs-identifier hs-type">Show</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679634114"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="Cardano.Tracer.Configuration.html#Verbosity"><span class="hs-identifier hs-type">Verbosity</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/dkmky2ci646kg44ca5yvqjsbpllsmy3f-contra-tracer-lib-contra-tracer-0.1.0.2-haddock-doc/share/doc/contra-tracer/html/src/Control.Tracer.html#Tracer"><span class="hs-identifier hs-type">Tracer</span></a></span><span> </span><span class="annot"><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679634114"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-75"></span><span>  </span><span id="local-6989586621679634200"><span class="annot"><span class="annottext">mkVerbosity :: forall a. Show a =&gt; Maybe Verbosity -&gt; Tracer IO a
</span><a href="#local-6989586621679634200"><span class="hs-identifier hs-var hs-var">mkVerbosity</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="Cardano.Tracer.Configuration.html#Maximum"><span class="hs-identifier hs-var">Maximum</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(a -&gt; FilePath) -&gt; Tracer IO FilePath -&gt; Tracer IO a
forall a' a. (a' -&gt; a) -&gt; Tracer IO a -&gt; Tracer IO a'
forall (f :: * -&gt; *) a' a.
Contravariant f =&gt;
(a' -&gt; a) -&gt; f a -&gt; f a'
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/Data.Functor.Contravariant.html#contramap"><span class="hs-identifier hs-var">contramap</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; FilePath
forall a. Show a =&gt; a -&gt; FilePath
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Show.html#show"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">Tracer IO FilePath
forall (m :: * -&gt; *). MonadIO m =&gt; Tracer m FilePath
</span><a href="file:///nix/store/dkmky2ci646kg44ca5yvqjsbpllsmy3f-contra-tracer-lib-contra-tracer-0.1.0.2-haddock-doc/share/doc/contra-tracer/html/src/Control.Tracer.html#stdoutTracer"><span class="hs-identifier hs-var">stdoutTracer</span></a></span><span>
</span><span id="line-76"></span><span>  </span><span class="annot"><a href="#local-6989586621679634200"><span class="hs-identifier hs-var">mkVerbosity</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Verbosity
</span><span class="hs-identifier">_</span></span><span>              </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer IO a
forall (m :: * -&gt; *) a. Applicative m =&gt; Tracer m a
</span><a href="file:///nix/store/dkmky2ci646kg44ca5yvqjsbpllsmy3f-contra-tracer-lib-contra-tracer-0.1.0.2-haddock-doc/share/doc/contra-tracer/html/src/Control.Tracer.html#nullTracer"><span class="hs-identifier hs-var">nullTracer</span></a></span><span>
</span><span id="line-77"></span></pre></body></html>