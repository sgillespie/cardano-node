<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Ouroboros.Consensus.Mempool.API</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">ouroboros-consensus-0.15.0.0: Consensus layer for the Ouroboros blockchain protocol</span><ul class="links" id="page-menu"><li id="quick-jump-button"><a href="#">Quick Jump</a></li><li><a href="src/Ouroboros.Consensus.Mempool.API.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>Safe-Inferred</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Ouroboros.Consensus.Mempool.API</p></div><div id="table-of-contents"><div id="contents-list"><p class="caption" onclick="window.scrollTo(0,0)">Contents</p><ul><li><a href="#g:1">Mempool</a></li><li><a href="#g:2">Transaction adding</a></li><li><a href="#g:3">Ledger state to forge on top of</a></li><li><a href="#g:4">Mempool Snapshot</a></li><li><a href="#g:5">Re-exports</a></li></ul></div></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Exposes the <code><code><a href="Ouroboros-Consensus-Mempool-API.html#t:Mempool" title="Ouroboros.Consensus.Mempool.API">Mempool</a></code></code> datatype which captures the public API of the
 Mempool. Also exposes all the types used to interact with said API.</p><p>The interface is then initialized in <a href="Ouroboros-Consensus-Mempool-Init.html">Ouroboros.Consensus.Mempool.Init</a> with
 the functions from <a href="Ouroboros-Consensus-Mempool-Update.html">Ouroboros.Consensus.Mempool.Update</a> and
 <a href="Ouroboros-Consensus-Mempool-Query.html">Ouroboros.Consensus.Mempool.Query</a>.</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><span class="keyword">data</span> <a href="#t:Mempool">Mempool</a> m blk = <a href="#v:Mempool">Mempool</a> {<ul class="subs"><li><a href="#v:addTx">addTx</a> :: <a href="Ouroboros-Consensus-Mempool-API.html#t:AddTxOnBehalfOf" title="Ouroboros.Consensus.Mempool.API">AddTxOnBehalfOf</a> -&gt; <a href="Ouroboros-Consensus-Ledger-SupportsMempool.html#t:GenTx" title="Ouroboros.Consensus.Ledger.SupportsMempool">GenTx</a> blk -&gt; m (<a href="Ouroboros-Consensus-Mempool-API.html#t:MempoolAddTxResult" title="Ouroboros.Consensus.Mempool.API">MempoolAddTxResult</a> blk)</li><li><a href="#v:removeTxs">removeTxs</a> :: [<a href="Ouroboros-Consensus-Ledger-SupportsMempool.html#t:GenTxId" title="Ouroboros.Consensus.Ledger.SupportsMempool">GenTxId</a> blk] -&gt; m ()</li><li><a href="#v:syncWithLedger">syncWithLedger</a> :: m (<a href="Ouroboros-Consensus-Mempool-API.html#t:MempoolSnapshot" title="Ouroboros.Consensus.Mempool.API">MempoolSnapshot</a> blk)</li><li><a href="#v:getSnapshot">getSnapshot</a> :: <a href="Ouroboros-Consensus-Util-MonadSTM-NormalForm.html#t:STM" title="Ouroboros.Consensus.Util.MonadSTM.NormalForm">STM</a> m (<a href="Ouroboros-Consensus-Mempool-API.html#t:MempoolSnapshot" title="Ouroboros.Consensus.Mempool.API">MempoolSnapshot</a> blk)</li><li><a href="#v:getSnapshotFor">getSnapshotFor</a> :: <a href="Ouroboros-Consensus-Mempool-API.html#t:ForgeLedgerState" title="Ouroboros.Consensus.Mempool.API">ForgeLedgerState</a> blk -&gt; <a href="Ouroboros-Consensus-Util-MonadSTM-NormalForm.html#t:STM" title="Ouroboros.Consensus.Util.MonadSTM.NormalForm">STM</a> m (<a href="Ouroboros-Consensus-Mempool-API.html#t:MempoolSnapshot" title="Ouroboros.Consensus.Mempool.API">MempoolSnapshot</a> blk)</li><li><a href="#v:getCapacity">getCapacity</a> :: <a href="Ouroboros-Consensus-Util-MonadSTM-NormalForm.html#t:STM" title="Ouroboros.Consensus.Util.MonadSTM.NormalForm">STM</a> m <a href="Ouroboros-Consensus-Mempool-Capacity.html#t:MempoolCapacityBytes" title="Ouroboros.Consensus.Mempool.Capacity">MempoolCapacityBytes</a></li><li><a href="#v:getTxSize">getTxSize</a> :: <a href="Ouroboros-Consensus-Ledger-SupportsMempool.html#t:GenTx" title="Ouroboros.Consensus.Ledger.SupportsMempool">GenTx</a> blk -&gt; <a href="Ouroboros-Consensus-Mempool-API.html#t:TxSizeInBytes" title="Ouroboros.Consensus.Mempool.API">TxSizeInBytes</a></li></ul>}</li><li class="src short"><span class="keyword">data</span> <a href="#t:AddTxOnBehalfOf">AddTxOnBehalfOf</a><ul class="subs"><li>= <a href="#v:AddTxForRemotePeer">AddTxForRemotePeer</a></li><li>| <a href="#v:AddTxForLocalClient">AddTxForLocalClient</a></li></ul></li><li class="src short"><span class="keyword">data</span> <a href="#t:MempoolAddTxResult">MempoolAddTxResult</a> blk<ul class="subs"><li>= <a href="#v:MempoolTxAdded">MempoolTxAdded</a> !(<a href="Ouroboros-Consensus-Ledger-Abstract.html#t:Validated" title="Ouroboros.Consensus.Ledger.Abstract">Validated</a> (<a href="Ouroboros-Consensus-Ledger-SupportsMempool.html#t:GenTx" title="Ouroboros.Consensus.Ledger.SupportsMempool">GenTx</a> blk))</li><li>| <a href="#v:MempoolTxRejected">MempoolTxRejected</a> !(<a href="Ouroboros-Consensus-Ledger-SupportsMempool.html#t:GenTx" title="Ouroboros.Consensus.Ledger.SupportsMempool">GenTx</a> blk) !(<a href="Ouroboros-Consensus-Ledger-SupportsMempool.html#t:ApplyTxErr" title="Ouroboros.Consensus.Ledger.SupportsMempool">ApplyTxErr</a> blk)</li></ul></li><li class="src short"><a href="#v:addLocalTxs">addLocalTxs</a> :: <span class="keyword">forall</span> m blk. <a href="Ouroboros-Consensus-Util-MonadSTM-NormalForm.html#t:MonadSTM" title="Ouroboros.Consensus.Util.MonadSTM.NormalForm">MonadSTM</a> m =&gt; <a href="Ouroboros-Consensus-Mempool-API.html#t:Mempool" title="Ouroboros.Consensus.Mempool.API">Mempool</a> m blk -&gt; [<a href="Ouroboros-Consensus-Ledger-SupportsMempool.html#t:GenTx" title="Ouroboros.Consensus.Ledger.SupportsMempool">GenTx</a> blk] -&gt; m [<a href="Ouroboros-Consensus-Mempool-API.html#t:MempoolAddTxResult" title="Ouroboros.Consensus.Mempool.API">MempoolAddTxResult</a> blk]</li><li class="src short"><a href="#v:addTxs">addTxs</a> :: <span class="keyword">forall</span> m blk. <a href="Ouroboros-Consensus-Util-MonadSTM-NormalForm.html#t:MonadSTM" title="Ouroboros.Consensus.Util.MonadSTM.NormalForm">MonadSTM</a> m =&gt; <a href="Ouroboros-Consensus-Mempool-API.html#t:Mempool" title="Ouroboros.Consensus.Mempool.API">Mempool</a> m blk -&gt; [<a href="Ouroboros-Consensus-Ledger-SupportsMempool.html#t:GenTx" title="Ouroboros.Consensus.Ledger.SupportsMempool">GenTx</a> blk] -&gt; m [<a href="Ouroboros-Consensus-Mempool-API.html#t:MempoolAddTxResult" title="Ouroboros.Consensus.Mempool.API">MempoolAddTxResult</a> blk]</li><li class="src short"><a href="#v:isMempoolTxAdded">isMempoolTxAdded</a> :: <a href="Ouroboros-Consensus-Mempool-API.html#t:MempoolAddTxResult" title="Ouroboros.Consensus.Mempool.API">MempoolAddTxResult</a> blk -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></li><li class="src short"><a href="#v:isMempoolTxRejected">isMempoolTxRejected</a> :: <a href="Ouroboros-Consensus-Mempool-API.html#t:MempoolAddTxResult" title="Ouroboros.Consensus.Mempool.API">MempoolAddTxResult</a> blk -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></li><li class="src short"><a href="#v:mempoolTxAddedToMaybe">mempoolTxAddedToMaybe</a> :: <a href="Ouroboros-Consensus-Mempool-API.html#t:MempoolAddTxResult" title="Ouroboros.Consensus.Mempool.API">MempoolAddTxResult</a> blk -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> (<a href="Ouroboros-Consensus-Ledger-Abstract.html#t:Validated" title="Ouroboros.Consensus.Ledger.Abstract">Validated</a> (<a href="Ouroboros-Consensus-Ledger-SupportsMempool.html#t:GenTx" title="Ouroboros.Consensus.Ledger.SupportsMempool">GenTx</a> blk))</li><li class="src short"><span class="keyword">data</span> <a href="#t:ForgeLedgerState">ForgeLedgerState</a> blk<ul class="subs"><li>= <a href="#v:ForgeInKnownSlot">ForgeInKnownSlot</a> <a href="Ouroboros-Consensus-Block-Abstract.html#t:SlotNo" title="Ouroboros.Consensus.Block.Abstract">SlotNo</a> (<a href="Ouroboros-Consensus-Ledger-Basics.html#t:TickedLedgerState" title="Ouroboros.Consensus.Ledger.Basics">TickedLedgerState</a> blk)</li><li>| <a href="#v:ForgeInUnknownSlot">ForgeInUnknownSlot</a> (<a href="Ouroboros-Consensus-Ledger-Basics.html#t:LedgerState" title="Ouroboros.Consensus.Ledger.Basics">LedgerState</a> blk)</li></ul></li><li class="src short"><span class="keyword">data</span> <a href="#t:MempoolSnapshot">MempoolSnapshot</a> blk = <a href="#v:MempoolSnapshot">MempoolSnapshot</a> {<ul class="subs"><li><a href="#v:snapshotTxs">snapshotTxs</a> :: [(<a href="Ouroboros-Consensus-Ledger-Abstract.html#t:Validated" title="Ouroboros.Consensus.Ledger.Abstract">Validated</a> (<a href="Ouroboros-Consensus-Ledger-SupportsMempool.html#t:GenTx" title="Ouroboros.Consensus.Ledger.SupportsMempool">GenTx</a> blk), <a href="Ouroboros-Consensus-Mempool-API.html#t:TicketNo" title="Ouroboros.Consensus.Mempool.API">TicketNo</a>)]</li><li><a href="#v:snapshotTxsAfter">snapshotTxsAfter</a> :: <a href="Ouroboros-Consensus-Mempool-API.html#t:TicketNo" title="Ouroboros.Consensus.Mempool.API">TicketNo</a> -&gt; [(<a href="Ouroboros-Consensus-Ledger-Abstract.html#t:Validated" title="Ouroboros.Consensus.Ledger.Abstract">Validated</a> (<a href="Ouroboros-Consensus-Ledger-SupportsMempool.html#t:GenTx" title="Ouroboros.Consensus.Ledger.SupportsMempool">GenTx</a> blk), <a href="Ouroboros-Consensus-Mempool-API.html#t:TicketNo" title="Ouroboros.Consensus.Mempool.API">TicketNo</a>)]</li><li><a href="#v:snapshotLookupTx">snapshotLookupTx</a> :: <a href="Ouroboros-Consensus-Mempool-API.html#t:TicketNo" title="Ouroboros.Consensus.Mempool.API">TicketNo</a> -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> (<a href="Ouroboros-Consensus-Ledger-Abstract.html#t:Validated" title="Ouroboros.Consensus.Ledger.Abstract">Validated</a> (<a href="Ouroboros-Consensus-Ledger-SupportsMempool.html#t:GenTx" title="Ouroboros.Consensus.Ledger.SupportsMempool">GenTx</a> blk))</li><li><a href="#v:snapshotHasTx">snapshotHasTx</a> :: <a href="Ouroboros-Consensus-Ledger-SupportsMempool.html#t:GenTxId" title="Ouroboros.Consensus.Ledger.SupportsMempool">GenTxId</a> blk -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></li><li><a href="#v:snapshotMempoolSize">snapshotMempoolSize</a> :: <a href="Ouroboros-Consensus-Mempool-Capacity.html#t:MempoolSize" title="Ouroboros.Consensus.Mempool.Capacity">MempoolSize</a></li><li><a href="#v:snapshotSlotNo">snapshotSlotNo</a> :: <a href="Ouroboros-Consensus-Block-Abstract.html#t:SlotNo" title="Ouroboros.Consensus.Block.Abstract">SlotNo</a></li><li><a href="#v:snapshotLedgerState">snapshotLedgerState</a> :: <a href="Ouroboros-Consensus-Ledger-Basics.html#t:TickedLedgerState" title="Ouroboros.Consensus.Ledger.Basics">TickedLedgerState</a> blk</li></ul>}</li><li class="src short"><span class="keyword">data</span> <a href="#t:TicketNo">TicketNo</a></li><li class="src short"><span class="keyword">type</span> <a href="#t:TxSizeInBytes">TxSizeInBytes</a> = <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Word.html#t:Word32" title="Data.Word">Word32</a></li><li class="src short"><a href="#v:zeroTicketNo">zeroTicketNo</a> :: <a href="Ouroboros-Consensus-Mempool-API.html#t:TicketNo" title="Ouroboros.Consensus.Mempool.API">TicketNo</a></li></ul></details></div><div id="interface"><a href="#g:1" id="g:1"><h1>Mempool</h1></a><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Mempool" class="def">Mempool</a> m blk <a href="src/Ouroboros.Consensus.Mempool.API.html#Mempool" class="link">Source</a> <a href="#t:Mempool" class="selflink">#</a></p><div class="doc"><p>Mempool</p><p>The mempool is the set of transactions that should be included in the next
 block. In principle this is a <em>set</em> of all the transactions that we receive
 from our peers. In order to avoid flooding the network with invalid
 transactions, however, we only want to keep <em>valid</em> transactions in the
 mempool. That raises the question: valid with respect to which ledger state?</p><p>We opt for a very simple answer to this: the mempool will be interpreted
 as a <em>list</em> of transactions; which are validated strictly in order, starting
 from the current ledger state. This has a number of advantages:</p><ul><li>It's simple to implement and it's efficient. In particular, no search for
   a valid subset is ever required.</li><li>When producing a block, we can simply take the longest possible prefix
   of transactions that fits in a block.</li><li>It supports wallets that submit dependent transactions (where later
   transaction depends on outputs from earlier ones).</li></ul><p>The mempool provides fairness guarantees for the case of multiple threads
 performing <code><a href="Ouroboros-Consensus-Mempool-API.html#v:addTx" title="Ouroboros.Consensus.Mempool.API">addTx</a></code> concurrently. Implementations of this interface must
 provide this guarantee, and users of this interface may rely on it.
 Specifically, multiple threads that continuously use <code><a href="Ouroboros-Consensus-Mempool-API.html#v:addTx" title="Ouroboros.Consensus.Mempool.API">addTx</a></code> will, over
 time, get a share of the mempool resource (measured by the number of txs
 only, not their sizes) roughly proportional to their &quot;weight&quot;. The weight
 depends on the <code><a href="Ouroboros-Consensus-Mempool-API.html#t:AddTxOnBehalfOf" title="Ouroboros.Consensus.Mempool.API">AddTxOnBehalfOf</a></code>: either acting on behalf of remote peers
 (<code><a href="Ouroboros-Consensus-Mempool-API.html#v:AddTxForRemotePeer" title="Ouroboros.Consensus.Mempool.API">AddTxForRemotePeer</a></code>) or on behalf of a local client
 (<code><a href="Ouroboros-Consensus-Mempool-API.html#v:AddTxForLocalClient" title="Ouroboros.Consensus.Mempool.API">AddTxForLocalClient</a></code>). The weighting for threads acting on behalf of
 remote peers is the same for all remote peers, so all remote peers will get
 a roughly equal share of the resource. The weighting for local clients is
 the same for all local clients but <em>may</em> be higher than the weighting for
 remote peers. The weighting is not unboundedly higher however, so there is
 still (weighted) fairness between remote peers and local clients. Thus
 local clients will also get a roughly equal share of the resource, but that
 share may be strictly greater than the share for each remote peer.
 Furthermore, this implies local clients cannot starve remote peers, despite
 their higher weighting.</p><p>This fairness specification in terms of weighting is deliberately
 non-specific, which allows multiple strategies. The existing default
 strategy (for the implementation in <a href="Ouroboros-Consensus-Mempool.html">Ouroboros.Consensus.Mempool</a>) is as
 follows. The design uses two FIFOs, to give strictly in-order behaviour.
 All remote peers get equal weight and all local clients get equal weight.
 The relative weight between remote and local is that if there are N remote
 peers and M local clients, each local client gets weight 1/(M+1), while all
 of the N remote peers together also get total weight 1/(M+1). This means
 individual remote peers get weight 1/(N * (M+1)). Intuitively: a single local
 client has the same weight as all the remote peers put together.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:Mempool" class="def">Mempool</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:addTx" class="def">addTx</a> :: <a href="Ouroboros-Consensus-Mempool-API.html#t:AddTxOnBehalfOf" title="Ouroboros.Consensus.Mempool.API">AddTxOnBehalfOf</a> -&gt; <a href="Ouroboros-Consensus-Ledger-SupportsMempool.html#t:GenTx" title="Ouroboros.Consensus.Ledger.SupportsMempool">GenTx</a> blk -&gt; m (<a href="Ouroboros-Consensus-Mempool-API.html#t:MempoolAddTxResult" title="Ouroboros.Consensus.Mempool.API">MempoolAddTxResult</a> blk)</dfn><div class="doc"><p>Add a single transaction to the mempool.</p><p>The new transaction provided will be validated, <em>in order</em>, against
 the ledger state obtained by applying all the transactions already in
 the Mempool to it. Transactions which are found to be invalid, with
 respect to the ledger state, are dropped, whereas valid transactions
 are added to the mempool.</p><p>Note that transactions that are invalid, with respect to the ledger
 state, will <em>never</em> be added to the mempool. However, it is possible
 that, at a given point in time, transactions which were once valid
 but are now invalid, with respect to the current ledger state, could
 exist within the mempool until they are revalidated and dropped from
 the mempool via a call to <code><a href="Ouroboros-Consensus-Mempool-API.html#v:syncWithLedger" title="Ouroboros.Consensus.Mempool.API">syncWithLedger</a></code> or by the background
 thread that watches the ledger for changes.</p><p>This action returns one of two results</p><ul><li>A <code><a href="Ouroboros-Consensus-Mempool-API.html#v:MempoolTxAdded" title="Ouroboros.Consensus.Mempool.API">MempoolTxAdded</a></code> value if the transaction provided was found to
    be valid. This transactions is now in the Mempool.</li><li>A <code><a href="Ouroboros-Consensus-Mempool-API.html#v:MempoolTxRejected" title="Ouroboros.Consensus.Mempool.API">MempoolTxRejected</a></code> value if the transaction provided was found
    to be invalid, along with its accompanying validation errors. This
    transactions is not in the Mempool.</li></ul><p>Note that this is a blocking action. It will block until the
 transaction fits into the mempool. This includes transactions that
 turn out to be invalid: the action waits for there to be space for
 the transaction before it gets validated.</p><p>Note that it is safe to use this from multiple threads concurrently.</p><p>POSTCONDITION:
 &gt; let prj = case
 &gt;       MempoolTxAdded vtx        -&gt; txForgetValidated vtx
 &gt;       MempoolTxRejected tx _err -&gt; tx
 &gt; processed &lt;- addTx wti txs
 &gt; prj processed == tx</p><p>Note that previously valid transaction that are now invalid with
 respect to the current ledger state are dropped from the mempool, but
 are not part of the first returned list (nor the second).</p><p>In principle it is possible that validation errors are transient; for
 example, it is possible that a transaction is rejected because one of
 its inputs is not <em>yet</em> available in the UTxO (the transaction it
 depends on is not yet in the chain, nor in the mempool). In practice
 however it is likely that rejected transactions will still be
 rejected later, and should just be dropped.</p><p>It is important to note one important special case of transactions
 being &quot;invalid&quot;: a transaction will <em>also</em> be considered invalid if
 <em>that very same transaction</em> is already included on the blockchain
 (after all, by definition that must mean its inputs have been used).
 Rejected transactions are therefore not necessarily a sign of
 malicious behaviour. Indeed, we would expect <em>most</em> transactions that
 are reported as invalid by <code>tryAddTxs</code> to be invalid precisely
 because they have already been included. Distinguishing between these
 two cases can be done in theory, but it is expensive unless we have
 an index of transaction hashes that have been included on the
 blockchain.</p><p>As long as we keep the mempool entirely in-memory this could live in
 <code>STM m</code>; we keep it in <code>m</code> instead to leave open the possibility of
 persistence.</p></div></li><li><dfn class="src"><a id="v:removeTxs" class="def">removeTxs</a> :: [<a href="Ouroboros-Consensus-Ledger-SupportsMempool.html#t:GenTxId" title="Ouroboros.Consensus.Ledger.SupportsMempool">GenTxId</a> blk] -&gt; m ()</dfn><div class="doc"><p>Manually remove the given transactions from the mempool.</p></div></li><li><dfn class="src"><a id="v:syncWithLedger" class="def">syncWithLedger</a> :: m (<a href="Ouroboros-Consensus-Mempool-API.html#t:MempoolSnapshot" title="Ouroboros.Consensus.Mempool.API">MempoolSnapshot</a> blk)</dfn><div class="doc"><p>Sync the transactions in the mempool with the current ledger state
  of the <code>ChainDB</code>.</p><p>The transactions that exist within the mempool will be revalidated
 against the current ledger state. Transactions which are found to be
 invalid with respect to the current ledger state, will be dropped
 from the mempool, whereas valid transactions will remain.</p><p>We keep this in <code>m</code> instead of <code>STM m</code> to leave open the possibility
 of persistence. Additionally, this makes it possible to trace the
 removal of invalid transactions.</p><p>n.b. in our current implementation, when one opens a mempool, we
 spawn a thread which performs this action whenever the <code>ChainDB</code> tip
 point changes.</p></div></li><li><dfn class="src"><a id="v:getSnapshot" class="def">getSnapshot</a> :: <a href="Ouroboros-Consensus-Util-MonadSTM-NormalForm.html#t:STM" title="Ouroboros.Consensus.Util.MonadSTM.NormalForm">STM</a> m (<a href="Ouroboros-Consensus-Mempool-API.html#t:MempoolSnapshot" title="Ouroboros.Consensus.Mempool.API">MempoolSnapshot</a> blk)</dfn><div class="doc"><p>Get a snapshot of the current mempool state. This allows for
 further pure queries on the snapshot.</p><p>This doesn't look at the ledger state at all.</p></div></li><li><dfn class="src"><a id="v:getSnapshotFor" class="def">getSnapshotFor</a> :: <a href="Ouroboros-Consensus-Mempool-API.html#t:ForgeLedgerState" title="Ouroboros.Consensus.Mempool.API">ForgeLedgerState</a> blk -&gt; <a href="Ouroboros-Consensus-Util-MonadSTM-NormalForm.html#t:STM" title="Ouroboros.Consensus.Util.MonadSTM.NormalForm">STM</a> m (<a href="Ouroboros-Consensus-Mempool-API.html#t:MempoolSnapshot" title="Ouroboros.Consensus.Mempool.API">MempoolSnapshot</a> blk)</dfn><div class="doc"><p>Get a snapshot of the mempool state that is valid with respect to
 the given ledger state</p><p>This does not update the state of the mempool.</p></div></li><li><dfn class="src"><a id="v:getCapacity" class="def">getCapacity</a> :: <a href="Ouroboros-Consensus-Util-MonadSTM-NormalForm.html#t:STM" title="Ouroboros.Consensus.Util.MonadSTM.NormalForm">STM</a> m <a href="Ouroboros-Consensus-Mempool-Capacity.html#t:MempoolCapacityBytes" title="Ouroboros.Consensus.Mempool.Capacity">MempoolCapacityBytes</a></dfn><div class="doc"><p>Get the mempool's capacity in bytes.</p><p>Note that the capacity of the Mempool, unless it is overridden with
 <code>MempoolCapacityBytesOverride</code>, can dynamically change when the
 ledger state is updated: it will be set to twice the current ledger's
 maximum transaction capacity of a block.</p><p>When the capacity happens to shrink at some point, we <em>do not</em> remove
 transactions from the Mempool to satisfy this new lower limit.
 Instead, we treat it the same way as a Mempool which is <em>at</em>
 capacity, i.e., we won't admit new transactions until some have been
 removed because they have become invalid.</p></div></li><li><dfn class="src"><a id="v:getTxSize" class="def">getTxSize</a> :: <a href="Ouroboros-Consensus-Ledger-SupportsMempool.html#t:GenTx" title="Ouroboros.Consensus.Ledger.SupportsMempool">GenTx</a> blk -&gt; <a href="Ouroboros-Consensus-Mempool-API.html#t:TxSizeInBytes" title="Ouroboros.Consensus.Mempool.API">TxSizeInBytes</a></dfn><div class="doc"><p>Return the post-serialisation size in bytes of a <code><a href="Ouroboros-Consensus-Ledger-SupportsMempool.html#t:GenTx" title="Ouroboros.Consensus.Ledger.SupportsMempool">GenTx</a></code>.</p></div></li></ul></div></td></tr></table></div></div><a href="#g:2" id="g:2"><h1>Transaction adding</h1></a><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:AddTxOnBehalfOf" class="def">AddTxOnBehalfOf</a> <a href="src/Ouroboros.Consensus.Mempool.API.html#AddTxOnBehalfOf" class="link">Source</a> <a href="#t:AddTxOnBehalfOf" class="selflink">#</a></p><div class="doc"><p>Who are we adding a tx on behalf of, a remote peer or a local client?</p><p>This affects two things:</p><ol><li value="1">how certain errors are treated: we want to be helpful to local clients.</li><li value="2">priority of service: local clients are prioritised over remote peers.</li></ol><p>See <code><a href="Ouroboros-Consensus-Mempool-API.html#t:Mempool" title="Ouroboros.Consensus.Mempool.API">Mempool</a></code> for a discussion of fairness and priority.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:AddTxForRemotePeer" class="def">AddTxForRemotePeer</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:AddTxForLocalClient" class="def">AddTxForLocalClient</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:MempoolAddTxResult" class="def">MempoolAddTxResult</a> blk <a href="src/Ouroboros.Consensus.Mempool.API.html#MempoolAddTxResult" class="link">Source</a> <a href="#t:MempoolAddTxResult" class="selflink">#</a></p><div class="doc"><p>The result of attempting to add a transaction to the mempool.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:MempoolTxAdded" class="def">MempoolTxAdded</a> !(<a href="Ouroboros-Consensus-Ledger-Abstract.html#t:Validated" title="Ouroboros.Consensus.Ledger.Abstract">Validated</a> (<a href="Ouroboros-Consensus-Ledger-SupportsMempool.html#t:GenTx" title="Ouroboros.Consensus.Ledger.SupportsMempool">GenTx</a> blk))</td><td class="doc"><p>The transaction was added to the mempool.</p></td></tr><tr><td class="src"><a id="v:MempoolTxRejected" class="def">MempoolTxRejected</a> !(<a href="Ouroboros-Consensus-Ledger-SupportsMempool.html#t:GenTx" title="Ouroboros.Consensus.Ledger.SupportsMempool">GenTx</a> blk) !(<a href="Ouroboros-Consensus-Ledger-SupportsMempool.html#t:ApplyTxErr" title="Ouroboros.Consensus.Ledger.SupportsMempool">ApplyTxErr</a> blk)</td><td class="doc"><p>The transaction was rejected and could not be added to the mempool
 for the specified reason.</p></td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:MempoolAddTxResult">Instances</h4><details id="i:MempoolAddTxResult" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:MempoolAddTxResult:Show:1"></span> (<a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Text-Show.html#t:Show" title="Text.Show">Show</a> (<a href="Ouroboros-Consensus-Ledger-SupportsMempool.html#t:GenTx" title="Ouroboros.Consensus.Ledger.SupportsMempool">GenTx</a> blk), <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Text-Show.html#t:Show" title="Text.Show">Show</a> (<a href="Ouroboros-Consensus-Ledger-Abstract.html#t:Validated" title="Ouroboros.Consensus.Ledger.Abstract">Validated</a> (<a href="Ouroboros-Consensus-Ledger-SupportsMempool.html#t:GenTx" title="Ouroboros.Consensus.Ledger.SupportsMempool">GenTx</a> blk)), <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Text-Show.html#t:Show" title="Text.Show">Show</a> (<a href="Ouroboros-Consensus-Ledger-SupportsMempool.html#t:ApplyTxErr" title="Ouroboros.Consensus.Ledger.SupportsMempool">ApplyTxErr</a> blk)) =&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Text-Show.html#t:Show" title="Text.Show">Show</a> (<a href="Ouroboros-Consensus-Mempool-API.html#t:MempoolAddTxResult" title="Ouroboros.Consensus.Mempool.API">MempoolAddTxResult</a> blk)</span> <a href="src/Ouroboros.Consensus.Mempool.API.html#line-230" class="link">Source</a> <a href="#t:MempoolAddTxResult" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:MempoolAddTxResult:Show:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Ouroboros-Consensus-Mempool-API.html">Ouroboros.Consensus.Mempool.API</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Ouroboros-Consensus-Mempool-API.html#t:MempoolAddTxResult" title="Ouroboros.Consensus.Mempool.API">MempoolAddTxResult</a> blk -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src" class="link">Source</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="Ouroboros-Consensus-Mempool-API.html#t:MempoolAddTxResult" title="Ouroboros.Consensus.Mempool.API">MempoolAddTxResult</a> blk -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-String.html#t:String" title="Data.String">String</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src" class="link">Source</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Ouroboros-Consensus-Mempool-API.html#t:MempoolAddTxResult" title="Ouroboros.Consensus.Mempool.API">MempoolAddTxResult</a> blk] -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src" class="link">Source</a> <a href="#v:showList" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:MempoolAddTxResult:Eq:2"></span> (<a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> (<a href="Ouroboros-Consensus-Ledger-SupportsMempool.html#t:GenTx" title="Ouroboros.Consensus.Ledger.SupportsMempool">GenTx</a> blk), <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> (<a href="Ouroboros-Consensus-Ledger-Abstract.html#t:Validated" title="Ouroboros.Consensus.Ledger.Abstract">Validated</a> (<a href="Ouroboros-Consensus-Ledger-SupportsMempool.html#t:GenTx" title="Ouroboros.Consensus.Ledger.SupportsMempool">GenTx</a> blk)), <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> (<a href="Ouroboros-Consensus-Ledger-SupportsMempool.html#t:ApplyTxErr" title="Ouroboros.Consensus.Ledger.SupportsMempool">ApplyTxErr</a> blk)) =&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> (<a href="Ouroboros-Consensus-Mempool-API.html#t:MempoolAddTxResult" title="Ouroboros.Consensus.Mempool.API">MempoolAddTxResult</a> blk)</span> <a href="src/Ouroboros.Consensus.Mempool.API.html#line-229" class="link">Source</a> <a href="#t:MempoolAddTxResult" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:MempoolAddTxResult:Eq:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Ouroboros-Consensus-Mempool-API.html">Ouroboros.Consensus.Mempool.API</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-61--61-">(==)</a> :: <a href="Ouroboros-Consensus-Mempool-API.html#t:MempoolAddTxResult" title="Ouroboros.Consensus.Mempool.API">MempoolAddTxResult</a> blk -&gt; <a href="Ouroboros-Consensus-Mempool-API.html#t:MempoolAddTxResult" title="Ouroboros.Consensus.Mempool.API">MempoolAddTxResult</a> blk -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/ghc-prim-0.10.0/src" class="link">Source</a> <a href="#v:-61--61-" class="selflink">#</a></p><p class="src"><a href="#v:-47--61-">(/=)</a> :: <a href="Ouroboros-Consensus-Mempool-API.html#t:MempoolAddTxResult" title="Ouroboros.Consensus.Mempool.API">MempoolAddTxResult</a> blk -&gt; <a href="Ouroboros-Consensus-Mempool-API.html#t:MempoolAddTxResult" title="Ouroboros.Consensus.Mempool.API">MempoolAddTxResult</a> blk -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/ghc-prim-0.10.0/src" class="link">Source</a> <a href="#v:-47--61-" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:addLocalTxs" class="def">addLocalTxs</a> :: <span class="keyword">forall</span> m blk. <a href="Ouroboros-Consensus-Util-MonadSTM-NormalForm.html#t:MonadSTM" title="Ouroboros.Consensus.Util.MonadSTM.NormalForm">MonadSTM</a> m =&gt; <a href="Ouroboros-Consensus-Mempool-API.html#t:Mempool" title="Ouroboros.Consensus.Mempool.API">Mempool</a> m blk -&gt; [<a href="Ouroboros-Consensus-Ledger-SupportsMempool.html#t:GenTx" title="Ouroboros.Consensus.Ledger.SupportsMempool">GenTx</a> blk] -&gt; m [<a href="Ouroboros-Consensus-Mempool-API.html#t:MempoolAddTxResult" title="Ouroboros.Consensus.Mempool.API">MempoolAddTxResult</a> blk] <a href="src/Ouroboros.Consensus.Mempool.API.html#addLocalTxs" class="link">Source</a> <a href="#v:addLocalTxs" class="selflink">#</a></p><div class="doc"><p>A wrapper around <code><a href="Ouroboros-Consensus-Mempool-API.html#v:addTx" title="Ouroboros.Consensus.Mempool.API">addTx</a></code> that adds a sequence of transactions on behalf of
 a local client. This reports more errors for local clients, see <code><a href="Ouroboros-Consensus-Ledger-SupportsMempool.html#v:Intervene" title="Ouroboros.Consensus.Ledger.SupportsMempool">Intervene</a></code>.</p><p>Note that transactions are added one by one, and can interleave with other
 concurrent threads using <code><a href="Ouroboros-Consensus-Mempool-API.html#v:addTx" title="Ouroboros.Consensus.Mempool.API">addTx</a></code>.</p><p>See <code><a href="Ouroboros-Consensus-Mempool-API.html#v:addTx" title="Ouroboros.Consensus.Mempool.API">addTx</a></code> for further details.</p></div></div><div class="top"><p class="src"><a id="v:addTxs" class="def">addTxs</a> :: <span class="keyword">forall</span> m blk. <a href="Ouroboros-Consensus-Util-MonadSTM-NormalForm.html#t:MonadSTM" title="Ouroboros.Consensus.Util.MonadSTM.NormalForm">MonadSTM</a> m =&gt; <a href="Ouroboros-Consensus-Mempool-API.html#t:Mempool" title="Ouroboros.Consensus.Mempool.API">Mempool</a> m blk -&gt; [<a href="Ouroboros-Consensus-Ledger-SupportsMempool.html#t:GenTx" title="Ouroboros.Consensus.Ledger.SupportsMempool">GenTx</a> blk] -&gt; m [<a href="Ouroboros-Consensus-Mempool-API.html#t:MempoolAddTxResult" title="Ouroboros.Consensus.Mempool.API">MempoolAddTxResult</a> blk] <a href="src/Ouroboros.Consensus.Mempool.API.html#addTxs" class="link">Source</a> <a href="#v:addTxs" class="selflink">#</a></p><div class="doc"><p>A wrapper around <code><a href="Ouroboros-Consensus-Mempool-API.html#v:addTx" title="Ouroboros.Consensus.Mempool.API">addTx</a></code> that adds a sequence of transactions on behalf of
 a remote peer.</p><p>Note that transactions are added one by one, and can interleave with other
 concurrent threads using <code><a href="Ouroboros-Consensus-Mempool-API.html#v:addTx" title="Ouroboros.Consensus.Mempool.API">addTx</a></code>.</p><p>See <code><a href="Ouroboros-Consensus-Mempool-API.html#v:addTx" title="Ouroboros.Consensus.Mempool.API">addTx</a></code> for further details.</p></div></div><div class="top"><p class="src"><a id="v:isMempoolTxAdded" class="def">isMempoolTxAdded</a> :: <a href="Ouroboros-Consensus-Mempool-API.html#t:MempoolAddTxResult" title="Ouroboros.Consensus.Mempool.API">MempoolAddTxResult</a> blk -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="src/Ouroboros.Consensus.Mempool.API.html#isMempoolTxAdded" class="link">Source</a> <a href="#v:isMempoolTxAdded" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:isMempoolTxRejected" class="def">isMempoolTxRejected</a> :: <a href="Ouroboros-Consensus-Mempool-API.html#t:MempoolAddTxResult" title="Ouroboros.Consensus.Mempool.API">MempoolAddTxResult</a> blk -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="src/Ouroboros.Consensus.Mempool.API.html#isMempoolTxRejected" class="link">Source</a> <a href="#v:isMempoolTxRejected" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:mempoolTxAddedToMaybe" class="def">mempoolTxAddedToMaybe</a> :: <a href="Ouroboros-Consensus-Mempool-API.html#t:MempoolAddTxResult" title="Ouroboros.Consensus.Mempool.API">MempoolAddTxResult</a> blk -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> (<a href="Ouroboros-Consensus-Ledger-Abstract.html#t:Validated" title="Ouroboros.Consensus.Ledger.Abstract">Validated</a> (<a href="Ouroboros-Consensus-Ledger-SupportsMempool.html#t:GenTx" title="Ouroboros.Consensus.Ledger.SupportsMempool">GenTx</a> blk)) <a href="src/Ouroboros.Consensus.Mempool.API.html#mempoolTxAddedToMaybe" class="link">Source</a> <a href="#v:mempoolTxAddedToMaybe" class="selflink">#</a></p></div><a href="#g:3" id="g:3"><h1>Ledger state to forge on top of</h1></a><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:ForgeLedgerState" class="def">ForgeLedgerState</a> blk <a href="src/Ouroboros.Consensus.Mempool.API.html#ForgeLedgerState" class="link">Source</a> <a href="#t:ForgeLedgerState" class="selflink">#</a></p><div class="doc"><p>The ledger state wrt to which we should produce a block</p><p>The transactions in the mempool will be part of the body of a block, but a
 block consists of a header and a body, and the full validation of a block
 consists of first processing its header and only then processing the body.
 This is important, because processing the header may change the state of the
 ledger: the update system might be updated, scheduled delegations might be
 applied, etc., and such changes should take effect before we validate any
 transactions.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:ForgeInKnownSlot" class="def">ForgeInKnownSlot</a> <a href="Ouroboros-Consensus-Block-Abstract.html#t:SlotNo" title="Ouroboros.Consensus.Block.Abstract">SlotNo</a> (<a href="Ouroboros-Consensus-Ledger-Basics.html#t:TickedLedgerState" title="Ouroboros.Consensus.Ledger.Basics">TickedLedgerState</a> blk)</td><td class="doc"><p>The slot number of the block is known</p><p>This will only be the case when we realized that we are the slot leader
 and we are actually producing a block. It is the caller's responsibility
 to call <code><a href="Ouroboros-Consensus-Ledger-Basics.html#v:applyChainTick" title="Ouroboros.Consensus.Ledger.Basics">applyChainTick</a></code> and produce the ticked ledger state.</p></td></tr><tr><td class="src"><a id="v:ForgeInUnknownSlot" class="def">ForgeInUnknownSlot</a> (<a href="Ouroboros-Consensus-Ledger-Basics.html#t:LedgerState" title="Ouroboros.Consensus.Ledger.Basics">LedgerState</a> blk)</td><td class="doc"><p>The slot number of the block is not yet known</p><p>When we are validating transactions before we know in which block they
 will end up, we have to make an assumption about which slot number to use
 for <code><a href="Ouroboros-Consensus-Ledger-Basics.html#v:applyChainTick" title="Ouroboros.Consensus.Ledger.Basics">applyChainTick</a></code> to prepare the ledger state; we will assume that
 they will end up in the slot after the slot at the tip of the ledger.</p></td></tr></table></div></div><a href="#g:4" id="g:4"><h1>Mempool Snapshot</h1></a><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:MempoolSnapshot" class="def">MempoolSnapshot</a> blk <a href="src/Ouroboros.Consensus.Mempool.API.html#MempoolSnapshot" class="link">Source</a> <a href="#t:MempoolSnapshot" class="selflink">#</a></p><div class="doc"><p>A pure snapshot of the contents of the mempool. It allows fetching
 information about transactions in the mempool, and fetching individual
 transactions.</p><p>This uses a transaction sequence number type for identifying transactions
 within the mempool sequence. The sequence number is local to this mempool,
 unlike the transaction hash. This allows us to ask for all transactions
 after a known sequence number, to get new transactions. It is also used to
 look up individual transactions.</p><p>Note that it is expected that <code>getTx</code> will often return <code><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Maybe.html#v:Nothing" title="Data.Maybe">Nothing</a></code>
 even for tx sequence numbers returned in previous snapshots. This happens
 when the transaction has been removed from the mempool between snapshots.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:MempoolSnapshot" class="def">MempoolSnapshot</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:snapshotTxs" class="def">snapshotTxs</a> :: [(<a href="Ouroboros-Consensus-Ledger-Abstract.html#t:Validated" title="Ouroboros.Consensus.Ledger.Abstract">Validated</a> (<a href="Ouroboros-Consensus-Ledger-SupportsMempool.html#t:GenTx" title="Ouroboros.Consensus.Ledger.SupportsMempool">GenTx</a> blk), <a href="Ouroboros-Consensus-Mempool-API.html#t:TicketNo" title="Ouroboros.Consensus.Mempool.API">TicketNo</a>)]</dfn><div class="doc"><p>Get all transactions (oldest to newest) in the mempool snapshot along
 with their ticket number.</p></div></li><li><dfn class="src"><a id="v:snapshotTxsAfter" class="def">snapshotTxsAfter</a> :: <a href="Ouroboros-Consensus-Mempool-API.html#t:TicketNo" title="Ouroboros.Consensus.Mempool.API">TicketNo</a> -&gt; [(<a href="Ouroboros-Consensus-Ledger-Abstract.html#t:Validated" title="Ouroboros.Consensus.Ledger.Abstract">Validated</a> (<a href="Ouroboros-Consensus-Ledger-SupportsMempool.html#t:GenTx" title="Ouroboros.Consensus.Ledger.SupportsMempool">GenTx</a> blk), <a href="Ouroboros-Consensus-Mempool-API.html#t:TicketNo" title="Ouroboros.Consensus.Mempool.API">TicketNo</a>)]</dfn><div class="doc"><p>Get all transactions (oldest to newest) in the mempool snapshot,
 along with their ticket number, which are associated with a ticket
 number greater than the one provided.</p></div></li><li><dfn class="src"><a id="v:snapshotLookupTx" class="def">snapshotLookupTx</a> :: <a href="Ouroboros-Consensus-Mempool-API.html#t:TicketNo" title="Ouroboros.Consensus.Mempool.API">TicketNo</a> -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> (<a href="Ouroboros-Consensus-Ledger-Abstract.html#t:Validated" title="Ouroboros.Consensus.Ledger.Abstract">Validated</a> (<a href="Ouroboros-Consensus-Ledger-SupportsMempool.html#t:GenTx" title="Ouroboros.Consensus.Ledger.SupportsMempool">GenTx</a> blk))</dfn><div class="doc"><p>Get a specific transaction from the mempool snapshot by its ticket
 number, if it exists.</p></div></li><li><dfn class="src"><a id="v:snapshotHasTx" class="def">snapshotHasTx</a> :: <a href="Ouroboros-Consensus-Ledger-SupportsMempool.html#t:GenTxId" title="Ouroboros.Consensus.Ledger.SupportsMempool">GenTxId</a> blk -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></dfn><div class="doc"><p>Determine whether a specific transaction exists within the mempool
 snapshot.</p></div></li><li><dfn class="src"><a id="v:snapshotMempoolSize" class="def">snapshotMempoolSize</a> :: <a href="Ouroboros-Consensus-Mempool-Capacity.html#t:MempoolSize" title="Ouroboros.Consensus.Mempool.Capacity">MempoolSize</a></dfn><div class="doc"><p>Get the size of the mempool snapshot.</p></div></li><li><dfn class="src"><a id="v:snapshotSlotNo" class="def">snapshotSlotNo</a> :: <a href="Ouroboros-Consensus-Block-Abstract.html#t:SlotNo" title="Ouroboros.Consensus.Block.Abstract">SlotNo</a></dfn><div class="doc"><p>The block number of the &quot;virtual block&quot; under construction</p></div></li><li><dfn class="src"><a id="v:snapshotLedgerState" class="def">snapshotLedgerState</a> :: <a href="Ouroboros-Consensus-Ledger-Basics.html#t:TickedLedgerState" title="Ouroboros.Consensus.Ledger.Basics">TickedLedgerState</a> blk</dfn><div class="doc"><p>The ledger state after all transactions in the snapshot</p></div></li></ul></div></td></tr></table></div></div><a href="#g:5" id="g:5"><h1>Re-exports</h1></a><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:TicketNo" class="def">TicketNo</a> <a href="src/Ouroboros.Consensus.Mempool.TxSeq.html#TicketNo" class="link">Source</a> <a href="#t:TicketNo" class="selflink">#</a></p><div class="doc"><p>We allocate each transaction a (monotonically increasing) ticket number
 as it enters the mempool.</p></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:TicketNo">Instances</h4><details id="i:TicketNo" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:TicketNo:Bounded:1"></span> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Prelude.html#t:Bounded" title="Prelude">Bounded</a> <a href="Ouroboros-Consensus-Mempool-API.html#t:TicketNo" title="Ouroboros.Consensus.Mempool.API">TicketNo</a></span> <a href="src/Ouroboros.Consensus.Mempool.TxSeq.html#line-48" class="link">Source</a> <a href="#t:TicketNo" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:TicketNo:Bounded:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Ouroboros-Consensus-Mempool-TxSeq.html">Ouroboros.Consensus.Mempool.TxSeq</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:minBound">minBound</a> :: <a href="Ouroboros-Consensus-Mempool-API.html#t:TicketNo" title="Ouroboros.Consensus.Mempool.API">TicketNo</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src" class="link">Source</a> <a href="#v:minBound" class="selflink">#</a></p><p class="src"><a href="#v:maxBound">maxBound</a> :: <a href="Ouroboros-Consensus-Mempool-API.html#t:TicketNo" title="Ouroboros.Consensus.Mempool.API">TicketNo</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src" class="link">Source</a> <a href="#v:maxBound" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:TicketNo:Enum:2"></span> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Prelude.html#t:Enum" title="Prelude">Enum</a> <a href="Ouroboros-Consensus-Mempool-API.html#t:TicketNo" title="Ouroboros.Consensus.Mempool.API">TicketNo</a></span> <a href="src/Ouroboros.Consensus.Mempool.TxSeq.html#line-48" class="link">Source</a> <a href="#t:TicketNo" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:TicketNo:Enum:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Ouroboros-Consensus-Mempool-TxSeq.html">Ouroboros.Consensus.Mempool.TxSeq</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:succ">succ</a> :: <a href="Ouroboros-Consensus-Mempool-API.html#t:TicketNo" title="Ouroboros.Consensus.Mempool.API">TicketNo</a> -&gt; <a href="Ouroboros-Consensus-Mempool-API.html#t:TicketNo" title="Ouroboros.Consensus.Mempool.API">TicketNo</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src" class="link">Source</a> <a href="#v:succ" class="selflink">#</a></p><p class="src"><a href="#v:pred">pred</a> :: <a href="Ouroboros-Consensus-Mempool-API.html#t:TicketNo" title="Ouroboros.Consensus.Mempool.API">TicketNo</a> -&gt; <a href="Ouroboros-Consensus-Mempool-API.html#t:TicketNo" title="Ouroboros.Consensus.Mempool.API">TicketNo</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src" class="link">Source</a> <a href="#v:pred" class="selflink">#</a></p><p class="src"><a href="#v:toEnum">toEnum</a> :: <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Ouroboros-Consensus-Mempool-API.html#t:TicketNo" title="Ouroboros.Consensus.Mempool.API">TicketNo</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src" class="link">Source</a> <a href="#v:toEnum" class="selflink">#</a></p><p class="src"><a href="#v:fromEnum">fromEnum</a> :: <a href="Ouroboros-Consensus-Mempool-API.html#t:TicketNo" title="Ouroboros.Consensus.Mempool.API">TicketNo</a> -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Int.html#t:Int" title="Data.Int">Int</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src" class="link">Source</a> <a href="#v:fromEnum" class="selflink">#</a></p><p class="src"><a href="#v:enumFrom">enumFrom</a> :: <a href="Ouroboros-Consensus-Mempool-API.html#t:TicketNo" title="Ouroboros.Consensus.Mempool.API">TicketNo</a> -&gt; [<a href="Ouroboros-Consensus-Mempool-API.html#t:TicketNo" title="Ouroboros.Consensus.Mempool.API">TicketNo</a>] <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src" class="link">Source</a> <a href="#v:enumFrom" class="selflink">#</a></p><p class="src"><a href="#v:enumFromThen">enumFromThen</a> :: <a href="Ouroboros-Consensus-Mempool-API.html#t:TicketNo" title="Ouroboros.Consensus.Mempool.API">TicketNo</a> -&gt; <a href="Ouroboros-Consensus-Mempool-API.html#t:TicketNo" title="Ouroboros.Consensus.Mempool.API">TicketNo</a> -&gt; [<a href="Ouroboros-Consensus-Mempool-API.html#t:TicketNo" title="Ouroboros.Consensus.Mempool.API">TicketNo</a>] <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src" class="link">Source</a> <a href="#v:enumFromThen" class="selflink">#</a></p><p class="src"><a href="#v:enumFromTo">enumFromTo</a> :: <a href="Ouroboros-Consensus-Mempool-API.html#t:TicketNo" title="Ouroboros.Consensus.Mempool.API">TicketNo</a> -&gt; <a href="Ouroboros-Consensus-Mempool-API.html#t:TicketNo" title="Ouroboros.Consensus.Mempool.API">TicketNo</a> -&gt; [<a href="Ouroboros-Consensus-Mempool-API.html#t:TicketNo" title="Ouroboros.Consensus.Mempool.API">TicketNo</a>] <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src" class="link">Source</a> <a href="#v:enumFromTo" class="selflink">#</a></p><p class="src"><a href="#v:enumFromThenTo">enumFromThenTo</a> :: <a href="Ouroboros-Consensus-Mempool-API.html#t:TicketNo" title="Ouroboros.Consensus.Mempool.API">TicketNo</a> -&gt; <a href="Ouroboros-Consensus-Mempool-API.html#t:TicketNo" title="Ouroboros.Consensus.Mempool.API">TicketNo</a> -&gt; <a href="Ouroboros-Consensus-Mempool-API.html#t:TicketNo" title="Ouroboros.Consensus.Mempool.API">TicketNo</a> -&gt; [<a href="Ouroboros-Consensus-Mempool-API.html#t:TicketNo" title="Ouroboros.Consensus.Mempool.API">TicketNo</a>] <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src" class="link">Source</a> <a href="#v:enumFromThenTo" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:TicketNo:Show:3"></span> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Text-Show.html#t:Show" title="Text.Show">Show</a> <a href="Ouroboros-Consensus-Mempool-API.html#t:TicketNo" title="Ouroboros.Consensus.Mempool.API">TicketNo</a></span> <a href="src/Ouroboros.Consensus.Mempool.TxSeq.html#line-47" class="link">Source</a> <a href="#t:TicketNo" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:TicketNo:Show:3"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Ouroboros-Consensus-Mempool-TxSeq.html">Ouroboros.Consensus.Mempool.TxSeq</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Ouroboros-Consensus-Mempool-API.html#t:TicketNo" title="Ouroboros.Consensus.Mempool.API">TicketNo</a> -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src" class="link">Source</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="Ouroboros-Consensus-Mempool-API.html#t:TicketNo" title="Ouroboros.Consensus.Mempool.API">TicketNo</a> -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-String.html#t:String" title="Data.String">String</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src" class="link">Source</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Ouroboros-Consensus-Mempool-API.html#t:TicketNo" title="Ouroboros.Consensus.Mempool.API">TicketNo</a>] -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src" class="link">Source</a> <a href="#v:showList" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:TicketNo:Eq:4"></span> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> <a href="Ouroboros-Consensus-Mempool-API.html#t:TicketNo" title="Ouroboros.Consensus.Mempool.API">TicketNo</a></span> <a href="src/Ouroboros.Consensus.Mempool.TxSeq.html#line-47" class="link">Source</a> <a href="#t:TicketNo" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:TicketNo:Eq:4"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Ouroboros-Consensus-Mempool-TxSeq.html">Ouroboros.Consensus.Mempool.TxSeq</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-61--61-">(==)</a> :: <a href="Ouroboros-Consensus-Mempool-API.html#t:TicketNo" title="Ouroboros.Consensus.Mempool.API">TicketNo</a> -&gt; <a href="Ouroboros-Consensus-Mempool-API.html#t:TicketNo" title="Ouroboros.Consensus.Mempool.API">TicketNo</a> -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/ghc-prim-0.10.0/src" class="link">Source</a> <a href="#v:-61--61-" class="selflink">#</a></p><p class="src"><a href="#v:-47--61-">(/=)</a> :: <a href="Ouroboros-Consensus-Mempool-API.html#t:TicketNo" title="Ouroboros.Consensus.Mempool.API">TicketNo</a> -&gt; <a href="Ouroboros-Consensus-Mempool-API.html#t:TicketNo" title="Ouroboros.Consensus.Mempool.API">TicketNo</a> -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/ghc-prim-0.10.0/src" class="link">Source</a> <a href="#v:-47--61-" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:TicketNo:Ord:5"></span> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> <a href="Ouroboros-Consensus-Mempool-API.html#t:TicketNo" title="Ouroboros.Consensus.Mempool.API">TicketNo</a></span> <a href="src/Ouroboros.Consensus.Mempool.TxSeq.html#line-47" class="link">Source</a> <a href="#t:TicketNo" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:TicketNo:Ord:5"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Ouroboros-Consensus-Mempool-TxSeq.html">Ouroboros.Consensus.Mempool.TxSeq</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:compare">compare</a> :: <a href="Ouroboros-Consensus-Mempool-API.html#t:TicketNo" title="Ouroboros.Consensus.Mempool.API">TicketNo</a> -&gt; <a href="Ouroboros-Consensus-Mempool-API.html#t:TicketNo" title="Ouroboros.Consensus.Mempool.API">TicketNo</a> -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Ord.html#t:Ordering" title="Data.Ord">Ordering</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/ghc-prim-0.10.0/src" class="link">Source</a> <a href="#v:compare" class="selflink">#</a></p><p class="src"><a href="#v:-60-">(&lt;)</a> :: <a href="Ouroboros-Consensus-Mempool-API.html#t:TicketNo" title="Ouroboros.Consensus.Mempool.API">TicketNo</a> -&gt; <a href="Ouroboros-Consensus-Mempool-API.html#t:TicketNo" title="Ouroboros.Consensus.Mempool.API">TicketNo</a> -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/ghc-prim-0.10.0/src" class="link">Source</a> <a href="#v:-60-" class="selflink">#</a></p><p class="src"><a href="#v:-60--61-">(&lt;=)</a> :: <a href="Ouroboros-Consensus-Mempool-API.html#t:TicketNo" title="Ouroboros.Consensus.Mempool.API">TicketNo</a> -&gt; <a href="Ouroboros-Consensus-Mempool-API.html#t:TicketNo" title="Ouroboros.Consensus.Mempool.API">TicketNo</a> -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/ghc-prim-0.10.0/src" class="link">Source</a> <a href="#v:-60--61-" class="selflink">#</a></p><p class="src"><a href="#v:-62-">(&gt;)</a> :: <a href="Ouroboros-Consensus-Mempool-API.html#t:TicketNo" title="Ouroboros.Consensus.Mempool.API">TicketNo</a> -&gt; <a href="Ouroboros-Consensus-Mempool-API.html#t:TicketNo" title="Ouroboros.Consensus.Mempool.API">TicketNo</a> -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/ghc-prim-0.10.0/src" class="link">Source</a> <a href="#v:-62-" class="selflink">#</a></p><p class="src"><a href="#v:-62--61-">(&gt;=)</a> :: <a href="Ouroboros-Consensus-Mempool-API.html#t:TicketNo" title="Ouroboros.Consensus.Mempool.API">TicketNo</a> -&gt; <a href="Ouroboros-Consensus-Mempool-API.html#t:TicketNo" title="Ouroboros.Consensus.Mempool.API">TicketNo</a> -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/ghc-prim-0.10.0/src" class="link">Source</a> <a href="#v:-62--61-" class="selflink">#</a></p><p class="src"><a href="#v:max">max</a> :: <a href="Ouroboros-Consensus-Mempool-API.html#t:TicketNo" title="Ouroboros.Consensus.Mempool.API">TicketNo</a> -&gt; <a href="Ouroboros-Consensus-Mempool-API.html#t:TicketNo" title="Ouroboros.Consensus.Mempool.API">TicketNo</a> -&gt; <a href="Ouroboros-Consensus-Mempool-API.html#t:TicketNo" title="Ouroboros.Consensus.Mempool.API">TicketNo</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/ghc-prim-0.10.0/src" class="link">Source</a> <a href="#v:max" class="selflink">#</a></p><p class="src"><a href="#v:min">min</a> :: <a href="Ouroboros-Consensus-Mempool-API.html#t:TicketNo" title="Ouroboros.Consensus.Mempool.API">TicketNo</a> -&gt; <a href="Ouroboros-Consensus-Mempool-API.html#t:TicketNo" title="Ouroboros.Consensus.Mempool.API">TicketNo</a> -&gt; <a href="Ouroboros-Consensus-Mempool-API.html#t:TicketNo" title="Ouroboros.Consensus.Mempool.API">TicketNo</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/ghc-prim-0.10.0/src" class="link">Source</a> <a href="#v:min" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:TicketNo:NoThunks:6"></span> <a href="Ouroboros-Consensus-Util-IOLike.html#t:NoThunks" title="Ouroboros.Consensus.Util.IOLike">NoThunks</a> <a href="Ouroboros-Consensus-Mempool-API.html#t:TicketNo" title="Ouroboros.Consensus.Mempool.API">TicketNo</a></span> <a href="src/Ouroboros.Consensus.Mempool.TxSeq.html#line-48" class="link">Source</a> <a href="#t:TicketNo" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:TicketNo:NoThunks:6"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Ouroboros-Consensus-Mempool-TxSeq.html">Ouroboros.Consensus.Mempool.TxSeq</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:noThunks">noThunks</a> :: Context -&gt; <a href="Ouroboros-Consensus-Mempool-API.html#t:TicketNo" title="Ouroboros.Consensus.Mempool.API">TicketNo</a> -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/System-IO.html#t:IO" title="System.IO">IO</a> (<a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> ThunkInfo) <a href="#v:noThunks" class="selflink">#</a></p><p class="src"><a href="#v:wNoThunks">wNoThunks</a> :: Context -&gt; <a href="Ouroboros-Consensus-Mempool-API.html#t:TicketNo" title="Ouroboros.Consensus.Mempool.API">TicketNo</a> -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/System-IO.html#t:IO" title="System.IO">IO</a> (<a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> ThunkInfo) <a href="#v:wNoThunks" class="selflink">#</a></p><p class="src"><a href="#v:showTypeOf">showTypeOf</a> :: <a href="Ouroboros-Consensus-Util-DepPair.html#t:Proxy" title="Ouroboros.Consensus.Util.DepPair">Proxy</a> <a href="Ouroboros-Consensus-Mempool-API.html#t:TicketNo" title="Ouroboros.Consensus.Mempool.API">TicketNo</a> -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-String.html#t:String" title="Data.String">String</a> <a href="#v:showTypeOf" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:TxSizeInBytes" class="def">TxSizeInBytes</a> = <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Word.html#t:Word32" title="Data.Word">Word32</a> <a href="#t:TxSizeInBytes" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:zeroTicketNo" class="def">zeroTicketNo</a> :: <a href="Ouroboros-Consensus-Mempool-API.html#t:TicketNo" title="Ouroboros.Consensus.Mempool.API">TicketNo</a> <a href="src/Ouroboros.Consensus.Mempool.TxSeq.html#zeroTicketNo" class="link">Source</a> <a href="#v:zeroTicketNo" class="selflink">#</a></p><div class="doc"><p>The transaction ticket number from which our counter starts.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.29.1</p></div></body></html>