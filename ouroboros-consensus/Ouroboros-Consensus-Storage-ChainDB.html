<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Ouroboros.Consensus.Storage.ChainDB</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">ouroboros-consensus-0.15.0.0: Consensus layer for the Ouroboros blockchain protocol</span><ul class="links" id="page-menu"><li id="quick-jump-button"><a href="#">Quick Jump</a></li><li><a href="src/Ouroboros.Consensus.Storage.ChainDB.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>Safe-Inferred</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Ouroboros.Consensus.Storage.ChainDB</p></div><div id="description"><p class="caption">Description</p><div class="doc"><p>The storage layer is a highly specialized database for storing the blockchain.
   It consists of five subcomponents:</p><ul><li>An abstract file system API, <code><a href="System-FS-API.html#v:HasFS" title="System.FS.API">HasFS</a></code>,
   that smooths out over some differences between the file systems of
   different operating systems and, more importantly, allows us to simulate
   all kinds of failures. This is then used for stress-testing the other
   components below.</li><li>The <strong><a href="Ouroboros-Consensus-Storage-ImmutableDB.html">Immutable DB</a></strong>, stores
   the part of the chain that is immutable, that is, no longer subject to
   rollback. It is an append-only database, providing efficient access to the
   chain. <code><a href="Ouroboros-Consensus-Storage-ImmutableDB-API.html#v:ImmutableDB" title="Ouroboros.Consensus.Storage.ImmutableDB.API">ImmutableDB</a></code> defines the
   immutable DB API.</li><li>The <strong><a href="Ouroboros-Consensus-Storage-VolatileDB.html">Volatile DB</a></strong>, stores the
   part of the chain near its tip. This doesn't really store a <strong>chain</strong> as
   such, but rather simply a collection of blocks from which we might
   <strong>construct</strong> a chain. <code><a href="Ouroboros-Consensus-Storage-VolatileDB-API.html#v:VolatileDB" title="Ouroboros.Consensus.Storage.VolatileDB.API">VolatileDB</a></code>
   defines the volatile DB API.</li><li>The ledger DB, stores the state of the ledger. The
   <strong><a href="Ouroboros-Consensus-Storage-LedgerDB-OnDisk.html">on disk</a></strong> part only stores
   snapshots of the ledger state that correspond to immutable blocks. The
   <strong><a href="Ouroboros-Consensus-Storage-LedgerDB-InMemory.html">in memory</a></strong> part
   stores various snapshots of the ledger state corresponding to blocks near
   the current tip of the chain, and provides an efficient way of computing
   any ledger state for the last <code>k</code> blocks of the chain.</li><li>The Chain DB finally combines all of these components. It makes decisions
   about which chains to adopt (chain selection), switches to forks when
   needed, deals with clock skew, and provides various interfaces to the rest
   of the consensus layer for things like finding out which blocks were
   invalid (so we can disconnect from the clients who sent them), cursors that
   follow the tip of the chain (so that we can inform our downstream peers of
   how our chain evolves), etc. In many ways, the chain DB is the component
   that is responsible for &quot;consensus&quot;: deciding which chain is the one true
   chain. <code><a href="Ouroboros-Consensus-Storage-ChainDB-API.html#t:ChainDB" title="Ouroboros.Consensus.Storage.ChainDB.API">ChainDB</a></code> defines the chain
   DB API.</li></ul></div></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src">module <a href="Ouroboros-Consensus-Storage-ChainDB-API.html">Ouroboros.Consensus.Storage.ChainDB.API</a></p></div><div class="top"><p class="src">module <a href="Ouroboros-Consensus-Storage-ChainDB-Impl.html">Ouroboros.Consensus.Storage.ChainDB.Impl</a></p></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.29.1</p></div></body></html>