<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE DataKinds             #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE FlexibleContexts      #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE FlexibleInstances     #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE GADTs                 #-}</span><span>
</span><span id="line-5"></span><span class="hs-pragma">{-# LANGUAGE MultiParamTypeClasses #-}</span><span>
</span><span id="line-6"></span><span class="hs-pragma">{-# LANGUAGE QuantifiedConstraints #-}</span><span>
</span><span id="line-7"></span><span class="hs-pragma">{-# LANGUAGE RankNTypes            #-}</span><span>
</span><span id="line-8"></span><span class="hs-pragma">{-# LANGUAGE RecordWildCards       #-}</span><span>
</span><span id="line-9"></span><span class="hs-pragma">{-# LANGUAGE ScopedTypeVariables   #-}</span><span>
</span><span id="line-10"></span><span class="hs-pragma">{-# LANGUAGE TypeApplications      #-}</span><span>
</span><span id="line-11"></span><span class="hs-pragma">{-# LANGUAGE TypeOperators         #-}</span><span>
</span><span id="line-12"></span><span>
</span><span id="line-13"></span><span class="hs-pragma">{-# OPTIONS_GHC -Wno-orphans #-}</span><span>
</span><span id="line-14"></span><span>
</span><span id="line-15"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Ouroboros.Consensus.HardFork.Combinator.Serialisation.SerialiseNodeToNode</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-16"></span><span>
</span><span id="line-17"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Codec.CBOR.Decoding</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Decoder</span></span><span class="hs-special">)</span><span>
</span><span id="line-18"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Codec.CBOR.Encoding</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Encoding</span></span><span class="hs-special">)</span><span>
</span><span id="line-19"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Codec.Serialise</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Serialise</span></span><span>
</span><span id="line-20"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/Control.Exception.html"><span class="hs-identifier">Control.Exception</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Exception.html#throw"><span class="hs-identifier">throw</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-21"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/Data.Proxy.html"><span class="hs-identifier">Data.Proxy</span></a></span><span>
</span><span id="line-22"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Data.SOP.BasicFunctors</span></span><span>
</span><span id="line-23"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Data.SOP.NonEmpty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">ProofNonEmpty</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">isNonEmpty</span></span><span class="hs-special">)</span><span>
</span><span id="line-24"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Data.SOP.Strict</span></span><span>
</span><span id="line-25"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Ouroboros.Consensus.Block.html"><span class="hs-identifier">Ouroboros.Consensus.Block</span></a></span><span>
</span><span id="line-26"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.AcrossEras.html"><span class="hs-identifier">Ouroboros.Consensus.HardFork.Combinator.AcrossEras</span></a></span><span>
</span><span id="line-27"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Basics.html"><span class="hs-identifier">Ouroboros.Consensus.HardFork.Combinator.Basics</span></a></span><span>
</span><span id="line-28"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Block.html"><span class="hs-identifier">Ouroboros.Consensus.HardFork.Combinator.Block</span></a></span><span>
</span><span id="line-29"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Mempool.html"><span class="hs-identifier">Ouroboros.Consensus.HardFork.Combinator.Mempool</span></a></span><span>
</span><span id="line-30"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Serialisation.Common.html"><span class="hs-identifier">Ouroboros.Consensus.HardFork.Combinator.Serialisation.Common</span></a></span><span>
</span><span id="line-31"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Serialisation.SerialiseDisk.html"><span class="hs-identifier">Ouroboros.Consensus.HardFork.Combinator.Serialisation.SerialiseDisk</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-32"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Ouroboros.Consensus.Ledger.SupportsMempool.html"><span class="hs-identifier">Ouroboros.Consensus.Ledger.SupportsMempool</span></a></span><span>
</span><span id="line-33"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Ouroboros.Consensus.Node.NetworkProtocolVersion.html"><span class="hs-identifier">Ouroboros.Consensus.Node.NetworkProtocolVersion</span></a></span><span>
</span><span id="line-34"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Ouroboros.Consensus.Node.Run.html"><span class="hs-identifier">Ouroboros.Consensus.Node.Run</span></a></span><span>
</span><span id="line-35"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Ouroboros.Consensus.Node.Serialisation.html"><span class="hs-identifier">Ouroboros.Consensus.Node.Serialisation</span></a></span><span>
</span><span id="line-36"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Ouroboros.Consensus.Storage.Serialisation.html"><span class="hs-identifier">Ouroboros.Consensus.Storage.Serialisation</span></a></span><span>
</span><span id="line-37"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Ouroboros.Consensus.TypeFamilyWrappers.html"><span class="hs-identifier">Ouroboros.Consensus.TypeFamilyWrappers</span></a></span><span>
</span><span id="line-38"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Ouroboros.Consensus.Util.html"><span class="hs-identifier">Ouroboros.Consensus.Util</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Ouroboros.Consensus.Util.html#.%3A"><span class="hs-operator">(.:)</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-39"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Ouroboros.Network.Block</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Serialised</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">unwrapCBORinCBOR</span></span><span class="hs-special">,</span><span>
</span><span id="line-40"></span><span>                     </span><span class="annot"><span class="hs-identifier">wrapCBORinCBOR</span></span><span class="hs-special">)</span><span>
</span><span id="line-41"></span><span>
</span><span id="line-42"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679911583"><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Serialisation.Common.html#SerialiseHFC"><span class="hs-identifier hs-type">SerialiseHFC</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679911583"><span class="hs-identifier hs-type">xs</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.Node.Run.html#SerialiseNodeToNodeConstraints"><span class="hs-identifier hs-type">SerialiseNodeToNodeConstraints</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Basics.html#HardForkBlock"><span class="hs-identifier hs-type">HardForkBlock</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679911583"><span class="hs-identifier hs-type">xs</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-43"></span><span>  </span><span id="local-6989586621679911808"><span class="annot"><span class="annottext">estimateBlockSize :: Header (HardForkBlock xs) -&gt; SizeInBytes
</span><a href="#local-6989586621679911808"><span class="hs-identifier hs-var hs-var hs-var hs-var">estimateBlockSize</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Header (HardForkBlock xs) -&gt; SizeInBytes
forall (xs :: [*]).
SerialiseHFC xs =&gt;
Header (HardForkBlock xs) -&gt; SizeInBytes
</span><a href="Ouroboros.Consensus.HardFork.Combinator.Serialisation.Common.html#estimateHfcBlockSize"><span class="hs-identifier hs-var">estimateHfcBlockSize</span></a></span><span>
</span><span id="line-44"></span><span>
</span><span id="line-45"></span><span class="hs-comment">{-------------------------------------------------------------------------------
  Dispatch to first era or HFC
-------------------------------------------------------------------------------}</span><span>
</span><span id="line-48"></span><span>
</span><span id="line-49"></span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Serialisation.SerialiseNodeToNode.html#dispatchEncoder"><span class="hs-identifier hs-type">dispatchEncoder</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679911586"><span class="annot"><a href="#local-6989586621679911586"><span class="hs-identifier hs-type">f</span></a></span></span><span> </span><span id="local-6989586621679911584"><span class="annot"><a href="#local-6989586621679911584"><span class="hs-identifier hs-type">xs</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-50"></span><span>                     </span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Serialisation.Common.html#SerialiseHFC"><span class="hs-identifier hs-type">SerialiseHFC</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679911584"><span class="hs-identifier hs-type">xs</span></a></span><span>
</span><span id="line-51"></span><span>                   </span><span class="hs-special">,</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679911585"><span class="annot"><a href="#local-6989586621679911585"><span class="hs-identifier hs-type">blk</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.Node.Run.html#SerialiseNodeToNodeConstraints"><span class="hs-identifier hs-type">SerialiseNodeToNodeConstraints</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679911585"><span class="hs-identifier hs-type">blk</span></a></span><span>
</span><span id="line-52"></span><span>                              </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.Node.Serialisation.html#SerialiseNodeToNode"><span class="hs-identifier hs-type">SerialiseNodeToNode</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679911585"><span class="hs-identifier hs-type">blk</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679911586"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679911585"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-53"></span><span>                   </span><span class="hs-special">)</span><span>
</span><span id="line-54"></span><span>                </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.Block.Abstract.html#CodecConfig"><span class="hs-identifier hs-type">CodecConfig</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Basics.html#HardForkBlock"><span class="hs-identifier hs-type">HardForkBlock</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679911584"><span class="hs-identifier hs-type">xs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-55"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.Node.NetworkProtocolVersion.html#BlockNodeToNodeVersion"><span class="hs-identifier hs-type">BlockNodeToNodeVersion</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Basics.html#HardForkBlock"><span class="hs-identifier hs-type">HardForkBlock</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679911584"><span class="hs-identifier hs-type">xs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-56"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">NS</span></span><span> </span><span class="annot"><a href="#local-6989586621679911586"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679911584"><span class="hs-identifier hs-type">xs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Encoding</span></span><span>
</span><span id="line-57"></span><span id="dispatchEncoder"><span class="annot"><span class="annottext">dispatchEncoder :: forall (f :: * -&gt; *) (xs :: [*]).
(SerialiseHFC xs,
 forall blk.
 SerialiseNodeToNodeConstraints blk =&gt;
 SerialiseNodeToNode blk (f blk)) =&gt;
CodecConfig (HardForkBlock xs)
-&gt; BlockNodeToNodeVersion (HardForkBlock xs) -&gt; NS f xs -&gt; Encoding
</span><a href="Ouroboros.Consensus.HardFork.Combinator.Serialisation.SerialiseNodeToNode.html#dispatchEncoder"><span class="hs-identifier hs-var hs-var">dispatchEncoder</span></a></span></span><span> </span><span id="local-6989586621679911827"><span class="annot"><span class="annottext">CodecConfig (HardForkBlock xs)
</span><a href="#local-6989586621679911827"><span class="hs-identifier hs-var">ccfg</span></a></span></span><span> </span><span id="local-6989586621679911828"><span class="annot"><span class="annottext">BlockNodeToNodeVersion (HardForkBlock xs)
</span><a href="#local-6989586621679911828"><span class="hs-identifier hs-var">version</span></a></span></span><span> </span><span id="local-6989586621679911829"><span class="annot"><span class="annottext">NS f xs
</span><a href="#local-6989586621679911829"><span class="hs-identifier hs-var">ns</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-58"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Proxy xs -&gt; ProofNonEmpty xs
forall {a} (xs :: [a]) (proxy :: [a] -&gt; *).
IsNonEmpty xs =&gt;
proxy xs -&gt; ProofNonEmpty xs
forall (proxy :: [*] -&gt; *). proxy xs -&gt; ProofNonEmpty xs
</span><span class="hs-identifier hs-var">isNonEmpty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: [*]). Proxy t
forall {k} (t :: k). Proxy t
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/Data.Proxy.html#Proxy"><span class="hs-identifier hs-var">Proxy</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679911584"><span class="hs-identifier hs-type">xs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-59"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">ProofNonEmpty</span></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-60"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NP CodecConfig xs
</span><a href="#local-6989586621679911848"><span class="hs-identifier hs-var">ccfgs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">BlockNodeToNodeVersion (HardForkBlock xs)
HardForkNodeToNodeVersion xs
</span><a href="#local-6989586621679911828"><span class="hs-identifier hs-var">version</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">NS f xs
</span><a href="#local-6989586621679911829"><span class="hs-identifier hs-var">ns</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-61"></span><span>          </span><span class="hs-special">(</span><span id="local-6989586621679911853"><span class="annot"><span class="annottext">CodecConfig x
</span><a href="#local-6989586621679911853"><span class="hs-identifier hs-var">c0</span></a></span></span><span> </span><span class="annot"><span class="hs-operator hs-type">:*</span></span><span> </span><span class="annot"><span class="annottext">NP CodecConfig xs1
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Serialisation.Common.html#HardForkNodeToNodeDisabled"><span class="hs-identifier hs-type">HardForkNodeToNodeDisabled</span></a></span><span> </span><span id="local-6989586621679911859"><span class="annot"><span class="annottext">BlockNodeToNodeVersion x
</span><a href="#local-6989586621679911859"><span class="hs-identifier hs-var">v0</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Z</span></span><span> </span><span id="local-6989586621679911867"><span class="annot"><span class="annottext">f x
</span><a href="#local-6989586621679911867"><span class="hs-identifier hs-var">x0</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-62"></span><span>            </span><span class="annot"><span class="annottext">CodecConfig x -&gt; BlockNodeToNodeVersion x -&gt; f x -&gt; Encoding
forall blk a.
SerialiseNodeToNode blk a =&gt;
CodecConfig blk -&gt; BlockNodeToNodeVersion blk -&gt; a -&gt; Encoding
</span><a href="Ouroboros.Consensus.Node.Serialisation.html#encodeNodeToNode"><span class="hs-identifier hs-var">encodeNodeToNode</span></a></span><span> </span><span class="annot"><span class="annottext">CodecConfig x
</span><a href="#local-6989586621679911853"><span class="hs-identifier hs-var">c0</span></a></span><span> </span><span class="annot"><span class="annottext">BlockNodeToNodeVersion x
BlockNodeToNodeVersion x
</span><a href="#local-6989586621679911859"><span class="hs-identifier hs-var">v0</span></a></span><span> </span><span class="annot"><span class="annottext">f x
</span><a href="#local-6989586621679911867"><span class="hs-identifier hs-var">x0</span></a></span><span>
</span><span id="line-63"></span><span>          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NP CodecConfig xs
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Serialisation.Common.html#HardForkNodeToNodeDisabled"><span class="hs-identifier hs-type">HardForkNodeToNodeDisabled</span></a></span><span> </span><span class="annot"><span class="annottext">BlockNodeToNodeVersion x
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">S</span></span><span> </span><span id="local-6989586621679911879"><span class="annot"><span class="annottext">NS f xs1
</span><a href="#local-6989586621679911879"><span class="hs-identifier hs-var">later</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-64"></span><span>            </span><span class="annot"><span class="annottext">HardForkEncoderException -&gt; Encoding
forall a e. Exception e =&gt; e -&gt; a
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Exception.html#throw"><span class="hs-identifier hs-var">throw</span></a></span><span> </span><span class="annot"><span class="annottext">(HardForkEncoderException -&gt; Encoding)
-&gt; HardForkEncoderException -&gt; Encoding
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">NS SingleEraInfo xs1 -&gt; HardForkEncoderException
forall (xs :: [*]).
SListI xs =&gt;
NS SingleEraInfo xs -&gt; HardForkEncoderException
</span><a href="Ouroboros.Consensus.HardFork.Combinator.Serialisation.Common.html#futureEraException"><span class="hs-identifier hs-var">futureEraException</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NS f xs1 -&gt; NS SingleEraInfo xs1
forall (xs :: [*]) (f :: * -&gt; *).
All SingleEraBlock xs =&gt;
NS f xs -&gt; NS SingleEraInfo xs
</span><a href="Ouroboros.Consensus.HardFork.Combinator.Serialisation.Common.html#notFirstEra"><span class="hs-identifier hs-var">notFirstEra</span></a></span><span> </span><span class="annot"><span class="annottext">NS f xs1
</span><a href="#local-6989586621679911879"><span class="hs-identifier hs-var">later</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-65"></span><span>          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NP CodecConfig xs
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Serialisation.Common.html#HardForkNodeToNodeEnabled"><span class="hs-identifier hs-type">HardForkNodeToNodeEnabled</span></a></span><span> </span><span class="annot"><span class="annottext">HardForkSpecificNodeToNodeVersion
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679911883"><span class="annot"><span class="annottext">NP WrapNodeToNodeVersion xs
</span><a href="#local-6989586621679911883"><span class="hs-identifier hs-var">versions</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">NS f xs
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-66"></span><span>            </span><span class="annot"><span class="annottext">NP (f -.-&gt; K Encoding) xs -&gt; NS f xs -&gt; Encoding
forall (xs :: [*]) (f :: * -&gt; *).
SListI xs =&gt;
NP (f -.-&gt; K Encoding) xs -&gt; NS f xs -&gt; Encoding
</span><a href="Ouroboros.Consensus.HardFork.Combinator.Serialisation.Common.html#encodeNS"><span class="hs-identifier hs-var">encodeNS</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy SerialiseConstraintsHFC
-&gt; (forall a.
    SerialiseConstraintsHFC a =&gt;
    CodecConfig a
    -&gt; WrapNodeToNodeVersion a -&gt; (-.-&gt;) f (K Encoding) a)
-&gt; Prod NP CodecConfig xs
-&gt; NP WrapNodeToNodeVersion xs
-&gt; NP (f -.-&gt; K Encoding) xs
forall {k} {l} (h :: (k -&gt; *) -&gt; l -&gt; *) (c :: k -&gt; Constraint)
       (xs :: l) (proxy :: (k -&gt; Constraint) -&gt; *) (f :: k -&gt; *)
       (f' :: k -&gt; *) (f'' :: k -&gt; *).
(AllN (Prod h) c xs, HAp h, HAp (Prod h)) =&gt;
proxy c
-&gt; (forall (a :: k). c a =&gt; f a -&gt; f' a -&gt; f'' a)
-&gt; Prod h f xs
-&gt; h f' xs
-&gt; h f'' xs
</span><span class="hs-identifier hs-var">hczipWith</span></span><span> </span><span class="annot"><span class="annottext">Proxy SerialiseConstraintsHFC
</span><a href="Ouroboros.Consensus.HardFork.Combinator.Serialisation.Common.html#pSHFC"><span class="hs-identifier hs-var">pSHFC</span></a></span><span> </span><span class="annot"><span class="annottext">CodecConfig a -&gt; WrapNodeToNodeVersion a -&gt; (-.-&gt;) f (K Encoding) a
forall blk.
SerialiseNodeToNodeConstraints blk =&gt;
CodecConfig blk
-&gt; WrapNodeToNodeVersion blk -&gt; (-.-&gt;) f (K Encoding) blk
forall a.
SerialiseConstraintsHFC a =&gt;
CodecConfig a -&gt; WrapNodeToNodeVersion a -&gt; (-.-&gt;) f (K Encoding) a
</span><a href="#local-6989586621679911887"><span class="hs-identifier hs-var">aux</span></a></span><span> </span><span class="annot"><span class="annottext">NP CodecConfig xs
Prod NP CodecConfig xs
</span><a href="#local-6989586621679911848"><span class="hs-identifier hs-var">ccfgs</span></a></span><span> </span><span class="annot"><span class="annottext">NP WrapNodeToNodeVersion xs
</span><a href="#local-6989586621679911883"><span class="hs-identifier hs-var">versions</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">NS f xs
</span><a href="#local-6989586621679911829"><span class="hs-identifier hs-var">ns</span></a></span><span>
</span><span id="line-67"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-68"></span><span>    </span><span id="local-6989586621679911848"><span class="annot"><span class="annottext">ccfgs :: NP CodecConfig xs
</span><a href="#local-6989586621679911848"><span class="hs-identifier hs-var hs-var">ccfgs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PerEraCodecConfig xs -&gt; NP CodecConfig xs
forall (xs :: [*]). PerEraCodecConfig xs -&gt; NP CodecConfig xs
</span><a href="Ouroboros.Consensus.HardFork.Combinator.AcrossEras.html#getPerEraCodecConfig"><span class="hs-identifier hs-var">getPerEraCodecConfig</span></a></span><span> </span><span class="annot"><span class="annottext">(PerEraCodecConfig xs -&gt; NP CodecConfig xs)
-&gt; PerEraCodecConfig xs -&gt; NP CodecConfig xs
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">CodecConfig (HardForkBlock xs) -&gt; PerEraCodecConfig xs
forall (xs :: [*]).
CodecConfig (HardForkBlock xs) -&gt; PerEraCodecConfig xs
</span><a href="Ouroboros.Consensus.HardFork.Combinator.Basics.html#hardForkCodecConfigPerEra"><span class="hs-identifier hs-var">hardForkCodecConfigPerEra</span></a></span><span> </span><span class="annot"><span class="annottext">CodecConfig (HardForkBlock xs)
</span><a href="#local-6989586621679911827"><span class="hs-identifier hs-var">ccfg</span></a></span><span>
</span><span id="line-69"></span><span>
</span><span id="line-70"></span><span>    </span><span class="annot"><a href="#local-6989586621679911887"><span class="hs-identifier hs-type">aux</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679911663"><span class="annot"><a href="#local-6989586621679911663"><span class="hs-identifier hs-type">blk</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Ouroboros.Consensus.Node.Run.html#SerialiseNodeToNodeConstraints"><span class="hs-identifier hs-type">SerialiseNodeToNodeConstraints</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679911663"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-71"></span><span>        </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.Block.Abstract.html#CodecConfig"><span class="hs-identifier hs-type">CodecConfig</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679911663"><span class="hs-identifier hs-type">blk</span></a></span><span>
</span><span id="line-72"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.TypeFamilyWrappers.html#WrapNodeToNodeVersion"><span class="hs-identifier hs-type">WrapNodeToNodeVersion</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679911663"><span class="hs-identifier hs-type">blk</span></a></span><span>
</span><span id="line-73"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679911586"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">-.-&gt;</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">K</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Encoding</span></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679911663"><span class="hs-identifier hs-type">blk</span></a></span><span>
</span><span id="line-74"></span><span>    </span><span id="local-6989586621679911887"><span class="annot"><span class="annottext">aux :: forall blk.
SerialiseNodeToNodeConstraints blk =&gt;
CodecConfig blk
-&gt; WrapNodeToNodeVersion blk -&gt; (-.-&gt;) f (K Encoding) blk
</span><a href="#local-6989586621679911887"><span class="hs-identifier hs-var hs-var">aux</span></a></span></span><span> </span><span id="local-6989586621679911895"><span class="annot"><span class="annottext">CodecConfig blk
</span><a href="#local-6989586621679911895"><span class="hs-identifier hs-var">ccfg'</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Ouroboros.Consensus.TypeFamilyWrappers.html#WrapNodeToNodeVersion"><span class="hs-identifier hs-type">WrapNodeToNodeVersion</span></a></span><span> </span><span id="local-6989586621679911897"><span class="annot"><span class="annottext">BlockNodeToNodeVersion blk
</span><a href="#local-6989586621679911897"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(f blk -&gt; K Encoding blk) -&gt; (-.-&gt;) f (K Encoding) blk
forall {k} (f :: k -&gt; *) (g :: k -&gt; *) (a :: k).
(f a -&gt; g a) -&gt; (-.-&gt;) f g a
</span><span class="hs-identifier hs-var">Fn</span></span><span> </span><span class="annot"><span class="annottext">((f blk -&gt; K Encoding blk) -&gt; (-.-&gt;) f (K Encoding) blk)
-&gt; (f blk -&gt; K Encoding blk) -&gt; (-.-&gt;) f (K Encoding) blk
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Encoding -&gt; K Encoding blk
forall k a (b :: k). a -&gt; K a b
</span><span class="hs-identifier hs-var">K</span></span><span> </span><span class="annot"><span class="annottext">(Encoding -&gt; K Encoding blk)
-&gt; (f blk -&gt; Encoding) -&gt; f blk -&gt; K Encoding blk
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">CodecConfig blk -&gt; BlockNodeToNodeVersion blk -&gt; f blk -&gt; Encoding
forall blk a.
SerialiseNodeToNode blk a =&gt;
CodecConfig blk -&gt; BlockNodeToNodeVersion blk -&gt; a -&gt; Encoding
</span><a href="Ouroboros.Consensus.Node.Serialisation.html#encodeNodeToNode"><span class="hs-identifier hs-var">encodeNodeToNode</span></a></span><span> </span><span class="annot"><span class="annottext">CodecConfig blk
</span><a href="#local-6989586621679911895"><span class="hs-identifier hs-var">ccfg'</span></a></span><span> </span><span class="annot"><span class="annottext">BlockNodeToNodeVersion blk
</span><a href="#local-6989586621679911897"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-75"></span><span>
</span><span id="line-76"></span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Serialisation.SerialiseNodeToNode.html#dispatchDecoder"><span class="hs-identifier hs-type">dispatchDecoder</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679911680"><span class="annot"><a href="#local-6989586621679911680"><span class="hs-identifier hs-type">f</span></a></span></span><span> </span><span id="local-6989586621679911678"><span class="annot"><a href="#local-6989586621679911678"><span class="hs-identifier hs-type">xs</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-77"></span><span>                     </span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Serialisation.Common.html#SerialiseHFC"><span class="hs-identifier hs-type">SerialiseHFC</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679911678"><span class="hs-identifier hs-type">xs</span></a></span><span>
</span><span id="line-78"></span><span>                   </span><span class="hs-special">,</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679911679"><span class="annot"><a href="#local-6989586621679911679"><span class="hs-identifier hs-type">blk</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.Node.Run.html#SerialiseNodeToNodeConstraints"><span class="hs-identifier hs-type">SerialiseNodeToNodeConstraints</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679911679"><span class="hs-identifier hs-type">blk</span></a></span><span>
</span><span id="line-79"></span><span>                              </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.Node.Serialisation.html#SerialiseNodeToNode"><span class="hs-identifier hs-type">SerialiseNodeToNode</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679911679"><span class="hs-identifier hs-type">blk</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679911680"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679911679"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-80"></span><span>                   </span><span class="hs-special">)</span><span>
</span><span id="line-81"></span><span>                </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.Block.Abstract.html#CodecConfig"><span class="hs-identifier hs-type">CodecConfig</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Basics.html#HardForkBlock"><span class="hs-identifier hs-type">HardForkBlock</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679911678"><span class="hs-identifier hs-type">xs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-82"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.Node.NetworkProtocolVersion.html#BlockNodeToNodeVersion"><span class="hs-identifier hs-type">BlockNodeToNodeVersion</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Basics.html#HardForkBlock"><span class="hs-identifier hs-type">HardForkBlock</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679911678"><span class="hs-identifier hs-type">xs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-83"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679911681"><span class="annot"><a href="#local-6989586621679911681"><span class="hs-identifier hs-type">s</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Decoder</span></span><span> </span><span class="annot"><a href="#local-6989586621679911681"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">NS</span></span><span> </span><span class="annot"><a href="#local-6989586621679911680"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679911678"><span class="hs-identifier hs-type">xs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-84"></span><span id="dispatchDecoder"><span class="annot"><span class="annottext">dispatchDecoder :: forall (f :: * -&gt; *) (xs :: [*]).
(SerialiseHFC xs,
 forall blk.
 SerialiseNodeToNodeConstraints blk =&gt;
 SerialiseNodeToNode blk (f blk)) =&gt;
CodecConfig (HardForkBlock xs)
-&gt; BlockNodeToNodeVersion (HardForkBlock xs)
-&gt; forall s. Decoder s (NS f xs)
</span><a href="Ouroboros.Consensus.HardFork.Combinator.Serialisation.SerialiseNodeToNode.html#dispatchDecoder"><span class="hs-identifier hs-var hs-var">dispatchDecoder</span></a></span></span><span> </span><span id="local-6989586621679911910"><span class="annot"><span class="annottext">CodecConfig (HardForkBlock xs)
</span><a href="#local-6989586621679911910"><span class="hs-identifier hs-var">ccfg</span></a></span></span><span> </span><span id="local-6989586621679911911"><span class="annot"><span class="annottext">BlockNodeToNodeVersion (HardForkBlock xs)
</span><a href="#local-6989586621679911911"><span class="hs-identifier hs-var">version</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-85"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Proxy xs -&gt; ProofNonEmpty xs
forall {a} (xs :: [a]) (proxy :: [a] -&gt; *).
IsNonEmpty xs =&gt;
proxy xs -&gt; ProofNonEmpty xs
forall (proxy :: [*] -&gt; *). proxy xs -&gt; ProofNonEmpty xs
</span><span class="hs-identifier hs-var">isNonEmpty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: [*]). Proxy t
forall {k} (t :: k). Proxy t
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/Data.Proxy.html#Proxy"><span class="hs-identifier hs-var">Proxy</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679911678"><span class="hs-identifier hs-type">xs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-86"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">ProofNonEmpty</span></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-87"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NP CodecConfig xs
</span><a href="#local-6989586621679911922"><span class="hs-identifier hs-var">ccfgs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">BlockNodeToNodeVersion (HardForkBlock xs)
HardForkNodeToNodeVersion xs
</span><a href="#local-6989586621679911911"><span class="hs-identifier hs-var">version</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-88"></span><span>          </span><span class="hs-special">(</span><span id="local-6989586621679911927"><span class="annot"><span class="annottext">CodecConfig x
</span><a href="#local-6989586621679911927"><span class="hs-identifier hs-var">c0</span></a></span></span><span> </span><span class="annot"><span class="hs-operator hs-type">:*</span></span><span> </span><span class="annot"><span class="annottext">NP CodecConfig xs1
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Serialisation.Common.html#HardForkNodeToNodeDisabled"><span class="hs-identifier hs-type">HardForkNodeToNodeDisabled</span></a></span><span> </span><span id="local-6989586621679911935"><span class="annot"><span class="annottext">BlockNodeToNodeVersion x
</span><a href="#local-6989586621679911935"><span class="hs-identifier hs-var">v0</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-89"></span><span>            </span><span class="annot"><span class="annottext">f x -&gt; NS f xs
f x -&gt; NS f (x : xs1)
forall {k} (f :: k -&gt; *) (x :: k) (xs1 :: [k]).
f x -&gt; NS f (x : xs1)
</span><span class="hs-identifier hs-var">Z</span></span><span> </span><span class="annot"><span class="annottext">(f x -&gt; NS f xs) -&gt; Decoder s (f x) -&gt; Decoder s (NS f xs)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">CodecConfig x
-&gt; BlockNodeToNodeVersion x -&gt; forall s. Decoder s (f x)
forall blk a.
SerialiseNodeToNode blk a =&gt;
CodecConfig blk
-&gt; BlockNodeToNodeVersion blk -&gt; forall s. Decoder s a
</span><a href="Ouroboros.Consensus.Node.Serialisation.html#decodeNodeToNode"><span class="hs-identifier hs-var">decodeNodeToNode</span></a></span><span> </span><span class="annot"><span class="annottext">CodecConfig x
</span><a href="#local-6989586621679911927"><span class="hs-identifier hs-var">c0</span></a></span><span> </span><span class="annot"><span class="annottext">BlockNodeToNodeVersion x
BlockNodeToNodeVersion x
</span><a href="#local-6989586621679911935"><span class="hs-identifier hs-var">v0</span></a></span><span>
</span><span id="line-90"></span><span>          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NP CodecConfig xs
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Serialisation.Common.html#HardForkNodeToNodeEnabled"><span class="hs-identifier hs-type">HardForkNodeToNodeEnabled</span></a></span><span> </span><span class="annot"><span class="annottext">HardForkSpecificNodeToNodeVersion
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679911938"><span class="annot"><span class="annottext">NP WrapNodeToNodeVersion xs
</span><a href="#local-6989586621679911938"><span class="hs-identifier hs-var">versions</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-91"></span><span>            </span><span class="annot"><span class="annottext">NP (Decoder s :.: f) xs -&gt; Decoder s (NS f xs)
forall (xs :: [*]) s (f :: * -&gt; *).
SListI xs =&gt;
NP (Decoder s :.: f) xs -&gt; Decoder s (NS f xs)
</span><a href="Ouroboros.Consensus.HardFork.Combinator.Serialisation.Common.html#decodeNS"><span class="hs-identifier hs-var">decodeNS</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy SerialiseConstraintsHFC
-&gt; (forall a.
    SerialiseConstraintsHFC a =&gt;
    CodecConfig a -&gt; WrapNodeToNodeVersion a -&gt; (:.:) (Decoder s) f a)
-&gt; Prod NP CodecConfig xs
-&gt; NP WrapNodeToNodeVersion xs
-&gt; NP (Decoder s :.: f) xs
forall {k} {l} (h :: (k -&gt; *) -&gt; l -&gt; *) (c :: k -&gt; Constraint)
       (xs :: l) (proxy :: (k -&gt; Constraint) -&gt; *) (f :: k -&gt; *)
       (f' :: k -&gt; *) (f'' :: k -&gt; *).
(AllN (Prod h) c xs, HAp h, HAp (Prod h)) =&gt;
proxy c
-&gt; (forall (a :: k). c a =&gt; f a -&gt; f' a -&gt; f'' a)
-&gt; Prod h f xs
-&gt; h f' xs
-&gt; h f'' xs
</span><span class="hs-identifier hs-var">hczipWith</span></span><span> </span><span class="annot"><span class="annottext">Proxy SerialiseConstraintsHFC
</span><a href="Ouroboros.Consensus.HardFork.Combinator.Serialisation.Common.html#pSHFC"><span class="hs-identifier hs-var">pSHFC</span></a></span><span> </span><span class="annot"><span class="annottext">CodecConfig a -&gt; WrapNodeToNodeVersion a -&gt; (:.:) (Decoder s) f a
CodecConfig a
-&gt; WrapNodeToNodeVersion a -&gt; forall s. (:.:) (Decoder s) f a
forall blk.
SerialiseNodeToNodeConstraints blk =&gt;
CodecConfig blk
-&gt; WrapNodeToNodeVersion blk -&gt; forall s. (:.:) (Decoder s) f blk
forall a.
SerialiseConstraintsHFC a =&gt;
CodecConfig a -&gt; WrapNodeToNodeVersion a -&gt; (:.:) (Decoder s) f a
</span><a href="#local-6989586621679911940"><span class="hs-identifier hs-var">aux</span></a></span><span> </span><span class="annot"><span class="annottext">NP CodecConfig xs
Prod NP CodecConfig xs
</span><a href="#local-6989586621679911922"><span class="hs-identifier hs-var">ccfgs</span></a></span><span> </span><span class="annot"><span class="annottext">NP WrapNodeToNodeVersion xs
</span><a href="#local-6989586621679911938"><span class="hs-identifier hs-var">versions</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-92"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-93"></span><span>    </span><span id="local-6989586621679911922"><span class="annot"><span class="annottext">ccfgs :: NP CodecConfig xs
</span><a href="#local-6989586621679911922"><span class="hs-identifier hs-var hs-var">ccfgs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PerEraCodecConfig xs -&gt; NP CodecConfig xs
forall (xs :: [*]). PerEraCodecConfig xs -&gt; NP CodecConfig xs
</span><a href="Ouroboros.Consensus.HardFork.Combinator.AcrossEras.html#getPerEraCodecConfig"><span class="hs-identifier hs-var">getPerEraCodecConfig</span></a></span><span> </span><span class="annot"><span class="annottext">(PerEraCodecConfig xs -&gt; NP CodecConfig xs)
-&gt; PerEraCodecConfig xs -&gt; NP CodecConfig xs
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">CodecConfig (HardForkBlock xs) -&gt; PerEraCodecConfig xs
forall (xs :: [*]).
CodecConfig (HardForkBlock xs) -&gt; PerEraCodecConfig xs
</span><a href="Ouroboros.Consensus.HardFork.Combinator.Basics.html#hardForkCodecConfigPerEra"><span class="hs-identifier hs-var">hardForkCodecConfigPerEra</span></a></span><span> </span><span class="annot"><span class="annottext">CodecConfig (HardForkBlock xs)
</span><a href="#local-6989586621679911910"><span class="hs-identifier hs-var">ccfg</span></a></span><span>
</span><span id="line-94"></span><span>
</span><span id="line-95"></span><span>    </span><span class="annot"><a href="#local-6989586621679911940"><span class="hs-identifier hs-type">aux</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679911707"><span class="annot"><a href="#local-6989586621679911707"><span class="hs-identifier hs-type">blk</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Ouroboros.Consensus.Node.Run.html#SerialiseNodeToNodeConstraints"><span class="hs-identifier hs-type">SerialiseNodeToNodeConstraints</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679911707"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-96"></span><span>        </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.Block.Abstract.html#CodecConfig"><span class="hs-identifier hs-type">CodecConfig</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679911707"><span class="hs-identifier hs-type">blk</span></a></span><span>
</span><span id="line-97"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.TypeFamilyWrappers.html#WrapNodeToNodeVersion"><span class="hs-identifier hs-type">WrapNodeToNodeVersion</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679911707"><span class="hs-identifier hs-type">blk</span></a></span><span>
</span><span id="line-98"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679911706"><span class="annot"><a href="#local-6989586621679911706"><span class="hs-identifier hs-type">s</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Decoder</span></span><span> </span><span class="annot"><a href="#local-6989586621679911706"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">:.:</span></span><span> </span><span class="annot"><a href="#local-6989586621679911680"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679911707"><span class="hs-identifier hs-type">blk</span></a></span><span>
</span><span id="line-99"></span><span>    </span><span id="local-6989586621679911940"><span class="annot"><span class="annottext">aux :: forall blk.
SerialiseNodeToNodeConstraints blk =&gt;
CodecConfig blk
-&gt; WrapNodeToNodeVersion blk -&gt; forall s. (:.:) (Decoder s) f blk
</span><a href="#local-6989586621679911940"><span class="hs-identifier hs-var hs-var">aux</span></a></span></span><span> </span><span id="local-6989586621679911946"><span class="annot"><span class="annottext">CodecConfig blk
</span><a href="#local-6989586621679911946"><span class="hs-identifier hs-var">ccfg'</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Ouroboros.Consensus.TypeFamilyWrappers.html#WrapNodeToNodeVersion"><span class="hs-identifier hs-type">WrapNodeToNodeVersion</span></a></span><span> </span><span id="local-6989586621679911947"><span class="annot"><span class="annottext">BlockNodeToNodeVersion blk
</span><a href="#local-6989586621679911947"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Decoder s (f blk) -&gt; (:.:) (Decoder s) f blk
forall l k (f :: l -&gt; *) (g :: k -&gt; l) (p :: k).
f (g p) -&gt; (:.:) f g p
</span><span class="hs-identifier hs-var">Comp</span></span><span> </span><span class="annot"><span class="annottext">(Decoder s (f blk) -&gt; (:.:) (Decoder s) f blk)
-&gt; Decoder s (f blk) -&gt; (:.:) (Decoder s) f blk
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">CodecConfig blk
-&gt; BlockNodeToNodeVersion blk -&gt; forall s. Decoder s (f blk)
forall blk a.
SerialiseNodeToNode blk a =&gt;
CodecConfig blk
-&gt; BlockNodeToNodeVersion blk -&gt; forall s. Decoder s a
</span><a href="Ouroboros.Consensus.Node.Serialisation.html#decodeNodeToNode"><span class="hs-identifier hs-var">decodeNodeToNode</span></a></span><span> </span><span class="annot"><span class="annottext">CodecConfig blk
</span><a href="#local-6989586621679911946"><span class="hs-identifier hs-var">ccfg'</span></a></span><span> </span><span class="annot"><span class="annottext">BlockNodeToNodeVersion blk
</span><a href="#local-6989586621679911947"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-100"></span><span>
</span><span id="line-101"></span><span id="local-6989586621679911715"><span id="local-6989586621679911716"><span id="local-6989586621679911717"><span id="local-6989586621679911718"><span id="local-6989586621679911719"><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Serialisation.SerialiseNodeToNode.html#after"><span class="hs-identifier hs-type">after</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679911715"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679911716"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679911717"><span class="hs-identifier hs-type">d</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679911718"><span class="hs-identifier hs-type">e</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679911719"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679911717"><span class="hs-identifier hs-type">d</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679911715"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679911716"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679911719"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679911718"><span class="hs-identifier hs-type">e</span></a></span></span></span></span></span></span><span>
</span><span id="line-102"></span><span id="after"><span class="annot"><span class="annottext">after :: forall a b d e c.
(a -&gt; b -&gt; d -&gt; e) -&gt; (c -&gt; d) -&gt; a -&gt; b -&gt; c -&gt; e
</span><a href="Ouroboros.Consensus.HardFork.Combinator.Serialisation.SerialiseNodeToNode.html#after"><span class="hs-identifier hs-var hs-var">after</span></a></span></span><span> </span><span id="local-6989586621679911950"><span class="annot"><span class="annottext">a -&gt; b -&gt; d -&gt; e
</span><a href="#local-6989586621679911950"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621679911951"><span class="annot"><span class="annottext">c -&gt; d
</span><a href="#local-6989586621679911951"><span class="hs-identifier hs-var">g</span></a></span></span><span> </span><span id="local-6989586621679911952"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679911952"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679911953"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679911953"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span id="local-6989586621679911954"><span class="annot"><span class="annottext">c
</span><a href="#local-6989586621679911954"><span class="hs-identifier hs-var">z</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a -&gt; b -&gt; d -&gt; e
</span><a href="#local-6989586621679911950"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679911952"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679911953"><span class="hs-identifier hs-var">y</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">c -&gt; d
</span><a href="#local-6989586621679911951"><span class="hs-identifier hs-var">g</span></a></span><span> </span><span class="annot"><span class="annottext">c
</span><a href="#local-6989586621679911954"><span class="hs-identifier hs-var">z</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-103"></span><span>
</span><span id="line-104"></span><span class="hs-comment">{-------------------------------------------------------------------------------
  Blocks/headers
-------------------------------------------------------------------------------}</span><span>
</span><span id="line-107"></span><span>
</span><span id="line-108"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679911955"><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Serialisation.Common.html#SerialiseHFC"><span class="hs-identifier hs-type">SerialiseHFC</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679911955"><span class="hs-identifier hs-type">xs</span></a></span><span>
</span><span id="line-109"></span><span>      </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.Node.Serialisation.html#SerialiseNodeToNode"><span class="hs-identifier hs-type">SerialiseNodeToNode</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Basics.html#HardForkBlock"><span class="hs-identifier hs-type">HardForkBlock</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679911955"><span class="hs-identifier hs-type">xs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Basics.html#HardForkBlock"><span class="hs-identifier hs-type">HardForkBlock</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679911955"><span class="hs-identifier hs-type">xs</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-110"></span><span>  </span><span id="local-6989586621679911961"><span class="annot"><span class="annottext">encodeNodeToNode :: CodecConfig (HardForkBlock xs)
-&gt; BlockNodeToNodeVersion (HardForkBlock xs)
-&gt; HardForkBlock xs
-&gt; Encoding
</span><a href="Ouroboros.Consensus.Node.Serialisation.html#encodeNodeToNode"><span class="hs-identifier hs-var hs-var hs-var hs-var">encodeNodeToNode</span></a></span></span><span> </span><span id="local-6989586621679911962"><span class="annot"><span class="annottext">CodecConfig (HardForkBlock xs)
</span><a href="#local-6989586621679911962"><span class="hs-identifier hs-var">ccfg</span></a></span></span><span> </span><span class="annot"><span class="annottext">BlockNodeToNodeVersion (HardForkBlock xs)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(HardForkBlock xs -&gt; Encoding) -&gt; HardForkBlock xs -&gt; Encoding
forall a. (a -&gt; Encoding) -&gt; a -&gt; Encoding
</span><span class="hs-identifier hs-var">wrapCBORinCBOR</span></span><span>   </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CodecConfig (HardForkBlock xs) -&gt; HardForkBlock xs -&gt; Encoding
forall (xs :: [*]).
SerialiseHFC xs =&gt;
CodecConfig (HardForkBlock xs) -&gt; HardForkBlock xs -&gt; Encoding
</span><a href="Ouroboros.Consensus.HardFork.Combinator.Serialisation.Common.html#encodeDiskHfcBlock"><span class="hs-identifier hs-var">encodeDiskHfcBlock</span></a></span><span> </span><span class="annot"><span class="annottext">CodecConfig (HardForkBlock xs)
</span><a href="#local-6989586621679911962"><span class="hs-identifier hs-var">ccfg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-111"></span><span>  </span><span id="local-6989586621679911964"><span class="annot"><span class="annottext">decodeNodeToNode :: CodecConfig (HardForkBlock xs)
-&gt; BlockNodeToNodeVersion (HardForkBlock xs)
-&gt; forall s. Decoder s (HardForkBlock xs)
</span><a href="Ouroboros.Consensus.Node.Serialisation.html#decodeNodeToNode"><span class="hs-identifier hs-var hs-var hs-var hs-var">decodeNodeToNode</span></a></span></span><span> </span><span id="local-6989586621679911965"><span class="annot"><span class="annottext">CodecConfig (HardForkBlock xs)
</span><a href="#local-6989586621679911965"><span class="hs-identifier hs-var">ccfg</span></a></span></span><span> </span><span class="annot"><span class="annottext">BlockNodeToNodeVersion (HardForkBlock xs)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(forall s. Decoder s (ByteString -&gt; HardForkBlock xs))
-&gt; forall s. Decoder s (HardForkBlock xs)
forall a.
(forall s. Decoder s (ByteString -&gt; a)) -&gt; forall s. Decoder s a
</span><span class="hs-identifier hs-var">unwrapCBORinCBOR</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CodecConfig (HardForkBlock xs)
-&gt; forall s. Decoder s (ByteString -&gt; HardForkBlock xs)
forall (xs :: [*]).
SerialiseHFC xs =&gt;
CodecConfig (HardForkBlock xs)
-&gt; forall s. Decoder s (ByteString -&gt; HardForkBlock xs)
</span><a href="Ouroboros.Consensus.HardFork.Combinator.Serialisation.Common.html#decodeDiskHfcBlock"><span class="hs-identifier hs-var">decodeDiskHfcBlock</span></a></span><span> </span><span class="annot"><span class="annottext">CodecConfig (HardForkBlock xs)
</span><a href="#local-6989586621679911965"><span class="hs-identifier hs-var">ccfg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-112"></span><span>
</span><span id="line-113"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679911968"><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Serialisation.Common.html#SerialiseHFC"><span class="hs-identifier hs-type">SerialiseHFC</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679911968"><span class="hs-identifier hs-type">xs</span></a></span><span>
</span><span id="line-114"></span><span>      </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.Node.Serialisation.html#SerialiseNodeToNode"><span class="hs-identifier hs-type">SerialiseNodeToNode</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Basics.html#HardForkBlock"><span class="hs-identifier hs-type">HardForkBlock</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679911968"><span class="hs-identifier hs-type">xs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Ouroboros.Consensus.Block.Abstract.html#Header"><span class="hs-identifier hs-type">Header</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Basics.html#HardForkBlock"><span class="hs-identifier hs-type">HardForkBlock</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679911968"><span class="hs-identifier hs-type">xs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-115"></span><span>  </span><span id="local-6989586621679911974"><span class="annot"><span class="annottext">encodeNodeToNode :: CodecConfig (HardForkBlock xs)
-&gt; BlockNodeToNodeVersion (HardForkBlock xs)
-&gt; Header (HardForkBlock xs)
-&gt; Encoding
</span><a href="Ouroboros.Consensus.Node.Serialisation.html#encodeNodeToNode"><span class="hs-identifier hs-var hs-var hs-var hs-var">encodeNodeToNode</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CodecConfig (HardForkBlock xs)
-&gt; BlockNodeToNodeVersion (HardForkBlock xs)
-&gt; NS Header xs
-&gt; Encoding
CodecConfig (HardForkBlock xs)
-&gt; HardForkNodeToNodeVersion xs -&gt; NS Header xs -&gt; Encoding
forall (f :: * -&gt; *) (xs :: [*]).
(SerialiseHFC xs,
 forall blk.
 SerialiseNodeToNodeConstraints blk =&gt;
 SerialiseNodeToNode blk (f blk)) =&gt;
CodecConfig (HardForkBlock xs)
-&gt; BlockNodeToNodeVersion (HardForkBlock xs) -&gt; NS f xs -&gt; Encoding
</span><a href="Ouroboros.Consensus.HardFork.Combinator.Serialisation.SerialiseNodeToNode.html#dispatchEncoder"><span class="hs-identifier hs-var">dispatchEncoder</span></a></span><span> </span><span class="annot"><span class="annottext">(CodecConfig (HardForkBlock xs)
 -&gt; HardForkNodeToNodeVersion xs -&gt; NS Header xs -&gt; Encoding)
-&gt; (Header (HardForkBlock xs) -&gt; NS Header xs)
-&gt; CodecConfig (HardForkBlock xs)
-&gt; HardForkNodeToNodeVersion xs
-&gt; Header (HardForkBlock xs)
-&gt; Encoding
forall a b d e c.
(a -&gt; b -&gt; d -&gt; e) -&gt; (c -&gt; d) -&gt; a -&gt; b -&gt; c -&gt; e
</span><a href="Ouroboros.Consensus.HardFork.Combinator.Serialisation.SerialiseNodeToNode.html#after"><span class="hs-operator hs-var">`after`</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OneEraHeader xs -&gt; NS Header xs
forall (xs :: [*]). OneEraHeader xs -&gt; NS Header xs
</span><a href="Ouroboros.Consensus.HardFork.Combinator.AcrossEras.html#getOneEraHeader"><span class="hs-identifier hs-var">getOneEraHeader</span></a></span><span> </span><span class="annot"><span class="annottext">(OneEraHeader xs -&gt; NS Header xs)
-&gt; (Header (HardForkBlock xs) -&gt; OneEraHeader xs)
-&gt; Header (HardForkBlock xs)
-&gt; NS Header xs
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Header (HardForkBlock xs) -&gt; OneEraHeader xs
forall (xs :: [*]). Header (HardForkBlock xs) -&gt; OneEraHeader xs
</span><a href="Ouroboros.Consensus.HardFork.Combinator.Block.html#getHardForkHeader"><span class="hs-identifier hs-var">getHardForkHeader</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-116"></span><span>  </span><span id="local-6989586621679911980"><span class="annot"><span class="annottext">decodeNodeToNode :: CodecConfig (HardForkBlock xs)
-&gt; BlockNodeToNodeVersion (HardForkBlock xs)
-&gt; forall s. Decoder s (Header (HardForkBlock xs))
</span><a href="Ouroboros.Consensus.Node.Serialisation.html#decodeNodeToNode"><span class="hs-identifier hs-var hs-var hs-var hs-var">decodeNodeToNode</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(NS Header xs -&gt; Header (HardForkBlock xs))
-&gt; Decoder s (NS Header xs)
-&gt; Decoder s (Header (HardForkBlock xs))
forall a b. (a -&gt; b) -&gt; Decoder s a -&gt; Decoder s b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#fmap"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OneEraHeader xs -&gt; Header (HardForkBlock xs)
forall (xs :: [*]). OneEraHeader xs -&gt; Header (HardForkBlock xs)
</span><a href="Ouroboros.Consensus.HardFork.Combinator.Block.html#HardForkHeader"><span class="hs-identifier hs-var">HardForkHeader</span></a></span><span> </span><span class="annot"><span class="annottext">(OneEraHeader xs -&gt; Header (HardForkBlock xs))
-&gt; (NS Header xs -&gt; OneEraHeader xs)
-&gt; NS Header xs
-&gt; Header (HardForkBlock xs)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">NS Header xs -&gt; OneEraHeader xs
forall (xs :: [*]). NS Header xs -&gt; OneEraHeader xs
</span><a href="Ouroboros.Consensus.HardFork.Combinator.AcrossEras.html#OneEraHeader"><span class="hs-identifier hs-var">OneEraHeader</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Decoder s (NS Header xs) -&gt; Decoder s (Header (HardForkBlock xs)))
-&gt; (CodecConfig (HardForkBlock xs)
    -&gt; HardForkNodeToNodeVersion xs -&gt; Decoder s (NS Header xs))
-&gt; CodecConfig (HardForkBlock xs)
-&gt; HardForkNodeToNodeVersion xs
-&gt; Decoder s (Header (HardForkBlock xs))
forall y z x0 x1. (y -&gt; z) -&gt; (x0 -&gt; x1 -&gt; y) -&gt; x0 -&gt; x1 -&gt; z
</span><a href="Ouroboros.Consensus.Util.html#.%3A"><span class="hs-operator hs-var">.:</span></a></span><span> </span><span class="annot"><span class="annottext">CodecConfig (HardForkBlock xs)
-&gt; BlockNodeToNodeVersion (HardForkBlock xs)
-&gt; forall s. Decoder s (NS Header xs)
CodecConfig (HardForkBlock xs)
-&gt; HardForkNodeToNodeVersion xs -&gt; Decoder s (NS Header xs)
forall (f :: * -&gt; *) (xs :: [*]).
(SerialiseHFC xs,
 forall blk.
 SerialiseNodeToNodeConstraints blk =&gt;
 SerialiseNodeToNode blk (f blk)) =&gt;
CodecConfig (HardForkBlock xs)
-&gt; BlockNodeToNodeVersion (HardForkBlock xs)
-&gt; forall s. Decoder s (NS f xs)
</span><a href="Ouroboros.Consensus.HardFork.Combinator.Serialisation.SerialiseNodeToNode.html#dispatchDecoder"><span class="hs-identifier hs-var">dispatchDecoder</span></a></span><span>
</span><span id="line-117"></span><span>
</span><span id="line-118"></span><span class="hs-comment">{-------------------------------------------------------------------------------
  Serialised blocks/headers
-------------------------------------------------------------------------------}</span><span>
</span><span id="line-121"></span><span>
</span><span id="line-122"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679911983"><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Serialisation.Common.html#SerialiseHFC"><span class="hs-identifier hs-type">SerialiseHFC</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679911983"><span class="hs-identifier hs-type">xs</span></a></span><span>
</span><span id="line-123"></span><span>      </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.Node.Serialisation.html#SerialiseNodeToNode"><span class="hs-identifier hs-type">SerialiseNodeToNode</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Basics.html#HardForkBlock"><span class="hs-identifier hs-type">HardForkBlock</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679911983"><span class="hs-identifier hs-type">xs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Serialised</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Basics.html#HardForkBlock"><span class="hs-identifier hs-type">HardForkBlock</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679911983"><span class="hs-identifier hs-type">xs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-124"></span><span>  </span><span id="local-6989586621679911989"><span class="annot"><span class="annottext">encodeNodeToNode :: CodecConfig (HardForkBlock xs)
-&gt; BlockNodeToNodeVersion (HardForkBlock xs)
-&gt; Serialised (HardForkBlock xs)
-&gt; Encoding
</span><a href="Ouroboros.Consensus.Node.Serialisation.html#encodeNodeToNode"><span class="hs-identifier hs-var hs-var hs-var hs-var">encodeNodeToNode</span></a></span></span><span> </span><span class="annot"><span class="annottext">CodecConfig (HardForkBlock xs)
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">BlockNodeToNodeVersion (HardForkBlock xs)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Serialised (HardForkBlock xs) -&gt; Encoding
forall a. Serialise a =&gt; a -&gt; Encoding
</span><span class="hs-identifier hs-var">Serialise.encode</span></span><span>
</span><span id="line-125"></span><span>  </span><span id="local-6989586621679911992"><span class="annot"><span class="annottext">decodeNodeToNode :: CodecConfig (HardForkBlock xs)
-&gt; BlockNodeToNodeVersion (HardForkBlock xs)
-&gt; forall s. Decoder s (Serialised (HardForkBlock xs))
</span><a href="Ouroboros.Consensus.Node.Serialisation.html#decodeNodeToNode"><span class="hs-identifier hs-var hs-var hs-var hs-var">decodeNodeToNode</span></a></span></span><span> </span><span class="annot"><span class="annottext">CodecConfig (HardForkBlock xs)
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">BlockNodeToNodeVersion (HardForkBlock xs)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Decoder s (Serialised (HardForkBlock xs))
forall s. Decoder s (Serialised (HardForkBlock xs))
forall a s. Serialise a =&gt; Decoder s a
</span><span class="hs-identifier hs-var">Serialise.decode</span></span><span>
</span><span id="line-126"></span><span>
</span><span id="line-127"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679911994"><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Serialisation.Common.html#SerialiseHFC"><span class="hs-identifier hs-type">SerialiseHFC</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679911994"><span class="hs-identifier hs-type">xs</span></a></span><span>
</span><span id="line-128"></span><span>      </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.Node.Serialisation.html#SerialiseNodeToNode"><span class="hs-identifier hs-type">SerialiseNodeToNode</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Basics.html#HardForkBlock"><span class="hs-identifier hs-type">HardForkBlock</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679911994"><span class="hs-identifier hs-type">xs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Ouroboros.Consensus.Storage.Serialisation.html#SerialisedHeader"><span class="hs-identifier hs-type">SerialisedHeader</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Basics.html#HardForkBlock"><span class="hs-identifier hs-type">HardForkBlock</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679911994"><span class="hs-identifier hs-type">xs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-129"></span><span>  </span><span id="local-6989586621679912000"><span class="annot"><span class="annottext">encodeNodeToNode :: CodecConfig (HardForkBlock xs)
-&gt; BlockNodeToNodeVersion (HardForkBlock xs)
-&gt; SerialisedHeader (HardForkBlock xs)
-&gt; Encoding
</span><a href="Ouroboros.Consensus.Node.Serialisation.html#encodeNodeToNode"><span class="hs-identifier hs-var hs-var hs-var hs-var">encodeNodeToNode</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CodecConfig (HardForkBlock xs)
-&gt; BlockNodeToNodeVersion (HardForkBlock xs)
-&gt; NS SerialisedHeader xs
-&gt; Encoding
CodecConfig (HardForkBlock xs)
-&gt; HardForkNodeToNodeVersion xs
-&gt; NS SerialisedHeader xs
-&gt; Encoding
forall (f :: * -&gt; *) (xs :: [*]).
(SerialiseHFC xs,
 forall blk.
 SerialiseNodeToNodeConstraints blk =&gt;
 SerialiseNodeToNode blk (f blk)) =&gt;
CodecConfig (HardForkBlock xs)
-&gt; BlockNodeToNodeVersion (HardForkBlock xs) -&gt; NS f xs -&gt; Encoding
</span><a href="Ouroboros.Consensus.HardFork.Combinator.Serialisation.SerialiseNodeToNode.html#dispatchEncoder"><span class="hs-identifier hs-var">dispatchEncoder</span></a></span><span> </span><span class="annot"><span class="annottext">(CodecConfig (HardForkBlock xs)
 -&gt; HardForkNodeToNodeVersion xs
 -&gt; NS SerialisedHeader xs
 -&gt; Encoding)
-&gt; (SerialisedHeader (HardForkBlock xs) -&gt; NS SerialisedHeader xs)
-&gt; CodecConfig (HardForkBlock xs)
-&gt; HardForkNodeToNodeVersion xs
-&gt; SerialisedHeader (HardForkBlock xs)
-&gt; Encoding
forall a b d e c.
(a -&gt; b -&gt; d -&gt; e) -&gt; (c -&gt; d) -&gt; a -&gt; b -&gt; c -&gt; e
</span><a href="Ouroboros.Consensus.HardFork.Combinator.Serialisation.SerialiseNodeToNode.html#after"><span class="hs-operator hs-var">`after`</span></a></span><span> </span><span class="annot"><span class="annottext">SerialisedHeader (HardForkBlock xs) -&gt; NS SerialisedHeader xs
forall (xs :: [*]).
SerialisedHeader (HardForkBlock xs) -&gt; NS SerialisedHeader xs
</span><a href="Ouroboros.Consensus.HardFork.Combinator.Serialisation.Common.html#distribSerialisedHeader"><span class="hs-identifier hs-var">distribSerialisedHeader</span></a></span><span>
</span><span id="line-130"></span><span>  </span><span id="local-6989586621679912005"><span class="annot"><span class="annottext">decodeNodeToNode :: CodecConfig (HardForkBlock xs)
-&gt; BlockNodeToNodeVersion (HardForkBlock xs)
-&gt; forall s. Decoder s (SerialisedHeader (HardForkBlock xs))
</span><a href="Ouroboros.Consensus.Node.Serialisation.html#decodeNodeToNode"><span class="hs-identifier hs-var hs-var hs-var hs-var">decodeNodeToNode</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(NS SerialisedHeader xs -&gt; SerialisedHeader (HardForkBlock xs))
-&gt; Decoder s (NS SerialisedHeader xs)
-&gt; Decoder s (SerialisedHeader (HardForkBlock xs))
forall a b. (a -&gt; b) -&gt; Decoder s a -&gt; Decoder s b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#fmap"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">NS SerialisedHeader xs -&gt; SerialisedHeader (HardForkBlock xs)
forall (xs :: [*]).
NS SerialisedHeader xs -&gt; SerialisedHeader (HardForkBlock xs)
</span><a href="Ouroboros.Consensus.HardFork.Combinator.Serialisation.Common.html#undistribSerialisedHeader"><span class="hs-identifier hs-var">undistribSerialisedHeader</span></a></span><span> </span><span class="annot"><span class="annottext">(Decoder s (NS SerialisedHeader xs)
 -&gt; Decoder s (SerialisedHeader (HardForkBlock xs)))
-&gt; (CodecConfig (HardForkBlock xs)
    -&gt; HardForkNodeToNodeVersion xs
    -&gt; Decoder s (NS SerialisedHeader xs))
-&gt; CodecConfig (HardForkBlock xs)
-&gt; HardForkNodeToNodeVersion xs
-&gt; Decoder s (SerialisedHeader (HardForkBlock xs))
forall y z x0 x1. (y -&gt; z) -&gt; (x0 -&gt; x1 -&gt; y) -&gt; x0 -&gt; x1 -&gt; z
</span><a href="Ouroboros.Consensus.Util.html#.%3A"><span class="hs-operator hs-var">.:</span></a></span><span> </span><span class="annot"><span class="annottext">CodecConfig (HardForkBlock xs)
-&gt; BlockNodeToNodeVersion (HardForkBlock xs)
-&gt; forall s. Decoder s (NS SerialisedHeader xs)
CodecConfig (HardForkBlock xs)
-&gt; HardForkNodeToNodeVersion xs
-&gt; Decoder s (NS SerialisedHeader xs)
forall (f :: * -&gt; *) (xs :: [*]).
(SerialiseHFC xs,
 forall blk.
 SerialiseNodeToNodeConstraints blk =&gt;
 SerialiseNodeToNode blk (f blk)) =&gt;
CodecConfig (HardForkBlock xs)
-&gt; BlockNodeToNodeVersion (HardForkBlock xs)
-&gt; forall s. Decoder s (NS f xs)
</span><a href="Ouroboros.Consensus.HardFork.Combinator.Serialisation.SerialiseNodeToNode.html#dispatchDecoder"><span class="hs-identifier hs-var">dispatchDecoder</span></a></span><span>
</span><span id="line-131"></span><span>
</span><span id="line-132"></span><span class="hs-comment">{-------------------------------------------------------------------------------
  Transactions
-------------------------------------------------------------------------------}</span><span>
</span><span id="line-135"></span><span>
</span><span id="line-136"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679912007"><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Serialisation.Common.html#SerialiseHFC"><span class="hs-identifier hs-type">SerialiseHFC</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679912007"><span class="hs-identifier hs-type">xs</span></a></span><span>
</span><span id="line-137"></span><span>      </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.Node.Serialisation.html#SerialiseNodeToNode"><span class="hs-identifier hs-type">SerialiseNodeToNode</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Basics.html#HardForkBlock"><span class="hs-identifier hs-type">HardForkBlock</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679912007"><span class="hs-identifier hs-type">xs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Ouroboros.Consensus.Ledger.SupportsMempool.html#GenTx"><span class="hs-identifier hs-type">GenTx</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Basics.html#HardForkBlock"><span class="hs-identifier hs-type">HardForkBlock</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679912007"><span class="hs-identifier hs-type">xs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-138"></span><span>  </span><span id="local-6989586621679912013"><span class="annot"><span class="annottext">encodeNodeToNode :: CodecConfig (HardForkBlock xs)
-&gt; BlockNodeToNodeVersion (HardForkBlock xs)
-&gt; GenTx (HardForkBlock xs)
-&gt; Encoding
</span><a href="Ouroboros.Consensus.Node.Serialisation.html#encodeNodeToNode"><span class="hs-identifier hs-var hs-var hs-var hs-var">encodeNodeToNode</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CodecConfig (HardForkBlock xs)
-&gt; BlockNodeToNodeVersion (HardForkBlock xs)
-&gt; NS GenTx xs
-&gt; Encoding
CodecConfig (HardForkBlock xs)
-&gt; HardForkNodeToNodeVersion xs -&gt; NS GenTx xs -&gt; Encoding
forall (f :: * -&gt; *) (xs :: [*]).
(SerialiseHFC xs,
 forall blk.
 SerialiseNodeToNodeConstraints blk =&gt;
 SerialiseNodeToNode blk (f blk)) =&gt;
CodecConfig (HardForkBlock xs)
-&gt; BlockNodeToNodeVersion (HardForkBlock xs) -&gt; NS f xs -&gt; Encoding
</span><a href="Ouroboros.Consensus.HardFork.Combinator.Serialisation.SerialiseNodeToNode.html#dispatchEncoder"><span class="hs-identifier hs-var">dispatchEncoder</span></a></span><span> </span><span class="annot"><span class="annottext">(CodecConfig (HardForkBlock xs)
 -&gt; HardForkNodeToNodeVersion xs -&gt; NS GenTx xs -&gt; Encoding)
-&gt; (GenTx (HardForkBlock xs) -&gt; NS GenTx xs)
-&gt; CodecConfig (HardForkBlock xs)
-&gt; HardForkNodeToNodeVersion xs
-&gt; GenTx (HardForkBlock xs)
-&gt; Encoding
forall a b d e c.
(a -&gt; b -&gt; d -&gt; e) -&gt; (c -&gt; d) -&gt; a -&gt; b -&gt; c -&gt; e
</span><a href="Ouroboros.Consensus.HardFork.Combinator.Serialisation.SerialiseNodeToNode.html#after"><span class="hs-operator hs-var">`after`</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OneEraGenTx xs -&gt; NS GenTx xs
forall (xs :: [*]). OneEraGenTx xs -&gt; NS GenTx xs
</span><a href="Ouroboros.Consensus.HardFork.Combinator.AcrossEras.html#getOneEraGenTx"><span class="hs-identifier hs-var">getOneEraGenTx</span></a></span><span> </span><span class="annot"><span class="annottext">(OneEraGenTx xs -&gt; NS GenTx xs)
-&gt; (GenTx (HardForkBlock xs) -&gt; OneEraGenTx xs)
-&gt; GenTx (HardForkBlock xs)
-&gt; NS GenTx xs
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">GenTx (HardForkBlock xs) -&gt; OneEraGenTx xs
forall (xs :: [*]). GenTx (HardForkBlock xs) -&gt; OneEraGenTx xs
</span><a href="Ouroboros.Consensus.HardFork.Combinator.Mempool.html#getHardForkGenTx"><span class="hs-identifier hs-var">getHardForkGenTx</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-139"></span><span>  </span><span id="local-6989586621679912019"><span class="annot"><span class="annottext">decodeNodeToNode :: CodecConfig (HardForkBlock xs)
-&gt; BlockNodeToNodeVersion (HardForkBlock xs)
-&gt; forall s. Decoder s (GenTx (HardForkBlock xs))
</span><a href="Ouroboros.Consensus.Node.Serialisation.html#decodeNodeToNode"><span class="hs-identifier hs-var hs-var hs-var hs-var">decodeNodeToNode</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(NS GenTx xs -&gt; GenTx (HardForkBlock xs))
-&gt; Decoder s (NS GenTx xs) -&gt; Decoder s (GenTx (HardForkBlock xs))
forall a b. (a -&gt; b) -&gt; Decoder s a -&gt; Decoder s b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#fmap"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OneEraGenTx xs -&gt; GenTx (HardForkBlock xs)
forall (xs :: [*]). OneEraGenTx xs -&gt; GenTx (HardForkBlock xs)
</span><a href="Ouroboros.Consensus.HardFork.Combinator.Mempool.html#HardForkGenTx"><span class="hs-identifier hs-var">HardForkGenTx</span></a></span><span> </span><span class="annot"><span class="annottext">(OneEraGenTx xs -&gt; GenTx (HardForkBlock xs))
-&gt; (NS GenTx xs -&gt; OneEraGenTx xs)
-&gt; NS GenTx xs
-&gt; GenTx (HardForkBlock xs)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">NS GenTx xs -&gt; OneEraGenTx xs
forall (xs :: [*]). NS GenTx xs -&gt; OneEraGenTx xs
</span><a href="Ouroboros.Consensus.HardFork.Combinator.AcrossEras.html#OneEraGenTx"><span class="hs-identifier hs-var">OneEraGenTx</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Decoder s (NS GenTx xs) -&gt; Decoder s (GenTx (HardForkBlock xs)))
-&gt; (CodecConfig (HardForkBlock xs)
    -&gt; HardForkNodeToNodeVersion xs -&gt; Decoder s (NS GenTx xs))
-&gt; CodecConfig (HardForkBlock xs)
-&gt; HardForkNodeToNodeVersion xs
-&gt; Decoder s (GenTx (HardForkBlock xs))
forall y z x0 x1. (y -&gt; z) -&gt; (x0 -&gt; x1 -&gt; y) -&gt; x0 -&gt; x1 -&gt; z
</span><a href="Ouroboros.Consensus.Util.html#.%3A"><span class="hs-operator hs-var">.:</span></a></span><span> </span><span class="annot"><span class="annottext">CodecConfig (HardForkBlock xs)
-&gt; BlockNodeToNodeVersion (HardForkBlock xs)
-&gt; forall s. Decoder s (NS GenTx xs)
CodecConfig (HardForkBlock xs)
-&gt; HardForkNodeToNodeVersion xs -&gt; Decoder s (NS GenTx xs)
forall (f :: * -&gt; *) (xs :: [*]).
(SerialiseHFC xs,
 forall blk.
 SerialiseNodeToNodeConstraints blk =&gt;
 SerialiseNodeToNode blk (f blk)) =&gt;
CodecConfig (HardForkBlock xs)
-&gt; BlockNodeToNodeVersion (HardForkBlock xs)
-&gt; forall s. Decoder s (NS f xs)
</span><a href="Ouroboros.Consensus.HardFork.Combinator.Serialisation.SerialiseNodeToNode.html#dispatchDecoder"><span class="hs-identifier hs-var">dispatchDecoder</span></a></span><span>
</span><span id="line-140"></span><span>
</span><span id="line-141"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679912022"><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Serialisation.Common.html#SerialiseHFC"><span class="hs-identifier hs-type">SerialiseHFC</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679912022"><span class="hs-identifier hs-type">xs</span></a></span><span>
</span><span id="line-142"></span><span>      </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.Node.Serialisation.html#SerialiseNodeToNode"><span class="hs-identifier hs-type">SerialiseNodeToNode</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Basics.html#HardForkBlock"><span class="hs-identifier hs-type">HardForkBlock</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679912022"><span class="hs-identifier hs-type">xs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Ouroboros.Consensus.Ledger.SupportsMempool.html#GenTxId"><span class="hs-identifier hs-type">GenTxId</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Basics.html#HardForkBlock"><span class="hs-identifier hs-type">HardForkBlock</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679912022"><span class="hs-identifier hs-type">xs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-143"></span><span>  </span><span id="local-6989586621679912028"><span class="annot"><span class="annottext">encodeNodeToNode :: CodecConfig (HardForkBlock xs)
-&gt; BlockNodeToNodeVersion (HardForkBlock xs)
-&gt; GenTxId (HardForkBlock xs)
-&gt; Encoding
</span><a href="Ouroboros.Consensus.Node.Serialisation.html#encodeNodeToNode"><span class="hs-identifier hs-var hs-var hs-var hs-var">encodeNodeToNode</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CodecConfig (HardForkBlock xs)
-&gt; BlockNodeToNodeVersion (HardForkBlock xs)
-&gt; NS WrapGenTxId xs
-&gt; Encoding
CodecConfig (HardForkBlock xs)
-&gt; HardForkNodeToNodeVersion xs -&gt; NS WrapGenTxId xs -&gt; Encoding
forall (f :: * -&gt; *) (xs :: [*]).
(SerialiseHFC xs,
 forall blk.
 SerialiseNodeToNodeConstraints blk =&gt;
 SerialiseNodeToNode blk (f blk)) =&gt;
CodecConfig (HardForkBlock xs)
-&gt; BlockNodeToNodeVersion (HardForkBlock xs) -&gt; NS f xs -&gt; Encoding
</span><a href="Ouroboros.Consensus.HardFork.Combinator.Serialisation.SerialiseNodeToNode.html#dispatchEncoder"><span class="hs-identifier hs-var">dispatchEncoder</span></a></span><span> </span><span class="annot"><span class="annottext">(CodecConfig (HardForkBlock xs)
 -&gt; HardForkNodeToNodeVersion xs -&gt; NS WrapGenTxId xs -&gt; Encoding)
-&gt; (GenTxId (HardForkBlock xs) -&gt; NS WrapGenTxId xs)
-&gt; CodecConfig (HardForkBlock xs)
-&gt; HardForkNodeToNodeVersion xs
-&gt; GenTxId (HardForkBlock xs)
-&gt; Encoding
forall a b d e c.
(a -&gt; b -&gt; d -&gt; e) -&gt; (c -&gt; d) -&gt; a -&gt; b -&gt; c -&gt; e
</span><a href="Ouroboros.Consensus.HardFork.Combinator.Serialisation.SerialiseNodeToNode.html#after"><span class="hs-operator hs-var">`after`</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OneEraGenTxId xs -&gt; NS WrapGenTxId xs
forall (xs :: [*]). OneEraGenTxId xs -&gt; NS WrapGenTxId xs
</span><a href="Ouroboros.Consensus.HardFork.Combinator.AcrossEras.html#getOneEraGenTxId"><span class="hs-identifier hs-var">getOneEraGenTxId</span></a></span><span> </span><span class="annot"><span class="annottext">(OneEraGenTxId xs -&gt; NS WrapGenTxId xs)
-&gt; (GenTxId (HardForkBlock xs) -&gt; OneEraGenTxId xs)
-&gt; GenTxId (HardForkBlock xs)
-&gt; NS WrapGenTxId xs
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">GenTxId (HardForkBlock xs) -&gt; OneEraGenTxId xs
forall (xs :: [*]).
TxId (GenTx (HardForkBlock xs)) -&gt; OneEraGenTxId xs
</span><a href="Ouroboros.Consensus.HardFork.Combinator.Mempool.html#getHardForkGenTxId"><span class="hs-identifier hs-var">getHardForkGenTxId</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-144"></span><span>  </span><span id="local-6989586621679912034"><span class="annot"><span class="annottext">decodeNodeToNode :: CodecConfig (HardForkBlock xs)
-&gt; BlockNodeToNodeVersion (HardForkBlock xs)
-&gt; forall s. Decoder s (GenTxId (HardForkBlock xs))
</span><a href="Ouroboros.Consensus.Node.Serialisation.html#decodeNodeToNode"><span class="hs-identifier hs-var hs-var hs-var hs-var">decodeNodeToNode</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(NS WrapGenTxId xs -&gt; GenTxId (HardForkBlock xs))
-&gt; Decoder s (NS WrapGenTxId xs)
-&gt; Decoder s (GenTxId (HardForkBlock xs))
forall a b. (a -&gt; b) -&gt; Decoder s a -&gt; Decoder s b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#fmap"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OneEraGenTxId xs -&gt; GenTxId (HardForkBlock xs)
forall (xs :: [*]).
OneEraGenTxId xs -&gt; TxId (GenTx (HardForkBlock xs))
</span><a href="Ouroboros.Consensus.HardFork.Combinator.Mempool.html#HardForkGenTxId"><span class="hs-identifier hs-var">HardForkGenTxId</span></a></span><span> </span><span class="annot"><span class="annottext">(OneEraGenTxId xs -&gt; GenTxId (HardForkBlock xs))
-&gt; (NS WrapGenTxId xs -&gt; OneEraGenTxId xs)
-&gt; NS WrapGenTxId xs
-&gt; GenTxId (HardForkBlock xs)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">NS WrapGenTxId xs -&gt; OneEraGenTxId xs
forall (xs :: [*]). NS WrapGenTxId xs -&gt; OneEraGenTxId xs
</span><a href="Ouroboros.Consensus.HardFork.Combinator.AcrossEras.html#OneEraGenTxId"><span class="hs-identifier hs-var">OneEraGenTxId</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Decoder s (NS WrapGenTxId xs)
 -&gt; Decoder s (GenTxId (HardForkBlock xs)))
-&gt; (CodecConfig (HardForkBlock xs)
    -&gt; HardForkNodeToNodeVersion xs -&gt; Decoder s (NS WrapGenTxId xs))
-&gt; CodecConfig (HardForkBlock xs)
-&gt; HardForkNodeToNodeVersion xs
-&gt; Decoder s (GenTxId (HardForkBlock xs))
forall y z x0 x1. (y -&gt; z) -&gt; (x0 -&gt; x1 -&gt; y) -&gt; x0 -&gt; x1 -&gt; z
</span><a href="Ouroboros.Consensus.Util.html#.%3A"><span class="hs-operator hs-var">.:</span></a></span><span> </span><span class="annot"><span class="annottext">CodecConfig (HardForkBlock xs)
-&gt; BlockNodeToNodeVersion (HardForkBlock xs)
-&gt; forall s. Decoder s (NS WrapGenTxId xs)
CodecConfig (HardForkBlock xs)
-&gt; HardForkNodeToNodeVersion xs -&gt; Decoder s (NS WrapGenTxId xs)
forall (f :: * -&gt; *) (xs :: [*]).
(SerialiseHFC xs,
 forall blk.
 SerialiseNodeToNodeConstraints blk =&gt;
 SerialiseNodeToNode blk (f blk)) =&gt;
CodecConfig (HardForkBlock xs)
-&gt; BlockNodeToNodeVersion (HardForkBlock xs)
-&gt; forall s. Decoder s (NS f xs)
</span><a href="Ouroboros.Consensus.HardFork.Combinator.Serialisation.SerialiseNodeToNode.html#dispatchDecoder"><span class="hs-identifier hs-var">dispatchDecoder</span></a></span><span>
</span><span id="line-145"></span></pre></body></html>