<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE DataKinds           #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE FlexibleContexts    #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE LambdaCase          #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE OverloadedStrings   #-}</span><span>
</span><span id="line-5"></span><span class="hs-pragma">{-# LANGUAGE ScopedTypeVariables #-}</span><span>
</span><span id="line-6"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Ouroboros.Consensus.HardFork.Combinator.Embed.Binary</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Embed.Binary.html#protocolInfoBinary"><span class="hs-identifier">protocolInfoBinary</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-7"></span><span>
</span><span id="line-8"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/Control.Exception.html"><span class="hs-identifier">Control.Exception</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#assert"><span class="hs-identifier">assert</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-9"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Data.Align</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">alignWith</span></span><span class="hs-special">)</span><span>
</span><span id="line-10"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Data.SOP.Counting</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">exactlyTwo</span></span><span class="hs-special">)</span><span>
</span><span id="line-11"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Data.SOP.OptNP</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">OptNP</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-12"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Data.SOP.Strict</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">NP</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-13"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Data.These</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">These</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-14"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Ouroboros.Consensus.Block.html"><span class="hs-identifier">Ouroboros.Consensus.Block</span></a></span><span>
</span><span id="line-15"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Ouroboros.Consensus.Config.html"><span class="hs-identifier">Ouroboros.Consensus.Config</span></a></span><span>
</span><span id="line-16"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.html"><span class="hs-identifier">Ouroboros.Consensus.HardFork.Combinator</span></a></span><span>
</span><span id="line-17"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.HardFork.History.html"><span class="hs-identifier">Ouroboros.Consensus.HardFork.History</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">History</span></span><span>
</span><span id="line-18"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Ouroboros.Consensus.HeaderValidation.html"><span class="hs-identifier">Ouroboros.Consensus.HeaderValidation</span></a></span><span>
</span><span id="line-19"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Ouroboros.Consensus.Ledger.Basics.html"><span class="hs-identifier">Ouroboros.Consensus.Ledger.Basics</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Ouroboros.Consensus.Ledger.Basics.html#LedgerConfig"><span class="hs-identifier">LedgerConfig</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-20"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Ouroboros.Consensus.Ledger.Extended.html"><span class="hs-identifier">Ouroboros.Consensus.Ledger.Extended</span></a></span><span>
</span><span id="line-21"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Ouroboros.Consensus.Node.ProtocolInfo.html"><span class="hs-identifier">Ouroboros.Consensus.Node.ProtocolInfo</span></a></span><span>
</span><span id="line-22"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Ouroboros.Consensus.Protocol.Abstract.html"><span class="hs-identifier">Ouroboros.Consensus.Protocol.Abstract</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Ouroboros.Consensus.Protocol.Abstract.html#protocolSecurityParam"><span class="hs-identifier">protocolSecurityParam</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-23"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Ouroboros.Consensus.TypeFamilyWrappers.html"><span class="hs-identifier">Ouroboros.Consensus.TypeFamilyWrappers</span></a></span><span>
</span><span id="line-24"></span><span>
</span><span id="line-25"></span><span class="hs-comment">{-------------------------------------------------------------------------------
  ProtocolInfo
-------------------------------------------------------------------------------}</span><span>
</span><span id="line-28"></span><span>
</span><span id="line-29"></span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Embed.Binary.html#protocolInfoBinary"><span class="hs-identifier hs-type">protocolInfoBinary</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-30"></span><span>     </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679914293"><span class="annot"><a href="#local-6989586621679914293"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span id="local-6989586621679914290"><span class="annot"><a href="#local-6989586621679914290"><span class="hs-identifier hs-type">blk1</span></a></span></span><span> </span><span id="local-6989586621679914291"><span class="annot"><a href="#local-6989586621679914291"><span class="hs-identifier hs-type">blk2</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-31"></span><span>     </span><span class="hs-special">(</span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Abstract.CanHardFork.html#CanHardFork"><span class="hs-identifier hs-type">CanHardFork</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679914290"><span class="hs-identifier hs-type">blk1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679914291"><span class="hs-identifier hs-type">blk2</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#Monad"><span class="hs-identifier hs-type">Monad</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679914293"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-32"></span><span>     </span><span class="hs-comment">-- First era</span><span>
</span><span id="line-33"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.Node.ProtocolInfo.html#ProtocolInfo"><span class="hs-identifier hs-type">ProtocolInfo</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679914290"><span class="hs-identifier hs-type">blk1</span></a></span><span>
</span><span id="line-34"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679914293"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Ouroboros.Consensus.Block.Forging.html#BlockForging"><span class="hs-identifier hs-type">BlockForging</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679914293"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679914290"><span class="hs-identifier hs-type">blk1</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-35"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.HardFork.History.EraParams.html#EraParams"><span class="hs-identifier hs-type">History.EraParams</span></a></span><span>
</span><span id="line-36"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Ouroboros.Consensus.Protocol.Abstract.html#ConsensusConfig"><span class="hs-identifier hs-type">ConsensusConfig</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Ouroboros.Consensus.Block.Abstract.html#BlockProtocol"><span class="hs-identifier hs-type">BlockProtocol</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679914290"><span class="hs-identifier hs-type">blk1</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.PartialConfig.html#PartialConsensusConfig"><span class="hs-identifier hs-type">PartialConsensusConfig</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Ouroboros.Consensus.Block.Abstract.html#BlockProtocol"><span class="hs-identifier hs-type">BlockProtocol</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679914290"><span class="hs-identifier hs-type">blk1</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-37"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Ouroboros.Consensus.Ledger.Basics.html#LedgerConfig"><span class="hs-identifier hs-type">LedgerConfig</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679914290"><span class="hs-identifier hs-type">blk1</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.PartialConfig.html#PartialLedgerConfig"><span class="hs-identifier hs-type">PartialLedgerConfig</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679914290"><span class="hs-identifier hs-type">blk1</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-38"></span><span>     </span><span class="hs-comment">-- Second era</span><span>
</span><span id="line-39"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.Node.ProtocolInfo.html#ProtocolInfo"><span class="hs-identifier hs-type">ProtocolInfo</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679914291"><span class="hs-identifier hs-type">blk2</span></a></span><span>
</span><span id="line-40"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679914293"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Ouroboros.Consensus.Block.Forging.html#BlockForging"><span class="hs-identifier hs-type">BlockForging</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679914293"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679914291"><span class="hs-identifier hs-type">blk2</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-41"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.HardFork.History.EraParams.html#EraParams"><span class="hs-identifier hs-type">History.EraParams</span></a></span><span>
</span><span id="line-42"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Ouroboros.Consensus.Protocol.Abstract.html#ConsensusConfig"><span class="hs-identifier hs-type">ConsensusConfig</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Ouroboros.Consensus.Block.Abstract.html#BlockProtocol"><span class="hs-identifier hs-type">BlockProtocol</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679914291"><span class="hs-identifier hs-type">blk2</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.PartialConfig.html#PartialConsensusConfig"><span class="hs-identifier hs-type">PartialConsensusConfig</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Ouroboros.Consensus.Block.Abstract.html#BlockProtocol"><span class="hs-identifier hs-type">BlockProtocol</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679914291"><span class="hs-identifier hs-type">blk2</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-43"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Ouroboros.Consensus.Ledger.Basics.html#LedgerConfig"><span class="hs-identifier hs-type">LedgerConfig</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679914291"><span class="hs-identifier hs-type">blk2</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.PartialConfig.html#PartialLedgerConfig"><span class="hs-identifier hs-type">PartialLedgerConfig</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679914291"><span class="hs-identifier hs-type">blk2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-44"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.Node.ProtocolInfo.html#ProtocolInfo"><span class="hs-identifier hs-type">ProtocolInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Basics.html#HardForkBlock"><span class="hs-identifier hs-type">HardForkBlock</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679914290"><span class="hs-identifier hs-type">blk1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679914291"><span class="hs-identifier hs-type">blk2</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-45"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679914293"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Ouroboros.Consensus.Block.Forging.html#BlockForging"><span class="hs-identifier hs-type">BlockForging</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679914293"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Basics.html#HardForkBlock"><span class="hs-identifier hs-type">HardForkBlock</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679914290"><span class="hs-identifier hs-type">blk1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679914291"><span class="hs-identifier hs-type">blk2</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-46"></span><span>     </span><span class="hs-special">)</span><span>
</span><span id="line-47"></span><span id="protocolInfoBinary"><span class="annot"><span class="annottext">protocolInfoBinary :: forall (m :: * -&gt; *) blk1 blk2.
(CanHardFork '[blk1, blk2], Monad m) =&gt;
ProtocolInfo blk1
-&gt; m [BlockForging m blk1]
-&gt; EraParams
-&gt; (ConsensusConfig (BlockProtocol blk1)
    -&gt; PartialConsensusConfig (BlockProtocol blk1))
-&gt; (LedgerConfig blk1 -&gt; PartialLedgerConfig blk1)
-&gt; ProtocolInfo blk2
-&gt; m [BlockForging m blk2]
-&gt; EraParams
-&gt; (ConsensusConfig (BlockProtocol blk2)
    -&gt; PartialConsensusConfig (BlockProtocol blk2))
-&gt; (LedgerConfig blk2 -&gt; PartialLedgerConfig blk2)
-&gt; (ProtocolInfo (HardForkBlock '[blk1, blk2]),
    m [BlockForging m (HardForkBlock '[blk1, blk2])])
</span><a href="Ouroboros.Consensus.HardFork.Combinator.Embed.Binary.html#protocolInfoBinary"><span class="hs-identifier hs-var hs-var">protocolInfoBinary</span></a></span></span><span> </span><span id="local-6989586621679914458"><span class="annot"><span class="annottext">ProtocolInfo blk1
</span><a href="#local-6989586621679914458"><span class="hs-identifier hs-var">protocolInfo1</span></a></span></span><span> </span><span id="local-6989586621679914459"><span class="annot"><span class="annottext">m [BlockForging m blk1]
</span><a href="#local-6989586621679914459"><span class="hs-identifier hs-var">blockForging1</span></a></span></span><span> </span><span id="local-6989586621679914460"><span class="annot"><span class="annottext">EraParams
</span><a href="#local-6989586621679914460"><span class="hs-identifier hs-var">eraParams1</span></a></span></span><span> </span><span id="local-6989586621679914461"><span class="annot"><span class="annottext">ConsensusConfig (BlockProtocol blk1)
-&gt; PartialConsensusConfig (BlockProtocol blk1)
</span><a href="#local-6989586621679914461"><span class="hs-identifier hs-var">toPartialConsensusConfig1</span></a></span></span><span> </span><span id="local-6989586621679914462"><span class="annot"><span class="annottext">LedgerConfig blk1 -&gt; PartialLedgerConfig blk1
</span><a href="#local-6989586621679914462"><span class="hs-identifier hs-var">toPartialLedgerConfig1</span></a></span></span><span>
</span><span id="line-48"></span><span>                   </span><span id="local-6989586621679914463"><span class="annot"><span class="annottext">ProtocolInfo blk2
</span><a href="#local-6989586621679914463"><span class="hs-identifier hs-var">protocolInfo2</span></a></span></span><span> </span><span id="local-6989586621679914464"><span class="annot"><span class="annottext">m [BlockForging m blk2]
</span><a href="#local-6989586621679914464"><span class="hs-identifier hs-var">blockForging2</span></a></span></span><span> </span><span id="local-6989586621679914465"><span class="annot"><span class="annottext">EraParams
</span><a href="#local-6989586621679914465"><span class="hs-identifier hs-var">eraParams2</span></a></span></span><span> </span><span id="local-6989586621679914466"><span class="annot"><span class="annottext">ConsensusConfig (BlockProtocol blk2)
-&gt; PartialConsensusConfig (BlockProtocol blk2)
</span><a href="#local-6989586621679914466"><span class="hs-identifier hs-var">toPartialConsensusConfig2</span></a></span></span><span> </span><span id="local-6989586621679914467"><span class="annot"><span class="annottext">LedgerConfig blk2 -&gt; PartialLedgerConfig blk2
</span><a href="#local-6989586621679914467"><span class="hs-identifier hs-var">toPartialLedgerConfig2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-49"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.Node.ProtocolInfo.html#ProtocolInfo"><span class="hs-identifier hs-type">ProtocolInfo</span></a></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-50"></span><span>        </span><span class="annot"><span class="annottext">pInfoConfig :: TopLevelConfig (HardForkBlock '[blk1, blk2])
</span><a href="Ouroboros.Consensus.Node.ProtocolInfo.html#pInfoConfig"><span class="hs-identifier hs-var">pInfoConfig</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.Config.html#TopLevelConfig"><span class="hs-identifier hs-type">TopLevelConfig</span></a></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-51"></span><span>            </span><span class="annot"><span class="annottext">topLevelConfigProtocol :: ConsensusConfig (BlockProtocol (HardForkBlock '[blk1, blk2]))
</span><a href="Ouroboros.Consensus.Config.html#topLevelConfigProtocol"><span class="hs-identifier hs-var">topLevelConfigProtocol</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Basics.html#HardForkConsensusConfig"><span class="hs-identifier hs-type">HardForkConsensusConfig</span></a></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-52"></span><span>                </span><span class="annot"><span class="annottext">hardForkConsensusConfigK :: SecurityParam
</span><a href="Ouroboros.Consensus.HardFork.Combinator.Basics.html#hardForkConsensusConfigK"><span class="hs-identifier hs-var">hardForkConsensusConfigK</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SecurityParam
</span><a href="#local-6989586621679914474"><span class="hs-identifier hs-var">k</span></a></span><span>
</span><span id="line-53"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">hardForkConsensusConfigShape :: Shape '[blk1, blk2]
</span><a href="Ouroboros.Consensus.HardFork.Combinator.Basics.html#hardForkConsensusConfigShape"><span class="hs-identifier hs-var">hardForkConsensusConfigShape</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Shape '[blk1, blk2]
</span><a href="#local-6989586621679914476"><span class="hs-identifier hs-var">shape</span></a></span><span>
</span><span id="line-54"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">hardForkConsensusConfigPerEra :: PerEraConsensusConfig '[blk1, blk2]
</span><a href="Ouroboros.Consensus.HardFork.Combinator.Basics.html#hardForkConsensusConfigPerEra"><span class="hs-identifier hs-var">hardForkConsensusConfigPerEra</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NP WrapPartialConsensusConfig '[blk1, blk2]
-&gt; PerEraConsensusConfig '[blk1, blk2]
forall (xs :: [*]).
NP WrapPartialConsensusConfig xs -&gt; PerEraConsensusConfig xs
</span><a href="Ouroboros.Consensus.HardFork.Combinator.AcrossEras.html#PerEraConsensusConfig"><span class="hs-identifier hs-var">PerEraConsensusConfig</span></a></span><span>
</span><span id="line-55"></span><span>                  </span><span class="hs-special">(</span><span>  </span><span class="annot"><span class="annottext">PartialConsensusConfig (BlockProtocol blk1)
-&gt; WrapPartialConsensusConfig blk1
forall blk.
PartialConsensusConfig (BlockProtocol blk)
-&gt; WrapPartialConsensusConfig blk
</span><a href="Ouroboros.Consensus.HardFork.Combinator.PartialConfig.html#WrapPartialConsensusConfig"><span class="hs-identifier hs-var">WrapPartialConsensusConfig</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ConsensusConfig (BlockProtocol blk1)
-&gt; PartialConsensusConfig (BlockProtocol blk1)
</span><a href="#local-6989586621679914461"><span class="hs-identifier hs-var">toPartialConsensusConfig1</span></a></span><span> </span><span class="annot"><span class="annottext">ConsensusConfig (BlockProtocol blk1)
</span><a href="#local-6989586621679914480"><span class="hs-identifier hs-var">consensusConfig1</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-56"></span><span>                  </span><span class="annot"><span class="annottext">WrapPartialConsensusConfig blk1
-&gt; NP WrapPartialConsensusConfig '[blk2]
-&gt; NP WrapPartialConsensusConfig '[blk1, blk2]
forall {k} (f :: k -&gt; *) (x :: k) (xs1 :: [k]).
f x -&gt; NP f xs1 -&gt; NP f (x : xs1)
</span><span class="hs-operator hs-var">:*</span></span><span> </span><span class="annot"><span class="annottext">PartialConsensusConfig (BlockProtocol blk2)
-&gt; WrapPartialConsensusConfig blk2
forall blk.
PartialConsensusConfig (BlockProtocol blk)
-&gt; WrapPartialConsensusConfig blk
</span><a href="Ouroboros.Consensus.HardFork.Combinator.PartialConfig.html#WrapPartialConsensusConfig"><span class="hs-identifier hs-var">WrapPartialConsensusConfig</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ConsensusConfig (BlockProtocol blk2)
-&gt; PartialConsensusConfig (BlockProtocol blk2)
</span><a href="#local-6989586621679914466"><span class="hs-identifier hs-var">toPartialConsensusConfig2</span></a></span><span> </span><span class="annot"><span class="annottext">ConsensusConfig (BlockProtocol blk2)
</span><a href="#local-6989586621679914482"><span class="hs-identifier hs-var">consensusConfig2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-57"></span><span>                  </span><span class="annot"><span class="annottext">WrapPartialConsensusConfig blk2
-&gt; NP WrapPartialConsensusConfig '[]
-&gt; NP WrapPartialConsensusConfig '[blk2]
forall {k} (f :: k -&gt; *) (x :: k) (xs1 :: [k]).
f x -&gt; NP f xs1 -&gt; NP f (x : xs1)
</span><span class="hs-operator hs-var">:*</span></span><span> </span><span class="annot"><span class="annottext">NP WrapPartialConsensusConfig '[]
forall {k} (f :: k -&gt; *). NP f '[]
</span><span class="hs-identifier hs-var">Nil</span></span><span>
</span><span id="line-58"></span><span>                  </span><span class="hs-special">)</span><span>
</span><span id="line-59"></span><span>              </span><span class="hs-special">}</span><span>
</span><span id="line-60"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">topLevelConfigLedger :: LedgerConfig (HardForkBlock '[blk1, blk2])
</span><a href="Ouroboros.Consensus.Config.html#topLevelConfigLedger"><span class="hs-identifier hs-var">topLevelConfigLedger</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Basics.html#HardForkLedgerConfig"><span class="hs-identifier hs-type">HardForkLedgerConfig</span></a></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-61"></span><span>                </span><span class="annot"><span class="annottext">hardForkLedgerConfigShape :: Shape '[blk1, blk2]
</span><a href="Ouroboros.Consensus.HardFork.Combinator.Basics.html#hardForkLedgerConfigShape"><span class="hs-identifier hs-var">hardForkLedgerConfigShape</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Shape '[blk1, blk2]
</span><a href="#local-6989586621679914476"><span class="hs-identifier hs-var">shape</span></a></span><span>
</span><span id="line-62"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">hardForkLedgerConfigPerEra :: PerEraLedgerConfig '[blk1, blk2]
</span><a href="Ouroboros.Consensus.HardFork.Combinator.Basics.html#hardForkLedgerConfigPerEra"><span class="hs-identifier hs-var">hardForkLedgerConfigPerEra</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NP WrapPartialLedgerConfig '[blk1, blk2]
-&gt; PerEraLedgerConfig '[blk1, blk2]
forall (xs :: [*]).
NP WrapPartialLedgerConfig xs -&gt; PerEraLedgerConfig xs
</span><a href="Ouroboros.Consensus.HardFork.Combinator.AcrossEras.html#PerEraLedgerConfig"><span class="hs-identifier hs-var">PerEraLedgerConfig</span></a></span><span>
</span><span id="line-63"></span><span>                  </span><span class="hs-special">(</span><span>  </span><span class="annot"><span class="annottext">PartialLedgerConfig blk1 -&gt; WrapPartialLedgerConfig blk1
forall blk. PartialLedgerConfig blk -&gt; WrapPartialLedgerConfig blk
</span><a href="Ouroboros.Consensus.HardFork.Combinator.PartialConfig.html#WrapPartialLedgerConfig"><span class="hs-identifier hs-var">WrapPartialLedgerConfig</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LedgerConfig blk1 -&gt; PartialLedgerConfig blk1
</span><a href="#local-6989586621679914462"><span class="hs-identifier hs-var">toPartialLedgerConfig1</span></a></span><span> </span><span class="annot"><span class="annottext">LedgerConfig blk1
</span><a href="#local-6989586621679914490"><span class="hs-identifier hs-var">ledgerConfig1</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-64"></span><span>                  </span><span class="annot"><span class="annottext">WrapPartialLedgerConfig blk1
-&gt; NP WrapPartialLedgerConfig '[blk2]
-&gt; NP WrapPartialLedgerConfig '[blk1, blk2]
forall {k} (f :: k -&gt; *) (x :: k) (xs1 :: [k]).
f x -&gt; NP f xs1 -&gt; NP f (x : xs1)
</span><span class="hs-operator hs-var">:*</span></span><span> </span><span class="annot"><span class="annottext">PartialLedgerConfig blk2 -&gt; WrapPartialLedgerConfig blk2
forall blk. PartialLedgerConfig blk -&gt; WrapPartialLedgerConfig blk
</span><a href="Ouroboros.Consensus.HardFork.Combinator.PartialConfig.html#WrapPartialLedgerConfig"><span class="hs-identifier hs-var">WrapPartialLedgerConfig</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LedgerConfig blk2 -&gt; PartialLedgerConfig blk2
</span><a href="#local-6989586621679914467"><span class="hs-identifier hs-var">toPartialLedgerConfig2</span></a></span><span> </span><span class="annot"><span class="annottext">LedgerConfig blk2
</span><a href="#local-6989586621679914491"><span class="hs-identifier hs-var">ledgerConfig2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-65"></span><span>                  </span><span class="annot"><span class="annottext">WrapPartialLedgerConfig blk2
-&gt; NP WrapPartialLedgerConfig '[]
-&gt; NP WrapPartialLedgerConfig '[blk2]
forall {k} (f :: k -&gt; *) (x :: k) (xs1 :: [k]).
f x -&gt; NP f xs1 -&gt; NP f (x : xs1)
</span><span class="hs-operator hs-var">:*</span></span><span> </span><span class="annot"><span class="annottext">NP WrapPartialLedgerConfig '[]
forall {k} (f :: k -&gt; *). NP f '[]
</span><span class="hs-identifier hs-var">Nil</span></span><span>
</span><span id="line-66"></span><span>                  </span><span class="hs-special">)</span><span>
</span><span id="line-67"></span><span>              </span><span class="hs-special">}</span><span>
</span><span id="line-68"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">topLevelConfigBlock :: BlockConfig (HardForkBlock '[blk1, blk2])
</span><a href="Ouroboros.Consensus.Config.html#topLevelConfigBlock"><span class="hs-identifier hs-var">topLevelConfigBlock</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-69"></span><span>              </span><span class="annot"><span class="annottext">PerEraBlockConfig '[blk1, blk2]
-&gt; BlockConfig (HardForkBlock '[blk1, blk2])
forall (xs :: [*]).
PerEraBlockConfig xs -&gt; BlockConfig (HardForkBlock xs)
</span><a href="Ouroboros.Consensus.HardFork.Combinator.Basics.html#HardForkBlockConfig"><span class="hs-identifier hs-var">HardForkBlockConfig</span></a></span><span> </span><span class="annot"><span class="annottext">(PerEraBlockConfig '[blk1, blk2]
 -&gt; BlockConfig (HardForkBlock '[blk1, blk2]))
-&gt; PerEraBlockConfig '[blk1, blk2]
-&gt; BlockConfig (HardForkBlock '[blk1, blk2])
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-70"></span><span>                </span><span class="annot"><span class="annottext">NP BlockConfig '[blk1, blk2] -&gt; PerEraBlockConfig '[blk1, blk2]
forall (xs :: [*]). NP BlockConfig xs -&gt; PerEraBlockConfig xs
</span><a href="Ouroboros.Consensus.HardFork.Combinator.AcrossEras.html#PerEraBlockConfig"><span class="hs-identifier hs-var">PerEraBlockConfig</span></a></span><span> </span><span class="annot"><span class="annottext">(NP BlockConfig '[blk1, blk2] -&gt; PerEraBlockConfig '[blk1, blk2])
-&gt; NP BlockConfig '[blk1, blk2] -&gt; PerEraBlockConfig '[blk1, blk2]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-71"></span><span>                  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">BlockConfig blk1
</span><a href="#local-6989586621679914495"><span class="hs-identifier hs-var">blockConfig1</span></a></span><span> </span><span class="annot"><span class="annottext">BlockConfig blk1
-&gt; NP BlockConfig '[blk2] -&gt; NP BlockConfig '[blk1, blk2]
forall {k} (f :: k -&gt; *) (x :: k) (xs1 :: [k]).
f x -&gt; NP f xs1 -&gt; NP f (x : xs1)
</span><span class="hs-operator hs-var">:*</span></span><span> </span><span class="annot"><span class="annottext">BlockConfig blk2
</span><a href="#local-6989586621679914496"><span class="hs-identifier hs-var">blockConfig2</span></a></span><span> </span><span class="annot"><span class="annottext">BlockConfig blk2 -&gt; NP BlockConfig '[] -&gt; NP BlockConfig '[blk2]
forall {k} (f :: k -&gt; *) (x :: k) (xs1 :: [k]).
f x -&gt; NP f xs1 -&gt; NP f (x : xs1)
</span><span class="hs-operator hs-var">:*</span></span><span> </span><span class="annot"><span class="annottext">NP BlockConfig '[]
forall {k} (f :: k -&gt; *). NP f '[]
</span><span class="hs-identifier hs-var">Nil</span></span><span class="hs-special">)</span><span>
</span><span id="line-72"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">topLevelConfigCodec :: CodecConfig (HardForkBlock '[blk1, blk2])
</span><a href="Ouroboros.Consensus.Config.html#topLevelConfigCodec"><span class="hs-identifier hs-var">topLevelConfigCodec</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-73"></span><span>              </span><span class="annot"><span class="annottext">PerEraCodecConfig '[blk1, blk2]
-&gt; CodecConfig (HardForkBlock '[blk1, blk2])
forall (xs :: [*]).
PerEraCodecConfig xs -&gt; CodecConfig (HardForkBlock xs)
</span><a href="Ouroboros.Consensus.HardFork.Combinator.Basics.html#HardForkCodecConfig"><span class="hs-identifier hs-var">HardForkCodecConfig</span></a></span><span> </span><span class="annot"><span class="annottext">(PerEraCodecConfig '[blk1, blk2]
 -&gt; CodecConfig (HardForkBlock '[blk1, blk2]))
-&gt; PerEraCodecConfig '[blk1, blk2]
-&gt; CodecConfig (HardForkBlock '[blk1, blk2])
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-74"></span><span>                </span><span class="annot"><span class="annottext">NP CodecConfig '[blk1, blk2] -&gt; PerEraCodecConfig '[blk1, blk2]
forall (xs :: [*]). NP CodecConfig xs -&gt; PerEraCodecConfig xs
</span><a href="Ouroboros.Consensus.HardFork.Combinator.AcrossEras.html#PerEraCodecConfig"><span class="hs-identifier hs-var">PerEraCodecConfig</span></a></span><span> </span><span class="annot"><span class="annottext">(NP CodecConfig '[blk1, blk2] -&gt; PerEraCodecConfig '[blk1, blk2])
-&gt; NP CodecConfig '[blk1, blk2] -&gt; PerEraCodecConfig '[blk1, blk2]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-75"></span><span>                  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CodecConfig blk1
</span><a href="#local-6989586621679914500"><span class="hs-identifier hs-var">codecConfig1</span></a></span><span> </span><span class="annot"><span class="annottext">CodecConfig blk1
-&gt; NP CodecConfig '[blk2] -&gt; NP CodecConfig '[blk1, blk2]
forall {k} (f :: k -&gt; *) (x :: k) (xs1 :: [k]).
f x -&gt; NP f xs1 -&gt; NP f (x : xs1)
</span><span class="hs-operator hs-var">:*</span></span><span> </span><span class="annot"><span class="annottext">CodecConfig blk2
</span><a href="#local-6989586621679914501"><span class="hs-identifier hs-var">codecConfig2</span></a></span><span> </span><span class="annot"><span class="annottext">CodecConfig blk2 -&gt; NP CodecConfig '[] -&gt; NP CodecConfig '[blk2]
forall {k} (f :: k -&gt; *) (x :: k) (xs1 :: [k]).
f x -&gt; NP f xs1 -&gt; NP f (x : xs1)
</span><span class="hs-operator hs-var">:*</span></span><span> </span><span class="annot"><span class="annottext">NP CodecConfig '[]
forall {k} (f :: k -&gt; *). NP f '[]
</span><span class="hs-identifier hs-var">Nil</span></span><span class="hs-special">)</span><span>
</span><span id="line-76"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">topLevelConfigStorage :: StorageConfig (HardForkBlock '[blk1, blk2])
</span><a href="Ouroboros.Consensus.Config.html#topLevelConfigStorage"><span class="hs-identifier hs-var">topLevelConfigStorage</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-77"></span><span>              </span><span class="annot"><span class="annottext">PerEraStorageConfig '[blk1, blk2]
-&gt; StorageConfig (HardForkBlock '[blk1, blk2])
forall (xs :: [*]).
PerEraStorageConfig xs -&gt; StorageConfig (HardForkBlock xs)
</span><a href="Ouroboros.Consensus.HardFork.Combinator.Basics.html#HardForkStorageConfig"><span class="hs-identifier hs-var">HardForkStorageConfig</span></a></span><span> </span><span class="annot"><span class="annottext">(PerEraStorageConfig '[blk1, blk2]
 -&gt; StorageConfig (HardForkBlock '[blk1, blk2]))
-&gt; PerEraStorageConfig '[blk1, blk2]
-&gt; StorageConfig (HardForkBlock '[blk1, blk2])
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-78"></span><span>                </span><span class="annot"><span class="annottext">NP StorageConfig '[blk1, blk2] -&gt; PerEraStorageConfig '[blk1, blk2]
forall (xs :: [*]). NP StorageConfig xs -&gt; PerEraStorageConfig xs
</span><a href="Ouroboros.Consensus.HardFork.Combinator.AcrossEras.html#PerEraStorageConfig"><span class="hs-identifier hs-var">PerEraStorageConfig</span></a></span><span> </span><span class="annot"><span class="annottext">(NP StorageConfig '[blk1, blk2]
 -&gt; PerEraStorageConfig '[blk1, blk2])
-&gt; NP StorageConfig '[blk1, blk2]
-&gt; PerEraStorageConfig '[blk1, blk2]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-79"></span><span>                  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">StorageConfig blk1
</span><a href="#local-6989586621679914505"><span class="hs-identifier hs-var">storageConfig1</span></a></span><span> </span><span class="annot"><span class="annottext">StorageConfig blk1
-&gt; NP StorageConfig '[blk2] -&gt; NP StorageConfig '[blk1, blk2]
forall {k} (f :: k -&gt; *) (x :: k) (xs1 :: [k]).
f x -&gt; NP f xs1 -&gt; NP f (x : xs1)
</span><span class="hs-operator hs-var">:*</span></span><span> </span><span class="annot"><span class="annottext">StorageConfig blk2
</span><a href="#local-6989586621679914506"><span class="hs-identifier hs-var">storageConfig2</span></a></span><span> </span><span class="annot"><span class="annottext">StorageConfig blk2
-&gt; NP StorageConfig '[] -&gt; NP StorageConfig '[blk2]
forall {k} (f :: k -&gt; *) (x :: k) (xs1 :: [k]).
f x -&gt; NP f xs1 -&gt; NP f (x : xs1)
</span><span class="hs-operator hs-var">:*</span></span><span> </span><span class="annot"><span class="annottext">NP StorageConfig '[]
forall {k} (f :: k -&gt; *). NP f '[]
</span><span class="hs-identifier hs-var">Nil</span></span><span class="hs-special">)</span><span>
</span><span id="line-80"></span><span>          </span><span class="hs-special">}</span><span>
</span><span id="line-81"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">pInfoInitLedger :: ExtLedgerState (HardForkBlock '[blk1, blk2])
</span><a href="Ouroboros.Consensus.Node.ProtocolInfo.html#pInfoInitLedger"><span class="hs-identifier hs-var">pInfoInitLedger</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.Ledger.Extended.html#ExtLedgerState"><span class="hs-identifier hs-type">ExtLedgerState</span></a></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-82"></span><span>            </span><span class="annot"><span class="annottext">ledgerState :: LedgerState (HardForkBlock '[blk1, blk2])
</span><a href="Ouroboros.Consensus.Ledger.Extended.html#ledgerState"><span class="hs-identifier hs-var">ledgerState</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-83"></span><span>              </span><span class="annot"><span class="annottext">HardForkState LedgerState '[blk1, blk2]
-&gt; LedgerState (HardForkBlock '[blk1, blk2])
forall (xs :: [*]).
HardForkState LedgerState xs -&gt; LedgerState (HardForkBlock xs)
</span><a href="Ouroboros.Consensus.HardFork.Combinator.Basics.html#HardForkLedgerState"><span class="hs-identifier hs-var">HardForkLedgerState</span></a></span><span> </span><span class="annot"><span class="annottext">(HardForkState LedgerState '[blk1, blk2]
 -&gt; LedgerState (HardForkBlock '[blk1, blk2]))
-&gt; HardForkState LedgerState '[blk1, blk2]
-&gt; LedgerState (HardForkBlock '[blk1, blk2])
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-84"></span><span>                </span><span class="annot"><span class="annottext">LedgerState blk1 -&gt; HardForkState LedgerState '[blk1, blk2]
forall (f :: * -&gt; *) x (xs :: [*]). f x -&gt; HardForkState f (x : xs)
</span><a href="Ouroboros.Consensus.HardFork.Combinator.State.Infra.html#initHardForkState"><span class="hs-identifier hs-var">initHardForkState</span></a></span><span> </span><span class="annot"><span class="annottext">LedgerState blk1
</span><a href="#local-6989586621679914512"><span class="hs-identifier hs-var">initLedgerState1</span></a></span><span>
</span><span id="line-85"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">headerState :: HeaderState (HardForkBlock '[blk1, blk2])
</span><a href="Ouroboros.Consensus.Ledger.Extended.html#headerState"><span class="hs-identifier hs-var">headerState</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-86"></span><span>              </span><span class="annot"><span class="annottext">ChainDepState (BlockProtocol (HardForkBlock '[blk1, blk2]))
-&gt; HeaderState (HardForkBlock '[blk1, blk2])
forall blk. ChainDepState (BlockProtocol blk) -&gt; HeaderState blk
</span><a href="Ouroboros.Consensus.HeaderValidation.html#genesisHeaderState"><span class="hs-identifier hs-var">genesisHeaderState</span></a></span><span> </span><span class="annot"><span class="annottext">(ChainDepState (BlockProtocol (HardForkBlock '[blk1, blk2]))
 -&gt; HeaderState (HardForkBlock '[blk1, blk2]))
-&gt; ChainDepState (BlockProtocol (HardForkBlock '[blk1, blk2]))
-&gt; HeaderState (HardForkBlock '[blk1, blk2])
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-87"></span><span>                </span><span class="annot"><span class="annottext">WrapChainDepState blk1
-&gt; HardForkState WrapChainDepState '[blk1, blk2]
forall (f :: * -&gt; *) x (xs :: [*]). f x -&gt; HardForkState f (x : xs)
</span><a href="Ouroboros.Consensus.HardFork.Combinator.State.Infra.html#initHardForkState"><span class="hs-identifier hs-var">initHardForkState</span></a></span><span> </span><span class="annot"><span class="annottext">(WrapChainDepState blk1
 -&gt; HardForkState WrapChainDepState '[blk1, blk2])
-&gt; WrapChainDepState blk1
-&gt; HardForkState WrapChainDepState '[blk1, blk2]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-88"></span><span>                  </span><span class="annot"><span class="annottext">ChainDepState (BlockProtocol blk1) -&gt; WrapChainDepState blk1
forall blk.
ChainDepState (BlockProtocol blk) -&gt; WrapChainDepState blk
</span><a href="Ouroboros.Consensus.TypeFamilyWrappers.html#WrapChainDepState"><span class="hs-identifier hs-var">WrapChainDepState</span></a></span><span> </span><span class="annot"><span class="annottext">(ChainDepState (BlockProtocol blk1) -&gt; WrapChainDepState blk1)
-&gt; ChainDepState (BlockProtocol blk1) -&gt; WrapChainDepState blk1
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-89"></span><span>                    </span><span class="annot"><span class="annottext">HeaderState blk1 -&gt; ChainDepState (BlockProtocol blk1)
forall blk. HeaderState blk -&gt; ChainDepState (BlockProtocol blk)
</span><a href="Ouroboros.Consensus.HeaderValidation.html#headerStateChainDep"><span class="hs-identifier hs-var">headerStateChainDep</span></a></span><span> </span><span class="annot"><span class="annottext">HeaderState blk1
</span><a href="#local-6989586621679914517"><span class="hs-identifier hs-var">initHeaderState1</span></a></span><span>
</span><span id="line-90"></span><span>          </span><span class="hs-special">}</span><span>
</span><span id="line-91"></span><span>      </span><span class="hs-special">}</span><span>
</span><span id="line-92"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(These (BlockForging m blk1) (BlockForging m blk2)
 -&gt; BlockForging m (HardForkBlock '[blk1, blk2]))
-&gt; [BlockForging m blk1]
-&gt; [BlockForging m blk2]
-&gt; [BlockForging m (HardForkBlock '[blk1, blk2])]
forall a b c. (These a b -&gt; c) -&gt; [a] -&gt; [b] -&gt; [c]
forall (f :: * -&gt; *) a b c.
Semialign f =&gt;
(These a b -&gt; c) -&gt; f a -&gt; f b -&gt; f c
</span><span class="hs-identifier hs-var">alignWith</span></span><span> </span><span class="annot"><span class="annottext">These (BlockForging m blk1) (BlockForging m blk2)
-&gt; BlockForging m (HardForkBlock '[blk1, blk2])
</span><a href="#local-6989586621679914518"><span class="hs-identifier hs-var">alignBlockForging</span></a></span><span> </span><span class="annot"><span class="annottext">([BlockForging m blk1]
 -&gt; [BlockForging m blk2]
 -&gt; [BlockForging m (HardForkBlock '[blk1, blk2])])
-&gt; m [BlockForging m blk1]
-&gt; m ([BlockForging m blk2]
      -&gt; [BlockForging m (HardForkBlock '[blk1, blk2])])
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">m [BlockForging m blk1]
</span><a href="#local-6989586621679914459"><span class="hs-identifier hs-var">blockForging1</span></a></span><span> </span><span class="annot"><span class="annottext">m ([BlockForging m blk2]
   -&gt; [BlockForging m (HardForkBlock '[blk1, blk2])])
-&gt; m [BlockForging m blk2]
-&gt; m [BlockForging m (HardForkBlock '[blk1, blk2])]
forall a b. m (a -&gt; b) -&gt; m a -&gt; m b
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%3C%2A%3E"><span class="hs-operator hs-var">&lt;*&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">m [BlockForging m blk2]
</span><a href="#local-6989586621679914464"><span class="hs-identifier hs-var">blockForging2</span></a></span><span>
</span><span id="line-93"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-94"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-95"></span><span>    </span><span class="annot"><a href="Ouroboros.Consensus.Node.ProtocolInfo.html#ProtocolInfo"><span class="hs-identifier hs-type">ProtocolInfo</span></a></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-96"></span><span>        </span><span class="annot"><span class="annottext">pInfoConfig :: forall b. ProtocolInfo b -&gt; TopLevelConfig b
</span><a href="Ouroboros.Consensus.Node.ProtocolInfo.html#pInfoConfig"><span class="hs-identifier hs-var">pInfoConfig</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.Config.html#TopLevelConfig"><span class="hs-identifier hs-type">TopLevelConfig</span></a></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-97"></span><span>            </span><span class="annot"><span class="annottext">topLevelConfigProtocol :: forall blk.
TopLevelConfig blk -&gt; ConsensusConfig (BlockProtocol blk)
</span><a href="Ouroboros.Consensus.Config.html#topLevelConfigProtocol"><span class="hs-identifier hs-var">topLevelConfigProtocol</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679914480"><span class="annot"><span class="annottext">ConsensusConfig (BlockProtocol blk1)
</span><a href="#local-6989586621679914480"><span class="hs-identifier hs-var">consensusConfig1</span></a></span></span><span>
</span><span id="line-98"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">topLevelConfigLedger :: forall blk. TopLevelConfig blk -&gt; LedgerConfig blk
</span><a href="Ouroboros.Consensus.Config.html#topLevelConfigLedger"><span class="hs-identifier hs-var">topLevelConfigLedger</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679914490"><span class="annot"><span class="annottext">LedgerConfig blk1
</span><a href="#local-6989586621679914490"><span class="hs-identifier hs-var">ledgerConfig1</span></a></span></span><span>
</span><span id="line-99"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">topLevelConfigBlock :: forall blk. TopLevelConfig blk -&gt; BlockConfig blk
</span><a href="Ouroboros.Consensus.Config.html#topLevelConfigBlock"><span class="hs-identifier hs-var">topLevelConfigBlock</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679914495"><span class="annot"><span class="annottext">BlockConfig blk1
</span><a href="#local-6989586621679914495"><span class="hs-identifier hs-var">blockConfig1</span></a></span></span><span>
</span><span id="line-100"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">topLevelConfigCodec :: forall blk. TopLevelConfig blk -&gt; CodecConfig blk
</span><a href="Ouroboros.Consensus.Config.html#topLevelConfigCodec"><span class="hs-identifier hs-var">topLevelConfigCodec</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679914500"><span class="annot"><span class="annottext">CodecConfig blk1
</span><a href="#local-6989586621679914500"><span class="hs-identifier hs-var">codecConfig1</span></a></span></span><span>
</span><span id="line-101"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">topLevelConfigStorage :: forall blk. TopLevelConfig blk -&gt; StorageConfig blk
</span><a href="Ouroboros.Consensus.Config.html#topLevelConfigStorage"><span class="hs-identifier hs-var">topLevelConfigStorage</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679914505"><span class="annot"><span class="annottext">StorageConfig blk1
</span><a href="#local-6989586621679914505"><span class="hs-identifier hs-var">storageConfig1</span></a></span></span><span>
</span><span id="line-102"></span><span>          </span><span class="hs-special">}</span><span>
</span><span id="line-103"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">pInfoInitLedger :: forall b. ProtocolInfo b -&gt; ExtLedgerState b
</span><a href="Ouroboros.Consensus.Node.ProtocolInfo.html#pInfoInitLedger"><span class="hs-identifier hs-var">pInfoInitLedger</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.Ledger.Extended.html#ExtLedgerState"><span class="hs-identifier hs-type">ExtLedgerState</span></a></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-104"></span><span>            </span><span class="annot"><span class="annottext">ledgerState :: forall blk. ExtLedgerState blk -&gt; LedgerState blk
</span><a href="Ouroboros.Consensus.Ledger.Extended.html#ledgerState"><span class="hs-identifier hs-var">ledgerState</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679914512"><span class="annot"><span class="annottext">LedgerState blk1
</span><a href="#local-6989586621679914512"><span class="hs-identifier hs-var">initLedgerState1</span></a></span></span><span>
</span><span id="line-105"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">headerState :: forall blk. ExtLedgerState blk -&gt; HeaderState blk
</span><a href="Ouroboros.Consensus.Ledger.Extended.html#headerState"><span class="hs-identifier hs-var">headerState</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679914517"><span class="annot"><span class="annottext">HeaderState blk1
</span><a href="#local-6989586621679914517"><span class="hs-identifier hs-var">initHeaderState1</span></a></span></span><span>
</span><span id="line-106"></span><span>          </span><span class="hs-special">}</span><span>
</span><span id="line-107"></span><span>      </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ProtocolInfo blk1
</span><a href="#local-6989586621679914458"><span class="hs-identifier hs-var">protocolInfo1</span></a></span><span>
</span><span id="line-108"></span><span>
</span><span id="line-109"></span><span>    </span><span class="annot"><a href="Ouroboros.Consensus.Node.ProtocolInfo.html#ProtocolInfo"><span class="hs-identifier hs-type">ProtocolInfo</span></a></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-110"></span><span>        </span><span class="annot"><span class="annottext">pInfoConfig :: forall b. ProtocolInfo b -&gt; TopLevelConfig b
</span><a href="Ouroboros.Consensus.Node.ProtocolInfo.html#pInfoConfig"><span class="hs-identifier hs-var">pInfoConfig</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.Config.html#TopLevelConfig"><span class="hs-identifier hs-type">TopLevelConfig</span></a></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-111"></span><span>            </span><span class="annot"><span class="annottext">topLevelConfigProtocol :: forall blk.
TopLevelConfig blk -&gt; ConsensusConfig (BlockProtocol blk)
</span><a href="Ouroboros.Consensus.Config.html#topLevelConfigProtocol"><span class="hs-identifier hs-var">topLevelConfigProtocol</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679914482"><span class="annot"><span class="annottext">ConsensusConfig (BlockProtocol blk2)
</span><a href="#local-6989586621679914482"><span class="hs-identifier hs-var">consensusConfig2</span></a></span></span><span>
</span><span id="line-112"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">topLevelConfigLedger :: forall blk. TopLevelConfig blk -&gt; LedgerConfig blk
</span><a href="Ouroboros.Consensus.Config.html#topLevelConfigLedger"><span class="hs-identifier hs-var">topLevelConfigLedger</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679914491"><span class="annot"><span class="annottext">LedgerConfig blk2
</span><a href="#local-6989586621679914491"><span class="hs-identifier hs-var">ledgerConfig2</span></a></span></span><span>
</span><span id="line-113"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">topLevelConfigBlock :: forall blk. TopLevelConfig blk -&gt; BlockConfig blk
</span><a href="Ouroboros.Consensus.Config.html#topLevelConfigBlock"><span class="hs-identifier hs-var">topLevelConfigBlock</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679914496"><span class="annot"><span class="annottext">BlockConfig blk2
</span><a href="#local-6989586621679914496"><span class="hs-identifier hs-var">blockConfig2</span></a></span></span><span>
</span><span id="line-114"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">topLevelConfigCodec :: forall blk. TopLevelConfig blk -&gt; CodecConfig blk
</span><a href="Ouroboros.Consensus.Config.html#topLevelConfigCodec"><span class="hs-identifier hs-var">topLevelConfigCodec</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679914501"><span class="annot"><span class="annottext">CodecConfig blk2
</span><a href="#local-6989586621679914501"><span class="hs-identifier hs-var">codecConfig2</span></a></span></span><span>
</span><span id="line-115"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">topLevelConfigStorage :: forall blk. TopLevelConfig blk -&gt; StorageConfig blk
</span><a href="Ouroboros.Consensus.Config.html#topLevelConfigStorage"><span class="hs-identifier hs-var">topLevelConfigStorage</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679914506"><span class="annot"><span class="annottext">StorageConfig blk2
</span><a href="#local-6989586621679914506"><span class="hs-identifier hs-var">storageConfig2</span></a></span></span><span>
</span><span id="line-116"></span><span>          </span><span class="hs-special">}</span><span>
</span><span id="line-117"></span><span>      </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ProtocolInfo blk2
</span><a href="#local-6989586621679914463"><span class="hs-identifier hs-var">protocolInfo2</span></a></span><span>
</span><span id="line-118"></span><span>
</span><span id="line-119"></span><span>    </span><span class="annot"><a href="#local-6989586621679914520"><span class="hs-identifier hs-type">k1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679914521"><span class="hs-identifier hs-type">k2</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679914474"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.Config.SecurityParam.html#SecurityParam"><span class="hs-identifier hs-type">SecurityParam</span></a></span><span>
</span><span id="line-120"></span><span>    </span><span id="local-6989586621679914520"><span class="annot"><span class="annottext">k1 :: SecurityParam
</span><a href="#local-6989586621679914520"><span class="hs-identifier hs-var hs-var">k1</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ConsensusConfig (BlockProtocol blk1) -&gt; SecurityParam
forall p. ConsensusProtocol p =&gt; ConsensusConfig p -&gt; SecurityParam
</span><a href="Ouroboros.Consensus.Protocol.Abstract.html#protocolSecurityParam"><span class="hs-identifier hs-var">protocolSecurityParam</span></a></span><span> </span><span class="annot"><span class="annottext">ConsensusConfig (BlockProtocol blk1)
</span><a href="#local-6989586621679914480"><span class="hs-identifier hs-var">consensusConfig1</span></a></span><span>
</span><span id="line-121"></span><span>    </span><span id="local-6989586621679914521"><span class="annot"><span class="annottext">k2 :: SecurityParam
</span><a href="#local-6989586621679914521"><span class="hs-identifier hs-var hs-var">k2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ConsensusConfig (BlockProtocol blk2) -&gt; SecurityParam
forall p. ConsensusProtocol p =&gt; ConsensusConfig p -&gt; SecurityParam
</span><a href="Ouroboros.Consensus.Protocol.Abstract.html#protocolSecurityParam"><span class="hs-identifier hs-var">protocolSecurityParam</span></a></span><span> </span><span class="annot"><span class="annottext">ConsensusConfig (BlockProtocol blk2)
</span><a href="#local-6989586621679914482"><span class="hs-identifier hs-var">consensusConfig2</span></a></span><span>
</span><span id="line-122"></span><span>    </span><span id="local-6989586621679914474"><span class="annot"><span class="annottext">k :: SecurityParam
</span><a href="#local-6989586621679914474"><span class="hs-identifier hs-var hs-var">k</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; SecurityParam -&gt; SecurityParam
forall a. (?callStack::CallStack) =&gt; Bool -&gt; a -&gt; a
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#assert"><span class="hs-identifier hs-var hs-var">assert</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SecurityParam
</span><a href="#local-6989586621679914520"><span class="hs-identifier hs-var">k1</span></a></span><span> </span><span class="annot"><span class="annottext">SecurityParam -&gt; SecurityParam -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/ghc-prim-0.10.0/src/GHC.Classes.html#%3D%3D"><span class="hs-operator hs-var">==</span></a></span><span> </span><span class="annot"><span class="annottext">SecurityParam
</span><a href="#local-6989586621679914521"><span class="hs-identifier hs-var">k2</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SecurityParam
</span><a href="#local-6989586621679914520"><span class="hs-identifier hs-var">k1</span></a></span><span>
</span><span id="line-123"></span><span>
</span><span id="line-124"></span><span>    </span><span class="annot"><a href="#local-6989586621679914476"><span class="hs-identifier hs-type">shape</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.HardFork.History.Summary.html#Shape"><span class="hs-identifier hs-type">History.Shape</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679914290"><span class="hs-identifier hs-type">blk1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679914291"><span class="hs-identifier hs-type">blk2</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-125"></span><span>    </span><span id="local-6989586621679914476"><span class="annot"><span class="annottext">shape :: Shape '[blk1, blk2]
</span><a href="#local-6989586621679914476"><span class="hs-identifier hs-var hs-var">shape</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Exactly '[blk1, blk2] EraParams -&gt; Shape '[blk1, blk2]
forall (xs :: [*]). Exactly xs EraParams -&gt; Shape xs
</span><a href="Ouroboros.Consensus.HardFork.History.Summary.html#Shape"><span class="hs-identifier hs-var">History.Shape</span></a></span><span> </span><span class="annot"><span class="annottext">(Exactly '[blk1, blk2] EraParams -&gt; Shape '[blk1, blk2])
-&gt; Exactly '[blk1, blk2] EraParams -&gt; Shape '[blk1, blk2]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">EraParams -&gt; EraParams -&gt; Exactly '[blk1, blk2] EraParams
forall a x y. a -&gt; a -&gt; Exactly '[x, y] a
</span><span class="hs-identifier hs-var">exactlyTwo</span></span><span> </span><span class="annot"><span class="annottext">EraParams
</span><a href="#local-6989586621679914460"><span class="hs-identifier hs-var">eraParams1</span></a></span><span> </span><span class="annot"><span class="annottext">EraParams
</span><a href="#local-6989586621679914465"><span class="hs-identifier hs-var">eraParams2</span></a></span><span>
</span><span id="line-126"></span><span>
</span><span id="line-127"></span><span>    </span><span class="annot"><a href="#local-6989586621679914518"><span class="hs-identifier hs-type">alignBlockForging</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-128"></span><span>         </span><span class="annot"><span class="hs-identifier hs-type">These</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Ouroboros.Consensus.Block.Forging.html#BlockForging"><span class="hs-identifier hs-type">BlockForging</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679914293"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679914290"><span class="hs-identifier hs-type">blk1</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Ouroboros.Consensus.Block.Forging.html#BlockForging"><span class="hs-identifier hs-type">BlockForging</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679914293"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679914291"><span class="hs-identifier hs-type">blk2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-129"></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.Block.Forging.html#BlockForging"><span class="hs-identifier hs-type">BlockForging</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679914293"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Basics.html#HardForkBlock"><span class="hs-identifier hs-type">HardForkBlock</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679914290"><span class="hs-identifier hs-type">blk1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679914291"><span class="hs-identifier hs-type">blk2</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-130"></span><span>    </span><span id="local-6989586621679914518"><span class="annot"><span class="annottext">alignBlockForging :: These (BlockForging m blk1) (BlockForging m blk2)
-&gt; BlockForging m (HardForkBlock '[blk1, blk2])
</span><a href="#local-6989586621679914518"><span class="hs-identifier hs-var hs-var">alignBlockForging</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-131"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">This</span></span><span> </span><span id="local-6989586621679914524"><span class="annot"><span class="annottext">BlockForging m blk1
</span><a href="#local-6989586621679914524"><span class="hs-identifier hs-var">bf1</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-132"></span><span>        </span><span class="annot"><span class="annottext">Text
-&gt; NonEmptyOptNP (BlockForging m) '[blk1, blk2]
-&gt; BlockForging m (HardForkBlock '[blk1, blk2])
forall (m :: * -&gt; *) (xs :: [*]).
(CanHardFork xs, Monad m) =&gt;
Text
-&gt; NonEmptyOptNP (BlockForging m) xs
-&gt; BlockForging m (HardForkBlock xs)
</span><a href="Ouroboros.Consensus.HardFork.Combinator.Forging.html#hardForkBlockForging"><span class="hs-identifier hs-var">hardForkBlockForging</span></a></span><span>
</span><span id="line-133"></span><span>          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">BlockForging m blk1 -&gt; Text
forall (m :: * -&gt; *) blk. BlockForging m blk -&gt; Text
</span><a href="Ouroboros.Consensus.Block.Forging.html#forgeLabel"><span class="hs-identifier hs-var">forgeLabel</span></a></span><span> </span><span class="annot"><span class="annottext">BlockForging m blk1
</span><a href="#local-6989586621679914524"><span class="hs-identifier hs-var">bf1</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-134"></span><span>          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">BlockForging m blk1
-&gt; OptNP 'True (BlockForging m) '[blk2]
-&gt; NonEmptyOptNP (BlockForging m) '[blk1, blk2]
forall {k} (f :: k -&gt; *) (x :: k) (empty1 :: Bool) (xs1 :: [k]).
f x -&gt; OptNP empty1 f xs1 -&gt; OptNP 'False f (x : xs1)
</span><span class="hs-identifier hs-var">OptCons</span></span><span> </span><span class="annot"><span class="annottext">BlockForging m blk1
</span><a href="#local-6989586621679914524"><span class="hs-identifier hs-var">bf1</span></a></span><span> </span><span class="annot"><span class="annottext">(OptNP 'True (BlockForging m) '[blk2]
 -&gt; NonEmptyOptNP (BlockForging m) '[blk1, blk2])
-&gt; OptNP 'True (BlockForging m) '[blk2]
-&gt; NonEmptyOptNP (BlockForging m) '[blk1, blk2]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">OptNP 'True (BlockForging m) '[]
-&gt; OptNP 'True (BlockForging m) '[blk2]
forall {k} (empty :: Bool) (f :: k -&gt; *) (xs1 :: [k]) (x :: k).
OptNP empty f xs1 -&gt; OptNP empty f (x : xs1)
</span><span class="hs-identifier hs-var">OptSkip</span></span><span> </span><span class="annot"><span class="annottext">OptNP 'True (BlockForging m) '[]
forall {k} (f :: k -&gt; *). OptNP 'True f '[]
</span><span class="hs-identifier hs-var">OptNil</span></span><span class="hs-special">)</span><span>
</span><span id="line-135"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">That</span></span><span> </span><span id="local-6989586621679914531"><span class="annot"><span class="annottext">BlockForging m blk2
</span><a href="#local-6989586621679914531"><span class="hs-identifier hs-var">bf2</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-136"></span><span>        </span><span class="annot"><span class="annottext">Text
-&gt; NonEmptyOptNP (BlockForging m) '[blk1, blk2]
-&gt; BlockForging m (HardForkBlock '[blk1, blk2])
forall (m :: * -&gt; *) (xs :: [*]).
(CanHardFork xs, Monad m) =&gt;
Text
-&gt; NonEmptyOptNP (BlockForging m) xs
-&gt; BlockForging m (HardForkBlock xs)
</span><a href="Ouroboros.Consensus.HardFork.Combinator.Forging.html#hardForkBlockForging"><span class="hs-identifier hs-var">hardForkBlockForging</span></a></span><span>
</span><span id="line-137"></span><span>          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">BlockForging m blk2 -&gt; Text
forall (m :: * -&gt; *) blk. BlockForging m blk -&gt; Text
</span><a href="Ouroboros.Consensus.Block.Forging.html#forgeLabel"><span class="hs-identifier hs-var">forgeLabel</span></a></span><span> </span><span class="annot"><span class="annottext">BlockForging m blk2
</span><a href="#local-6989586621679914531"><span class="hs-identifier hs-var">bf2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-138"></span><span>          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OptNP 'False (BlockForging m) '[blk2]
-&gt; NonEmptyOptNP (BlockForging m) '[blk1, blk2]
forall {k} (empty :: Bool) (f :: k -&gt; *) (xs1 :: [k]) (x :: k).
OptNP empty f xs1 -&gt; OptNP empty f (x : xs1)
</span><span class="hs-identifier hs-var">OptSkip</span></span><span> </span><span class="annot"><span class="annottext">(OptNP 'False (BlockForging m) '[blk2]
 -&gt; NonEmptyOptNP (BlockForging m) '[blk1, blk2])
-&gt; OptNP 'False (BlockForging m) '[blk2]
-&gt; NonEmptyOptNP (BlockForging m) '[blk1, blk2]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">BlockForging m blk2
-&gt; OptNP 'True (BlockForging m) '[]
-&gt; OptNP 'False (BlockForging m) '[blk2]
forall {k} (f :: k -&gt; *) (x :: k) (empty1 :: Bool) (xs1 :: [k]).
f x -&gt; OptNP empty1 f xs1 -&gt; OptNP 'False f (x : xs1)
</span><span class="hs-identifier hs-var">OptCons</span></span><span> </span><span class="annot"><span class="annottext">BlockForging m blk2
</span><a href="#local-6989586621679914531"><span class="hs-identifier hs-var">bf2</span></a></span><span> </span><span class="annot"><span class="annottext">OptNP 'True (BlockForging m) '[]
forall {k} (f :: k -&gt; *). OptNP 'True f '[]
</span><span class="hs-identifier hs-var">OptNil</span></span><span class="hs-special">)</span><span>
</span><span id="line-139"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">These</span></span><span> </span><span id="local-6989586621679914533"><span class="annot"><span class="annottext">BlockForging m blk1
</span><a href="#local-6989586621679914533"><span class="hs-identifier hs-var">bf1</span></a></span></span><span> </span><span id="local-6989586621679914534"><span class="annot"><span class="annottext">BlockForging m blk2
</span><a href="#local-6989586621679914534"><span class="hs-identifier hs-var">bf2</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-140"></span><span>        </span><span class="annot"><span class="annottext">Text
-&gt; NonEmptyOptNP (BlockForging m) '[blk1, blk2]
-&gt; BlockForging m (HardForkBlock '[blk1, blk2])
forall (m :: * -&gt; *) (xs :: [*]).
(CanHardFork xs, Monad m) =&gt;
Text
-&gt; NonEmptyOptNP (BlockForging m) xs
-&gt; BlockForging m (HardForkBlock xs)
</span><a href="Ouroboros.Consensus.HardFork.Combinator.Forging.html#hardForkBlockForging"><span class="hs-identifier hs-var">hardForkBlockForging</span></a></span><span>
</span><span id="line-141"></span><span>          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">BlockForging m blk1 -&gt; Text
forall (m :: * -&gt; *) blk. BlockForging m blk -&gt; Text
</span><a href="Ouroboros.Consensus.Block.Forging.html#forgeLabel"><span class="hs-identifier hs-var">forgeLabel</span></a></span><span> </span><span class="annot"><span class="annottext">BlockForging m blk1
</span><a href="#local-6989586621679914533"><span class="hs-identifier hs-var">bf1</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;-&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">BlockForging m blk2 -&gt; Text
forall (m :: * -&gt; *) blk. BlockForging m blk -&gt; Text
</span><a href="Ouroboros.Consensus.Block.Forging.html#forgeLabel"><span class="hs-identifier hs-var">forgeLabel</span></a></span><span> </span><span class="annot"><span class="annottext">BlockForging m blk2
</span><a href="#local-6989586621679914534"><span class="hs-identifier hs-var">bf2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-142"></span><span>          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">BlockForging m blk1
-&gt; OptNP 'False (BlockForging m) '[blk2]
-&gt; NonEmptyOptNP (BlockForging m) '[blk1, blk2]
forall {k} (f :: k -&gt; *) (x :: k) (empty1 :: Bool) (xs1 :: [k]).
f x -&gt; OptNP empty1 f xs1 -&gt; OptNP 'False f (x : xs1)
</span><span class="hs-identifier hs-var">OptCons</span></span><span> </span><span class="annot"><span class="annottext">BlockForging m blk1
</span><a href="#local-6989586621679914533"><span class="hs-identifier hs-var">bf1</span></a></span><span> </span><span class="annot"><span class="annottext">(OptNP 'False (BlockForging m) '[blk2]
 -&gt; NonEmptyOptNP (BlockForging m) '[blk1, blk2])
-&gt; OptNP 'False (BlockForging m) '[blk2]
-&gt; NonEmptyOptNP (BlockForging m) '[blk1, blk2]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">BlockForging m blk2
-&gt; OptNP 'True (BlockForging m) '[]
-&gt; OptNP 'False (BlockForging m) '[blk2]
forall {k} (f :: k -&gt; *) (x :: k) (empty1 :: Bool) (xs1 :: [k]).
f x -&gt; OptNP empty1 f xs1 -&gt; OptNP 'False f (x : xs1)
</span><span class="hs-identifier hs-var">OptCons</span></span><span> </span><span class="annot"><span class="annottext">BlockForging m blk2
</span><a href="#local-6989586621679914534"><span class="hs-identifier hs-var">bf2</span></a></span><span> </span><span class="annot"><span class="annottext">OptNP 'True (BlockForging m) '[]
forall {k} (f :: k -&gt; *). OptNP 'True f '[]
</span><span class="hs-identifier hs-var">OptNil</span></span><span class="hs-special">)</span><span>
</span><span id="line-143"></span></pre></body></html>