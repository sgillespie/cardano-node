<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE ExistentialQuantification #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE RankNTypes                #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE RecordWildCards           #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE ScopedTypeVariables       #-}</span><span>
</span><span id="line-5"></span><span class="hs-pragma">{-# LANGUAGE TypeApplications          #-}</span><span>
</span><span id="line-6"></span><span>
</span><span id="line-7"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Ouroboros.Consensus.Storage.ChainDB.Impl.Args</span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-8"></span><span>    </span><span class="annot"><a href="Ouroboros.Consensus.Storage.ChainDB.Impl.Args.html#ChainDbArgs"><span class="hs-identifier">ChainDbArgs</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-9"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.Storage.ChainDB.Impl.Args.html#ChainDbSpecificArgs"><span class="hs-identifier">ChainDbSpecificArgs</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-10"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.Storage.ChainDB.Impl.Args.html#RelativeMountPoint"><span class="hs-identifier">RelativeMountPoint</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-11"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.Storage.ChainDB.Impl.Args.html#defaultArgs"><span class="hs-identifier">defaultArgs</span></a></span><span>
</span><span id="line-12"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Internal</span></span><span>
</span><span id="line-13"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.Storage.ChainDB.Impl.Args.html#fromChainDbArgs"><span class="hs-identifier">fromChainDbArgs</span></a></span><span>
</span><span id="line-14"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-15"></span><span>
</span><span id="line-16"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Control.Tracer</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Tracer</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/Data.Functor.Contravariant.html#contramap"><span class="hs-identifier">contramap</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">nullTracer</span></span><span class="hs-special">)</span><span>
</span><span id="line-17"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/time-1.12.2/src/Data.Time.Clock.html"><span class="hs-identifier">Data.Time.Clock</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/time-1.12.2/src/Data.Time.Clock.Internal.DiffTime.html#DiffTime"><span class="hs-identifier">DiffTime</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/time-1.12.2/src/Data.Time.Clock.Internal.DiffTime.html#secondsToDiffTime"><span class="hs-identifier">secondsToDiffTime</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-18"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Ouroboros.Consensus.Block.html"><span class="hs-identifier">Ouroboros.Consensus.Block</span></a></span><span>
</span><span id="line-19"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Ouroboros.Consensus.Config.html"><span class="hs-identifier">Ouroboros.Consensus.Config</span></a></span><span>
</span><span id="line-20"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Ouroboros.Consensus.Fragment.InFuture.html"><span class="hs-identifier">Ouroboros.Consensus.Fragment.InFuture</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Ouroboros.Consensus.Fragment.InFuture.html#CheckInFuture"><span class="hs-identifier">CheckInFuture</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-21"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Ouroboros.Consensus.Ledger.Extended.html"><span class="hs-identifier">Ouroboros.Consensus.Ledger.Extended</span></a></span><span>
</span><span id="line-22"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Ouroboros.Consensus.Storage.ChainDB.Impl.LgrDB.html"><span class="hs-identifier">Ouroboros.Consensus.Storage.ChainDB.Impl.LgrDB</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Ouroboros.Consensus.Storage.LedgerDB.LedgerDB.html#LedgerDB%27"><span class="hs-identifier">LedgerDB'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-23"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.Storage.ChainDB.Impl.LgrDB.html"><span class="hs-identifier">Ouroboros.Consensus.Storage.ChainDB.Impl.LgrDB</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">LgrDB</span></span><span>
</span><span id="line-24"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Ouroboros.Consensus.Storage.ChainDB.Impl.Types.html"><span class="hs-identifier">Ouroboros.Consensus.Storage.ChainDB.Impl.Types</span></a></span><span>
</span><span id="line-25"></span><span>                     </span><span class="hs-special">(</span><span class="annot"><a href="Ouroboros.Consensus.Storage.ChainDB.Impl.Types.html#TraceEvent"><span class="hs-identifier">TraceEvent</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-26"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Ouroboros.Consensus.Storage.ImmutableDB.html"><span class="hs-identifier">Ouroboros.Consensus.Storage.ImmutableDB</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Ouroboros.Consensus.Storage.ImmutableDB.Chunks.Internal.html#ChunkInfo"><span class="hs-identifier">ChunkInfo</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-27"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.Storage.ImmutableDB.html"><span class="hs-identifier">Ouroboros.Consensus.Storage.ImmutableDB</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">ImmutableDB</span></span><span>
</span><span id="line-28"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Ouroboros.Consensus.Storage.LedgerDB.html"><span class="hs-identifier">Ouroboros.Consensus.Storage.LedgerDB</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Ouroboros.Consensus.Storage.LedgerDB.DiskPolicy.html#DiskPolicy"><span class="hs-identifier">DiskPolicy</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-29"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.Storage.VolatileDB.html"><span class="hs-identifier">Ouroboros.Consensus.Storage.VolatileDB</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">VolatileDB</span></span><span>
</span><span id="line-30"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Ouroboros.Consensus.Util.Args.html"><span class="hs-identifier">Ouroboros.Consensus.Util.Args</span></a></span><span>
</span><span id="line-31"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Ouroboros.Consensus.Util.ResourceRegistry.html"><span class="hs-identifier">Ouroboros.Consensus.Util.ResourceRegistry</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Ouroboros.Consensus.Util.ResourceRegistry.html#ResourceRegistry"><span class="hs-identifier">ResourceRegistry</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-32"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">System.FS.API</span></span><span>
</span><span id="line-33"></span><span>
</span><span id="line-34"></span><span class="hs-comment">{-------------------------------------------------------------------------------
  Arguments
-------------------------------------------------------------------------------}</span><span>
</span><span id="line-37"></span><span>
</span><span id="line-38"></span><span class="hs-keyword">data</span><span> </span><span id="ChainDbArgs"><span class="annot"><a href="Ouroboros.Consensus.Storage.ChainDB.Impl.Args.html#ChainDbArgs"><span class="hs-identifier hs-var">ChainDbArgs</span></a></span></span><span> </span><span id="local-6989586621679898135"><span class="annot"><a href="#local-6989586621679898135"><span class="hs-identifier hs-type">f</span></a></span></span><span> </span><span id="local-6989586621679898136"><span class="annot"><a href="#local-6989586621679898136"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span id="local-6989586621679898137"><span class="annot"><a href="#local-6989586621679898137"><span class="hs-identifier hs-type">blk</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="ChainDbArgs"><span class="annot"><a href="Ouroboros.Consensus.Storage.ChainDB.Impl.Args.html#ChainDbArgs"><span class="hs-identifier hs-var">ChainDbArgs</span></a></span></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-39"></span><span>
</span><span id="line-40"></span><span>      </span><span class="hs-comment">-- HasFS instances</span><span>
</span><span id="line-41"></span><span>      </span><span id="cdbHasFSImmutableDB"><span class="annot"><span class="annottext">forall (f :: * -&gt; *) (m :: * -&gt; *) blk.
ChainDbArgs f m blk -&gt; SomeHasFS m
</span><a href="Ouroboros.Consensus.Storage.ChainDB.Impl.Args.html#cdbHasFSImmutableDB"><span class="hs-identifier hs-var hs-var">cdbHasFSImmutableDB</span></a></span></span><span>       </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">SomeHasFS</span></span><span> </span><span class="annot"><a href="#local-6989586621679898136"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-42"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="cdbHasFSVolatileDB"><span class="annot"><span class="annottext">forall (f :: * -&gt; *) (m :: * -&gt; *) blk.
ChainDbArgs f m blk -&gt; SomeHasFS m
</span><a href="Ouroboros.Consensus.Storage.ChainDB.Impl.Args.html#cdbHasFSVolatileDB"><span class="hs-identifier hs-var hs-var">cdbHasFSVolatileDB</span></a></span></span><span>        </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">SomeHasFS</span></span><span> </span><span class="annot"><a href="#local-6989586621679898136"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-43"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="cdbHasFSLgrDB"><span class="annot"><span class="annottext">forall (f :: * -&gt; *) (m :: * -&gt; *) blk.
ChainDbArgs f m blk -&gt; SomeHasFS m
</span><a href="Ouroboros.Consensus.Storage.ChainDB.Impl.Args.html#cdbHasFSLgrDB"><span class="hs-identifier hs-var hs-var">cdbHasFSLgrDB</span></a></span></span><span>             </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">SomeHasFS</span></span><span> </span><span class="annot"><a href="#local-6989586621679898136"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-44"></span><span>
</span><span id="line-45"></span><span>      </span><span class="hs-comment">-- Policy</span><span>
</span><span id="line-46"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="cdbImmutableDbValidation"><span class="annot"><span class="annottext">forall (f :: * -&gt; *) (m :: * -&gt; *) blk.
ChainDbArgs f m blk -&gt; ValidationPolicy
</span><a href="Ouroboros.Consensus.Storage.ChainDB.Impl.Args.html#cdbImmutableDbValidation"><span class="hs-identifier hs-var hs-var">cdbImmutableDbValidation</span></a></span></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.Storage.ImmutableDB.Impl.Types.html#ValidationPolicy"><span class="hs-identifier hs-type">ImmutableDB.ValidationPolicy</span></a></span><span>
</span><span id="line-47"></span><span>    </span><span class="hs-comment">-- ^ Which chunks of the ImmutableDB to validate on opening: all chunks, or</span><span>
</span><span id="line-48"></span><span>    </span><span class="hs-comment">-- only the most recent chunk?</span><span>
</span><span id="line-49"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="cdbVolatileDbValidation"><span class="annot"><span class="annottext">forall (f :: * -&gt; *) (m :: * -&gt; *) blk.
ChainDbArgs f m blk -&gt; BlockValidationPolicy
</span><a href="Ouroboros.Consensus.Storage.ChainDB.Impl.Args.html#cdbVolatileDbValidation"><span class="hs-identifier hs-var hs-var">cdbVolatileDbValidation</span></a></span></span><span>   </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.Storage.VolatileDB.Impl.Types.html#BlockValidationPolicy"><span class="hs-identifier hs-type">VolatileDB.BlockValidationPolicy</span></a></span><span>
</span><span id="line-50"></span><span>    </span><span class="hs-comment">-- ^ Should the parser for the VolatileDB fail when it encounters a</span><span>
</span><span id="line-51"></span><span>    </span><span class="hs-comment">-- corrupt/invalid block?</span><span>
</span><span id="line-52"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="cdbMaxBlocksPerFile"><span class="annot"><span class="annottext">forall (f :: * -&gt; *) (m :: * -&gt; *) blk.
ChainDbArgs f m blk -&gt; BlocksPerFile
</span><a href="Ouroboros.Consensus.Storage.ChainDB.Impl.Args.html#cdbMaxBlocksPerFile"><span class="hs-identifier hs-var hs-var">cdbMaxBlocksPerFile</span></a></span></span><span>       </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.Storage.VolatileDB.Impl.Types.html#BlocksPerFile"><span class="hs-identifier hs-type">VolatileDB.BlocksPerFile</span></a></span><span>
</span><span id="line-53"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="cdbDiskPolicy"><span class="annot"><span class="annottext">forall (f :: * -&gt; *) (m :: * -&gt; *) blk.
ChainDbArgs f m blk -&gt; DiskPolicy
</span><a href="Ouroboros.Consensus.Storage.ChainDB.Impl.Args.html#cdbDiskPolicy"><span class="hs-identifier hs-var hs-var">cdbDiskPolicy</span></a></span></span><span>             </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.Storage.LedgerDB.DiskPolicy.html#DiskPolicy"><span class="hs-identifier hs-type">LgrDB.DiskPolicy</span></a></span><span>
</span><span id="line-54"></span><span>
</span><span id="line-55"></span><span>      </span><span class="hs-comment">-- Integration</span><span>
</span><span id="line-56"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="cdbTopLevelConfig"><span class="annot"><span class="annottext">forall (f :: * -&gt; *) (m :: * -&gt; *) blk.
ChainDbArgs f m blk -&gt; HKD f (TopLevelConfig blk)
</span><a href="Ouroboros.Consensus.Storage.ChainDB.Impl.Args.html#cdbTopLevelConfig"><span class="hs-identifier hs-var hs-var">cdbTopLevelConfig</span></a></span></span><span>         </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.Util.Args.html#HKD"><span class="hs-identifier hs-type">HKD</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679898135"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Ouroboros.Consensus.Config.html#TopLevelConfig"><span class="hs-identifier hs-type">TopLevelConfig</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679898137"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-57"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="cdbChunkInfo"><span class="annot"><span class="annottext">forall (f :: * -&gt; *) (m :: * -&gt; *) blk.
ChainDbArgs f m blk -&gt; HKD f ChunkInfo
</span><a href="Ouroboros.Consensus.Storage.ChainDB.Impl.Args.html#cdbChunkInfo"><span class="hs-identifier hs-var hs-var">cdbChunkInfo</span></a></span></span><span>              </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.Util.Args.html#HKD"><span class="hs-identifier hs-type">HKD</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679898135"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="Ouroboros.Consensus.Storage.ImmutableDB.Chunks.Internal.html#ChunkInfo"><span class="hs-identifier hs-type">ChunkInfo</span></a></span><span>
</span><span id="line-58"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="cdbCheckIntegrity"><span class="annot"><span class="annottext">forall (f :: * -&gt; *) (m :: * -&gt; *) blk.
ChainDbArgs f m blk -&gt; HKD f (blk -&gt; Bool)
</span><a href="Ouroboros.Consensus.Storage.ChainDB.Impl.Args.html#cdbCheckIntegrity"><span class="hs-identifier hs-var hs-var">cdbCheckIntegrity</span></a></span></span><span>         </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.Util.Args.html#HKD"><span class="hs-identifier hs-type">HKD</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679898135"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679898137"><span class="hs-identifier hs-type">blk</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#Bool"><span class="hs-identifier hs-type">Bool</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-59"></span><span>    </span><span class="hs-comment">-- ^ Predicate to check for integrity of</span><span>
</span><span id="line-60"></span><span>    </span><span class="hs-comment">-- 'Ouroboros.Consensus.Storage.Common.GetVerifiedBlock' components when</span><span>
</span><span id="line-61"></span><span>    </span><span class="hs-comment">-- extracting them from both the VolatileDB and the ImmutableDB.</span><span>
</span><span id="line-62"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="cdbGenesis"><span class="annot"><span class="annottext">forall (f :: * -&gt; *) (m :: * -&gt; *) blk.
ChainDbArgs f m blk -&gt; HKD f (m (ExtLedgerState blk))
</span><a href="Ouroboros.Consensus.Storage.ChainDB.Impl.Args.html#cdbGenesis"><span class="hs-identifier hs-var hs-var">cdbGenesis</span></a></span></span><span>                </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.Util.Args.html#HKD"><span class="hs-identifier hs-type">HKD</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679898135"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679898136"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Ouroboros.Consensus.Ledger.Extended.html#ExtLedgerState"><span class="hs-identifier hs-type">ExtLedgerState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679898137"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-63"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="cdbCheckInFuture"><span class="annot"><span class="annottext">forall (f :: * -&gt; *) (m :: * -&gt; *) blk.
ChainDbArgs f m blk -&gt; HKD f (CheckInFuture m blk)
</span><a href="Ouroboros.Consensus.Storage.ChainDB.Impl.Args.html#cdbCheckInFuture"><span class="hs-identifier hs-var hs-var">cdbCheckInFuture</span></a></span></span><span>          </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.Util.Args.html#HKD"><span class="hs-identifier hs-type">HKD</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679898135"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Ouroboros.Consensus.Fragment.InFuture.html#CheckInFuture"><span class="hs-identifier hs-type">CheckInFuture</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679898136"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679898137"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-64"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="cdbImmutableDbCacheConfig"><span class="annot"><span class="annottext">forall (f :: * -&gt; *) (m :: * -&gt; *) blk.
ChainDbArgs f m blk -&gt; CacheConfig
</span><a href="Ouroboros.Consensus.Storage.ChainDB.Impl.Args.html#cdbImmutableDbCacheConfig"><span class="hs-identifier hs-var hs-var">cdbImmutableDbCacheConfig</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.Storage.ImmutableDB.Impl.Index.Cache.html#CacheConfig"><span class="hs-identifier hs-type">ImmutableDB.CacheConfig</span></a></span><span>
</span><span id="line-65"></span><span>
</span><span id="line-66"></span><span>      </span><span class="hs-comment">-- Misc</span><span>
</span><span id="line-67"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="cdbTracer"><span class="annot"><span class="annottext">forall (f :: * -&gt; *) (m :: * -&gt; *) blk.
ChainDbArgs f m blk -&gt; Tracer m (TraceEvent blk)
</span><a href="Ouroboros.Consensus.Storage.ChainDB.Impl.Args.html#cdbTracer"><span class="hs-identifier hs-var hs-var">cdbTracer</span></a></span></span><span>                 </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Tracer</span></span><span> </span><span class="annot"><a href="#local-6989586621679898136"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Ouroboros.Consensus.Storage.ChainDB.Impl.Types.html#TraceEvent"><span class="hs-identifier hs-type">TraceEvent</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679898137"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-68"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="cdbTraceLedger"><span class="annot"><span class="annottext">forall (f :: * -&gt; *) (m :: * -&gt; *) blk.
ChainDbArgs f m blk -&gt; Tracer m (LedgerDB' blk)
</span><a href="Ouroboros.Consensus.Storage.ChainDB.Impl.Args.html#cdbTraceLedger"><span class="hs-identifier hs-var hs-var">cdbTraceLedger</span></a></span></span><span>            </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Tracer</span></span><span> </span><span class="annot"><a href="#local-6989586621679898136"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Ouroboros.Consensus.Storage.LedgerDB.LedgerDB.html#LedgerDB%27"><span class="hs-identifier hs-type">LedgerDB'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679898137"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-69"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="cdbRegistry"><span class="annot"><span class="annottext">forall (f :: * -&gt; *) (m :: * -&gt; *) blk.
ChainDbArgs f m blk -&gt; HKD f (ResourceRegistry m)
</span><a href="Ouroboros.Consensus.Storage.ChainDB.Impl.Args.html#cdbRegistry"><span class="hs-identifier hs-var hs-var">cdbRegistry</span></a></span></span><span>               </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.Util.Args.html#HKD"><span class="hs-identifier hs-type">HKD</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679898135"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Ouroboros.Consensus.Util.ResourceRegistry.html#ResourceRegistry"><span class="hs-identifier hs-type">ResourceRegistry</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679898136"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-70"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="cdbGcDelay"><span class="annot"><span class="annottext">forall (f :: * -&gt; *) (m :: * -&gt; *) blk.
ChainDbArgs f m blk -&gt; DiffTime
</span><a href="Ouroboros.Consensus.Storage.ChainDB.Impl.Args.html#cdbGcDelay"><span class="hs-identifier hs-var hs-var">cdbGcDelay</span></a></span></span><span>                </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/time-1.12.2/src/Data.Time.Clock.Internal.DiffTime.html#DiffTime"><span class="hs-identifier hs-type">DiffTime</span></a></span><span>
</span><span id="line-71"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="cdbGcInterval"><span class="annot"><span class="annottext">forall (f :: * -&gt; *) (m :: * -&gt; *) blk.
ChainDbArgs f m blk -&gt; DiffTime
</span><a href="Ouroboros.Consensus.Storage.ChainDB.Impl.Args.html#cdbGcInterval"><span class="hs-identifier hs-var hs-var">cdbGcInterval</span></a></span></span><span>             </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/time-1.12.2/src/Data.Time.Clock.Internal.DiffTime.html#DiffTime"><span class="hs-identifier hs-type">DiffTime</span></a></span><span>
</span><span id="line-72"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="cdbBlocksToAddSize"><span class="annot"><span class="annottext">forall (f :: * -&gt; *) (m :: * -&gt; *) blk. ChainDbArgs f m blk -&gt; Word
</span><a href="Ouroboros.Consensus.Storage.ChainDB.Impl.Args.html#cdbBlocksToAddSize"><span class="hs-identifier hs-var hs-var">cdbBlocksToAddSize</span></a></span></span><span>        </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#Word"><span class="hs-identifier hs-type">Word</span></a></span><span>
</span><span id="line-73"></span><span>      </span><span class="hs-comment">-- ^ Size of the queue used to store asynchronously added blocks. This</span><span>
</span><span id="line-74"></span><span>      </span><span class="hs-comment">-- is the maximum number of blocks that could be kept in memory at the</span><span>
</span><span id="line-75"></span><span>      </span><span class="hs-comment">-- same time when the background thread processing the blocks can't keep</span><span>
</span><span id="line-76"></span><span>      </span><span class="hs-comment">-- up.</span><span>
</span><span id="line-77"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-78"></span><span>
</span><span id="line-79"></span><span class="hs-comment">-- | Arguments specific to the ChainDB, not to the ImmutableDB, VolatileDB, or</span><span>
</span><span id="line-80"></span><span class="hs-comment">-- LedgerDB.</span><span>
</span><span id="line-81"></span><span class="hs-keyword">data</span><span> </span><span id="ChainDbSpecificArgs"><span class="annot"><a href="Ouroboros.Consensus.Storage.ChainDB.Impl.Args.html#ChainDbSpecificArgs"><span class="hs-identifier hs-var">ChainDbSpecificArgs</span></a></span></span><span> </span><span id="local-6989586621679898212"><span class="annot"><a href="#local-6989586621679898212"><span class="hs-identifier hs-type">f</span></a></span></span><span> </span><span id="local-6989586621679898213"><span class="annot"><a href="#local-6989586621679898213"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span id="local-6989586621679898214"><span class="annot"><a href="#local-6989586621679898214"><span class="hs-identifier hs-type">blk</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="ChainDbSpecificArgs"><span class="annot"><a href="Ouroboros.Consensus.Storage.ChainDB.Impl.Args.html#ChainDbSpecificArgs"><span class="hs-identifier hs-var">ChainDbSpecificArgs</span></a></span></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-82"></span><span>      </span><span id="cdbsBlocksToAddSize"><span class="annot"><span class="annottext">forall (f :: * -&gt; *) (m :: * -&gt; *) blk.
ChainDbSpecificArgs f m blk -&gt; Word
</span><a href="Ouroboros.Consensus.Storage.ChainDB.Impl.Args.html#cdbsBlocksToAddSize"><span class="hs-identifier hs-var hs-var">cdbsBlocksToAddSize</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#Word"><span class="hs-identifier hs-type">Word</span></a></span><span>
</span><span id="line-83"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="cdbsCheckInFuture"><span class="annot"><span class="annottext">forall (f :: * -&gt; *) (m :: * -&gt; *) blk.
ChainDbSpecificArgs f m blk -&gt; HKD f (CheckInFuture m blk)
</span><a href="Ouroboros.Consensus.Storage.ChainDB.Impl.Args.html#cdbsCheckInFuture"><span class="hs-identifier hs-var hs-var">cdbsCheckInFuture</span></a></span></span><span>   </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.Util.Args.html#HKD"><span class="hs-identifier hs-type">HKD</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679898212"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Ouroboros.Consensus.Fragment.InFuture.html#CheckInFuture"><span class="hs-identifier hs-type">CheckInFuture</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679898213"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679898214"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-84"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="cdbsGcDelay"><span class="annot"><span class="annottext">forall (f :: * -&gt; *) (m :: * -&gt; *) blk.
ChainDbSpecificArgs f m blk -&gt; DiffTime
</span><a href="Ouroboros.Consensus.Storage.ChainDB.Impl.Args.html#cdbsGcDelay"><span class="hs-identifier hs-var hs-var">cdbsGcDelay</span></a></span></span><span>         </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/time-1.12.2/src/Data.Time.Clock.Internal.DiffTime.html#DiffTime"><span class="hs-identifier hs-type">DiffTime</span></a></span><span>
</span><span id="line-85"></span><span>      </span><span class="hs-comment">-- ^ Delay between copying a block to the ImmutableDB and triggering a</span><span>
</span><span id="line-86"></span><span>      </span><span class="hs-comment">-- garbage collection for the corresponding slot on the VolatileDB.</span><span>
</span><span id="line-87"></span><span>      </span><span class="hs-comment">--</span><span>
</span><span id="line-88"></span><span>      </span><span class="hs-comment">-- The goal of the delay is to ensure that the write to the ImmutableDB</span><span>
</span><span id="line-89"></span><span>      </span><span class="hs-comment">-- has been flushed to disk before deleting the block from the</span><span>
</span><span id="line-90"></span><span>      </span><span class="hs-comment">-- VolatileDB, so that a crash won't result in the loss of the block.</span><span>
</span><span id="line-91"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="cdbsGcInterval"><span class="annot"><span class="annottext">forall (f :: * -&gt; *) (m :: * -&gt; *) blk.
ChainDbSpecificArgs f m blk -&gt; DiffTime
</span><a href="Ouroboros.Consensus.Storage.ChainDB.Impl.Args.html#cdbsGcInterval"><span class="hs-identifier hs-var hs-var">cdbsGcInterval</span></a></span></span><span>      </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/time-1.12.2/src/Data.Time.Clock.Internal.DiffTime.html#DiffTime"><span class="hs-identifier hs-type">DiffTime</span></a></span><span>
</span><span id="line-92"></span><span>      </span><span class="hs-comment">-- ^ Batch all scheduled GCs so that at most one GC happens every</span><span>
</span><span id="line-93"></span><span>      </span><span class="hs-comment">-- 'cdbsGcInterval'.</span><span>
</span><span id="line-94"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="cdbsRegistry"><span class="annot"><span class="annottext">forall (f :: * -&gt; *) (m :: * -&gt; *) blk.
ChainDbSpecificArgs f m blk -&gt; HKD f (ResourceRegistry m)
</span><a href="Ouroboros.Consensus.Storage.ChainDB.Impl.Args.html#cdbsRegistry"><span class="hs-identifier hs-var hs-var">cdbsRegistry</span></a></span></span><span>        </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.Util.Args.html#HKD"><span class="hs-identifier hs-type">HKD</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679898212"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Ouroboros.Consensus.Util.ResourceRegistry.html#ResourceRegistry"><span class="hs-identifier hs-type">ResourceRegistry</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679898213"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-95"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="cdbsTracer"><span class="annot"><span class="annottext">forall (f :: * -&gt; *) (m :: * -&gt; *) blk.
ChainDbSpecificArgs f m blk -&gt; Tracer m (TraceEvent blk)
</span><a href="Ouroboros.Consensus.Storage.ChainDB.Impl.Args.html#cdbsTracer"><span class="hs-identifier hs-var hs-var">cdbsTracer</span></a></span></span><span>          </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Tracer</span></span><span> </span><span class="annot"><a href="#local-6989586621679898213"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Ouroboros.Consensus.Storage.ChainDB.Impl.Types.html#TraceEvent"><span class="hs-identifier hs-type">TraceEvent</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679898214"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-96"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-97"></span><span>
</span><span id="line-98"></span><span class="hs-comment">-- | Default arguments</span><span>
</span><span id="line-99"></span><span class="hs-comment">--</span><span>
</span><span id="line-100"></span><span class="hs-comment">-- The following fields must still be defined:</span><span>
</span><span id="line-101"></span><span class="hs-comment">--</span><span>
</span><span id="line-102"></span><span class="hs-comment">-- * 'cdbsTracer'</span><span>
</span><span id="line-103"></span><span class="hs-comment">-- * 'cdbsRegistry'</span><span>
</span><span id="line-104"></span><span class="hs-comment">-- * 'cdbsCheckInFuture'</span><span>
</span><span id="line-105"></span><span class="hs-comment">--</span><span>
</span><span id="line-106"></span><span class="hs-comment">-- We a 'cdbsGcDelay' of 60 seconds and a 'cdbsGcInterval' of 10 seconds, this</span><span>
</span><span id="line-107"></span><span class="hs-comment">-- means (see the properties in &quot;Test.Ouroboros.Storage.ChainDB.GcSchedule&quot;):</span><span>
</span><span id="line-108"></span><span class="hs-comment">--</span><span>
</span><span id="line-109"></span><span class="hs-comment">-- * The length of the 'GcSchedule' queue is @&lt;= &#8968;gcDelay / gcInterval&#8969; + 1@,</span><span>
</span><span id="line-110"></span><span class="hs-comment">--   i.e., @&lt;= 7@.</span><span>
</span><span id="line-111"></span><span class="hs-comment">-- * The overlap (number of blocks in both the VolatileDB and the ImmutableDB)</span><span>
</span><span id="line-112"></span><span class="hs-comment">--   is the number of blocks synced in @gcDelay + gcInterval@ = 70s. E.g, when</span><span>
</span><span id="line-113"></span><span class="hs-comment">--   bulk syncing at 1k-2k blocks/s, this means 70k-140k blocks. During normal</span><span>
</span><span id="line-114"></span><span class="hs-comment">--   operation, we receive 1 block/20s (for Byron /and/ for Shelley), meaning</span><span>
</span><span id="line-115"></span><span class="hs-comment">--   at most 4 blocks.</span><span>
</span><span id="line-116"></span><span class="hs-comment">-- * The unnecessary overlap (the blocks that we haven't GC'ed yet but could</span><span>
</span><span id="line-117"></span><span class="hs-comment">--   have, because of batching) &lt; the number of blocks sync in @gcInterval@.</span><span>
</span><span id="line-118"></span><span class="hs-comment">--   E.g., when syncing at 1k-2k blocks/s, this means 10k-20k blocks. During</span><span>
</span><span id="line-119"></span><span class="hs-comment">--   normal operation, we receive 1 block/20s, meaning at most 1 block.</span><span>
</span><span id="line-120"></span><span id="local-6989586621679898234"><span id="local-6989586621679898236"><span class="annot"><a href="Ouroboros.Consensus.Storage.ChainDB.Impl.Args.html#defaultSpecificArgs"><span class="hs-identifier hs-type">defaultSpecificArgs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#Monad"><span class="hs-identifier hs-type">Monad</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679898234"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.Storage.ChainDB.Impl.Args.html#ChainDbSpecificArgs"><span class="hs-identifier hs-type">ChainDbSpecificArgs</span></a></span><span> </span><span class="annot"><a href="Ouroboros.Consensus.Util.Args.html#Defaults"><span class="hs-identifier hs-type">Defaults</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679898234"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679898236"><span class="hs-identifier hs-type">blk</span></a></span></span></span><span>
</span><span id="line-121"></span><span id="defaultSpecificArgs"><span class="annot"><span class="annottext">defaultSpecificArgs :: forall (m :: * -&gt; *) blk.
Monad m =&gt;
ChainDbSpecificArgs Defaults m blk
</span><a href="Ouroboros.Consensus.Storage.ChainDB.Impl.Args.html#defaultSpecificArgs"><span class="hs-identifier hs-var hs-var">defaultSpecificArgs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.Storage.ChainDB.Impl.Args.html#ChainDbSpecificArgs"><span class="hs-identifier hs-type">ChainDbSpecificArgs</span></a></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-122"></span><span>      </span><span class="annot"><span class="annottext">cdbsBlocksToAddSize :: Word
</span><a href="Ouroboros.Consensus.Storage.ChainDB.Impl.Args.html#cdbsBlocksToAddSize"><span class="hs-identifier hs-var">cdbsBlocksToAddSize</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word
</span><span class="hs-number">10</span></span><span>
</span><span id="line-123"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cdbsCheckInFuture :: HKD Defaults (CheckInFuture m blk)
</span><a href="Ouroboros.Consensus.Storage.ChainDB.Impl.Args.html#cdbsCheckInFuture"><span class="hs-identifier hs-var">cdbsCheckInFuture</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HKD Defaults (CheckInFuture m blk)
Defaults (CheckInFuture m blk)
forall t. Defaults t
</span><a href="Ouroboros.Consensus.Util.Args.html#NoDefault"><span class="hs-identifier hs-var">NoDefault</span></a></span><span>
</span><span id="line-124"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cdbsGcDelay :: DiffTime
</span><a href="Ouroboros.Consensus.Storage.ChainDB.Impl.Args.html#cdbsGcDelay"><span class="hs-identifier hs-var">cdbsGcDelay</span></a></span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Integer -&gt; DiffTime
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/time-1.12.2/src/Data.Time.Clock.Internal.DiffTime.html#secondsToDiffTime"><span class="hs-identifier hs-var">secondsToDiffTime</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">60</span></span><span>
</span><span id="line-125"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cdbsGcInterval :: DiffTime
</span><a href="Ouroboros.Consensus.Storage.ChainDB.Impl.Args.html#cdbsGcInterval"><span class="hs-identifier hs-var">cdbsGcInterval</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Integer -&gt; DiffTime
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/time-1.12.2/src/Data.Time.Clock.Internal.DiffTime.html#secondsToDiffTime"><span class="hs-identifier hs-var">secondsToDiffTime</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">10</span></span><span>
</span><span id="line-126"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cdbsRegistry :: HKD Defaults (ResourceRegistry m)
</span><a href="Ouroboros.Consensus.Storage.ChainDB.Impl.Args.html#cdbsRegistry"><span class="hs-identifier hs-var">cdbsRegistry</span></a></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HKD Defaults (ResourceRegistry m)
Defaults (ResourceRegistry m)
forall t. Defaults t
</span><a href="Ouroboros.Consensus.Util.Args.html#NoDefault"><span class="hs-identifier hs-var">NoDefault</span></a></span><span>
</span><span id="line-127"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cdbsTracer :: Tracer m (TraceEvent blk)
</span><a href="Ouroboros.Consensus.Storage.ChainDB.Impl.Args.html#cdbsTracer"><span class="hs-identifier hs-var">cdbsTracer</span></a></span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer m (TraceEvent blk)
forall (m :: * -&gt; *) a. Applicative m =&gt; Tracer m a
</span><span class="hs-identifier hs-var">nullTracer</span></span><span>
</span><span id="line-128"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-129"></span><span>
</span><span id="line-130"></span><span class="hs-comment">-- | Default arguments</span><span>
</span><span id="line-131"></span><span class="hs-comment">--</span><span>
</span><span id="line-132"></span><span class="hs-comment">-- See 'ImmutableDB.defaultArgs', 'VolatileDB.defaultArgs', 'LgrDB.defaultArgs',</span><span>
</span><span id="line-133"></span><span class="hs-comment">-- and 'defaultSpecificArgs' for a list of which fields are not given a default</span><span>
</span><span id="line-134"></span><span class="hs-comment">-- and must therefore be set explicitly.</span><span>
</span><span id="line-135"></span><span class="annot"><a href="Ouroboros.Consensus.Storage.ChainDB.Impl.Args.html#defaultArgs"><span class="hs-identifier hs-type">defaultArgs</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-136"></span><span>     </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679898243"><span class="annot"><a href="#local-6989586621679898243"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span id="local-6989586621679898245"><span class="annot"><a href="#local-6989586621679898245"><span class="hs-identifier hs-type">blk</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-137"></span><span>     </span><span class="annot"><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#Monad"><span class="hs-identifier hs-type">Monad</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679898243"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-138"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Ouroboros.Consensus.Storage.ChainDB.Impl.Args.html#RelativeMountPoint"><span class="hs-identifier hs-type">RelativeMountPoint</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">SomeHasFS</span></span><span> </span><span class="annot"><a href="#local-6989586621679898243"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-139"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.Storage.LedgerDB.DiskPolicy.html#DiskPolicy"><span class="hs-identifier hs-type">DiskPolicy</span></a></span><span>
</span><span id="line-140"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.Storage.ChainDB.Impl.Args.html#ChainDbArgs"><span class="hs-identifier hs-type">ChainDbArgs</span></a></span><span> </span><span class="annot"><a href="Ouroboros.Consensus.Util.Args.html#Defaults"><span class="hs-identifier hs-type">Defaults</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679898243"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679898245"><span class="hs-identifier hs-type">blk</span></a></span><span>
</span><span id="line-141"></span><span id="defaultArgs"><span class="annot"><span class="annottext">defaultArgs :: forall (m :: * -&gt; *) blk.
Monad m =&gt;
(RelativeMountPoint -&gt; SomeHasFS m)
-&gt; DiskPolicy -&gt; ChainDbArgs Defaults m blk
</span><a href="Ouroboros.Consensus.Storage.ChainDB.Impl.Args.html#defaultArgs"><span class="hs-identifier hs-var hs-var">defaultArgs</span></a></span></span><span> </span><span id="local-6989586621679898399"><span class="annot"><span class="annottext">RelativeMountPoint -&gt; SomeHasFS m
</span><a href="#local-6989586621679898399"><span class="hs-identifier hs-var">mkFS</span></a></span></span><span> </span><span id="local-6989586621679898400"><span class="annot"><span class="annottext">DiskPolicy
</span><a href="#local-6989586621679898400"><span class="hs-identifier hs-var">diskPolicy</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-142"></span><span>  </span><span class="annot"><span class="annottext">ImmutableDbArgs Defaults m blk
-&gt; VolatileDbArgs Defaults m blk
-&gt; LgrDbArgs Defaults m blk
-&gt; ChainDbSpecificArgs Defaults m blk
-&gt; ChainDbArgs Defaults m blk
forall (f :: * -&gt; *) (m :: * -&gt; *) blk.
ImmutableDbArgs f m blk
-&gt; VolatileDbArgs f m blk
-&gt; LgrDbArgs f m blk
-&gt; ChainDbSpecificArgs f m blk
-&gt; ChainDbArgs f m blk
</span><a href="Ouroboros.Consensus.Storage.ChainDB.Impl.Args.html#toChainDbArgs"><span class="hs-identifier hs-var">toChainDbArgs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SomeHasFS m -&gt; ImmutableDbArgs Defaults m blk
forall (m :: * -&gt; *) blk.
Applicative m =&gt;
SomeHasFS m -&gt; ImmutableDbArgs Defaults m blk
</span><a href="Ouroboros.Consensus.Storage.ImmutableDB.Impl.html#defaultArgs"><span class="hs-identifier hs-var">ImmutableDB.defaultArgs</span></a></span><span> </span><span class="annot"><span class="annottext">SomeHasFS m
</span><a href="#local-6989586621679898402"><span class="hs-identifier hs-var">immFS</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-143"></span><span>                </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SomeHasFS m -&gt; VolatileDbArgs Defaults m blk
forall (m :: * -&gt; *) blk.
Applicative m =&gt;
SomeHasFS m -&gt; VolatileDbArgs Defaults m blk
</span><a href="Ouroboros.Consensus.Storage.VolatileDB.Impl.html#defaultArgs"><span class="hs-identifier hs-var">VolatileDB.defaultArgs</span></a></span><span>  </span><span class="annot"><span class="annottext">SomeHasFS m
</span><a href="#local-6989586621679898403"><span class="hs-identifier hs-var">volFS</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-144"></span><span>                </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SomeHasFS m -&gt; DiskPolicy -&gt; LgrDbArgs Defaults m blk
forall (m :: * -&gt; *) blk.
Applicative m =&gt;
SomeHasFS m -&gt; DiskPolicy -&gt; LgrDbArgs Defaults m blk
</span><a href="Ouroboros.Consensus.Storage.ChainDB.Impl.LgrDB.html#defaultArgs"><span class="hs-identifier hs-var">LgrDB.defaultArgs</span></a></span><span>       </span><span class="annot"><span class="annottext">SomeHasFS m
</span><a href="#local-6989586621679898404"><span class="hs-identifier hs-var">lgrFS</span></a></span><span> </span><span class="annot"><span class="annottext">DiskPolicy
</span><a href="#local-6989586621679898400"><span class="hs-identifier hs-var">diskPolicy</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-145"></span><span>                </span><span class="annot"><span class="annottext">ChainDbSpecificArgs Defaults m blk
forall (m :: * -&gt; *) blk.
Monad m =&gt;
ChainDbSpecificArgs Defaults m blk
</span><a href="Ouroboros.Consensus.Storage.ChainDB.Impl.Args.html#defaultSpecificArgs"><span class="hs-identifier hs-var">defaultSpecificArgs</span></a></span><span>
</span><span id="line-146"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-147"></span><span>    </span><span class="annot"><a href="#local-6989586621679898402"><span class="hs-identifier hs-type">immFS</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679898403"><span class="hs-identifier hs-type">volFS</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679898404"><span class="hs-identifier hs-type">lgrFS</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">SomeHasFS</span></span><span> </span><span class="annot"><a href="#local-6989586621679898243"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-148"></span><span>
</span><span id="line-149"></span><span>    </span><span id="local-6989586621679898402"><span class="annot"><span class="annottext">immFS :: SomeHasFS m
</span><a href="#local-6989586621679898402"><span class="hs-identifier hs-var hs-var">immFS</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RelativeMountPoint -&gt; SomeHasFS m
</span><a href="#local-6989586621679898399"><span class="hs-identifier hs-var">mkFS</span></a></span><span> </span><span class="annot"><span class="annottext">(RelativeMountPoint -&gt; SomeHasFS m)
-&gt; RelativeMountPoint -&gt; SomeHasFS m
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; RelativeMountPoint
</span><a href="Ouroboros.Consensus.Storage.ChainDB.Impl.Args.html#RelativeMountPoint"><span class="hs-identifier hs-var">RelativeMountPoint</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><span class="hs-string">&quot;immutable&quot;</span></span><span>
</span><span id="line-150"></span><span>    </span><span id="local-6989586621679898403"><span class="annot"><span class="annottext">volFS :: SomeHasFS m
</span><a href="#local-6989586621679898403"><span class="hs-identifier hs-var hs-var">volFS</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RelativeMountPoint -&gt; SomeHasFS m
</span><a href="#local-6989586621679898399"><span class="hs-identifier hs-var">mkFS</span></a></span><span> </span><span class="annot"><span class="annottext">(RelativeMountPoint -&gt; SomeHasFS m)
-&gt; RelativeMountPoint -&gt; SomeHasFS m
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; RelativeMountPoint
</span><a href="Ouroboros.Consensus.Storage.ChainDB.Impl.Args.html#RelativeMountPoint"><span class="hs-identifier hs-var">RelativeMountPoint</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><span class="hs-string">&quot;volatile&quot;</span></span><span>
</span><span id="line-151"></span><span>    </span><span id="local-6989586621679898404"><span class="annot"><span class="annottext">lgrFS :: SomeHasFS m
</span><a href="#local-6989586621679898404"><span class="hs-identifier hs-var hs-var">lgrFS</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RelativeMountPoint -&gt; SomeHasFS m
</span><a href="#local-6989586621679898399"><span class="hs-identifier hs-var">mkFS</span></a></span><span> </span><span class="annot"><span class="annottext">(RelativeMountPoint -&gt; SomeHasFS m)
-&gt; RelativeMountPoint -&gt; SomeHasFS m
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; RelativeMountPoint
</span><a href="Ouroboros.Consensus.Storage.ChainDB.Impl.Args.html#RelativeMountPoint"><span class="hs-identifier hs-var">RelativeMountPoint</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><span class="hs-string">&quot;ledger&quot;</span></span><span>
</span><span id="line-152"></span><span>
</span><span id="line-153"></span><span class="hs-comment">-- | Internal: split 'ChainDbArgs' into 'ImmutableDbArgs', 'VolatileDbArgs,</span><span>
</span><span id="line-154"></span><span class="hs-comment">-- 'LgrDbArgs', and 'ChainDbSpecificArgs'.</span><span>
</span><span id="line-155"></span><span class="annot"><a href="Ouroboros.Consensus.Storage.ChainDB.Impl.Args.html#fromChainDbArgs"><span class="hs-identifier hs-type">fromChainDbArgs</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-156"></span><span>     </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679898266"><span class="annot"><a href="#local-6989586621679898266"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span id="local-6989586621679898267"><span class="annot"><a href="#local-6989586621679898267"><span class="hs-identifier hs-type">blk</span></a></span></span><span> </span><span id="local-6989586621679898264"><span class="annot"><a href="#local-6989586621679898264"><span class="hs-identifier hs-type">f</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.Util.Args.html#MapHKD"><span class="hs-identifier hs-type">MapHKD</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679898264"><span class="hs-identifier hs-type">f</span></a></span><span>
</span><span id="line-157"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.Storage.ChainDB.Impl.Args.html#ChainDbArgs"><span class="hs-identifier hs-type">ChainDbArgs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679898264"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679898266"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679898267"><span class="hs-identifier hs-type">blk</span></a></span><span>
</span><span id="line-158"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.Storage.ImmutableDB.Impl.html#ImmutableDbArgs"><span class="hs-identifier hs-type">ImmutableDB.ImmutableDbArgs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679898264"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679898266"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679898267"><span class="hs-identifier hs-type">blk</span></a></span><span>
</span><span id="line-159"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.Storage.VolatileDB.Impl.html#VolatileDbArgs"><span class="hs-identifier hs-type">VolatileDB.VolatileDbArgs</span></a></span><span>   </span><span class="annot"><a href="#local-6989586621679898264"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679898266"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679898267"><span class="hs-identifier hs-type">blk</span></a></span><span>
</span><span id="line-160"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.Storage.ChainDB.Impl.LgrDB.html#LgrDbArgs"><span class="hs-identifier hs-type">LgrDB.LgrDbArgs</span></a></span><span>             </span><span class="annot"><a href="#local-6989586621679898264"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679898266"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679898267"><span class="hs-identifier hs-type">blk</span></a></span><span>
</span><span id="line-161"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.Storage.ChainDB.Impl.Args.html#ChainDbSpecificArgs"><span class="hs-identifier hs-type">ChainDbSpecificArgs</span></a></span><span>         </span><span class="annot"><a href="#local-6989586621679898264"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679898266"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679898267"><span class="hs-identifier hs-type">blk</span></a></span><span>
</span><span id="line-162"></span><span>     </span><span class="hs-special">)</span><span>
</span><span id="line-163"></span><span id="fromChainDbArgs"><span class="annot"><span class="annottext">fromChainDbArgs :: forall (m :: * -&gt; *) blk (f :: * -&gt; *).
MapHKD f =&gt;
ChainDbArgs f m blk
-&gt; (ImmutableDbArgs f m blk, VolatileDbArgs f m blk,
    LgrDbArgs f m blk, ChainDbSpecificArgs f m blk)
</span><a href="Ouroboros.Consensus.Storage.ChainDB.Impl.Args.html#fromChainDbArgs"><span class="hs-identifier hs-var hs-var">fromChainDbArgs</span></a></span></span><span> </span><span class="annot"><a href="Ouroboros.Consensus.Storage.ChainDB.Impl.Args.html#ChainDbArgs"><span class="hs-identifier hs-type">ChainDbArgs</span></a></span><span class="hs-special">{</span><span id="local-6989586621679898413"><span id="local-6989586621679898414"><span id="local-6989586621679898415"><span id="local-6989586621679898416"><span id="local-6989586621679898417"><span id="local-6989586621679898418"><span id="local-6989586621679898419"><span id="local-6989586621679898420"><span id="local-6989586621679898421"><span id="local-6989586621679898422"><span id="local-6989586621679898423"><span id="local-6989586621679898424"><span id="local-6989586621679898425"><span id="local-6989586621679898426"><span id="local-6989586621679898427"><span id="local-6989586621679898428"><span id="local-6989586621679898429"><span id="local-6989586621679898430"><span id="local-6989586621679898431"><span class="annot"><span class="annottext">Word
DiffTime
DiskPolicy
HKD f (m (ExtLedgerState blk))
HKD f (TopLevelConfig blk)
HKD f ChunkInfo
HKD f (ResourceRegistry m)
HKD f (CheckInFuture m blk)
HKD f (blk -&gt; Bool)
Tracer m (LedgerDB' blk)
Tracer m (TraceEvent blk)
SomeHasFS m
BlockValidationPolicy
BlocksPerFile
ValidationPolicy
CacheConfig
cdbHasFSImmutableDB :: forall (f :: * -&gt; *) (m :: * -&gt; *) blk.
ChainDbArgs f m blk -&gt; SomeHasFS m
cdbHasFSVolatileDB :: forall (f :: * -&gt; *) (m :: * -&gt; *) blk.
ChainDbArgs f m blk -&gt; SomeHasFS m
cdbHasFSLgrDB :: forall (f :: * -&gt; *) (m :: * -&gt; *) blk.
ChainDbArgs f m blk -&gt; SomeHasFS m
cdbImmutableDbValidation :: forall (f :: * -&gt; *) (m :: * -&gt; *) blk.
ChainDbArgs f m blk -&gt; ValidationPolicy
cdbVolatileDbValidation :: forall (f :: * -&gt; *) (m :: * -&gt; *) blk.
ChainDbArgs f m blk -&gt; BlockValidationPolicy
cdbMaxBlocksPerFile :: forall (f :: * -&gt; *) (m :: * -&gt; *) blk.
ChainDbArgs f m blk -&gt; BlocksPerFile
cdbDiskPolicy :: forall (f :: * -&gt; *) (m :: * -&gt; *) blk.
ChainDbArgs f m blk -&gt; DiskPolicy
cdbTopLevelConfig :: forall (f :: * -&gt; *) (m :: * -&gt; *) blk.
ChainDbArgs f m blk -&gt; HKD f (TopLevelConfig blk)
cdbChunkInfo :: forall (f :: * -&gt; *) (m :: * -&gt; *) blk.
ChainDbArgs f m blk -&gt; HKD f ChunkInfo
cdbCheckIntegrity :: forall (f :: * -&gt; *) (m :: * -&gt; *) blk.
ChainDbArgs f m blk -&gt; HKD f (blk -&gt; Bool)
cdbGenesis :: forall (f :: * -&gt; *) (m :: * -&gt; *) blk.
ChainDbArgs f m blk -&gt; HKD f (m (ExtLedgerState blk))
cdbCheckInFuture :: forall (f :: * -&gt; *) (m :: * -&gt; *) blk.
ChainDbArgs f m blk -&gt; HKD f (CheckInFuture m blk)
cdbImmutableDbCacheConfig :: forall (f :: * -&gt; *) (m :: * -&gt; *) blk.
ChainDbArgs f m blk -&gt; CacheConfig
cdbTracer :: forall (f :: * -&gt; *) (m :: * -&gt; *) blk.
ChainDbArgs f m blk -&gt; Tracer m (TraceEvent blk)
cdbTraceLedger :: forall (f :: * -&gt; *) (m :: * -&gt; *) blk.
ChainDbArgs f m blk -&gt; Tracer m (LedgerDB' blk)
cdbRegistry :: forall (f :: * -&gt; *) (m :: * -&gt; *) blk.
ChainDbArgs f m blk -&gt; HKD f (ResourceRegistry m)
cdbGcDelay :: forall (f :: * -&gt; *) (m :: * -&gt; *) blk.
ChainDbArgs f m blk -&gt; DiffTime
cdbGcInterval :: forall (f :: * -&gt; *) (m :: * -&gt; *) blk.
ChainDbArgs f m blk -&gt; DiffTime
cdbBlocksToAddSize :: forall (f :: * -&gt; *) (m :: * -&gt; *) blk. ChainDbArgs f m blk -&gt; Word
cdbHasFSImmutableDB :: SomeHasFS m
cdbHasFSVolatileDB :: SomeHasFS m
cdbHasFSLgrDB :: SomeHasFS m
cdbImmutableDbValidation :: ValidationPolicy
cdbVolatileDbValidation :: BlockValidationPolicy
cdbMaxBlocksPerFile :: BlocksPerFile
cdbDiskPolicy :: DiskPolicy
cdbTopLevelConfig :: HKD f (TopLevelConfig blk)
cdbChunkInfo :: HKD f ChunkInfo
cdbCheckIntegrity :: HKD f (blk -&gt; Bool)
cdbGenesis :: HKD f (m (ExtLedgerState blk))
cdbCheckInFuture :: HKD f (CheckInFuture m blk)
cdbImmutableDbCacheConfig :: CacheConfig
cdbTracer :: Tracer m (TraceEvent blk)
cdbTraceLedger :: Tracer m (LedgerDB' blk)
cdbRegistry :: HKD f (ResourceRegistry m)
cdbGcDelay :: DiffTime
cdbGcInterval :: DiffTime
cdbBlocksToAddSize :: Word
</span><a href="Ouroboros.Consensus.Storage.ChainDB.Impl.Args.html#cdbHasFSImmutableDB"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-164"></span><span>      </span><span class="annot"><a href="Ouroboros.Consensus.Storage.ImmutableDB.Impl.html#ImmutableDbArgs"><span class="hs-identifier hs-type">ImmutableDB.ImmutableDbArgs</span></a></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-165"></span><span>          </span><span class="annot"><span class="annottext">immCacheConfig :: CacheConfig
</span><a href="Ouroboros.Consensus.Storage.ImmutableDB.Impl.html#immCacheConfig"><span class="hs-identifier hs-var">immCacheConfig</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CacheConfig
</span><a href="#local-6989586621679898425"><span class="hs-identifier hs-var">cdbImmutableDbCacheConfig</span></a></span><span>
</span><span id="line-166"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">immCheckIntegrity :: HKD f (blk -&gt; Bool)
</span><a href="Ouroboros.Consensus.Storage.ImmutableDB.Impl.html#immCheckIntegrity"><span class="hs-identifier hs-var">immCheckIntegrity</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HKD f (blk -&gt; Bool)
</span><a href="#local-6989586621679898422"><span class="hs-identifier hs-var">cdbCheckIntegrity</span></a></span><span>
</span><span id="line-167"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">immChunkInfo :: HKD f ChunkInfo
</span><a href="Ouroboros.Consensus.Storage.ImmutableDB.Impl.html#immChunkInfo"><span class="hs-identifier hs-var">immChunkInfo</span></a></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HKD f ChunkInfo
</span><a href="#local-6989586621679898421"><span class="hs-identifier hs-var">cdbChunkInfo</span></a></span><span>
</span><span id="line-168"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">immCodecConfig :: HKD f (CodecConfig blk)
</span><a href="Ouroboros.Consensus.Storage.ImmutableDB.Impl.html#immCodecConfig"><span class="hs-identifier hs-var">immCodecConfig</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Proxy (f (CodecConfig blk))
-&gt; (TopLevelConfig blk -&gt; CodecConfig blk)
-&gt; HKD f (TopLevelConfig blk)
-&gt; HKD f (CodecConfig blk)
forall (f :: * -&gt; *) (proxy :: * -&gt; *) b a.
MapHKD f =&gt;
proxy (f b) -&gt; (a -&gt; b) -&gt; HKD f a -&gt; HKD f b
forall (proxy :: * -&gt; *) b a.
proxy (f b) -&gt; (a -&gt; b) -&gt; HKD f a -&gt; HKD f b
</span><a href="Ouroboros.Consensus.Util.Args.html#mapHKD"><span class="hs-identifier hs-var">mapHKD</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall t. Proxy t
forall {k} (t :: k). Proxy t
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/Data.Proxy.html#Proxy"><span class="hs-identifier hs-var">Proxy</span></a></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679898264"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Ouroboros.Consensus.Block.Abstract.html#CodecConfig"><span class="hs-identifier hs-type">CodecConfig</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679898267"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TopLevelConfig blk -&gt; CodecConfig blk
forall blk. TopLevelConfig blk -&gt; CodecConfig blk
</span><a href="Ouroboros.Consensus.Config.html#configCodec"><span class="hs-identifier hs-var">configCodec</span></a></span><span> </span><span class="annot"><span class="annottext">HKD f (TopLevelConfig blk)
</span><a href="#local-6989586621679898420"><span class="hs-identifier hs-var">cdbTopLevelConfig</span></a></span><span>
</span><span id="line-169"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">immHasFS :: SomeHasFS m
</span><a href="Ouroboros.Consensus.Storage.ImmutableDB.Impl.html#immHasFS"><span class="hs-identifier hs-var">immHasFS</span></a></span><span>            </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SomeHasFS m
</span><a href="#local-6989586621679898413"><span class="hs-identifier hs-var">cdbHasFSImmutableDB</span></a></span><span>
</span><span id="line-170"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">immRegistry :: HKD f (ResourceRegistry m)
</span><a href="Ouroboros.Consensus.Storage.ImmutableDB.Impl.html#immRegistry"><span class="hs-identifier hs-var">immRegistry</span></a></span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HKD f (ResourceRegistry m)
</span><a href="#local-6989586621679898428"><span class="hs-identifier hs-var">cdbRegistry</span></a></span><span>
</span><span id="line-171"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">immTracer :: Tracer m (TraceEvent blk)
</span><a href="Ouroboros.Consensus.Storage.ImmutableDB.Impl.html#immTracer"><span class="hs-identifier hs-var">immTracer</span></a></span><span>           </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(TraceEvent blk -&gt; TraceEvent blk)
-&gt; Tracer m (TraceEvent blk) -&gt; Tracer m (TraceEvent blk)
forall a' a. (a' -&gt; a) -&gt; Tracer m a -&gt; Tracer m a'
forall (f :: * -&gt; *) a' a.
Contravariant f =&gt;
(a' -&gt; a) -&gt; f a -&gt; f a'
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/Data.Functor.Contravariant.html#contramap"><span class="hs-identifier hs-var">contramap</span></a></span><span> </span><span class="annot"><span class="annottext">TraceEvent blk -&gt; TraceEvent blk
forall blk. TraceEvent blk -&gt; TraceEvent blk
</span><a href="Ouroboros.Consensus.Storage.ChainDB.Impl.Types.html#TraceImmutableDBEvent"><span class="hs-identifier hs-var">TraceImmutableDBEvent</span></a></span><span> </span><span class="annot"><span class="annottext">Tracer m (TraceEvent blk)
</span><a href="#local-6989586621679898426"><span class="hs-identifier hs-var">cdbTracer</span></a></span><span>
</span><span id="line-172"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">immValidationPolicy :: ValidationPolicy
</span><a href="Ouroboros.Consensus.Storage.ImmutableDB.Impl.html#immValidationPolicy"><span class="hs-identifier hs-var">immValidationPolicy</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ValidationPolicy
</span><a href="#local-6989586621679898416"><span class="hs-identifier hs-var">cdbImmutableDbValidation</span></a></span><span>
</span><span id="line-173"></span><span>        </span><span class="hs-special">}</span><span>
</span><span id="line-174"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.Storage.VolatileDB.Impl.html#VolatileDbArgs"><span class="hs-identifier hs-type">VolatileDB.VolatileDbArgs</span></a></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-175"></span><span>          </span><span class="annot"><span class="annottext">volCheckIntegrity :: HKD f (blk -&gt; Bool)
</span><a href="Ouroboros.Consensus.Storage.VolatileDB.Impl.html#volCheckIntegrity"><span class="hs-identifier hs-var">volCheckIntegrity</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HKD f (blk -&gt; Bool)
</span><a href="#local-6989586621679898422"><span class="hs-identifier hs-var">cdbCheckIntegrity</span></a></span><span>
</span><span id="line-176"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">volCodecConfig :: HKD f (CodecConfig blk)
</span><a href="Ouroboros.Consensus.Storage.VolatileDB.Impl.html#volCodecConfig"><span class="hs-identifier hs-var">volCodecConfig</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Proxy (f (CodecConfig blk))
-&gt; (TopLevelConfig blk -&gt; CodecConfig blk)
-&gt; HKD f (TopLevelConfig blk)
-&gt; HKD f (CodecConfig blk)
forall (f :: * -&gt; *) (proxy :: * -&gt; *) b a.
MapHKD f =&gt;
proxy (f b) -&gt; (a -&gt; b) -&gt; HKD f a -&gt; HKD f b
forall (proxy :: * -&gt; *) b a.
proxy (f b) -&gt; (a -&gt; b) -&gt; HKD f a -&gt; HKD f b
</span><a href="Ouroboros.Consensus.Util.Args.html#mapHKD"><span class="hs-identifier hs-var">mapHKD</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall t. Proxy t
forall {k} (t :: k). Proxy t
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/Data.Proxy.html#Proxy"><span class="hs-identifier hs-var">Proxy</span></a></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679898264"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Ouroboros.Consensus.Block.Abstract.html#CodecConfig"><span class="hs-identifier hs-type">CodecConfig</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679898267"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TopLevelConfig blk -&gt; CodecConfig blk
forall blk. TopLevelConfig blk -&gt; CodecConfig blk
</span><a href="Ouroboros.Consensus.Config.html#configCodec"><span class="hs-identifier hs-var">configCodec</span></a></span><span> </span><span class="annot"><span class="annottext">HKD f (TopLevelConfig blk)
</span><a href="#local-6989586621679898420"><span class="hs-identifier hs-var">cdbTopLevelConfig</span></a></span><span>
</span><span id="line-177"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">volHasFS :: SomeHasFS m
</span><a href="Ouroboros.Consensus.Storage.VolatileDB.Impl.html#volHasFS"><span class="hs-identifier hs-var">volHasFS</span></a></span><span>            </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SomeHasFS m
</span><a href="#local-6989586621679898414"><span class="hs-identifier hs-var">cdbHasFSVolatileDB</span></a></span><span>
</span><span id="line-178"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">volMaxBlocksPerFile :: BlocksPerFile
</span><a href="Ouroboros.Consensus.Storage.VolatileDB.Impl.html#volMaxBlocksPerFile"><span class="hs-identifier hs-var">volMaxBlocksPerFile</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BlocksPerFile
</span><a href="#local-6989586621679898418"><span class="hs-identifier hs-var">cdbMaxBlocksPerFile</span></a></span><span>
</span><span id="line-179"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">volValidationPolicy :: BlockValidationPolicy
</span><a href="Ouroboros.Consensus.Storage.VolatileDB.Impl.html#volValidationPolicy"><span class="hs-identifier hs-var">volValidationPolicy</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BlockValidationPolicy
</span><a href="#local-6989586621679898417"><span class="hs-identifier hs-var">cdbVolatileDbValidation</span></a></span><span>
</span><span id="line-180"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">volTracer :: Tracer m (TraceEvent blk)
</span><a href="Ouroboros.Consensus.Storage.VolatileDB.Impl.html#volTracer"><span class="hs-identifier hs-var">volTracer</span></a></span><span>           </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(TraceEvent blk -&gt; TraceEvent blk)
-&gt; Tracer m (TraceEvent blk) -&gt; Tracer m (TraceEvent blk)
forall a' a. (a' -&gt; a) -&gt; Tracer m a -&gt; Tracer m a'
forall (f :: * -&gt; *) a' a.
Contravariant f =&gt;
(a' -&gt; a) -&gt; f a -&gt; f a'
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/Data.Functor.Contravariant.html#contramap"><span class="hs-identifier hs-var">contramap</span></a></span><span> </span><span class="annot"><span class="annottext">TraceEvent blk -&gt; TraceEvent blk
forall blk. TraceEvent blk -&gt; TraceEvent blk
</span><a href="Ouroboros.Consensus.Storage.ChainDB.Impl.Types.html#TraceVolatileDBEvent"><span class="hs-identifier hs-var">TraceVolatileDBEvent</span></a></span><span> </span><span class="annot"><span class="annottext">Tracer m (TraceEvent blk)
</span><a href="#local-6989586621679898426"><span class="hs-identifier hs-var">cdbTracer</span></a></span><span>
</span><span id="line-181"></span><span>        </span><span class="hs-special">}</span><span>
</span><span id="line-182"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.Storage.ChainDB.Impl.LgrDB.html#LgrDbArgs"><span class="hs-identifier hs-type">LgrDB.LgrDbArgs</span></a></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-183"></span><span>          </span><span class="annot"><span class="annottext">lgrTopLevelConfig :: HKD f (TopLevelConfig blk)
</span><a href="Ouroboros.Consensus.Storage.ChainDB.Impl.LgrDB.html#lgrTopLevelConfig"><span class="hs-identifier hs-var">lgrTopLevelConfig</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HKD f (TopLevelConfig blk)
</span><a href="#local-6989586621679898420"><span class="hs-identifier hs-var">cdbTopLevelConfig</span></a></span><span>
</span><span id="line-184"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">lgrHasFS :: SomeHasFS m
</span><a href="Ouroboros.Consensus.Storage.ChainDB.Impl.LgrDB.html#lgrHasFS"><span class="hs-identifier hs-var">lgrHasFS</span></a></span><span>            </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SomeHasFS m
</span><a href="#local-6989586621679898415"><span class="hs-identifier hs-var">cdbHasFSLgrDB</span></a></span><span>
</span><span id="line-185"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">lgrDiskPolicy :: DiskPolicy
</span><a href="Ouroboros.Consensus.Storage.ChainDB.Impl.LgrDB.html#lgrDiskPolicy"><span class="hs-identifier hs-var">lgrDiskPolicy</span></a></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DiskPolicy
</span><a href="#local-6989586621679898419"><span class="hs-identifier hs-var">cdbDiskPolicy</span></a></span><span>
</span><span id="line-186"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">lgrGenesis :: HKD f (m (ExtLedgerState blk))
</span><a href="Ouroboros.Consensus.Storage.ChainDB.Impl.LgrDB.html#lgrGenesis"><span class="hs-identifier hs-var">lgrGenesis</span></a></span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HKD f (m (ExtLedgerState blk))
</span><a href="#local-6989586621679898423"><span class="hs-identifier hs-var">cdbGenesis</span></a></span><span>
</span><span id="line-187"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">lgrTracer :: Tracer m (TraceSnapshotEvent blk)
</span><a href="Ouroboros.Consensus.Storage.ChainDB.Impl.LgrDB.html#lgrTracer"><span class="hs-identifier hs-var">lgrTracer</span></a></span><span>           </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(TraceSnapshotEvent blk -&gt; TraceEvent blk)
-&gt; Tracer m (TraceEvent blk) -&gt; Tracer m (TraceSnapshotEvent blk)
forall a' a. (a' -&gt; a) -&gt; Tracer m a -&gt; Tracer m a'
forall (f :: * -&gt; *) a' a.
Contravariant f =&gt;
(a' -&gt; a) -&gt; f a -&gt; f a'
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/Data.Functor.Contravariant.html#contramap"><span class="hs-identifier hs-var">contramap</span></a></span><span> </span><span class="annot"><span class="annottext">TraceSnapshotEvent blk -&gt; TraceEvent blk
forall blk. TraceSnapshotEvent blk -&gt; TraceEvent blk
</span><a href="Ouroboros.Consensus.Storage.ChainDB.Impl.Types.html#TraceSnapshotEvent"><span class="hs-identifier hs-var">TraceSnapshotEvent</span></a></span><span> </span><span class="annot"><span class="annottext">Tracer m (TraceEvent blk)
</span><a href="#local-6989586621679898426"><span class="hs-identifier hs-var">cdbTracer</span></a></span><span>
</span><span id="line-188"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">lgrTraceLedger :: Tracer m (LedgerDB' blk)
</span><a href="Ouroboros.Consensus.Storage.ChainDB.Impl.LgrDB.html#lgrTraceLedger"><span class="hs-identifier hs-var">lgrTraceLedger</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer m (LedgerDB' blk)
</span><a href="#local-6989586621679898427"><span class="hs-identifier hs-var">cdbTraceLedger</span></a></span><span>
</span><span id="line-189"></span><span>        </span><span class="hs-special">}</span><span>
</span><span id="line-190"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.Storage.ChainDB.Impl.Args.html#ChainDbSpecificArgs"><span class="hs-identifier hs-type">ChainDbSpecificArgs</span></a></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-191"></span><span>          </span><span class="annot"><span class="annottext">cdbsTracer :: Tracer m (TraceEvent blk)
</span><a href="Ouroboros.Consensus.Storage.ChainDB.Impl.Args.html#cdbsTracer"><span class="hs-identifier hs-var">cdbsTracer</span></a></span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer m (TraceEvent blk)
</span><a href="#local-6989586621679898426"><span class="hs-identifier hs-var">cdbTracer</span></a></span><span>
</span><span id="line-192"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cdbsRegistry :: HKD f (ResourceRegistry m)
</span><a href="Ouroboros.Consensus.Storage.ChainDB.Impl.Args.html#cdbsRegistry"><span class="hs-identifier hs-var">cdbsRegistry</span></a></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HKD f (ResourceRegistry m)
</span><a href="#local-6989586621679898428"><span class="hs-identifier hs-var">cdbRegistry</span></a></span><span>
</span><span id="line-193"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cdbsGcDelay :: DiffTime
</span><a href="Ouroboros.Consensus.Storage.ChainDB.Impl.Args.html#cdbsGcDelay"><span class="hs-identifier hs-var">cdbsGcDelay</span></a></span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DiffTime
</span><a href="#local-6989586621679898429"><span class="hs-identifier hs-var">cdbGcDelay</span></a></span><span>
</span><span id="line-194"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cdbsGcInterval :: DiffTime
</span><a href="Ouroboros.Consensus.Storage.ChainDB.Impl.Args.html#cdbsGcInterval"><span class="hs-identifier hs-var">cdbsGcInterval</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DiffTime
</span><a href="#local-6989586621679898430"><span class="hs-identifier hs-var">cdbGcInterval</span></a></span><span>
</span><span id="line-195"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cdbsCheckInFuture :: HKD f (CheckInFuture m blk)
</span><a href="Ouroboros.Consensus.Storage.ChainDB.Impl.Args.html#cdbsCheckInFuture"><span class="hs-identifier hs-var">cdbsCheckInFuture</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HKD f (CheckInFuture m blk)
</span><a href="#local-6989586621679898424"><span class="hs-identifier hs-var">cdbCheckInFuture</span></a></span><span>
</span><span id="line-196"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cdbsBlocksToAddSize :: Word
</span><a href="Ouroboros.Consensus.Storage.ChainDB.Impl.Args.html#cdbsBlocksToAddSize"><span class="hs-identifier hs-var">cdbsBlocksToAddSize</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679898431"><span class="hs-identifier hs-var">cdbBlocksToAddSize</span></a></span><span>
</span><span id="line-197"></span><span>        </span><span class="hs-special">}</span><span>
</span><span id="line-198"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-199"></span><span>
</span><span id="line-200"></span><span class="hs-comment">-- | Internal: construct 'ChainDbArgs' from 'ImmutableDbArgs', 'VolatileDbArgs,</span><span>
</span><span id="line-201"></span><span class="hs-comment">-- 'LgrDbArgs', and 'ChainDbSpecificArgs'.</span><span>
</span><span id="line-202"></span><span class="hs-comment">--</span><span>
</span><span id="line-203"></span><span class="hs-comment">-- Useful in 'defaultArgs'</span><span>
</span><span id="line-204"></span><span id="local-6989586621679898251"><span id="local-6989586621679898252"><span id="local-6989586621679898253"><span class="annot"><a href="Ouroboros.Consensus.Storage.ChainDB.Impl.Args.html#toChainDbArgs"><span class="hs-identifier hs-type">toChainDbArgs</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-205"></span><span>     </span><span class="annot"><a href="Ouroboros.Consensus.Storage.ImmutableDB.Impl.html#ImmutableDbArgs"><span class="hs-identifier hs-type">ImmutableDB.ImmutableDbArgs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679898251"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679898252"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679898253"><span class="hs-identifier hs-type">blk</span></a></span><span>
</span><span id="line-206"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.Storage.VolatileDB.Impl.html#VolatileDbArgs"><span class="hs-identifier hs-type">VolatileDB.VolatileDbArgs</span></a></span><span>   </span><span class="annot"><a href="#local-6989586621679898251"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679898252"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679898253"><span class="hs-identifier hs-type">blk</span></a></span><span>
</span><span id="line-207"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.Storage.ChainDB.Impl.LgrDB.html#LgrDbArgs"><span class="hs-identifier hs-type">LgrDB.LgrDbArgs</span></a></span><span>             </span><span class="annot"><a href="#local-6989586621679898251"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679898252"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679898253"><span class="hs-identifier hs-type">blk</span></a></span><span>
</span><span id="line-208"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.Storage.ChainDB.Impl.Args.html#ChainDbSpecificArgs"><span class="hs-identifier hs-type">ChainDbSpecificArgs</span></a></span><span>         </span><span class="annot"><a href="#local-6989586621679898251"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679898252"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679898253"><span class="hs-identifier hs-type">blk</span></a></span><span>
</span><span id="line-209"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.Storage.ChainDB.Impl.Args.html#ChainDbArgs"><span class="hs-identifier hs-type">ChainDbArgs</span></a></span><span>                 </span><span class="annot"><a href="#local-6989586621679898251"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679898252"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679898253"><span class="hs-identifier hs-type">blk</span></a></span></span></span></span><span>
</span><span id="line-210"></span><span id="toChainDbArgs"><span class="annot"><span class="annottext">toChainDbArgs :: forall (f :: * -&gt; *) (m :: * -&gt; *) blk.
ImmutableDbArgs f m blk
-&gt; VolatileDbArgs f m blk
-&gt; LgrDbArgs f m blk
-&gt; ChainDbSpecificArgs f m blk
-&gt; ChainDbArgs f m blk
</span><a href="Ouroboros.Consensus.Storage.ChainDB.Impl.Args.html#toChainDbArgs"><span class="hs-identifier hs-var hs-var">toChainDbArgs</span></a></span></span><span> </span><span class="annot"><a href="Ouroboros.Consensus.Storage.ImmutableDB.Impl.html#ImmutableDbArgs"><span class="hs-identifier hs-type">ImmutableDB.ImmutableDbArgs</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621679898461"><span id="local-6989586621679898462"><span id="local-6989586621679898463"><span id="local-6989586621679898464"><span id="local-6989586621679898465"><span id="local-6989586621679898466"><span id="local-6989586621679898467"><span id="local-6989586621679898468"><span class="annot"><span class="annottext">HKD f (CodecConfig blk)
HKD f ChunkInfo
HKD f (ResourceRegistry m)
HKD f (blk -&gt; Bool)
Tracer m (TraceEvent blk)
SomeHasFS m
ValidationPolicy
CacheConfig
immCacheConfig :: forall (f :: * -&gt; *) (m :: * -&gt; *) blk.
ImmutableDbArgs f m blk -&gt; CacheConfig
immCheckIntegrity :: forall (f :: * -&gt; *) (m :: * -&gt; *) blk.
ImmutableDbArgs f m blk -&gt; HKD f (blk -&gt; Bool)
immChunkInfo :: forall (f :: * -&gt; *) (m :: * -&gt; *) blk.
ImmutableDbArgs f m blk -&gt; HKD f ChunkInfo
immCodecConfig :: forall (f :: * -&gt; *) (m :: * -&gt; *) blk.
ImmutableDbArgs f m blk -&gt; HKD f (CodecConfig blk)
immHasFS :: forall (f :: * -&gt; *) (m :: * -&gt; *) blk.
ImmutableDbArgs f m blk -&gt; SomeHasFS m
immRegistry :: forall (f :: * -&gt; *) (m :: * -&gt; *) blk.
ImmutableDbArgs f m blk -&gt; HKD f (ResourceRegistry m)
immTracer :: forall (f :: * -&gt; *) (m :: * -&gt; *) blk.
ImmutableDbArgs f m blk -&gt; Tracer m (TraceEvent blk)
immValidationPolicy :: forall (f :: * -&gt; *) (m :: * -&gt; *) blk.
ImmutableDbArgs f m blk -&gt; ValidationPolicy
immCacheConfig :: CacheConfig
immCheckIntegrity :: HKD f (blk -&gt; Bool)
immChunkInfo :: HKD f ChunkInfo
immCodecConfig :: HKD f (CodecConfig blk)
immHasFS :: SomeHasFS m
immRegistry :: HKD f (ResourceRegistry m)
immTracer :: Tracer m (TraceEvent blk)
immValidationPolicy :: ValidationPolicy
</span><a href="Ouroboros.Consensus.Storage.ImmutableDB.Impl.html#immCacheConfig"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span></span></span></span></span></span><span class="hs-special">}</span><span>
</span><span id="line-211"></span><span>              </span><span class="annot"><a href="Ouroboros.Consensus.Storage.VolatileDB.Impl.html#VolatileDbArgs"><span class="hs-identifier hs-type">VolatileDB.VolatileDbArgs</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621679898469"><span id="local-6989586621679898470"><span id="local-6989586621679898471"><span id="local-6989586621679898472"><span id="local-6989586621679898473"><span id="local-6989586621679898474"><span class="annot"><span class="annottext">HKD f (CodecConfig blk)
HKD f (blk -&gt; Bool)
Tracer m (TraceEvent blk)
SomeHasFS m
BlockValidationPolicy
BlocksPerFile
volCheckIntegrity :: forall (f :: * -&gt; *) (m :: * -&gt; *) blk.
VolatileDbArgs f m blk -&gt; HKD f (blk -&gt; Bool)
volCodecConfig :: forall (f :: * -&gt; *) (m :: * -&gt; *) blk.
VolatileDbArgs f m blk -&gt; HKD f (CodecConfig blk)
volHasFS :: forall (f :: * -&gt; *) (m :: * -&gt; *) blk.
VolatileDbArgs f m blk -&gt; SomeHasFS m
volMaxBlocksPerFile :: forall (f :: * -&gt; *) (m :: * -&gt; *) blk.
VolatileDbArgs f m blk -&gt; BlocksPerFile
volValidationPolicy :: forall (f :: * -&gt; *) (m :: * -&gt; *) blk.
VolatileDbArgs f m blk -&gt; BlockValidationPolicy
volTracer :: forall (f :: * -&gt; *) (m :: * -&gt; *) blk.
VolatileDbArgs f m blk -&gt; Tracer m (TraceEvent blk)
volCheckIntegrity :: HKD f (blk -&gt; Bool)
volCodecConfig :: HKD f (CodecConfig blk)
volHasFS :: SomeHasFS m
volMaxBlocksPerFile :: BlocksPerFile
volTracer :: Tracer m (TraceEvent blk)
volValidationPolicy :: BlockValidationPolicy
</span><a href="Ouroboros.Consensus.Storage.VolatileDB.Impl.html#volCheckIntegrity"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span></span></span></span><span class="hs-special">}</span><span>
</span><span id="line-212"></span><span>              </span><span class="annot"><a href="Ouroboros.Consensus.Storage.ChainDB.Impl.LgrDB.html#LgrDbArgs"><span class="hs-identifier hs-type">LgrDB.LgrDbArgs</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621679898475"><span id="local-6989586621679898476"><span id="local-6989586621679898477"><span id="local-6989586621679898478"><span id="local-6989586621679898479"><span id="local-6989586621679898480"><span class="annot"><span class="annottext">DiskPolicy
HKD f (m (ExtLedgerState blk))
HKD f (TopLevelConfig blk)
Tracer m (LedgerDB' blk)
Tracer m (TraceSnapshotEvent blk)
SomeHasFS m
lgrTopLevelConfig :: forall (f :: * -&gt; *) (m :: * -&gt; *) blk.
LgrDbArgs f m blk -&gt; HKD f (TopLevelConfig blk)
lgrHasFS :: forall (f :: * -&gt; *) (m :: * -&gt; *) blk.
LgrDbArgs f m blk -&gt; SomeHasFS m
lgrDiskPolicy :: forall (f :: * -&gt; *) (m :: * -&gt; *) blk.
LgrDbArgs f m blk -&gt; DiskPolicy
lgrGenesis :: forall (f :: * -&gt; *) (m :: * -&gt; *) blk.
LgrDbArgs f m blk -&gt; HKD f (m (ExtLedgerState blk))
lgrTracer :: forall (f :: * -&gt; *) (m :: * -&gt; *) blk.
LgrDbArgs f m blk -&gt; Tracer m (TraceSnapshotEvent blk)
lgrTraceLedger :: forall (f :: * -&gt; *) (m :: * -&gt; *) blk.
LgrDbArgs f m blk -&gt; Tracer m (LedgerDB' blk)
lgrDiskPolicy :: DiskPolicy
lgrGenesis :: HKD f (m (ExtLedgerState blk))
lgrHasFS :: SomeHasFS m
lgrTopLevelConfig :: HKD f (TopLevelConfig blk)
lgrTraceLedger :: Tracer m (LedgerDB' blk)
lgrTracer :: Tracer m (TraceSnapshotEvent blk)
</span><a href="Ouroboros.Consensus.Storage.ChainDB.Impl.LgrDB.html#lgrTopLevelConfig"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span></span></span></span><span class="hs-special">}</span><span>
</span><span id="line-213"></span><span>              </span><span class="annot"><a href="Ouroboros.Consensus.Storage.ChainDB.Impl.Args.html#ChainDbSpecificArgs"><span class="hs-identifier hs-type">ChainDbSpecificArgs</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621679898481"><span id="local-6989586621679898482"><span id="local-6989586621679898483"><span id="local-6989586621679898484"><span id="local-6989586621679898485"><span id="local-6989586621679898486"><span class="annot"><span class="annottext">Word
DiffTime
HKD f (ResourceRegistry m)
HKD f (CheckInFuture m blk)
Tracer m (TraceEvent blk)
cdbsBlocksToAddSize :: forall (f :: * -&gt; *) (m :: * -&gt; *) blk.
ChainDbSpecificArgs f m blk -&gt; Word
cdbsCheckInFuture :: forall (f :: * -&gt; *) (m :: * -&gt; *) blk.
ChainDbSpecificArgs f m blk -&gt; HKD f (CheckInFuture m blk)
cdbsGcDelay :: forall (f :: * -&gt; *) (m :: * -&gt; *) blk.
ChainDbSpecificArgs f m blk -&gt; DiffTime
cdbsGcInterval :: forall (f :: * -&gt; *) (m :: * -&gt; *) blk.
ChainDbSpecificArgs f m blk -&gt; DiffTime
cdbsRegistry :: forall (f :: * -&gt; *) (m :: * -&gt; *) blk.
ChainDbSpecificArgs f m blk -&gt; HKD f (ResourceRegistry m)
cdbsTracer :: forall (f :: * -&gt; *) (m :: * -&gt; *) blk.
ChainDbSpecificArgs f m blk -&gt; Tracer m (TraceEvent blk)
cdbsBlocksToAddSize :: Word
cdbsCheckInFuture :: HKD f (CheckInFuture m blk)
cdbsGcDelay :: DiffTime
cdbsGcInterval :: DiffTime
cdbsRegistry :: HKD f (ResourceRegistry m)
cdbsTracer :: Tracer m (TraceEvent blk)
</span><a href="Ouroboros.Consensus.Storage.ChainDB.Impl.Args.html#cdbsBlocksToAddSize"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span></span></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.Storage.ChainDB.Impl.Args.html#ChainDbArgs"><span class="hs-identifier hs-type">ChainDbArgs</span></a></span><span class="hs-special">{</span><span>
</span><span id="line-214"></span><span>      </span><span class="hs-comment">-- HasFS instances</span><span>
</span><span id="line-215"></span><span>      </span><span class="annot"><span class="annottext">cdbHasFSImmutableDB :: SomeHasFS m
</span><a href="Ouroboros.Consensus.Storage.ChainDB.Impl.Args.html#cdbHasFSImmutableDB"><span class="hs-identifier hs-var">cdbHasFSImmutableDB</span></a></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SomeHasFS m
</span><a href="#local-6989586621679898465"><span class="hs-identifier hs-var">immHasFS</span></a></span><span>
</span><span id="line-216"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cdbHasFSVolatileDB :: SomeHasFS m
</span><a href="Ouroboros.Consensus.Storage.ChainDB.Impl.Args.html#cdbHasFSVolatileDB"><span class="hs-identifier hs-var">cdbHasFSVolatileDB</span></a></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SomeHasFS m
</span><a href="#local-6989586621679898471"><span class="hs-identifier hs-var">volHasFS</span></a></span><span>
</span><span id="line-217"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cdbHasFSLgrDB :: SomeHasFS m
</span><a href="Ouroboros.Consensus.Storage.ChainDB.Impl.Args.html#cdbHasFSLgrDB"><span class="hs-identifier hs-var">cdbHasFSLgrDB</span></a></span><span>             </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SomeHasFS m
</span><a href="#local-6989586621679898477"><span class="hs-identifier hs-var">lgrHasFS</span></a></span><span>
</span><span id="line-218"></span><span>      </span><span class="hs-comment">-- Policy</span><span>
</span><span id="line-219"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cdbImmutableDbValidation :: ValidationPolicy
</span><a href="Ouroboros.Consensus.Storage.ChainDB.Impl.Args.html#cdbImmutableDbValidation"><span class="hs-identifier hs-var">cdbImmutableDbValidation</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ValidationPolicy
</span><a href="#local-6989586621679898468"><span class="hs-identifier hs-var">immValidationPolicy</span></a></span><span>
</span><span id="line-220"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cdbVolatileDbValidation :: BlockValidationPolicy
</span><a href="Ouroboros.Consensus.Storage.ChainDB.Impl.Args.html#cdbVolatileDbValidation"><span class="hs-identifier hs-var">cdbVolatileDbValidation</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BlockValidationPolicy
</span><a href="#local-6989586621679898474"><span class="hs-identifier hs-var">volValidationPolicy</span></a></span><span>
</span><span id="line-221"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cdbMaxBlocksPerFile :: BlocksPerFile
</span><a href="Ouroboros.Consensus.Storage.ChainDB.Impl.Args.html#cdbMaxBlocksPerFile"><span class="hs-identifier hs-var">cdbMaxBlocksPerFile</span></a></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BlocksPerFile
</span><a href="#local-6989586621679898472"><span class="hs-identifier hs-var">volMaxBlocksPerFile</span></a></span><span>
</span><span id="line-222"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cdbDiskPolicy :: DiskPolicy
</span><a href="Ouroboros.Consensus.Storage.ChainDB.Impl.Args.html#cdbDiskPolicy"><span class="hs-identifier hs-var">cdbDiskPolicy</span></a></span><span>             </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DiskPolicy
</span><a href="#local-6989586621679898475"><span class="hs-identifier hs-var">lgrDiskPolicy</span></a></span><span>
</span><span id="line-223"></span><span>      </span><span class="hs-comment">-- Integration</span><span>
</span><span id="line-224"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cdbTopLevelConfig :: HKD f (TopLevelConfig blk)
</span><a href="Ouroboros.Consensus.Storage.ChainDB.Impl.Args.html#cdbTopLevelConfig"><span class="hs-identifier hs-var">cdbTopLevelConfig</span></a></span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HKD f (TopLevelConfig blk)
</span><a href="#local-6989586621679898478"><span class="hs-identifier hs-var">lgrTopLevelConfig</span></a></span><span>
</span><span id="line-225"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cdbChunkInfo :: HKD f ChunkInfo
</span><a href="Ouroboros.Consensus.Storage.ChainDB.Impl.Args.html#cdbChunkInfo"><span class="hs-identifier hs-var">cdbChunkInfo</span></a></span><span>              </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HKD f ChunkInfo
</span><a href="#local-6989586621679898463"><span class="hs-identifier hs-var">immChunkInfo</span></a></span><span>
</span><span id="line-226"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cdbCheckIntegrity :: HKD f (blk -&gt; Bool)
</span><a href="Ouroboros.Consensus.Storage.ChainDB.Impl.Args.html#cdbCheckIntegrity"><span class="hs-identifier hs-var">cdbCheckIntegrity</span></a></span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HKD f (blk -&gt; Bool)
</span><a href="#local-6989586621679898462"><span class="hs-identifier hs-var">immCheckIntegrity</span></a></span><span>
</span><span id="line-227"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cdbGenesis :: HKD f (m (ExtLedgerState blk))
</span><a href="Ouroboros.Consensus.Storage.ChainDB.Impl.Args.html#cdbGenesis"><span class="hs-identifier hs-var">cdbGenesis</span></a></span><span>                </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HKD f (m (ExtLedgerState blk))
</span><a href="#local-6989586621679898476"><span class="hs-identifier hs-var">lgrGenesis</span></a></span><span>
</span><span id="line-228"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cdbCheckInFuture :: HKD f (CheckInFuture m blk)
</span><a href="Ouroboros.Consensus.Storage.ChainDB.Impl.Args.html#cdbCheckInFuture"><span class="hs-identifier hs-var">cdbCheckInFuture</span></a></span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HKD f (CheckInFuture m blk)
</span><a href="#local-6989586621679898482"><span class="hs-identifier hs-var">cdbsCheckInFuture</span></a></span><span>
</span><span id="line-229"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cdbImmutableDbCacheConfig :: CacheConfig
</span><a href="Ouroboros.Consensus.Storage.ChainDB.Impl.Args.html#cdbImmutableDbCacheConfig"><span class="hs-identifier hs-var">cdbImmutableDbCacheConfig</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CacheConfig
</span><a href="#local-6989586621679898461"><span class="hs-identifier hs-var">immCacheConfig</span></a></span><span>
</span><span id="line-230"></span><span>      </span><span class="hs-comment">-- Misc</span><span>
</span><span id="line-231"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cdbTracer :: Tracer m (TraceEvent blk)
</span><a href="Ouroboros.Consensus.Storage.ChainDB.Impl.Args.html#cdbTracer"><span class="hs-identifier hs-var">cdbTracer</span></a></span><span>                 </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer m (TraceEvent blk)
</span><a href="#local-6989586621679898486"><span class="hs-identifier hs-var">cdbsTracer</span></a></span><span>
</span><span id="line-232"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cdbTraceLedger :: Tracer m (LedgerDB' blk)
</span><a href="Ouroboros.Consensus.Storage.ChainDB.Impl.Args.html#cdbTraceLedger"><span class="hs-identifier hs-var">cdbTraceLedger</span></a></span><span>            </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer m (LedgerDB' blk)
</span><a href="#local-6989586621679898479"><span class="hs-identifier hs-var">lgrTraceLedger</span></a></span><span>
</span><span id="line-233"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cdbRegistry :: HKD f (ResourceRegistry m)
</span><a href="Ouroboros.Consensus.Storage.ChainDB.Impl.Args.html#cdbRegistry"><span class="hs-identifier hs-var">cdbRegistry</span></a></span><span>               </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HKD f (ResourceRegistry m)
</span><a href="#local-6989586621679898485"><span class="hs-identifier hs-var">cdbsRegistry</span></a></span><span>
</span><span id="line-234"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cdbGcDelay :: DiffTime
</span><a href="Ouroboros.Consensus.Storage.ChainDB.Impl.Args.html#cdbGcDelay"><span class="hs-identifier hs-var">cdbGcDelay</span></a></span><span>                </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DiffTime
</span><a href="#local-6989586621679898483"><span class="hs-identifier hs-var">cdbsGcDelay</span></a></span><span>
</span><span id="line-235"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cdbGcInterval :: DiffTime
</span><a href="Ouroboros.Consensus.Storage.ChainDB.Impl.Args.html#cdbGcInterval"><span class="hs-identifier hs-var">cdbGcInterval</span></a></span><span>             </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DiffTime
</span><a href="#local-6989586621679898484"><span class="hs-identifier hs-var">cdbsGcInterval</span></a></span><span>
</span><span id="line-236"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cdbBlocksToAddSize :: Word
</span><a href="Ouroboros.Consensus.Storage.ChainDB.Impl.Args.html#cdbBlocksToAddSize"><span class="hs-identifier hs-var">cdbBlocksToAddSize</span></a></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679898481"><span class="hs-identifier hs-var">cdbsBlocksToAddSize</span></a></span><span>
</span><span id="line-237"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-238"></span><span>
</span><span id="line-239"></span><span class="hs-comment">{-------------------------------------------------------------------------------
  Relative mount points
-------------------------------------------------------------------------------}</span><span>
</span><span id="line-242"></span><span>
</span><span id="line-243"></span><span class="hs-comment">-- | A relative path for a 'MountPoint'</span><span>
</span><span id="line-244"></span><span class="hs-comment">--</span><span>
</span><span id="line-245"></span><span class="hs-comment">-- The root is determined by context.</span><span>
</span><span id="line-246"></span><span class="hs-keyword">newtype</span><span> </span><span id="RelativeMountPoint"><span class="annot"><a href="Ouroboros.Consensus.Storage.ChainDB.Impl.Args.html#RelativeMountPoint"><span class="hs-identifier hs-var">RelativeMountPoint</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="RelativeMountPoint"><span class="annot"><a href="Ouroboros.Consensus.Storage.ChainDB.Impl.Args.html#RelativeMountPoint"><span class="hs-identifier hs-var">RelativeMountPoint</span></a></span></span><span> </span><span class="annot"><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span>
</span><span id="line-247"></span></pre></body></html>