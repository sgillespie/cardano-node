<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE DataKinds           #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE EmptyCase           #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE GADTs               #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE KindSignatures      #-}</span><span>
</span><span id="line-5"></span><span class="hs-pragma">{-# LANGUAGE RankNTypes          #-}</span><span>
</span><span id="line-6"></span><span class="hs-pragma">{-# LANGUAGE ScopedTypeVariables #-}</span><span>
</span><span id="line-7"></span><span class="hs-pragma">{-# LANGUAGE TypeOperators       #-}</span><span>
</span><span id="line-8"></span><span>
</span><span id="line-9"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Ouroboros.Consensus.HardFork.Combinator.Compat</span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-10"></span><span>    </span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Compat.html#HardForkCompatQuery"><span class="hs-identifier">HardForkCompatQuery</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-11"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Convenience constructors</span></span><span>
</span><span id="line-12"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Compat.html#compatGetEraStart"><span class="hs-identifier">compatGetEraStart</span></a></span><span>
</span><span id="line-13"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Compat.html#compatGetInterpreter"><span class="hs-identifier">compatGetInterpreter</span></a></span><span>
</span><span id="line-14"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Compat.html#compatIfCurrent"><span class="hs-identifier">compatIfCurrent</span></a></span><span>
</span><span id="line-15"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Wrappers</span></span><span>
</span><span id="line-16"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Compat.html#forwardCompatQuery"><span class="hs-identifier">forwardCompatQuery</span></a></span><span>
</span><span id="line-17"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Compat.html#singleEraCompatQuery"><span class="hs-identifier">singleEraCompatQuery</span></a></span><span>
</span><span id="line-18"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-19"></span><span>
</span><span id="line-20"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/Data.Kind.html"><span class="hs-identifier">Data.Kind</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#Type"><span class="hs-identifier">Type</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-21"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Data.SOP.BasicFunctors</span></span><span>
</span><span id="line-22"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Data.SOP.NonEmpty</span></span><span>
</span><span id="line-23"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Data.SOP.Strict</span></span><span>
</span><span id="line-24"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Ouroboros.Consensus.Block.html"><span class="hs-identifier">Ouroboros.Consensus.Block</span></a></span><span>
</span><span id="line-25"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Ouroboros.Consensus.BlockchainTime.html"><span class="hs-identifier">Ouroboros.Consensus.BlockchainTime</span></a></span><span>
</span><span id="line-26"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Abstract.html"><span class="hs-identifier">Ouroboros.Consensus.HardFork.Abstract</span></a></span><span>
</span><span id="line-27"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Abstract.SingleEraBlock.html"><span class="hs-identifier">Ouroboros.Consensus.HardFork.Combinator.Abstract.SingleEraBlock</span></a></span><span>
</span><span id="line-28"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Basics.html"><span class="hs-identifier">Ouroboros.Consensus.HardFork.Combinator.Basics</span></a></span><span>
</span><span id="line-29"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Ledger.Query.html"><span class="hs-identifier">Ouroboros.Consensus.HardFork.Combinator.Ledger.Query</span></a></span><span>
</span><span id="line-30"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.HardFork.History.Qry.html"><span class="hs-identifier">Ouroboros.Consensus.HardFork.History.Qry</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Qry</span></span><span>
</span><span id="line-31"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Ouroboros.Consensus.HardFork.History.Summary.html"><span class="hs-identifier">Ouroboros.Consensus.HardFork.History.Summary</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Ouroboros.Consensus.HardFork.History.Summary.html#Bound"><span class="hs-identifier">Bound</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.HardFork.History.Summary.html#Summary"><span class="hs-identifier">Summary</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-32"></span><span>                     </span><span class="annot"><a href="Ouroboros.Consensus.HardFork.History.Summary.html#initBound"><span class="hs-identifier">initBound</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.HardFork.History.Summary.html#neverForksSummary"><span class="hs-identifier">neverForksSummary</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-33"></span><span>
</span><span id="line-34"></span><span class="hs-comment">{-------------------------------------------------------------------------------
  Query language
-------------------------------------------------------------------------------}</span><span>
</span><span id="line-37"></span><span>
</span><span id="line-38"></span><span class="hs-comment">-- | Version of @Query (HardForkBlock xs)@ without the restriction to have</span><span>
</span><span id="line-39"></span><span class="hs-comment">-- at least two eras</span><span>
</span><span id="line-40"></span><span class="hs-keyword">data</span><span> </span><span id="HardForkCompatQuery"><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Compat.html#HardForkCompatQuery"><span class="hs-identifier hs-var">HardForkCompatQuery</span></a></span></span><span> </span><span id="local-6989586621679890948"><span class="annot"><a href="#local-6989586621679890948"><span class="hs-identifier hs-type">blk</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-41"></span><span>  </span><span id="local-6989586621679890949"><span id="local-6989586621679890950"><span id="CompatIfCurrent"><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Compat.html#CompatIfCurrent"><span class="hs-identifier hs-var">CompatIfCurrent</span></a></span></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-42"></span><span>       </span><span class="annot"><a href="Ouroboros.Consensus.Ledger.Query.html#BlockQuery"><span class="hs-identifier hs-type">BlockQuery</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679890949"><span class="hs-identifier hs-type">blk</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679890950"><span class="hs-identifier hs-type">result</span></a></span><span>
</span><span id="line-43"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Compat.html#HardForkCompatQuery"><span class="hs-identifier hs-type">HardForkCompatQuery</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679890949"><span class="hs-identifier hs-type">blk</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679890950"><span class="hs-identifier hs-type">result</span></a></span></span></span><span>
</span><span id="line-44"></span><span>
</span><span id="line-45"></span><span>  </span><span id="local-6989586621679890878"><span id="local-6989586621679890879"><span id="CompatAnytime"><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Compat.html#CompatAnytime"><span class="hs-identifier hs-var">CompatAnytime</span></a></span></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-46"></span><span>       </span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Ledger.Query.html#QueryAnytime"><span class="hs-identifier hs-type">QueryAnytime</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679890878"><span class="hs-identifier hs-type">result</span></a></span><span>
</span><span id="line-47"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Abstract.SingleEraBlock.html#EraIndex"><span class="hs-identifier hs-type">EraIndex</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Abstract.html#HardForkIndices"><span class="hs-identifier hs-type">HardForkIndices</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679890879"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-48"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Compat.html#HardForkCompatQuery"><span class="hs-identifier hs-type">HardForkCompatQuery</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679890879"><span class="hs-identifier hs-type">blk</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679890878"><span class="hs-identifier hs-type">result</span></a></span></span></span><span>
</span><span id="line-49"></span><span>
</span><span id="line-50"></span><span>  </span><span id="local-6989586621679890884"><span id="local-6989586621679890885"><span id="CompatHardFork"><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Compat.html#CompatHardFork"><span class="hs-identifier hs-var">CompatHardFork</span></a></span></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-51"></span><span>       </span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Ledger.Query.html#QueryHardFork"><span class="hs-identifier hs-type">QueryHardFork</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Abstract.html#HardForkIndices"><span class="hs-identifier hs-type">HardForkIndices</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679890884"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679890885"><span class="hs-identifier hs-type">result</span></a></span><span>
</span><span id="line-52"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Compat.html#HardForkCompatQuery"><span class="hs-identifier hs-type">HardForkCompatQuery</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679890884"><span class="hs-identifier hs-type">blk</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679890885"><span class="hs-identifier hs-type">result</span></a></span></span></span><span>
</span><span id="line-53"></span><span>
</span><span id="line-54"></span><span class="hs-comment">{-------------------------------------------------------------------------------
  Convenience constructors for 'HardForkCompatQuery'
-------------------------------------------------------------------------------}</span><span>
</span><span id="line-57"></span><span>
</span><span id="line-58"></span><span class="annot"><span class="hs-comment">-- | Submit query to underlying ledger</span></span><span>
</span><span id="line-59"></span><span id="local-6989586621679890866"><span id="local-6989586621679890867"><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Compat.html#compatIfCurrent"><span class="hs-identifier hs-type">compatIfCurrent</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-60"></span><span>     </span><span class="annot"><a href="Ouroboros.Consensus.Ledger.Query.html#BlockQuery"><span class="hs-identifier hs-type">BlockQuery</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679890866"><span class="hs-identifier hs-type">blk</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679890867"><span class="hs-identifier hs-type">result</span></a></span><span>
</span><span id="line-61"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Compat.html#HardForkCompatQuery"><span class="hs-identifier hs-type">HardForkCompatQuery</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679890866"><span class="hs-identifier hs-type">blk</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679890867"><span class="hs-identifier hs-type">result</span></a></span></span></span><span>
</span><span id="line-62"></span><span id="compatIfCurrent"><span class="annot"><span class="annottext">compatIfCurrent :: forall blk result.
BlockQuery blk result -&gt; HardForkCompatQuery blk result
</span><a href="Ouroboros.Consensus.HardFork.Combinator.Compat.html#compatIfCurrent"><span class="hs-identifier hs-var hs-var">compatIfCurrent</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BlockQuery blk result -&gt; HardForkCompatQuery blk result
forall blk result.
BlockQuery blk result -&gt; HardForkCompatQuery blk result
</span><a href="Ouroboros.Consensus.HardFork.Combinator.Compat.html#CompatIfCurrent"><span class="hs-identifier hs-var">CompatIfCurrent</span></a></span><span>
</span><span id="line-63"></span><span>
</span><span id="line-64"></span><span class="annot"><span class="hs-comment">-- | Get the start of the specified era, if known</span></span><span>
</span><span id="line-65"></span><span id="local-6989586621679890872"><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Compat.html#compatGetEraStart"><span class="hs-identifier hs-type">compatGetEraStart</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-66"></span><span>     </span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Abstract.SingleEraBlock.html#EraIndex"><span class="hs-identifier hs-type">EraIndex</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Abstract.html#HardForkIndices"><span class="hs-identifier hs-type">HardForkIndices</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679890872"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-67"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Compat.html#HardForkCompatQuery"><span class="hs-identifier hs-type">HardForkCompatQuery</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679890872"><span class="hs-identifier hs-type">blk</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="Ouroboros.Consensus.HardFork.History.Summary.html#Bound"><span class="hs-identifier hs-type">Bound</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-68"></span><span id="compatGetEraStart"><span class="annot"><span class="annottext">compatGetEraStart :: forall blk.
EraIndex (HardForkIndices blk)
-&gt; HardForkCompatQuery blk (Maybe Bound)
</span><a href="Ouroboros.Consensus.HardFork.Combinator.Compat.html#compatGetEraStart"><span class="hs-identifier hs-var hs-var">compatGetEraStart</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">QueryAnytime (Maybe Bound)
-&gt; EraIndex (HardForkIndices blk)
-&gt; HardForkCompatQuery blk (Maybe Bound)
forall result blk.
QueryAnytime result
-&gt; EraIndex (HardForkIndices blk) -&gt; HardForkCompatQuery blk result
</span><a href="Ouroboros.Consensus.HardFork.Combinator.Compat.html#CompatAnytime"><span class="hs-identifier hs-var">CompatAnytime</span></a></span><span> </span><span class="annot"><span class="annottext">QueryAnytime (Maybe Bound)
</span><a href="Ouroboros.Consensus.HardFork.Combinator.Ledger.Query.html#GetEraStart"><span class="hs-identifier hs-var">GetEraStart</span></a></span><span>
</span><span id="line-69"></span><span>
</span><span id="line-70"></span><span class="hs-comment">-- | Get an interpreter for history queries</span><span>
</span><span id="line-71"></span><span class="hs-comment">--</span><span>
</span><span id="line-72"></span><span class="hs-comment">-- I.e., this can be used for slot/epoch/time conversions.</span><span>
</span><span id="line-73"></span><span id="local-6989586621679890880"><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Compat.html#compatGetInterpreter"><span class="hs-identifier hs-type">compatGetInterpreter</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-74"></span><span>    </span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Compat.html#HardForkCompatQuery"><span class="hs-identifier hs-type">HardForkCompatQuery</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679890880"><span class="hs-identifier hs-type">blk</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Ouroboros.Consensus.HardFork.History.Qry.html#Interpreter"><span class="hs-identifier hs-type">Qry.Interpreter</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Abstract.html#HardForkIndices"><span class="hs-identifier hs-type">HardForkIndices</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679890880"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span><span>
</span><span id="line-75"></span><span id="compatGetInterpreter"><span class="annot"><span class="annottext">compatGetInterpreter :: forall blk.
HardForkCompatQuery blk (Interpreter (HardForkIndices blk))
</span><a href="Ouroboros.Consensus.HardFork.Combinator.Compat.html#compatGetInterpreter"><span class="hs-identifier hs-var hs-var">compatGetInterpreter</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">QueryHardFork
  (HardForkIndices blk) (Interpreter (HardForkIndices blk))
-&gt; HardForkCompatQuery blk (Interpreter (HardForkIndices blk))
forall blk result.
QueryHardFork (HardForkIndices blk) result
-&gt; HardForkCompatQuery blk result
</span><a href="Ouroboros.Consensus.HardFork.Combinator.Compat.html#CompatHardFork"><span class="hs-identifier hs-var">CompatHardFork</span></a></span><span> </span><span class="annot"><span class="annottext">QueryHardFork
  (HardForkIndices blk) (Interpreter (HardForkIndices blk))
forall (xs :: [*]). QueryHardFork xs (Interpreter xs)
</span><a href="Ouroboros.Consensus.HardFork.Combinator.Ledger.Query.html#GetInterpreter"><span class="hs-identifier hs-var">GetInterpreter</span></a></span><span>
</span><span id="line-76"></span><span>
</span><span id="line-77"></span><span class="hs-comment">{-------------------------------------------------------------------------------
  Wrappers
-------------------------------------------------------------------------------}</span><span>
</span><span id="line-80"></span><span>
</span><span id="line-81"></span><span class="hs-comment">-- | Wrapper used when connecting to a server that's running the HFC with</span><span>
</span><span id="line-82"></span><span class="hs-comment">-- at least two eras</span><span>
</span><span id="line-83"></span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Compat.html#forwardCompatQuery"><span class="hs-identifier hs-type">forwardCompatQuery</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-84"></span><span>       </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679890892"><span class="annot"><a href="#local-6989586621679890892"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span id="local-6989586621679890889"><span class="annot"><a href="#local-6989586621679890889"><span class="hs-identifier hs-type">x</span></a></span></span><span> </span><span id="local-6989586621679890887"><span class="annot"><a href="#local-6989586621679890887"><span class="hs-identifier hs-type">xs</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IsNonEmpty</span></span><span> </span><span class="annot"><a href="#local-6989586621679890887"><span class="hs-identifier hs-type">xs</span></a></span><span>
</span><span id="line-85"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679890891"><span class="annot"><a href="#local-6989586621679890891"><span class="hs-identifier hs-type">result</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.Ledger.Query.html#BlockQuery"><span class="hs-identifier hs-type">BlockQuery</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Basics.html#HardForkBlock"><span class="hs-identifier hs-type">HardForkBlock</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679890889"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-glyph">:</span><span> </span><span class="annot"><a href="#local-6989586621679890887"><span class="hs-identifier hs-type">xs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679890891"><span class="hs-identifier hs-type">result</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679890892"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679890891"><span class="hs-identifier hs-type">result</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-86"></span><span>    </span><span class="annot"><span class="hs-comment">-- ^ Submit a query through the LocalStateQuery protocol.</span></span><span>
</span><span id="line-87"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679890893"><span class="annot"><a href="#local-6989586621679890893"><span class="hs-identifier hs-type">result</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Compat.html#HardForkCompatQuery"><span class="hs-identifier hs-type">HardForkCompatQuery</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Basics.html#HardForkBlock"><span class="hs-identifier hs-type">HardForkBlock</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679890889"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-glyph">:</span><span> </span><span class="annot"><a href="#local-6989586621679890887"><span class="hs-identifier hs-type">xs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679890893"><span class="hs-identifier hs-type">result</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679890892"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679890893"><span class="hs-identifier hs-type">result</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-88"></span><span id="forwardCompatQuery"><span class="annot"><span class="annottext">forwardCompatQuery :: forall (m :: * -&gt; *) x (xs :: [*]).
IsNonEmpty xs =&gt;
(forall result.
 BlockQuery (HardForkBlock (x : xs)) result -&gt; m result)
-&gt; forall result.
   HardForkCompatQuery (HardForkBlock (x : xs)) result -&gt; m result
</span><a href="Ouroboros.Consensus.HardFork.Combinator.Compat.html#forwardCompatQuery"><span class="hs-identifier hs-var hs-var">forwardCompatQuery</span></a></span></span><span> </span><span id="local-6989586621679890957"><span class="annot"><span class="annottext">forall result.
BlockQuery (HardForkBlock (x : xs)) result -&gt; m result
</span><a href="#local-6989586621679890957"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HardForkCompatQuery (HardForkBlock (x : xs)) result -&gt; m result
forall result.
HardForkCompatQuery (HardForkBlock (x : xs)) result -&gt; m result
</span><a href="#local-6989586621679890958"><span class="hs-identifier hs-var">go</span></a></span><span>
</span><span id="line-89"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-90"></span><span>    </span><span id="local-6989586621679890898"><span class="annot"><a href="#local-6989586621679890958"><span class="hs-identifier hs-type">go</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Compat.html#HardForkCompatQuery"><span class="hs-identifier hs-type">HardForkCompatQuery</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Basics.html#HardForkBlock"><span class="hs-identifier hs-type">HardForkBlock</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679890889"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-glyph">:</span><span> </span><span class="annot"><a href="#local-6989586621679890887"><span class="hs-identifier hs-type">xs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679890898"><span class="hs-identifier hs-type">result</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679890892"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679890898"><span class="hs-identifier hs-type">result</span></a></span></span><span>
</span><span id="line-91"></span><span>    </span><span id="local-6989586621679890958"><span class="annot"><span class="annottext">go :: forall result.
HardForkCompatQuery (HardForkBlock (x : xs)) result -&gt; m result
</span><a href="#local-6989586621679890958"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Compat.html#CompatIfCurrent"><span class="hs-identifier hs-type">CompatIfCurrent</span></a></span><span> </span><span id="local-6989586621679890961"><span class="annot"><span class="annottext">BlockQuery (HardForkBlock (x : xs)) result
</span><a href="#local-6989586621679890961"><span class="hs-identifier hs-var">qry</span></a></span></span><span class="hs-special">)</span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BlockQuery (HardForkBlock (x : xs)) result -&gt; m result
forall result.
BlockQuery (HardForkBlock (x : xs)) result -&gt; m result
</span><a href="#local-6989586621679890957"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">BlockQuery (HardForkBlock (x : xs)) result
</span><a href="#local-6989586621679890961"><span class="hs-identifier hs-var">qry</span></a></span><span>
</span><span id="line-92"></span><span>    </span><span class="annot"><a href="#local-6989586621679890958"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Compat.html#CompatAnytime"><span class="hs-identifier hs-type">CompatAnytime</span></a></span><span>   </span><span id="local-6989586621679890962"><span class="annot"><span class="annottext">QueryAnytime result
</span><a href="#local-6989586621679890962"><span class="hs-identifier hs-var">qry</span></a></span></span><span> </span><span id="local-6989586621679890963"><span class="annot"><span class="annottext">EraIndex (HardForkIndices (HardForkBlock (x : xs)))
</span><a href="#local-6989586621679890963"><span class="hs-identifier hs-var">ix</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BlockQuery (HardForkBlock (x : xs)) result -&gt; m result
forall result.
BlockQuery (HardForkBlock (x : xs)) result -&gt; m result
</span><a href="#local-6989586621679890957"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">QueryAnytime result
-&gt; EraIndex (x : xs) -&gt; BlockQuery (HardForkBlock (x : xs)) result
forall (xs1 :: [*]) a x.
IsNonEmpty xs1 =&gt;
QueryAnytime a
-&gt; EraIndex (x : xs1) -&gt; BlockQuery (HardForkBlock (x : xs1)) a
</span><a href="Ouroboros.Consensus.HardFork.Combinator.Ledger.Query.html#QueryAnytime"><span class="hs-identifier hs-var">QueryAnytime</span></a></span><span> </span><span class="annot"><span class="annottext">QueryAnytime result
</span><a href="#local-6989586621679890962"><span class="hs-identifier hs-var">qry</span></a></span><span> </span><span class="annot"><span class="annottext">EraIndex (x : xs)
EraIndex (HardForkIndices (HardForkBlock (x : xs)))
</span><a href="#local-6989586621679890963"><span class="hs-identifier hs-var">ix</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-93"></span><span>    </span><span class="annot"><a href="#local-6989586621679890958"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Compat.html#CompatHardFork"><span class="hs-identifier hs-type">CompatHardFork</span></a></span><span>  </span><span id="local-6989586621679890965"><span class="annot"><span class="annottext">QueryHardFork (HardForkIndices (HardForkBlock (x : xs))) result
</span><a href="#local-6989586621679890965"><span class="hs-identifier hs-var">qry</span></a></span></span><span class="hs-special">)</span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BlockQuery (HardForkBlock (x : xs)) result -&gt; m result
forall result.
BlockQuery (HardForkBlock (x : xs)) result -&gt; m result
</span><a href="#local-6989586621679890957"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">QueryHardFork (x : xs) result
-&gt; BlockQuery (HardForkBlock (x : xs)) result
forall (xs1 :: [*]) x a.
IsNonEmpty xs1 =&gt;
QueryHardFork (x : xs1) a -&gt; BlockQuery (HardForkBlock (x : xs1)) a
</span><a href="Ouroboros.Consensus.HardFork.Combinator.Ledger.Query.html#QueryHardFork"><span class="hs-identifier hs-var">QueryHardFork</span></a></span><span> </span><span class="annot"><span class="annottext">QueryHardFork (x : xs) result
QueryHardFork (HardForkIndices (HardForkBlock (x : xs))) result
</span><a href="#local-6989586621679890965"><span class="hs-identifier hs-var">qry</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-94"></span><span>
</span><span id="line-95"></span><span class="hs-comment">-- | Wrapper used when connecting to a server that's not using the HFC, or</span><span>
</span><span id="line-96"></span><span class="hs-comment">-- is using the HFC but with a single era only.</span><span>
</span><span id="line-97"></span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Compat.html#singleEraCompatQuery"><span class="hs-identifier hs-type">singleEraCompatQuery</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-98"></span><span>       </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679890905"><span class="annot"><a href="#local-6989586621679890905"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span id="local-6989586621679890906"><span class="annot"><a href="#local-6989586621679890906"><span class="hs-identifier hs-type">blk</span></a></span></span><span> </span><span id="local-6989586621679890907"><span class="annot"><a href="#local-6989586621679890907"><span class="hs-identifier hs-type">era</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#Monad"><span class="hs-identifier hs-type">Monad</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679890905"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Abstract.html#HardForkIndices"><span class="hs-identifier hs-type">HardForkIndices</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679890906"><span class="hs-identifier hs-type">blk</span></a></span><span> </span><span class="annot"><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#~"><span class="hs-operator hs-type">~</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679890907"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-99"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">EpochSize</span></span><span>
</span><span id="line-100"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">SlotLength</span></span><span>
</span><span id="line-101"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679890910"><span class="annot"><a href="#local-6989586621679890910"><span class="hs-identifier hs-type">result</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.Ledger.Query.html#BlockQuery"><span class="hs-identifier hs-type">BlockQuery</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679890906"><span class="hs-identifier hs-type">blk</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679890910"><span class="hs-identifier hs-type">result</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679890905"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679890910"><span class="hs-identifier hs-type">result</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-102"></span><span>    </span><span class="annot"><span class="hs-comment">-- ^ Submit a query through the LocalStateQuery protocol.</span></span><span>
</span><span id="line-103"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679890911"><span class="annot"><a href="#local-6989586621679890911"><span class="hs-identifier hs-type">result</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Compat.html#HardForkCompatQuery"><span class="hs-identifier hs-type">HardForkCompatQuery</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679890906"><span class="hs-identifier hs-type">blk</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679890911"><span class="hs-identifier hs-type">result</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679890905"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679890911"><span class="hs-identifier hs-type">result</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-104"></span><span id="singleEraCompatQuery"><span class="annot"><span class="annottext">singleEraCompatQuery :: forall (m :: * -&gt; *) blk era.
(Monad m, HardForkIndices blk ~ '[era]) =&gt;
EpochSize
-&gt; SlotLength
-&gt; (forall result. BlockQuery blk result -&gt; m result)
-&gt; forall result. HardForkCompatQuery blk result -&gt; m result
</span><a href="Ouroboros.Consensus.HardFork.Combinator.Compat.html#singleEraCompatQuery"><span class="hs-identifier hs-var hs-var">singleEraCompatQuery</span></a></span></span><span> </span><span id="local-6989586621679890970"><span class="annot"><span class="annottext">EpochSize
</span><a href="#local-6989586621679890970"><span class="hs-identifier hs-var">epochSize</span></a></span></span><span> </span><span id="local-6989586621679890971"><span class="annot"><span class="annottext">SlotLength
</span><a href="#local-6989586621679890971"><span class="hs-identifier hs-var">slotLen</span></a></span></span><span> </span><span id="local-6989586621679890972"><span class="annot"><span class="annottext">forall result. BlockQuery blk result -&gt; m result
</span><a href="#local-6989586621679890972"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HardForkCompatQuery blk result -&gt; m result
forall result. HardForkCompatQuery blk result -&gt; m result
</span><a href="#local-6989586621679890973"><span class="hs-identifier hs-var">go</span></a></span><span>
</span><span id="line-105"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-106"></span><span>    </span><span id="local-6989586621679890919"><span class="annot"><a href="#local-6989586621679890973"><span class="hs-identifier hs-type">go</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Compat.html#HardForkCompatQuery"><span class="hs-identifier hs-type">HardForkCompatQuery</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679890906"><span class="hs-identifier hs-type">blk</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679890919"><span class="hs-identifier hs-type">result</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679890905"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679890919"><span class="hs-identifier hs-type">result</span></a></span></span><span>
</span><span id="line-107"></span><span>    </span><span id="local-6989586621679890973"><span class="annot"><span class="annottext">go :: forall result. HardForkCompatQuery blk result -&gt; m result
</span><a href="#local-6989586621679890973"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Compat.html#CompatIfCurrent"><span class="hs-identifier hs-type">CompatIfCurrent</span></a></span><span> </span><span id="local-6989586621679890974"><span class="annot"><span class="annottext">BlockQuery blk result
</span><a href="#local-6989586621679890974"><span class="hs-identifier hs-var">qry</span></a></span></span><span class="hs-special">)</span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BlockQuery blk result -&gt; m result
forall result. BlockQuery blk result -&gt; m result
</span><a href="#local-6989586621679890972"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">BlockQuery blk result
</span><a href="#local-6989586621679890974"><span class="hs-identifier hs-var">qry</span></a></span><span>
</span><span id="line-108"></span><span>    </span><span class="annot"><a href="#local-6989586621679890973"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Compat.html#CompatAnytime"><span class="hs-identifier hs-type">CompatAnytime</span></a></span><span>   </span><span id="local-6989586621679890975"><span class="annot"><span class="annottext">QueryAnytime result
</span><a href="#local-6989586621679890975"><span class="hs-identifier hs-var">qry</span></a></span></span><span> </span><span id="local-6989586621679890976"><span class="annot"><span class="annottext">EraIndex (HardForkIndices blk)
</span><a href="#local-6989586621679890976"><span class="hs-identifier hs-var">ix</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">m result -&gt; () -&gt; m result
forall a b. a -&gt; b -&gt; a
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#const"><span class="hs-identifier hs-var">const</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">QueryAnytime result -&gt; m result
forall result. QueryAnytime result -&gt; m result
</span><a href="#local-6989586621679890978"><span class="hs-identifier hs-var">goAnytime</span></a></span><span> </span><span class="annot"><span class="annottext">QueryAnytime result
</span><a href="#local-6989586621679890975"><span class="hs-identifier hs-var">qry</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EraIndex '[era] -&gt; ()
</span><a href="#local-6989586621679890979"><span class="hs-identifier hs-var">trivialIndex</span></a></span><span> </span><span class="annot"><span class="annottext">EraIndex '[era]
EraIndex (HardForkIndices blk)
</span><a href="#local-6989586621679890976"><span class="hs-identifier hs-var">ix</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-109"></span><span>    </span><span class="annot"><a href="#local-6989586621679890973"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Compat.html#CompatHardFork"><span class="hs-identifier hs-type">CompatHardFork</span></a></span><span>  </span><span id="local-6989586621679890980"><span class="annot"><span class="annottext">QueryHardFork (HardForkIndices blk) result
</span><a href="#local-6989586621679890980"><span class="hs-identifier hs-var">qry</span></a></span></span><span class="hs-special">)</span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">QueryHardFork '[era] result -&gt; m result
forall result. QueryHardFork '[era] result -&gt; m result
</span><a href="#local-6989586621679890981"><span class="hs-identifier hs-var">goHardFork</span></a></span><span> </span><span class="annot"><span class="annottext">QueryHardFork '[era] result
QueryHardFork (HardForkIndices blk) result
</span><a href="#local-6989586621679890980"><span class="hs-identifier hs-var">qry</span></a></span><span>
</span><span id="line-110"></span><span>
</span><span id="line-111"></span><span>    </span><span id="local-6989586621679890923"><span class="annot"><a href="#local-6989586621679890978"><span class="hs-identifier hs-type">goAnytime</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Ledger.Query.html#QueryAnytime"><span class="hs-identifier hs-type">QueryAnytime</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679890923"><span class="hs-identifier hs-type">result</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679890905"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679890923"><span class="hs-identifier hs-type">result</span></a></span></span><span>
</span><span id="line-112"></span><span>    </span><span id="local-6989586621679890978"><span class="annot"><span class="annottext">goAnytime :: forall result. QueryAnytime result -&gt; m result
</span><a href="#local-6989586621679890978"><span class="hs-identifier hs-var hs-var">goAnytime</span></a></span></span><span> </span><span class="annot"><span class="annottext">QueryAnytime result
</span><a href="Ouroboros.Consensus.HardFork.Combinator.Ledger.Query.html#GetEraStart"><span class="hs-identifier hs-var">GetEraStart</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">result -&gt; m result
forall a. a -&gt; m a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">(result -&gt; m result) -&gt; result -&gt; m result
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Bound -&gt; Maybe Bound
forall a. a -&gt; Maybe a
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Bound
</span><a href="Ouroboros.Consensus.HardFork.History.Summary.html#initBound"><span class="hs-identifier hs-var">initBound</span></a></span><span>
</span><span id="line-113"></span><span>
</span><span id="line-114"></span><span>    </span><span id="local-6989586621679890924"><span class="annot"><a href="#local-6989586621679890981"><span class="hs-identifier hs-type">goHardFork</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Ledger.Query.html#QueryHardFork"><span class="hs-identifier hs-type">QueryHardFork</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679890907"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">]</span><span> </span><span class="annot"><a href="#local-6989586621679890924"><span class="hs-identifier hs-type">result</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679890905"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679890924"><span class="hs-identifier hs-type">result</span></a></span></span><span>
</span><span id="line-115"></span><span>    </span><span id="local-6989586621679890981"><span class="annot"><span class="annottext">goHardFork :: forall result. QueryHardFork '[era] result -&gt; m result
</span><a href="#local-6989586621679890981"><span class="hs-identifier hs-var hs-var">goHardFork</span></a></span></span><span> </span><span class="annot"><span class="annottext">QueryHardFork '[era] result
</span><a href="Ouroboros.Consensus.HardFork.Combinator.Ledger.Query.html#GetInterpreter"><span class="hs-identifier hs-var">GetInterpreter</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">result -&gt; m result
forall a. a -&gt; m a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">(result -&gt; m result) -&gt; result -&gt; m result
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Summary '[era] -&gt; Interpreter '[era]
forall (xs :: [*]). Summary xs -&gt; Interpreter xs
</span><a href="Ouroboros.Consensus.HardFork.History.Qry.html#mkInterpreter"><span class="hs-identifier hs-var">Qry.mkInterpreter</span></a></span><span> </span><span class="annot"><span class="annottext">Summary '[era]
</span><a href="#local-6989586621679890987"><span class="hs-identifier hs-var">summary</span></a></span><span>
</span><span id="line-116"></span><span>    </span><span class="annot"><a href="#local-6989586621679890981"><span class="hs-identifier hs-var">goHardFork</span></a></span><span> </span><span class="annot"><span class="annottext">QueryHardFork '[era] result
</span><a href="Ouroboros.Consensus.HardFork.Combinator.Ledger.Query.html#GetCurrentEra"><span class="hs-identifier hs-var">GetCurrentEra</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">result -&gt; m result
forall a. a -&gt; m a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">(result -&gt; m result) -&gt; result -&gt; m result
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">result
EraIndex '[era]
forall x (xs :: [*]). EraIndex (x : xs)
</span><a href="Ouroboros.Consensus.HardFork.Combinator.Abstract.SingleEraBlock.html#eraIndexZero"><span class="hs-identifier hs-var">eraIndexZero</span></a></span><span>
</span><span id="line-117"></span><span>
</span><span id="line-118"></span><span>    </span><span class="annot"><a href="#local-6989586621679890987"><span class="hs-identifier hs-type">summary</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.HardFork.History.Summary.html#Summary"><span class="hs-identifier hs-type">Summary</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679890907"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-119"></span><span>    </span><span id="local-6989586621679890987"><span class="annot"><span class="annottext">summary :: Summary '[era]
</span><a href="#local-6989586621679890987"><span class="hs-identifier hs-var hs-var">summary</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EpochSize -&gt; SlotLength -&gt; Summary '[era]
forall x. EpochSize -&gt; SlotLength -&gt; Summary '[x]
</span><a href="Ouroboros.Consensus.HardFork.History.Summary.html#neverForksSummary"><span class="hs-identifier hs-var">neverForksSummary</span></a></span><span> </span><span class="annot"><span class="annottext">EpochSize
</span><a href="#local-6989586621679890970"><span class="hs-identifier hs-var">epochSize</span></a></span><span> </span><span class="annot"><span class="annottext">SlotLength
</span><a href="#local-6989586621679890971"><span class="hs-identifier hs-var">slotLen</span></a></span><span>
</span><span id="line-120"></span><span>
</span><span id="line-121"></span><span>    </span><span class="annot"><a href="#local-6989586621679890979"><span class="hs-identifier hs-type">trivialIndex</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Abstract.SingleEraBlock.html#EraIndex"><span class="hs-identifier hs-type">EraIndex</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679890907"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-122"></span><span>    </span><span id="local-6989586621679890979"><span class="annot"><span class="annottext">trivialIndex :: EraIndex '[era] -&gt; ()
</span><a href="#local-6989586621679890979"><span class="hs-identifier hs-var hs-var">trivialIndex</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Abstract.SingleEraBlock.html#EraIndex"><span class="hs-identifier hs-type">EraIndex</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Z</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">K</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-123"></span></pre></body></html>