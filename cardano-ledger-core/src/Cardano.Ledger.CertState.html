<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE BangPatterns #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE DataKinds #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE DeriveGeneric #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE FlexibleContexts #-}</span><span>
</span><span id="line-5"></span><span class="hs-pragma">{-# LANGUAGE GeneralizedNewtypeDeriving #-}</span><span>
</span><span id="line-6"></span><span class="hs-pragma">{-# LANGUAGE NamedFieldPuns #-}</span><span>
</span><span id="line-7"></span><span class="hs-pragma">{-# LANGUAGE OverloadedStrings #-}</span><span>
</span><span id="line-8"></span><span class="hs-pragma">{-# LANGUAGE RecordWildCards #-}</span><span>
</span><span id="line-9"></span><span class="hs-pragma">{-# LANGUAGE ScopedTypeVariables #-}</span><span>
</span><span id="line-10"></span><span class="hs-pragma">{-# LANGUAGE StandaloneDeriving #-}</span><span>
</span><span id="line-11"></span><span class="hs-pragma">{-# LANGUAGE TypeApplications #-}</span><span>
</span><span id="line-12"></span><span class="hs-pragma">{-# LANGUAGE TypeFamilies #-}</span><span>
</span><span id="line-13"></span><span class="hs-pragma">{-# LANGUAGE UndecidableInstances #-}</span><span>
</span><span id="line-14"></span><span>
</span><span id="line-15"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Cardano.Ledger.CertState</span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-16"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.CertState.html#CertState"><span class="hs-identifier">CertState</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-17"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.CertState.html#DState"><span class="hs-identifier">DState</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-18"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.CertState.html#PState"><span class="hs-identifier">PState</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-19"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.CertState.html#VState"><span class="hs-identifier">VState</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-20"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.CertState.html#InstantaneousRewards"><span class="hs-identifier">InstantaneousRewards</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-21"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.CertState.html#FutureGenDeleg"><span class="hs-identifier">FutureGenDeleg</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-22"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.BaseTypes.html#Anchor"><span class="hs-identifier">Anchor</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-23"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.DRep.html#DRepState"><span class="hs-identifier">DRepState</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-24"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.DRep.html#DRep"><span class="hs-identifier">DRep</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-25"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.CertState.html#CommitteeState"><span class="hs-identifier">CommitteeState</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-26"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.BaseTypes.html#AnchorData"><span class="hs-identifier">AnchorData</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-27"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.CertState.html#lookupDepositDState"><span class="hs-identifier">lookupDepositDState</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-28"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.CertState.html#lookupRewardDState"><span class="hs-identifier">lookupRewardDState</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-29"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.CertState.html#rewards"><span class="hs-identifier">rewards</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-30"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.CertState.html#delegations"><span class="hs-identifier">delegations</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-31"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.CertState.html#ptrsMap"><span class="hs-identifier">ptrsMap</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-32"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.CertState.html#payPoolDeposit"><span class="hs-identifier">payPoolDeposit</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-33"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.CertState.html#refundPoolDeposit"><span class="hs-identifier">refundPoolDeposit</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-34"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.CertState.html#obligationCertState"><span class="hs-identifier">obligationCertState</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-35"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.CertState.html#Obligations"><span class="hs-identifier">Obligations</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-36"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.CertState.html#sumObligation"><span class="hs-identifier">sumObligation</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-37"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.CertState.html#certsTotalDepositsTxBody"><span class="hs-identifier">certsTotalDepositsTxBody</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-38"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.CertState.html#certsTotalRefundsTxBody"><span class="hs-identifier">certsTotalRefundsTxBody</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-39"></span><span>  </span><span class="hs-comment">-- Lenses</span><span>
</span><span id="line-40"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.CertState.html#certDStateL"><span class="hs-identifier">certDStateL</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-41"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.CertState.html#certPStateL"><span class="hs-identifier">certPStateL</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-42"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.CertState.html#certVStateL"><span class="hs-identifier">certVStateL</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-43"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.CertState.html#dsUnifiedL"><span class="hs-identifier">dsUnifiedL</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-44"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.CertState.html#dsGenDelegsL"><span class="hs-identifier">dsGenDelegsL</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-45"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.CertState.html#dsIRewardsL"><span class="hs-identifier">dsIRewardsL</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-46"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.CertState.html#dsFutureGenDelegsL"><span class="hs-identifier">dsFutureGenDelegsL</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-47"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.CertState.html#psStakePoolParamsL"><span class="hs-identifier">psStakePoolParamsL</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-48"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.CertState.html#psFutureStakePoolParamsL"><span class="hs-identifier">psFutureStakePoolParamsL</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-49"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.CertState.html#psRetiringL"><span class="hs-identifier">psRetiringL</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-50"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.CertState.html#psDepositsL"><span class="hs-identifier">psDepositsL</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-51"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.CertState.html#vsDRepsL"><span class="hs-identifier">vsDRepsL</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-52"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.CertState.html#vsCommitteeStateL"><span class="hs-identifier">vsCommitteeStateL</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-53"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.CertState.html#vsNumDormantEpochsL"><span class="hs-identifier">vsNumDormantEpochsL</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-54"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.CertState.html#csCommitteeCredsL"><span class="hs-identifier">csCommitteeCredsL</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-55"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.CertState.html#lookupDepositVState"><span class="hs-identifier">lookupDepositVState</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-56"></span><span class="hs-special">)</span><span>
</span><span id="line-57"></span><span class="hs-keyword">where</span><span>
</span><span id="line-58"></span><span>
</span><span id="line-59"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Cardano.Ledger.BaseTypes.html"><span class="hs-identifier">Cardano.Ledger.BaseTypes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.BaseTypes.html#Anchor"><span class="hs-identifier">Anchor</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Ledger.BaseTypes.html#AnchorData"><span class="hs-identifier">AnchorData</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-60"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Cardano.Ledger.Binary</span></span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-61"></span><span>  </span><span class="annot"><span class="hs-identifier">DecCBOR</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-62"></span><span>  </span><span class="annot"><span class="hs-identifier">DecShareCBOR</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-63"></span><span>  </span><span class="annot"><span class="hs-identifier">EncCBOR</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-64"></span><span>  </span><span class="annot"><span class="hs-identifier">Interns</span></span><span class="hs-special">,</span><span>
</span><span id="line-65"></span><span>  </span><span class="annot"><span class="hs-identifier">ToCBOR</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-66"></span><span>  </span><span class="annot"><span class="hs-identifier">decNoShareCBOR</span></span><span class="hs-special">,</span><span>
</span><span id="line-67"></span><span>  </span><span class="annot"><span class="hs-identifier">decSharePlusCBOR</span></span><span class="hs-special">,</span><span>
</span><span id="line-68"></span><span>  </span><span class="annot"><span class="hs-identifier">decSharePlusLensCBOR</span></span><span class="hs-special">,</span><span>
</span><span id="line-69"></span><span>  </span><span class="annot"><span class="hs-identifier">decodeRecordNamed</span></span><span class="hs-special">,</span><span>
</span><span id="line-70"></span><span>  </span><span class="annot"><span class="hs-identifier">decodeRecordNamedT</span></span><span class="hs-special">,</span><span>
</span><span id="line-71"></span><span>  </span><span class="annot"><span class="hs-identifier">encodeListLen</span></span><span class="hs-special">,</span><span>
</span><span id="line-72"></span><span>  </span><span class="annot"><span class="hs-identifier">toMemptyLens</span></span><span class="hs-special">,</span><span>
</span><span id="line-73"></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-74"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Cardano.Ledger.Binary.Coders</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Decode</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">Encode</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">decode</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">encode</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-operator">(!&gt;)</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-operator">(&lt;!)</span></span><span class="hs-special">)</span><span>
</span><span id="line-75"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Cardano.Ledger.Coin.html"><span class="hs-identifier">Cardano.Ledger.Coin</span></a></span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-76"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.Coin.html#Coin"><span class="hs-identifier">Coin</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-77"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.Coin.html#DeltaCoin"><span class="hs-identifier">DeltaCoin</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-78"></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-79"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Cardano.Ledger.Compactible.html"><span class="hs-identifier">Cardano.Ledger.Compactible</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Compactible.html#fromCompact"><span class="hs-identifier">fromCompact</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-80"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Cardano.Ledger.Core.html"><span class="hs-identifier">Cardano.Ledger.Core</span></a></span><span>
</span><span id="line-81"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Cardano.Ledger.Credential.html"><span class="hs-identifier">Cardano.Ledger.Credential</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Credential.html#Credential"><span class="hs-identifier">Credential</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Ledger.Credential.html#Ptr"><span class="hs-identifier">Ptr</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Ledger.Credential.html#StakeCredential"><span class="hs-identifier">StakeCredential</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-82"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Cardano.Ledger.Crypto.html"><span class="hs-identifier">Cardano.Ledger.Crypto</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Crypto.html#Crypto"><span class="hs-identifier">Crypto</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-83"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Cardano.Ledger.DRep.html"><span class="hs-identifier">Cardano.Ledger.DRep</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.DRep.html#DRep"><span class="hs-identifier">DRep</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Ledger.DRep.html#DRepState"><span class="hs-identifier">DRepState</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-84"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Cardano.Ledger.Keys.html"><span class="hs-identifier">Cardano.Ledger.Keys</span></a></span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-85"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.Keys.Internal.html#GenDelegPair"><span class="hs-identifier">GenDelegPair</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-86"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.Keys.Internal.html#GenDelegs"><span class="hs-identifier">GenDelegs</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-87"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.Keys.Internal.html#KeyHash"><span class="hs-identifier">KeyHash</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-88"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.Keys.Internal.html#KeyRole"><span class="hs-identifier">KeyRole</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-89"></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-90"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Cardano.Ledger.PoolParams.html"><span class="hs-identifier">Cardano.Ledger.PoolParams</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.PoolParams.html#PoolParams"><span class="hs-identifier">PoolParams</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-91"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Cardano.Ledger.Slot.html"><span class="hs-identifier">Cardano.Ledger.Slot</span></a></span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-92"></span><span>  </span><span class="annot"><span class="hs-identifier">EpochNo</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-93"></span><span>  </span><span class="annot"><span class="hs-identifier">SlotNo</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-94"></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-95"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Cardano.Ledger.UMap.html"><span class="hs-identifier">Cardano.Ledger.UMap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.UMap.html#RDPair"><span class="hs-identifier">RDPair</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Ledger.UMap.html#UMap"><span class="hs-identifier">UMap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.UMap.html#UMap"><span class="hs-identifier">UMap</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Ledger.UMap.html#UView"><span class="hs-identifier">UView</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.UMap.html#RewDepUView"><span class="hs-identifier">RewDepUView</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Ledger.UMap.html#SPoolUView"><span class="hs-identifier">SPoolUView</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-96"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Cardano.Ledger.UMap.html"><span class="hs-identifier">Cardano.Ledger.UMap</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">UM</span></span><span>
</span><span id="line-97"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/deepseq-1.4.8.1/src/Control.DeepSeq.html"><span class="hs-identifier">Control.DeepSeq</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/deepseq-1.4.8.1/src/Control.DeepSeq.html#NFData"><span class="hs-identifier">NFData</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-98"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/mtl-2.3.1/src/Control.Monad.Trans.html"><span class="hs-identifier">Control.Monad.Trans</span></a></span><span>
</span><span id="line-99"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Aeson</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">KeyValue</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">ToJSON</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">object</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">pairs</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-operator">(.=)</span></span><span class="hs-special">)</span><span>
</span><span id="line-100"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Default.Class</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Default</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">def</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-101"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/Data.Foldable.html"><span class="hs-identifier">Data.Foldable</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/Data.Foldable.html#foldl%27"><span class="hs-identifier">foldl'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-102"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/containers-0.6.7/src/Data.Map.Strict.html"><span class="hs-identifier">Data.Map.Strict</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#Map"><span class="hs-identifier">Map</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-103"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/containers-0.6.7/src/Data.Map.Strict.html"><span class="hs-identifier">Data.Map.Strict</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Map</span></span><span>
</span><span id="line-104"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/Data.Typeable.html"><span class="hs-identifier">Data.Typeable</span></a></span><span>
</span><span id="line-105"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Generics.html"><span class="hs-identifier">GHC.Generics</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Generics.html#Generic"><span class="hs-identifier">Generic</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-106"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Lens.Micro</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Lens'</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">lens</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-operator">(^.)</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">_1</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">_2</span></span><span class="hs-special">)</span><span>
</span><span id="line-107"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">NoThunks.Class</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">NoThunks</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-108"></span><span>
</span><span id="line-109"></span><span class="hs-comment">-- ======================================</span><span>
</span><span id="line-110"></span><span>
</span><span id="line-111"></span><span class="hs-keyword">data</span><span> </span><span id="FutureGenDeleg"><span class="annot"><a href="Cardano.Ledger.CertState.html#FutureGenDeleg"><span class="hs-identifier hs-var">FutureGenDeleg</span></a></span></span><span> </span><span id="local-6989586621679502318"><span class="annot"><a href="#local-6989586621679502318"><span class="hs-identifier hs-type">c</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="FutureGenDeleg"><span class="annot"><a href="Cardano.Ledger.CertState.html#FutureGenDeleg"><span class="hs-identifier hs-var">FutureGenDeleg</span></a></span></span><span>
</span><span id="line-112"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="fGenDelegSlot"><span class="annot"><span class="annottext">forall c. FutureGenDeleg c -&gt; SlotNo
</span><a href="Cardano.Ledger.CertState.html#fGenDelegSlot"><span class="hs-identifier hs-var hs-var">fGenDelegSlot</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><span class="hs-identifier hs-type">SlotNo</span></span><span>
</span><span id="line-113"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="fGenDelegGenKeyHash"><span class="annot"><span class="annottext">forall c. FutureGenDeleg c -&gt; KeyHash 'Genesis c
</span><a href="Cardano.Ledger.CertState.html#fGenDelegGenKeyHash"><span class="hs-identifier hs-var hs-var">fGenDelegGenKeyHash</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Keys.Internal.html#KeyHash"><span class="hs-identifier hs-type">KeyHash</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Cardano.Ledger.Keys.Internal.html#Genesis"><span class="hs-identifier hs-type">Genesis</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502318"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-114"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-115"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679503076"><span id="local-6989586621679503084"><span id="local-6989586621679503088"><span class="annot"><span class="annottext">Int -&gt; FutureGenDeleg c -&gt; ShowS
[FutureGenDeleg c] -&gt; ShowS
FutureGenDeleg c -&gt; String
(Int -&gt; FutureGenDeleg c -&gt; ShowS)
-&gt; (FutureGenDeleg c -&gt; String)
-&gt; ([FutureGenDeleg c] -&gt; ShowS)
-&gt; Show (FutureGenDeleg c)
forall c. Int -&gt; FutureGenDeleg c -&gt; ShowS
forall c. [FutureGenDeleg c] -&gt; ShowS
forall c. FutureGenDeleg c -&gt; String
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: forall c. Int -&gt; FutureGenDeleg c -&gt; ShowS
showsPrec :: Int -&gt; FutureGenDeleg c -&gt; ShowS
$cshow :: forall c. FutureGenDeleg c -&gt; String
show :: FutureGenDeleg c -&gt; String
$cshowList :: forall c. [FutureGenDeleg c] -&gt; ShowS
showList :: [FutureGenDeleg c] -&gt; ShowS
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Show.html#Show"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679503092"><span id="local-6989586621679503098"><span class="annot"><span class="annottext">FutureGenDeleg c -&gt; FutureGenDeleg c -&gt; Bool
(FutureGenDeleg c -&gt; FutureGenDeleg c -&gt; Bool)
-&gt; (FutureGenDeleg c -&gt; FutureGenDeleg c -&gt; Bool)
-&gt; Eq (FutureGenDeleg c)
forall c. FutureGenDeleg c -&gt; FutureGenDeleg c -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: forall c. FutureGenDeleg c -&gt; FutureGenDeleg c -&gt; Bool
== :: FutureGenDeleg c -&gt; FutureGenDeleg c -&gt; Bool
$c/= :: forall c. FutureGenDeleg c -&gt; FutureGenDeleg c -&gt; Bool
/= :: FutureGenDeleg c -&gt; FutureGenDeleg c -&gt; Bool
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/ghc-prim-0.10.0/src/GHC.Classes.html#Eq"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679503105"><span id="local-6989586621679503111"><span id="local-6989586621679503115"><span id="local-6989586621679503119"><span id="local-6989586621679503122"><span id="local-6989586621679503125"><span id="local-6989586621679503128"><span class="annot"><span class="annottext">Eq (FutureGenDeleg c)
Eq (FutureGenDeleg c) =&gt;
(FutureGenDeleg c -&gt; FutureGenDeleg c -&gt; Ordering)
-&gt; (FutureGenDeleg c -&gt; FutureGenDeleg c -&gt; Bool)
-&gt; (FutureGenDeleg c -&gt; FutureGenDeleg c -&gt; Bool)
-&gt; (FutureGenDeleg c -&gt; FutureGenDeleg c -&gt; Bool)
-&gt; (FutureGenDeleg c -&gt; FutureGenDeleg c -&gt; Bool)
-&gt; (FutureGenDeleg c -&gt; FutureGenDeleg c -&gt; FutureGenDeleg c)
-&gt; (FutureGenDeleg c -&gt; FutureGenDeleg c -&gt; FutureGenDeleg c)
-&gt; Ord (FutureGenDeleg c)
FutureGenDeleg c -&gt; FutureGenDeleg c -&gt; Bool
FutureGenDeleg c -&gt; FutureGenDeleg c -&gt; Ordering
FutureGenDeleg c -&gt; FutureGenDeleg c -&gt; FutureGenDeleg c
forall c. Eq (FutureGenDeleg c)
forall a.
Eq a =&gt;
(a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
forall c. FutureGenDeleg c -&gt; FutureGenDeleg c -&gt; Bool
forall c. FutureGenDeleg c -&gt; FutureGenDeleg c -&gt; Ordering
forall c. FutureGenDeleg c -&gt; FutureGenDeleg c -&gt; FutureGenDeleg c
$ccompare :: forall c. FutureGenDeleg c -&gt; FutureGenDeleg c -&gt; Ordering
compare :: FutureGenDeleg c -&gt; FutureGenDeleg c -&gt; Ordering
$c&lt; :: forall c. FutureGenDeleg c -&gt; FutureGenDeleg c -&gt; Bool
&lt; :: FutureGenDeleg c -&gt; FutureGenDeleg c -&gt; Bool
$c&lt;= :: forall c. FutureGenDeleg c -&gt; FutureGenDeleg c -&gt; Bool
&lt;= :: FutureGenDeleg c -&gt; FutureGenDeleg c -&gt; Bool
$c&gt; :: forall c. FutureGenDeleg c -&gt; FutureGenDeleg c -&gt; Bool
&gt; :: FutureGenDeleg c -&gt; FutureGenDeleg c -&gt; Bool
$c&gt;= :: forall c. FutureGenDeleg c -&gt; FutureGenDeleg c -&gt; Bool
&gt;= :: FutureGenDeleg c -&gt; FutureGenDeleg c -&gt; Bool
$cmax :: forall c. FutureGenDeleg c -&gt; FutureGenDeleg c -&gt; FutureGenDeleg c
max :: FutureGenDeleg c -&gt; FutureGenDeleg c -&gt; FutureGenDeleg c
$cmin :: forall c. FutureGenDeleg c -&gt; FutureGenDeleg c -&gt; FutureGenDeleg c
min :: FutureGenDeleg c -&gt; FutureGenDeleg c -&gt; FutureGenDeleg c
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/ghc-prim-0.10.0/src/GHC.Classes.html#Ord"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></a></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679503132"><span id="local-6989586621679503134"><span class="annot"><span class="annottext">(forall x. FutureGenDeleg c -&gt; Rep (FutureGenDeleg c) x)
-&gt; (forall x. Rep (FutureGenDeleg c) x -&gt; FutureGenDeleg c)
-&gt; Generic (FutureGenDeleg c)
forall x. Rep (FutureGenDeleg c) x -&gt; FutureGenDeleg c
forall x. FutureGenDeleg c -&gt; Rep (FutureGenDeleg c) x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
forall c x. Rep (FutureGenDeleg c) x -&gt; FutureGenDeleg c
forall c x. FutureGenDeleg c -&gt; Rep (FutureGenDeleg c) x
$cfrom :: forall c x. FutureGenDeleg c -&gt; Rep (FutureGenDeleg c) x
from :: forall x. FutureGenDeleg c -&gt; Rep (FutureGenDeleg c) x
$cto :: forall c x. Rep (FutureGenDeleg c) x -&gt; FutureGenDeleg c
to :: forall x. Rep (FutureGenDeleg c) x -&gt; FutureGenDeleg c
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Generics.html#Generic"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Generic</span></a></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-116"></span><span>
</span><span id="line-117"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679502389"><span id="local-6989586621679503138"><span id="local-6989586621679503142"><span id="local-6989586621679503148"><span class="annot"><span class="hs-identifier hs-type">NoThunks</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#FutureGenDeleg"><span class="hs-identifier hs-type">FutureGenDeleg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502389"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span></span></span></span></span><span>
</span><span id="line-118"></span><span>
</span><span id="line-119"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679502407"><span id="local-6989586621679503185"><span class="annot"><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/deepseq-1.4.8.1/src/Control.DeepSeq.html#NFData"><span class="hs-identifier hs-type">NFData</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#FutureGenDeleg"><span class="hs-identifier hs-type">FutureGenDeleg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502407"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-120"></span><span>
</span><span id="line-121"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679502415"><span id="local-6989586621679503212"><span id="local-6989586621679503216"><span class="annot"><a href="Cardano.Ledger.Crypto.html#Crypto"><span class="hs-identifier hs-type">Crypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502415"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">EncCBOR</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#FutureGenDeleg"><span class="hs-identifier hs-type">FutureGenDeleg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502415"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-122"></span><span>  </span><span id="local-6989586621679503228"><span class="annot"><span class="annottext">encCBOR :: FutureGenDeleg c -&gt; Encoding
</span><a href="#local-6989586621679503228"><span class="hs-identifier hs-var hs-var hs-var hs-var">encCBOR</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#FutureGenDeleg"><span class="hs-identifier hs-type">FutureGenDeleg</span></a></span><span> </span><span id="local-6989586621679503230"><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621679503230"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621679503231"><span class="annot"><span class="annottext">KeyHash 'Genesis c
</span><a href="#local-6989586621679503231"><span class="hs-identifier hs-var">b</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-123"></span><span>    </span><span class="annot"><span class="annottext">Word -&gt; Encoding
</span><span class="hs-identifier hs-var">encodeListLen</span></span><span> </span><span class="annot"><span class="annottext">Word
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">Encoding -&gt; Encoding -&gt; Encoding
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SlotNo -&gt; Encoding
forall a. EncCBOR a =&gt; a -&gt; Encoding
</span><span class="hs-identifier hs-var">encCBOR</span></span><span> </span><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621679503230"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">Encoding -&gt; Encoding -&gt; Encoding
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">KeyHash 'Genesis c -&gt; Encoding
forall a. EncCBOR a =&gt; a -&gt; Encoding
</span><span class="hs-identifier hs-var">encCBOR</span></span><span> </span><span class="annot"><span class="annottext">KeyHash 'Genesis c
</span><a href="#local-6989586621679503231"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-124"></span><span>
</span><span id="line-125"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679502426"><span id="local-6989586621679503239"><span id="local-6989586621679503243"><span class="annot"><a href="Cardano.Ledger.Crypto.html#Crypto"><span class="hs-identifier hs-type">Crypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502426"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">DecCBOR</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#FutureGenDeleg"><span class="hs-identifier hs-type">FutureGenDeleg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502426"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-126"></span><span>  </span><span id="local-6989586621679503259"><span class="annot"><span class="annottext">decCBOR :: forall s. Decoder s (FutureGenDeleg c)
</span><a href="#local-6989586621679503259"><span class="hs-identifier hs-var hs-var hs-var hs-var">decCBOR</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-127"></span><span>    </span><span class="annot"><span class="annottext">Text
-&gt; (FutureGenDeleg c -&gt; Int)
-&gt; Decoder s (FutureGenDeleg c)
-&gt; Decoder s (FutureGenDeleg c)
forall a s. Text -&gt; (a -&gt; Int) -&gt; Decoder s a -&gt; Decoder s a
</span><span class="hs-identifier hs-var">decodeRecordNamed</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;FutureGenDeleg&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; FutureGenDeleg c -&gt; Int
forall a b. a -&gt; b -&gt; a
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#const"><span class="hs-identifier hs-var">const</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Decoder s (FutureGenDeleg c) -&gt; Decoder s (FutureGenDeleg c))
-&gt; Decoder s (FutureGenDeleg c) -&gt; Decoder s (FutureGenDeleg c)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-128"></span><span>      </span><span class="annot"><span class="annottext">SlotNo -&gt; KeyHash 'Genesis c -&gt; FutureGenDeleg c
forall c. SlotNo -&gt; KeyHash 'Genesis c -&gt; FutureGenDeleg c
</span><a href="Cardano.Ledger.CertState.html#FutureGenDeleg"><span class="hs-identifier hs-var">FutureGenDeleg</span></a></span><span> </span><span class="annot"><span class="annottext">(SlotNo -&gt; KeyHash 'Genesis c -&gt; FutureGenDeleg c)
-&gt; Decoder s SlotNo
-&gt; Decoder s (KeyHash 'Genesis c -&gt; FutureGenDeleg c)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Decoder s SlotNo
forall s. Decoder s SlotNo
forall a s. DecCBOR a =&gt; Decoder s a
</span><span class="hs-identifier hs-var">decCBOR</span></span><span> </span><span class="annot"><span class="annottext">Decoder s (KeyHash 'Genesis c -&gt; FutureGenDeleg c)
-&gt; Decoder s (KeyHash 'Genesis c) -&gt; Decoder s (FutureGenDeleg c)
forall a b. Decoder s (a -&gt; b) -&gt; Decoder s a -&gt; Decoder s b
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%3C%2A%3E"><span class="hs-operator hs-var">&lt;*&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Decoder s (KeyHash 'Genesis c)
forall s. Decoder s (KeyHash 'Genesis c)
forall a s. DecCBOR a =&gt; Decoder s a
</span><span class="hs-identifier hs-var">decCBOR</span></span><span>
</span><span id="line-129"></span><span>
</span><span id="line-130"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679502450"><span id="local-6989586621679503266"><span id="local-6989586621679503270"><span id="local-6989586621679503273"><span id="local-6989586621679503276"><span class="annot"><a href="Cardano.Ledger.Crypto.html#Crypto"><span class="hs-identifier hs-type">Crypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502450"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#FutureGenDeleg"><span class="hs-identifier hs-type">FutureGenDeleg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502450"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-131"></span><span>  </span><span id="local-6989586621679503291"><span class="annot"><span class="annottext">toJSON :: FutureGenDeleg c -&gt; Value
</span><a href="#local-6989586621679503291"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span id="local-6989586621679503293"><span class="annot"><span class="annottext">FutureGenDeleg c
</span><a href="#local-6989586621679503293"><span class="hs-identifier hs-var">fGenDeleg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-132"></span><span>    </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">object</span></span><span>
</span><span id="line-133"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;fGenDelegSlot&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; SlotNo -&gt; Pair
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">FutureGenDeleg c -&gt; SlotNo
forall c. FutureGenDeleg c -&gt; SlotNo
</span><a href="Cardano.Ledger.CertState.html#fGenDelegSlot"><span class="hs-identifier hs-var">fGenDelegSlot</span></a></span><span> </span><span class="annot"><span class="annottext">FutureGenDeleg c
</span><a href="#local-6989586621679503293"><span class="hs-identifier hs-var">fGenDeleg</span></a></span><span>
</span><span id="line-134"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;fGenDelegGenKeyHash&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; KeyHash 'Genesis c -&gt; Pair
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">FutureGenDeleg c -&gt; KeyHash 'Genesis c
forall c. FutureGenDeleg c -&gt; KeyHash 'Genesis c
</span><a href="Cardano.Ledger.CertState.html#fGenDelegGenKeyHash"><span class="hs-identifier hs-var">fGenDelegGenKeyHash</span></a></span><span> </span><span class="annot"><span class="annottext">FutureGenDeleg c
</span><a href="#local-6989586621679503293"><span class="hs-identifier hs-var">fGenDeleg</span></a></span><span>
</span><span id="line-135"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-136"></span><span>
</span><span id="line-137"></span><span class="hs-comment">-- | InstantaneousRewards captures the pending changes to the ledger</span><span>
</span><span id="line-138"></span><span class="hs-comment">-- state caused by MIR certificates. It consists of two mappings,</span><span>
</span><span id="line-139"></span><span class="hs-comment">-- the rewards which will be paid out from the reserves and the rewards</span><span>
</span><span id="line-140"></span><span class="hs-comment">-- which will be paid out from the treasury. It also consists of</span><span>
</span><span id="line-141"></span><span class="hs-comment">-- two coin values which represent the transfer of coins from</span><span>
</span><span id="line-142"></span><span class="hs-comment">-- one pot to the other pot.</span><span>
</span><span id="line-143"></span><span class="hs-comment">-- NOTE that the following property should always hold:</span><span>
</span><span id="line-144"></span><span class="hs-comment">--   deltaReserves + deltaTreasury = 0</span><span>
</span><span id="line-145"></span><span class="hs-keyword">data</span><span> </span><span id="InstantaneousRewards"><span class="annot"><a href="Cardano.Ledger.CertState.html#InstantaneousRewards"><span class="hs-identifier hs-var">InstantaneousRewards</span></a></span></span><span> </span><span id="local-6989586621679502464"><span class="annot"><a href="#local-6989586621679502464"><span class="hs-identifier hs-type">c</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="InstantaneousRewards"><span class="annot"><a href="Cardano.Ledger.CertState.html#InstantaneousRewards"><span class="hs-identifier hs-var">InstantaneousRewards</span></a></span></span><span>
</span><span id="line-146"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="iRReserves"><span class="annot"><span class="annottext">forall c.
InstantaneousRewards c -&gt; Map (Credential 'Staking c) Coin
</span><a href="Cardano.Ledger.CertState.html#iRReserves"><span class="hs-identifier hs-var hs-var">iRReserves</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#Map"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Credential.html#Credential"><span class="hs-identifier hs-type">Credential</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Cardano.Ledger.Keys.Internal.html#Staking"><span class="hs-identifier hs-type">Staking</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502464"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="Cardano.Ledger.Coin.html#Coin"><span class="hs-identifier hs-type">Coin</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-147"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="iRTreasury"><span class="annot"><span class="annottext">forall c.
InstantaneousRewards c -&gt; Map (Credential 'Staking c) Coin
</span><a href="Cardano.Ledger.CertState.html#iRTreasury"><span class="hs-identifier hs-var hs-var">iRTreasury</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#Map"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Credential.html#Credential"><span class="hs-identifier hs-type">Credential</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Cardano.Ledger.Keys.Internal.html#Staking"><span class="hs-identifier hs-type">Staking</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502464"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="Cardano.Ledger.Coin.html#Coin"><span class="hs-identifier hs-type">Coin</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-148"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="deltaReserves"><span class="annot"><span class="annottext">forall c. InstantaneousRewards c -&gt; DeltaCoin
</span><a href="Cardano.Ledger.CertState.html#deltaReserves"><span class="hs-identifier hs-var hs-var">deltaReserves</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="Cardano.Ledger.Coin.html#DeltaCoin"><span class="hs-identifier hs-type">DeltaCoin</span></a></span><span>
</span><span id="line-149"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="deltaTreasury"><span class="annot"><span class="annottext">forall c. InstantaneousRewards c -&gt; DeltaCoin
</span><a href="Cardano.Ledger.CertState.html#deltaTreasury"><span class="hs-identifier hs-var hs-var">deltaTreasury</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="Cardano.Ledger.Coin.html#DeltaCoin"><span class="hs-identifier hs-type">DeltaCoin</span></a></span><span>
</span><span id="line-150"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-151"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679503300"><span id="local-6989586621679503311"><span id="local-6989586621679503315"><span class="annot"><span class="annottext">Int -&gt; InstantaneousRewards c -&gt; ShowS
[InstantaneousRewards c] -&gt; ShowS
InstantaneousRewards c -&gt; String
(Int -&gt; InstantaneousRewards c -&gt; ShowS)
-&gt; (InstantaneousRewards c -&gt; String)
-&gt; ([InstantaneousRewards c] -&gt; ShowS)
-&gt; Show (InstantaneousRewards c)
forall c. Int -&gt; InstantaneousRewards c -&gt; ShowS
forall c. [InstantaneousRewards c] -&gt; ShowS
forall c. InstantaneousRewards c -&gt; String
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: forall c. Int -&gt; InstantaneousRewards c -&gt; ShowS
showsPrec :: Int -&gt; InstantaneousRewards c -&gt; ShowS
$cshow :: forall c. InstantaneousRewards c -&gt; String
show :: InstantaneousRewards c -&gt; String
$cshowList :: forall c. [InstantaneousRewards c] -&gt; ShowS
showList :: [InstantaneousRewards c] -&gt; ShowS
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Show.html#Show"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679503320"><span id="local-6989586621679503330"><span class="annot"><span class="annottext">InstantaneousRewards c -&gt; InstantaneousRewards c -&gt; Bool
(InstantaneousRewards c -&gt; InstantaneousRewards c -&gt; Bool)
-&gt; (InstantaneousRewards c -&gt; InstantaneousRewards c -&gt; Bool)
-&gt; Eq (InstantaneousRewards c)
forall c. InstantaneousRewards c -&gt; InstantaneousRewards c -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: forall c. InstantaneousRewards c -&gt; InstantaneousRewards c -&gt; Bool
== :: InstantaneousRewards c -&gt; InstantaneousRewards c -&gt; Bool
$c/= :: forall c. InstantaneousRewards c -&gt; InstantaneousRewards c -&gt; Bool
/= :: InstantaneousRewards c -&gt; InstantaneousRewards c -&gt; Bool
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/ghc-prim-0.10.0/src/GHC.Classes.html#Eq"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679503336"><span id="local-6989586621679503338"><span class="annot"><span class="annottext">(forall x.
 InstantaneousRewards c -&gt; Rep (InstantaneousRewards c) x)
-&gt; (forall x.
    Rep (InstantaneousRewards c) x -&gt; InstantaneousRewards c)
-&gt; Generic (InstantaneousRewards c)
forall x. Rep (InstantaneousRewards c) x -&gt; InstantaneousRewards c
forall x. InstantaneousRewards c -&gt; Rep (InstantaneousRewards c) x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
forall c x.
Rep (InstantaneousRewards c) x -&gt; InstantaneousRewards c
forall c x.
InstantaneousRewards c -&gt; Rep (InstantaneousRewards c) x
$cfrom :: forall c x.
InstantaneousRewards c -&gt; Rep (InstantaneousRewards c) x
from :: forall x. InstantaneousRewards c -&gt; Rep (InstantaneousRewards c) x
$cto :: forall c x.
Rep (InstantaneousRewards c) x -&gt; InstantaneousRewards c
to :: forall x. Rep (InstantaneousRewards c) x -&gt; InstantaneousRewards c
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Generics.html#Generic"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Generic</span></a></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-152"></span><span>
</span><span id="line-153"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679502493"><span id="local-6989586621679503341"><span id="local-6989586621679503345"><span id="local-6989586621679503351"><span class="annot"><span class="hs-identifier hs-type">NoThunks</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#InstantaneousRewards"><span class="hs-identifier hs-type">InstantaneousRewards</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502493"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span></span></span></span></span><span>
</span><span id="line-154"></span><span>
</span><span id="line-155"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679502499"><span id="local-6989586621679503390"><span class="annot"><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/deepseq-1.4.8.1/src/Control.DeepSeq.html#NFData"><span class="hs-identifier hs-type">NFData</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#InstantaneousRewards"><span class="hs-identifier hs-type">InstantaneousRewards</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502499"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-156"></span><span>
</span><span id="line-157"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679502501"><span id="local-6989586621679503418"><span id="local-6989586621679503422"><span id="local-6989586621679503425"><span class="annot"><a href="Cardano.Ledger.Crypto.html#Crypto"><span class="hs-identifier hs-type">Crypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502501"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#InstantaneousRewards"><span class="hs-identifier hs-type">InstantaneousRewards</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502501"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-158"></span><span>  </span><span id="local-6989586621679503431"><span class="annot"><span class="annottext">toJSON :: InstantaneousRewards c -&gt; Value
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">object</span></span><span> </span><span class="annot"><span class="annottext">([Pair] -&gt; Value)
-&gt; (InstantaneousRewards c -&gt; [Pair])
-&gt; InstantaneousRewards c
-&gt; Value
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">InstantaneousRewards c -&gt; [Pair]
forall e a c.
(KeyValue e a, Crypto c) =&gt;
InstantaneousRewards c -&gt; [a]
</span><a href="Cardano.Ledger.CertState.html#toInstantaneousRewardsPair"><span class="hs-identifier hs-var">toInstantaneousRewardsPair</span></a></span><span>
</span><span id="line-159"></span><span>  </span><span id="local-6989586621679503439"><span class="annot"><span class="annottext">toEncoding :: InstantaneousRewards c -&gt; Encoding
</span><a href="#local-6989586621679503439"><span class="hs-identifier hs-var hs-var hs-var hs-var">toEncoding</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Series -&gt; Encoding
</span><span class="hs-identifier hs-var">pairs</span></span><span> </span><span class="annot"><span class="annottext">(Series -&gt; Encoding)
-&gt; (InstantaneousRewards c -&gt; Series)
-&gt; InstantaneousRewards c
-&gt; Encoding
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">[Series] -&gt; Series
forall a. Monoid a =&gt; [a] -&gt; a
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#mconcat"><span class="hs-identifier hs-var">mconcat</span></a></span><span> </span><span class="annot"><span class="annottext">([Series] -&gt; Series)
-&gt; (InstantaneousRewards c -&gt; [Series])
-&gt; InstantaneousRewards c
-&gt; Series
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">InstantaneousRewards c -&gt; [Series]
forall e a c.
(KeyValue e a, Crypto c) =&gt;
InstantaneousRewards c -&gt; [a]
</span><a href="Cardano.Ledger.CertState.html#toInstantaneousRewardsPair"><span class="hs-identifier hs-var">toInstantaneousRewardsPair</span></a></span><span>
</span><span id="line-160"></span><span>
</span><span id="line-161"></span><span id="local-6989586621679502505"><span id="local-6989586621679502506"><span id="local-6989586621679502507"><span class="annot"><a href="Cardano.Ledger.CertState.html#toInstantaneousRewardsPair"><span class="hs-identifier hs-type">toInstantaneousRewardsPair</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">KeyValue</span></span><span> </span><span class="annot"><a href="#local-6989586621679502505"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502506"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Ledger.Crypto.html#Crypto"><span class="hs-identifier hs-type">Crypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502507"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Cardano.Ledger.CertState.html#InstantaneousRewards"><span class="hs-identifier hs-type">InstantaneousRewards</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502507"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679502506"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span></span></span></span><span>
</span><span id="line-162"></span><span id="toInstantaneousRewardsPair"><span class="annot"><span class="annottext">toInstantaneousRewardsPair :: forall e a c.
(KeyValue e a, Crypto c) =&gt;
InstantaneousRewards c -&gt; [a]
</span><a href="Cardano.Ledger.CertState.html#toInstantaneousRewardsPair"><span class="hs-identifier hs-var hs-var">toInstantaneousRewardsPair</span></a></span></span><span> </span><span class="annot"><a href="Cardano.Ledger.CertState.html#InstantaneousRewards"><span class="hs-identifier hs-type">InstantaneousRewards</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621679503461"><span id="local-6989586621679503462"><span id="local-6989586621679503463"><span id="local-6989586621679503464"><span class="annot"><span class="annottext">Map (Credential 'Staking c) Coin
DeltaCoin
iRReserves :: forall c.
InstantaneousRewards c -&gt; Map (Credential 'Staking c) Coin
iRTreasury :: forall c.
InstantaneousRewards c -&gt; Map (Credential 'Staking c) Coin
deltaReserves :: forall c. InstantaneousRewards c -&gt; DeltaCoin
deltaTreasury :: forall c. InstantaneousRewards c -&gt; DeltaCoin
iRReserves :: Map (Credential 'Staking c) Coin
iRTreasury :: Map (Credential 'Staking c) Coin
deltaReserves :: DeltaCoin
deltaTreasury :: DeltaCoin
</span><a href="Cardano.Ledger.CertState.html#iRReserves"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-163"></span><span>  </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;iRReserves&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Map (Credential 'Staking c) Coin -&gt; a
forall v. ToJSON v =&gt; Key -&gt; v -&gt; a
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">Map (Credential 'Staking c) Coin
</span><a href="#local-6989586621679503461"><span class="hs-identifier hs-var">iRReserves</span></a></span><span>
</span><span id="line-164"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;iRTreasury&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Map (Credential 'Staking c) Coin -&gt; a
forall v. ToJSON v =&gt; Key -&gt; v -&gt; a
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">Map (Credential 'Staking c) Coin
</span><a href="#local-6989586621679503462"><span class="hs-identifier hs-var">iRTreasury</span></a></span><span>
</span><span id="line-165"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;deltaReserves&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; DeltaCoin -&gt; a
forall v. ToJSON v =&gt; Key -&gt; v -&gt; a
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">DeltaCoin
</span><a href="#local-6989586621679503463"><span class="hs-identifier hs-var">deltaReserves</span></a></span><span>
</span><span id="line-166"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;deltaTreasury&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; DeltaCoin -&gt; a
forall v. ToJSON v =&gt; Key -&gt; v -&gt; a
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">DeltaCoin
</span><a href="#local-6989586621679503464"><span class="hs-identifier hs-var">deltaTreasury</span></a></span><span>
</span><span id="line-167"></span><span>  </span><span class="hs-special">]</span><span>
</span><span id="line-168"></span><span>
</span><span id="line-169"></span><span class="hs-comment">-- | The state used by the DELEG rule, which roughly tracks stake</span><span>
</span><span id="line-170"></span><span class="hs-comment">-- delegation and some governance features.</span><span>
</span><span id="line-171"></span><span class="hs-keyword">data</span><span> </span><span id="DState"><span class="annot"><a href="Cardano.Ledger.CertState.html#DState"><span class="hs-identifier hs-var">DState</span></a></span></span><span> </span><span id="local-6989586621679502518"><span class="annot"><a href="#local-6989586621679502518"><span class="hs-identifier hs-type">era</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="DState"><span class="annot"><a href="Cardano.Ledger.CertState.html#DState"><span class="hs-identifier hs-var">DState</span></a></span></span><span>
</span><span id="line-172"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="dsUnified"><span class="annot"><span class="annottext">forall era. DState era -&gt; UMap (EraCrypto era)
</span><a href="Cardano.Ledger.CertState.html#dsUnified"><span class="hs-identifier hs-var hs-var">dsUnified</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.UMap.html#UMap"><span class="hs-identifier hs-type">UMap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Core.Era.html#EraCrypto"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502518"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-173"></span><span>  </span><span class="hs-comment">-- ^ Unified Reward Maps. This contains the reward map (which is the source</span><span>
</span><span id="line-174"></span><span>  </span><span class="hs-comment">-- of truth regarding the registered stake credentials, the deposit map,</span><span>
</span><span id="line-175"></span><span>  </span><span class="hs-comment">-- the delegation map, and the stake credential pointer map.</span><span>
</span><span id="line-176"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="dsFutureGenDelegs"><span class="annot"><span class="annottext">forall era.
DState era
-&gt; Map
     (FutureGenDeleg (EraCrypto era)) (GenDelegPair (EraCrypto era))
</span><a href="Cardano.Ledger.CertState.html#dsFutureGenDelegs"><span class="hs-identifier hs-var hs-var">dsFutureGenDelegs</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#Map"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#FutureGenDeleg"><span class="hs-identifier hs-type">FutureGenDeleg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Core.Era.html#EraCrypto"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502518"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Keys.Internal.html#GenDelegPair"><span class="hs-identifier hs-type">GenDelegPair</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Core.Era.html#EraCrypto"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502518"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-177"></span><span>  </span><span class="annot"><span class="hs-comment">-- ^ Future genesis key delegations</span></span><span>
</span><span id="line-178"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="dsGenDelegs"><span class="annot"><span class="annottext">forall era. DState era -&gt; GenDelegs (EraCrypto era)
</span><a href="Cardano.Ledger.CertState.html#dsGenDelegs"><span class="hs-identifier hs-var hs-var">dsGenDelegs</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Keys.Internal.html#GenDelegs"><span class="hs-identifier hs-type">GenDelegs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Core.Era.html#EraCrypto"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502518"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-179"></span><span>  </span><span class="annot"><span class="hs-comment">-- ^ Genesis key delegations</span></span><span>
</span><span id="line-180"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="dsIRewards"><span class="annot"><span class="annottext">forall era. DState era -&gt; InstantaneousRewards (EraCrypto era)
</span><a href="Cardano.Ledger.CertState.html#dsIRewards"><span class="hs-identifier hs-var hs-var">dsIRewards</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#InstantaneousRewards"><span class="hs-identifier hs-type">InstantaneousRewards</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Core.Era.html#EraCrypto"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502518"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-181"></span><span>  </span><span class="annot"><span class="hs-comment">-- ^ Instantaneous Rewards</span></span><span>
</span><span id="line-182"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-183"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679503471"><span id="local-6989586621679503482"><span id="local-6989586621679503486"><span class="annot"><span class="annottext">Int -&gt; DState era -&gt; ShowS
[DState era] -&gt; ShowS
DState era -&gt; String
(Int -&gt; DState era -&gt; ShowS)
-&gt; (DState era -&gt; String)
-&gt; ([DState era] -&gt; ShowS)
-&gt; Show (DState era)
forall era. Int -&gt; DState era -&gt; ShowS
forall era. [DState era] -&gt; ShowS
forall era. DState era -&gt; String
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: forall era. Int -&gt; DState era -&gt; ShowS
showsPrec :: Int -&gt; DState era -&gt; ShowS
$cshow :: forall era. DState era -&gt; String
show :: DState era -&gt; String
$cshowList :: forall era. [DState era] -&gt; ShowS
showList :: [DState era] -&gt; ShowS
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Show.html#Show"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679503490"><span id="local-6989586621679503500"><span class="annot"><span class="annottext">DState era -&gt; DState era -&gt; Bool
(DState era -&gt; DState era -&gt; Bool)
-&gt; (DState era -&gt; DState era -&gt; Bool) -&gt; Eq (DState era)
forall era. DState era -&gt; DState era -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: forall era. DState era -&gt; DState era -&gt; Bool
== :: DState era -&gt; DState era -&gt; Bool
$c/= :: forall era. DState era -&gt; DState era -&gt; Bool
/= :: DState era -&gt; DState era -&gt; Bool
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/ghc-prim-0.10.0/src/GHC.Classes.html#Eq"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679503505"><span id="local-6989586621679503507"><span class="annot"><span class="annottext">(forall x. DState era -&gt; Rep (DState era) x)
-&gt; (forall x. Rep (DState era) x -&gt; DState era)
-&gt; Generic (DState era)
forall x. Rep (DState era) x -&gt; DState era
forall x. DState era -&gt; Rep (DState era) x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
forall era x. Rep (DState era) x -&gt; DState era
forall era x. DState era -&gt; Rep (DState era) x
$cfrom :: forall era x. DState era -&gt; Rep (DState era) x
from :: forall x. DState era -&gt; Rep (DState era) x
$cto :: forall era x. Rep (DState era) x -&gt; DState era
to :: forall x. Rep (DState era) x -&gt; DState era
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Generics.html#Generic"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Generic</span></a></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-184"></span><span>
</span><span id="line-185"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679502544"><span id="local-6989586621679503510"><span id="local-6989586621679503514"><span id="local-6989586621679503520"><span class="annot"><span class="hs-identifier hs-type">NoThunks</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#DState"><span class="hs-identifier hs-type">DState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502544"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span></span></span><span>
</span><span id="line-186"></span><span>
</span><span id="line-187"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679502549"><span id="local-6989586621679503564"><span class="annot"><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/deepseq-1.4.8.1/src/Control.DeepSeq.html#NFData"><span class="hs-identifier hs-type">NFData</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#DState"><span class="hs-identifier hs-type">DState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502549"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-188"></span><span>
</span><span id="line-189"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679502553"><span id="local-6989586621679503599"><span id="local-6989586621679503603"><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Core.Era.html#Era"><span class="hs-identifier hs-type">Era</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502553"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">EncCBOR</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#InstantaneousRewards"><span class="hs-identifier hs-type">InstantaneousRewards</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Core.Era.html#EraCrypto"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502553"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">EncCBOR</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#DState"><span class="hs-identifier hs-type">DState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502553"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-190"></span><span>  </span><span id="local-6989586621679503623"><span class="annot"><span class="annottext">encCBOR :: DState era -&gt; Encoding
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">encCBOR</span></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#DState"><span class="hs-identifier hs-type">DState</span></a></span><span> </span><span id="local-6989586621679503624"><span class="annot"><span class="annottext">UMap (EraCrypto era)
</span><a href="#local-6989586621679503624"><span class="hs-identifier hs-var">unified</span></a></span></span><span> </span><span id="local-6989586621679503625"><span class="annot"><span class="annottext">Map (FutureGenDeleg (EraCrypto era)) (GenDelegPair (EraCrypto era))
</span><a href="#local-6989586621679503625"><span class="hs-identifier hs-var">fgs</span></a></span></span><span> </span><span id="local-6989586621679503626"><span class="annot"><span class="annottext">GenDelegs (EraCrypto era)
</span><a href="#local-6989586621679503626"><span class="hs-identifier hs-var">gs</span></a></span></span><span> </span><span id="local-6989586621679503627"><span class="annot"><span class="annottext">InstantaneousRewards (EraCrypto era)
</span><a href="#local-6989586621679503627"><span class="hs-identifier hs-var">ir</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-191"></span><span>    </span><span class="annot"><span class="annottext">Word -&gt; Encoding
</span><span class="hs-identifier hs-var">encodeListLen</span></span><span> </span><span class="annot"><span class="annottext">Word
</span><span class="hs-number">4</span></span><span>
</span><span id="line-192"></span><span>      </span><span class="annot"><span class="annottext">Encoding -&gt; Encoding -&gt; Encoding
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">UMap (EraCrypto era) -&gt; Encoding
forall a. EncCBOR a =&gt; a -&gt; Encoding
</span><span class="hs-identifier hs-var">encCBOR</span></span><span> </span><span class="annot"><span class="annottext">UMap (EraCrypto era)
</span><a href="#local-6989586621679503624"><span class="hs-identifier hs-var">unified</span></a></span><span>
</span><span id="line-193"></span><span>      </span><span class="annot"><span class="annottext">Encoding -&gt; Encoding -&gt; Encoding
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Map (FutureGenDeleg (EraCrypto era)) (GenDelegPair (EraCrypto era))
-&gt; Encoding
forall a. EncCBOR a =&gt; a -&gt; Encoding
</span><span class="hs-identifier hs-var">encCBOR</span></span><span> </span><span class="annot"><span class="annottext">Map (FutureGenDeleg (EraCrypto era)) (GenDelegPair (EraCrypto era))
</span><a href="#local-6989586621679503625"><span class="hs-identifier hs-var">fgs</span></a></span><span>
</span><span id="line-194"></span><span>      </span><span class="annot"><span class="annottext">Encoding -&gt; Encoding -&gt; Encoding
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">GenDelegs (EraCrypto era) -&gt; Encoding
forall a. EncCBOR a =&gt; a -&gt; Encoding
</span><span class="hs-identifier hs-var">encCBOR</span></span><span> </span><span class="annot"><span class="annottext">GenDelegs (EraCrypto era)
</span><a href="#local-6989586621679503626"><span class="hs-identifier hs-var">gs</span></a></span><span>
</span><span id="line-195"></span><span>      </span><span class="annot"><span class="annottext">Encoding -&gt; Encoding -&gt; Encoding
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">InstantaneousRewards (EraCrypto era) -&gt; Encoding
forall a. EncCBOR a =&gt; a -&gt; Encoding
</span><span class="hs-identifier hs-var">encCBOR</span></span><span> </span><span class="annot"><span class="annottext">InstantaneousRewards (EraCrypto era)
</span><a href="#local-6989586621679503627"><span class="hs-identifier hs-var">ir</span></a></span><span>
</span><span id="line-196"></span><span>
</span><span id="line-197"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679502571"><span id="local-6989586621679503634"><span id="local-6989586621679503638"><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Core.Era.html#Era"><span class="hs-identifier hs-type">Era</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502571"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">DecShareCBOR</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#InstantaneousRewards"><span class="hs-identifier hs-type">InstantaneousRewards</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Core.Era.html#EraCrypto"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502571"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">DecShareCBOR</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#DState"><span class="hs-identifier hs-type">DState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502571"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-198"></span><span>  </span><span class="hs-keyword">type</span><span>
</span><span id="line-199"></span><span>    </span><span id="Share"><span class="annot"><span class="hs-identifier hs-var">Share</span></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#DState"><span class="hs-identifier hs-type">DState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502571"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-200"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Interns</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Credential.html#Credential"><span class="hs-identifier hs-type">Credential</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Cardano.Ledger.Keys.Internal.html#Staking"><span class="hs-identifier hs-type">Staking</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Core.Era.html#EraCrypto"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502571"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Interns</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Keys.Internal.html#KeyHash"><span class="hs-identifier hs-type">KeyHash</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Cardano.Ledger.Keys.Internal.html#StakePool"><span class="hs-identifier hs-type">StakePool</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Core.Era.html#EraCrypto"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502571"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-201"></span><span>  </span><span id="local-6989586621679503681"><span class="annot"><span class="annottext">decSharePlusCBOR :: forall s. StateT (Share (DState era)) (Decoder s) (DState era)
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">decSharePlusCBOR</span></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-202"></span><span>    </span><span class="annot"><span class="annottext">Text
-&gt; (DState era -&gt; Int)
-&gt; StateT (Share (DState era)) (Decoder s) (DState era)
-&gt; StateT (Share (DState era)) (Decoder s) (DState era)
forall (m :: (* -&gt; *) -&gt; * -&gt; *) s a.
(MonadTrans m, Monad (m (Decoder s))) =&gt;
Text -&gt; (a -&gt; Int) -&gt; m (Decoder s) a -&gt; m (Decoder s) a
</span><span class="hs-identifier hs-var">decodeRecordNamedT</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;DState&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; DState era -&gt; Int
forall a b. a -&gt; b -&gt; a
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#const"><span class="hs-identifier hs-var">const</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">4</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(StateT (Share (DState era)) (Decoder s) (DState era)
 -&gt; StateT (Share (DState era)) (Decoder s) (DState era))
-&gt; StateT (Share (DState era)) (Decoder s) (DState era)
-&gt; StateT (Share (DState era)) (Decoder s) (DState era)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-203"></span><span>      </span><span id="local-6989586621679503682"><span class="annot"><span class="annottext">UMap (EraCrypto era)
</span><a href="#local-6989586621679503682"><span class="hs-identifier hs-var">unified</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">StateT
  (Interns (Credential 'Staking (EraCrypto era)),
   Interns (KeyHash 'StakePool (EraCrypto era)))
  (Decoder s)
  (UMap (EraCrypto era))
StateT
  (Share (UMap (EraCrypto era))) (Decoder s) (UMap (EraCrypto era))
forall s.
StateT
  (Share (UMap (EraCrypto era))) (Decoder s) (UMap (EraCrypto era))
forall a s. DecShareCBOR a =&gt; StateT (Share a) (Decoder s) a
</span><span class="hs-identifier hs-var">decSharePlusCBOR</span></span><span>
</span><span id="line-204"></span><span>      </span><span id="local-6989586621679503683"><span class="annot"><span class="annottext">Map (FutureGenDeleg (EraCrypto era)) (GenDelegPair (EraCrypto era))
</span><a href="#local-6989586621679503683"><span class="hs-identifier hs-var">fgs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Decoder
  s
  (Map
     (FutureGenDeleg (EraCrypto era)) (GenDelegPair (EraCrypto era)))
-&gt; StateT
     (Interns (Credential 'Staking (EraCrypto era)),
      Interns (KeyHash 'StakePool (EraCrypto era)))
     (Decoder s)
     (Map
        (FutureGenDeleg (EraCrypto era)) (GenDelegPair (EraCrypto era)))
forall (m :: * -&gt; *) a.
Monad m =&gt;
m a
-&gt; StateT
     (Interns (Credential 'Staking (EraCrypto era)),
      Interns (KeyHash 'StakePool (EraCrypto era)))
     m
     a
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/transformers-0.6.1.0/src/Control.Monad.Trans.Class.html#lift"><span class="hs-identifier hs-var">lift</span></a></span><span> </span><span class="annot"><span class="annottext">Decoder
  s
  (Map
     (FutureGenDeleg (EraCrypto era)) (GenDelegPair (EraCrypto era)))
forall s.
Decoder
  s
  (Map
     (FutureGenDeleg (EraCrypto era)) (GenDelegPair (EraCrypto era)))
forall a s. DecCBOR a =&gt; Decoder s a
</span><span class="hs-identifier hs-var">decCBOR</span></span><span>
</span><span id="line-205"></span><span>      </span><span id="local-6989586621679503685"><span class="annot"><span class="annottext">GenDelegs (EraCrypto era)
</span><a href="#local-6989586621679503685"><span class="hs-identifier hs-var">gs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Decoder s (GenDelegs (EraCrypto era))
-&gt; StateT
     (Interns (Credential 'Staking (EraCrypto era)),
      Interns (KeyHash 'StakePool (EraCrypto era)))
     (Decoder s)
     (GenDelegs (EraCrypto era))
forall (m :: * -&gt; *) a.
Monad m =&gt;
m a
-&gt; StateT
     (Interns (Credential 'Staking (EraCrypto era)),
      Interns (KeyHash 'StakePool (EraCrypto era)))
     m
     a
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/transformers-0.6.1.0/src/Control.Monad.Trans.Class.html#lift"><span class="hs-identifier hs-var">lift</span></a></span><span> </span><span class="annot"><span class="annottext">Decoder s (GenDelegs (EraCrypto era))
forall s. Decoder s (GenDelegs (EraCrypto era))
forall a s. DecCBOR a =&gt; Decoder s a
</span><span class="hs-identifier hs-var">decCBOR</span></span><span>
</span><span id="line-206"></span><span>      </span><span id="local-6989586621679503686"><span class="annot"><span class="annottext">InstantaneousRewards (EraCrypto era)
</span><a href="#local-6989586621679503686"><span class="hs-identifier hs-var">ir</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Lens'
  (Interns (Credential 'Staking (EraCrypto era)),
   Interns (KeyHash 'StakePool (EraCrypto era)))
  (Share (InstantaneousRewards (EraCrypto era)))
-&gt; StateT
     (Interns (Credential 'Staking (EraCrypto era)),
      Interns (KeyHash 'StakePool (EraCrypto era)))
     (Decoder s)
     (InstantaneousRewards (EraCrypto era))
forall b bs s.
DecShareCBOR b =&gt;
Lens' bs (Share b) -&gt; StateT bs (Decoder s) b
</span><span class="hs-identifier hs-var">decSharePlusLensCBOR</span></span><span> </span><span class="annot"><span class="annottext">(Share (InstantaneousRewards (EraCrypto era))
 -&gt; f (Share (InstantaneousRewards (EraCrypto era))))
-&gt; (Interns (Credential 'Staking (EraCrypto era)),
    Interns (KeyHash 'StakePool (EraCrypto era)))
-&gt; f (Interns (Credential 'Staking (EraCrypto era)),
      Interns (KeyHash 'StakePool (EraCrypto era)))
(Interns (Credential 'Staking (EraCrypto era))
 -&gt; f (Interns (Credential 'Staking (EraCrypto era))))
-&gt; (Interns (Credential 'Staking (EraCrypto era)),
    Interns (KeyHash 'StakePool (EraCrypto era)))
-&gt; f (Interns (Credential 'Staking (EraCrypto era)),
      Interns (KeyHash 'StakePool (EraCrypto era)))
forall s t a b. Field1 s t a b =&gt; Lens s t a b
Lens'
  (Interns (Credential 'Staking (EraCrypto era)),
   Interns (KeyHash 'StakePool (EraCrypto era)))
  (Share (InstantaneousRewards (EraCrypto era)))
Lens
  (Interns (Credential 'Staking (EraCrypto era)),
   Interns (KeyHash 'StakePool (EraCrypto era)))
  (Interns (Credential 'Staking (EraCrypto era)),
   Interns (KeyHash 'StakePool (EraCrypto era)))
  (Interns (Credential 'Staking (EraCrypto era)))
  (Interns (Credential 'Staking (EraCrypto era)))
</span><span class="hs-identifier hs-var">_1</span></span><span>
</span><span id="line-207"></span><span>      </span><span class="annot"><span class="annottext">DState era
-&gt; StateT
     (Interns (Credential 'Staking (EraCrypto era)),
      Interns (KeyHash 'StakePool (EraCrypto era)))
     (Decoder s)
     (DState era)
forall a.
a
-&gt; StateT
     (Interns (Credential 'Staking (EraCrypto era)),
      Interns (KeyHash 'StakePool (EraCrypto era)))
     (Decoder s)
     a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">(DState era
 -&gt; StateT
      (Interns (Credential 'Staking (EraCrypto era)),
       Interns (KeyHash 'StakePool (EraCrypto era)))
      (Decoder s)
      (DState era))
-&gt; DState era
-&gt; StateT
     (Interns (Credential 'Staking (EraCrypto era)),
      Interns (KeyHash 'StakePool (EraCrypto era)))
     (Decoder s)
     (DState era)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">UMap (EraCrypto era)
-&gt; Map
     (FutureGenDeleg (EraCrypto era)) (GenDelegPair (EraCrypto era))
-&gt; GenDelegs (EraCrypto era)
-&gt; InstantaneousRewards (EraCrypto era)
-&gt; DState era
forall era.
UMap (EraCrypto era)
-&gt; Map
     (FutureGenDeleg (EraCrypto era)) (GenDelegPair (EraCrypto era))
-&gt; GenDelegs (EraCrypto era)
-&gt; InstantaneousRewards (EraCrypto era)
-&gt; DState era
</span><a href="Cardano.Ledger.CertState.html#DState"><span class="hs-identifier hs-var">DState</span></a></span><span> </span><span class="annot"><span class="annottext">UMap (EraCrypto era)
</span><a href="#local-6989586621679503682"><span class="hs-identifier hs-var">unified</span></a></span><span> </span><span class="annot"><span class="annottext">Map (FutureGenDeleg (EraCrypto era)) (GenDelegPair (EraCrypto era))
</span><a href="#local-6989586621679503683"><span class="hs-identifier hs-var">fgs</span></a></span><span> </span><span class="annot"><span class="annottext">GenDelegs (EraCrypto era)
</span><a href="#local-6989586621679503685"><span class="hs-identifier hs-var">gs</span></a></span><span> </span><span class="annot"><span class="annottext">InstantaneousRewards (EraCrypto era)
</span><a href="#local-6989586621679503686"><span class="hs-identifier hs-var">ir</span></a></span><span>
</span><span id="line-208"></span><span>
</span><span id="line-209"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679502607"><span id="local-6989586621679503695"><span id="local-6989586621679503699"><span id="local-6989586621679503702"><span class="annot"><a href="Cardano.Ledger.Core.Era.html#Era"><span class="hs-identifier hs-type">Era</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502607"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#DState"><span class="hs-identifier hs-type">DState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502607"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-210"></span><span>  </span><span id="local-6989586621679503708"><span class="annot"><span class="annottext">toJSON :: DState era -&gt; Value
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">object</span></span><span> </span><span class="annot"><span class="annottext">([Pair] -&gt; Value) -&gt; (DState era -&gt; [Pair]) -&gt; DState era -&gt; Value
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">DState era -&gt; [Pair]
forall e a era. (KeyValue e a, Era era) =&gt; DState era -&gt; [a]
</span><a href="Cardano.Ledger.CertState.html#toDStatePair"><span class="hs-identifier hs-var">toDStatePair</span></a></span><span>
</span><span id="line-211"></span><span>  </span><span id="local-6989586621679503713"><span class="annot"><span class="annottext">toEncoding :: DState era -&gt; Encoding
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">toEncoding</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Series -&gt; Encoding
</span><span class="hs-identifier hs-var">pairs</span></span><span> </span><span class="annot"><span class="annottext">(Series -&gt; Encoding)
-&gt; (DState era -&gt; Series) -&gt; DState era -&gt; Encoding
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">[Series] -&gt; Series
forall a. Monoid a =&gt; [a] -&gt; a
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#mconcat"><span class="hs-identifier hs-var">mconcat</span></a></span><span> </span><span class="annot"><span class="annottext">([Series] -&gt; Series)
-&gt; (DState era -&gt; [Series]) -&gt; DState era -&gt; Series
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">DState era -&gt; [Series]
forall e a era. (KeyValue e a, Era era) =&gt; DState era -&gt; [a]
</span><a href="Cardano.Ledger.CertState.html#toDStatePair"><span class="hs-identifier hs-var">toDStatePair</span></a></span><span>
</span><span id="line-212"></span><span>
</span><span id="line-213"></span><span id="local-6989586621679502608"><span id="local-6989586621679502609"><span id="local-6989586621679502610"><span class="annot"><a href="Cardano.Ledger.CertState.html#toDStatePair"><span class="hs-identifier hs-type">toDStatePair</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">KeyValue</span></span><span> </span><span class="annot"><a href="#local-6989586621679502608"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502609"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Ledger.Core.Era.html#Era"><span class="hs-identifier hs-type">Era</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502610"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Cardano.Ledger.CertState.html#DState"><span class="hs-identifier hs-type">DState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502610"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679502609"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span></span></span></span><span>
</span><span id="line-214"></span><span id="toDStatePair"><span class="annot"><span class="annottext">toDStatePair :: forall e a era. (KeyValue e a, Era era) =&gt; DState era -&gt; [a]
</span><a href="Cardano.Ledger.CertState.html#toDStatePair"><span class="hs-identifier hs-var hs-var">toDStatePair</span></a></span></span><span> </span><span class="annot"><a href="Cardano.Ledger.CertState.html#DState"><span class="hs-identifier hs-type">DState</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621679503737"><span id="local-6989586621679503738"><span id="local-6989586621679503739"><span id="local-6989586621679503740"><span class="annot"><span class="annottext">Map (FutureGenDeleg (EraCrypto era)) (GenDelegPair (EraCrypto era))
GenDelegs (EraCrypto era)
UMap (EraCrypto era)
InstantaneousRewards (EraCrypto era)
dsUnified :: forall era. DState era -&gt; UMap (EraCrypto era)
dsFutureGenDelegs :: forall era.
DState era
-&gt; Map
     (FutureGenDeleg (EraCrypto era)) (GenDelegPair (EraCrypto era))
dsGenDelegs :: forall era. DState era -&gt; GenDelegs (EraCrypto era)
dsIRewards :: forall era. DState era -&gt; InstantaneousRewards (EraCrypto era)
dsUnified :: UMap (EraCrypto era)
dsFutureGenDelegs :: Map (FutureGenDeleg (EraCrypto era)) (GenDelegPair (EraCrypto era))
dsGenDelegs :: GenDelegs (EraCrypto era)
dsIRewards :: InstantaneousRewards (EraCrypto era)
</span><a href="Cardano.Ledger.CertState.html#dsUnified"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-215"></span><span>  </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;unified&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; UMap (EraCrypto era) -&gt; a
forall v. ToJSON v =&gt; Key -&gt; v -&gt; a
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">UMap (EraCrypto era)
</span><a href="#local-6989586621679503737"><span class="hs-identifier hs-var">dsUnified</span></a></span><span>
</span><span id="line-216"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;fGenDelegs&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key
-&gt; [(FutureGenDeleg (EraCrypto era), GenDelegPair (EraCrypto era))]
-&gt; a
forall v. ToJSON v =&gt; Key -&gt; v -&gt; a
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">Map (FutureGenDeleg (EraCrypto era)) (GenDelegPair (EraCrypto era))
-&gt; [(FutureGenDeleg (EraCrypto era), GenDelegPair (EraCrypto era))]
forall k a. Map k a -&gt; [(k, a)]
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#toList"><span class="hs-identifier hs-var">Map.toList</span></a></span><span> </span><span class="annot"><span class="annottext">Map (FutureGenDeleg (EraCrypto era)) (GenDelegPair (EraCrypto era))
</span><a href="#local-6989586621679503738"><span class="hs-identifier hs-var">dsFutureGenDelegs</span></a></span><span>
</span><span id="line-217"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;genDelegs&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; GenDelegs (EraCrypto era) -&gt; a
forall v. ToJSON v =&gt; Key -&gt; v -&gt; a
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">GenDelegs (EraCrypto era)
</span><a href="#local-6989586621679503739"><span class="hs-identifier hs-var">dsGenDelegs</span></a></span><span>
</span><span id="line-218"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;irwd&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; InstantaneousRewards (EraCrypto era) -&gt; a
forall v. ToJSON v =&gt; Key -&gt; v -&gt; a
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">InstantaneousRewards (EraCrypto era)
</span><a href="#local-6989586621679503740"><span class="hs-identifier hs-var">dsIRewards</span></a></span><span>
</span><span id="line-219"></span><span>  </span><span class="hs-special">]</span><span>
</span><span id="line-220"></span><span>
</span><span id="line-221"></span><span class="annot"><span class="hs-comment">-- | Function that looks up the deposit for currently delegated staking credential</span></span><span>
</span><span id="line-222"></span><span id="local-6989586621679502622"><span class="annot"><a href="Cardano.Ledger.CertState.html#lookupDepositDState"><span class="hs-identifier hs-type">lookupDepositDState</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Ledger.CertState.html#DState"><span class="hs-identifier hs-type">DState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502622"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Credential.html#StakeCredential"><span class="hs-identifier hs-type">StakeCredential</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Core.Era.html#EraCrypto"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502622"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="Cardano.Ledger.Coin.html#Coin"><span class="hs-identifier hs-type">Coin</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-223"></span><span id="lookupDepositDState"><span class="annot"><span class="annottext">lookupDepositDState :: forall era.
DState era -&gt; StakeCredential (EraCrypto era) -&gt; Maybe Coin
</span><a href="Cardano.Ledger.CertState.html#lookupDepositDState"><span class="hs-identifier hs-var hs-var">lookupDepositDState</span></a></span></span><span> </span><span id="local-6989586621679503746"><span class="annot"><span class="annottext">DState era
</span><a href="#local-6989586621679503746"><span class="hs-identifier hs-var">dstate</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-224"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679503747"><span class="annot"><span class="annottext">currentRewardDeposits :: UView (EraCrypto era) (StakeCredential (EraCrypto era)) RDPair
</span><a href="#local-6989586621679503747"><span class="hs-identifier hs-var hs-var">currentRewardDeposits</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UMap (EraCrypto era)
-&gt; UView (EraCrypto era) (StakeCredential (EraCrypto era)) RDPair
forall c. UMap c -&gt; UView c (Credential 'Staking c) RDPair
</span><a href="Cardano.Ledger.UMap.html#RewDepUView"><span class="hs-identifier hs-var">RewDepUView</span></a></span><span> </span><span class="annot"><span class="annottext">(UMap (EraCrypto era)
 -&gt; UView (EraCrypto era) (StakeCredential (EraCrypto era)) RDPair)
-&gt; UMap (EraCrypto era)
-&gt; UView (EraCrypto era) (StakeCredential (EraCrypto era)) RDPair
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">DState era -&gt; UMap (EraCrypto era)
forall era. DState era -&gt; UMap (EraCrypto era)
</span><a href="Cardano.Ledger.CertState.html#dsUnified"><span class="hs-identifier hs-var">dsUnified</span></a></span><span> </span><span class="annot"><span class="annottext">DState era
</span><a href="#local-6989586621679503746"><span class="hs-identifier hs-var">dstate</span></a></span><span>
</span><span id="line-225"></span><span>   </span><span class="hs-keyword">in</span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679503748"><span class="annot"><span class="annottext">StakeCredential (EraCrypto era)
</span><a href="#local-6989586621679503748"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-226"></span><span>        </span><span class="annot"><a href="Cardano.Ledger.UMap.html#RDPair"><span class="hs-identifier hs-type">RDPair</span></a></span><span> </span><span class="annot"><span class="annottext">CompactForm Coin
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679503750"><span class="annot"><span class="annottext">CompactForm Coin
</span><a href="#local-6989586621679503750"><span class="hs-identifier hs-var">deposit</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">StakeCredential (EraCrypto era)
-&gt; UView (EraCrypto era) (StakeCredential (EraCrypto era)) RDPair
-&gt; Maybe RDPair
forall k c v. k -&gt; UView c k v -&gt; Maybe v
</span><a href="Cardano.Ledger.UMap.html#lookup"><span class="hs-identifier hs-var">UM.lookup</span></a></span><span> </span><span class="annot"><span class="annottext">StakeCredential (EraCrypto era)
</span><a href="#local-6989586621679503748"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">UView (EraCrypto era) (StakeCredential (EraCrypto era)) RDPair
</span><a href="#local-6989586621679503747"><span class="hs-identifier hs-var">currentRewardDeposits</span></a></span><span>
</span><span id="line-227"></span><span>        </span><span class="annot"><span class="annottext">Coin -&gt; Maybe Coin
forall a. a -&gt; Maybe a
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">(Coin -&gt; Maybe Coin) -&gt; Coin -&gt; Maybe Coin
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24%21"><span class="hs-operator hs-var">$!</span></a></span><span> </span><span class="annot"><span class="annottext">CompactForm Coin -&gt; Coin
forall a. Compactible a =&gt; CompactForm a -&gt; a
</span><a href="Cardano.Ledger.Compactible.html#fromCompact"><span class="hs-identifier hs-var">fromCompact</span></a></span><span> </span><span class="annot"><span class="annottext">CompactForm Coin
</span><a href="#local-6989586621679503750"><span class="hs-identifier hs-var">deposit</span></a></span><span>
</span><span id="line-228"></span><span>
</span><span id="line-229"></span><span class="annot"><span class="hs-comment">-- | Function that looks up curret reward for the delegated staking credential.</span></span><span>
</span><span id="line-230"></span><span id="local-6989586621679503753"><span class="annot"><a href="Cardano.Ledger.CertState.html#lookupRewardDState"><span class="hs-identifier hs-type">lookupRewardDState</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Ledger.CertState.html#DState"><span class="hs-identifier hs-type">DState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679503753"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Credential.html#StakeCredential"><span class="hs-identifier hs-type">StakeCredential</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Core.Era.html#EraCrypto"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679503753"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="Cardano.Ledger.Coin.html#Coin"><span class="hs-identifier hs-type">Coin</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-231"></span><span id="lookupRewardDState"><span class="annot"><span class="annottext">lookupRewardDState :: forall era.
DState era -&gt; StakeCredential (EraCrypto era) -&gt; Maybe Coin
</span><a href="Cardano.Ledger.CertState.html#lookupRewardDState"><span class="hs-identifier hs-var hs-var">lookupRewardDState</span></a></span></span><span> </span><span id="local-6989586621679503756"><span class="annot"><span class="annottext">DState era
</span><a href="#local-6989586621679503756"><span class="hs-identifier hs-var">dstate</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-232"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679503757"><span class="annot"><span class="annottext">currentRewardDeposits :: UView (EraCrypto era) (StakeCredential (EraCrypto era)) RDPair
</span><a href="#local-6989586621679503757"><span class="hs-identifier hs-var hs-var">currentRewardDeposits</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UMap (EraCrypto era)
-&gt; UView (EraCrypto era) (StakeCredential (EraCrypto era)) RDPair
forall c. UMap c -&gt; UView c (Credential 'Staking c) RDPair
</span><a href="Cardano.Ledger.UMap.html#RewDepUView"><span class="hs-identifier hs-var">RewDepUView</span></a></span><span> </span><span class="annot"><span class="annottext">(UMap (EraCrypto era)
 -&gt; UView (EraCrypto era) (StakeCredential (EraCrypto era)) RDPair)
-&gt; UMap (EraCrypto era)
-&gt; UView (EraCrypto era) (StakeCredential (EraCrypto era)) RDPair
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">DState era -&gt; UMap (EraCrypto era)
forall era. DState era -&gt; UMap (EraCrypto era)
</span><a href="Cardano.Ledger.CertState.html#dsUnified"><span class="hs-identifier hs-var">dsUnified</span></a></span><span> </span><span class="annot"><span class="annottext">DState era
</span><a href="#local-6989586621679503756"><span class="hs-identifier hs-var">dstate</span></a></span><span>
</span><span id="line-233"></span><span>   </span><span class="hs-keyword">in</span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679503758"><span class="annot"><span class="annottext">StakeCredential (EraCrypto era)
</span><a href="#local-6989586621679503758"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-234"></span><span>        </span><span class="annot"><a href="Cardano.Ledger.UMap.html#RDPair"><span class="hs-identifier hs-type">RDPair</span></a></span><span> </span><span id="local-6989586621679503759"><span class="annot"><span class="annottext">CompactForm Coin
</span><a href="#local-6989586621679503759"><span class="hs-identifier hs-var">reward</span></a></span></span><span> </span><span class="annot"><span class="annottext">CompactForm Coin
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">StakeCredential (EraCrypto era)
-&gt; UView (EraCrypto era) (StakeCredential (EraCrypto era)) RDPair
-&gt; Maybe RDPair
forall k c v. k -&gt; UView c k v -&gt; Maybe v
</span><a href="Cardano.Ledger.UMap.html#lookup"><span class="hs-identifier hs-var">UM.lookup</span></a></span><span> </span><span class="annot"><span class="annottext">StakeCredential (EraCrypto era)
</span><a href="#local-6989586621679503758"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">UView (EraCrypto era) (StakeCredential (EraCrypto era)) RDPair
</span><a href="#local-6989586621679503757"><span class="hs-identifier hs-var">currentRewardDeposits</span></a></span><span>
</span><span id="line-235"></span><span>        </span><span class="annot"><span class="annottext">Coin -&gt; Maybe Coin
forall a. a -&gt; Maybe a
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">(Coin -&gt; Maybe Coin) -&gt; Coin -&gt; Maybe Coin
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24%21"><span class="hs-operator hs-var">$!</span></a></span><span> </span><span class="annot"><span class="annottext">CompactForm Coin -&gt; Coin
forall a. Compactible a =&gt; CompactForm a -&gt; a
</span><a href="Cardano.Ledger.Compactible.html#fromCompact"><span class="hs-identifier hs-var">fromCompact</span></a></span><span> </span><span class="annot"><span class="annottext">CompactForm Coin
</span><a href="#local-6989586621679503759"><span class="hs-identifier hs-var">reward</span></a></span><span>
</span><span id="line-236"></span><span>
</span><span id="line-237"></span><span class="annot"><span class="hs-comment">-- | The state used by the POOL rule, which tracks stake pool information.</span></span><span>
</span><span id="line-238"></span><span class="hs-keyword">data</span><span> </span><span id="PState"><span class="annot"><a href="Cardano.Ledger.CertState.html#PState"><span class="hs-identifier hs-var">PState</span></a></span></span><span> </span><span id="local-6989586621679502635"><span class="annot"><a href="#local-6989586621679502635"><span class="hs-identifier hs-type">era</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="PState"><span class="annot"><a href="Cardano.Ledger.CertState.html#PState"><span class="hs-identifier hs-var">PState</span></a></span></span><span>
</span><span id="line-239"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="psStakePoolParams"><span class="annot"><span class="annottext">forall era.
PState era
-&gt; Map
     (KeyHash 'StakePool (EraCrypto era)) (PoolParams (EraCrypto era))
</span><a href="Cardano.Ledger.CertState.html#psStakePoolParams"><span class="hs-identifier hs-var hs-var">psStakePoolParams</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#Map"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Keys.Internal.html#KeyHash"><span class="hs-identifier hs-type">KeyHash</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Cardano.Ledger.Keys.Internal.html#StakePool"><span class="hs-identifier hs-type">StakePool</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Core.Era.html#EraCrypto"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502635"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.PoolParams.html#PoolParams"><span class="hs-identifier hs-type">PoolParams</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Core.Era.html#EraCrypto"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502635"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-240"></span><span>  </span><span class="annot"><span class="hs-comment">-- ^ The stake pool parameters.</span></span><span>
</span><span id="line-241"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="psFutureStakePoolParams"><span class="annot"><span class="annottext">forall era.
PState era
-&gt; Map
     (KeyHash 'StakePool (EraCrypto era)) (PoolParams (EraCrypto era))
</span><a href="Cardano.Ledger.CertState.html#psFutureStakePoolParams"><span class="hs-identifier hs-var hs-var">psFutureStakePoolParams</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#Map"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Keys.Internal.html#KeyHash"><span class="hs-identifier hs-type">KeyHash</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Cardano.Ledger.Keys.Internal.html#StakePool"><span class="hs-identifier hs-type">StakePool</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Core.Era.html#EraCrypto"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502635"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.PoolParams.html#PoolParams"><span class="hs-identifier hs-type">PoolParams</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Core.Era.html#EraCrypto"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502635"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-242"></span><span>  </span><span class="hs-comment">-- ^ The future stake pool parameters.</span><span>
</span><span id="line-243"></span><span>  </span><span class="hs-comment">-- Changes to existing stake pool parameters are staged in order</span><span>
</span><span id="line-244"></span><span>  </span><span class="hs-comment">-- to give delegators time to react to changes.</span><span>
</span><span id="line-245"></span><span>  </span><span class="hs-comment">-- See section 11.2, &quot;Example Illustration of the Reward Cycle&quot;,</span><span>
</span><span id="line-246"></span><span>  </span><span class="hs-comment">-- of the Shelley Ledger Specification for a sequence diagram.</span><span>
</span><span id="line-247"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="psRetiring"><span class="annot"><span class="annottext">forall era.
PState era -&gt; Map (KeyHash 'StakePool (EraCrypto era)) EpochNo
</span><a href="Cardano.Ledger.CertState.html#psRetiring"><span class="hs-identifier hs-var hs-var">psRetiring</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#Map"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Keys.Internal.html#KeyHash"><span class="hs-identifier hs-type">KeyHash</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Cardano.Ledger.Keys.Internal.html#StakePool"><span class="hs-identifier hs-type">StakePool</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Core.Era.html#EraCrypto"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502635"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-identifier hs-type">EpochNo</span></span><span class="hs-special">)</span><span>
</span><span id="line-248"></span><span>  </span><span class="annot"><span class="hs-comment">-- ^ A map of retiring stake pools to the epoch when they retire.</span></span><span>
</span><span id="line-249"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="psDeposits"><span class="annot"><span class="annottext">forall era.
PState era -&gt; Map (KeyHash 'StakePool (EraCrypto era)) Coin
</span><a href="Cardano.Ledger.CertState.html#psDeposits"><span class="hs-identifier hs-var hs-var">psDeposits</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#Map"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Keys.Internal.html#KeyHash"><span class="hs-identifier hs-type">KeyHash</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Cardano.Ledger.Keys.Internal.html#StakePool"><span class="hs-identifier hs-type">StakePool</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Core.Era.html#EraCrypto"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502635"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="Cardano.Ledger.Coin.html#Coin"><span class="hs-identifier hs-type">Coin</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-250"></span><span>  </span><span class="annot"><span class="hs-comment">-- ^ A map of the deposits for each pool</span></span><span>
</span><span id="line-251"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-252"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679503766"><span id="local-6989586621679503777"><span id="local-6989586621679503781"><span class="annot"><span class="annottext">Int -&gt; PState era -&gt; ShowS
[PState era] -&gt; ShowS
PState era -&gt; String
(Int -&gt; PState era -&gt; ShowS)
-&gt; (PState era -&gt; String)
-&gt; ([PState era] -&gt; ShowS)
-&gt; Show (PState era)
forall era. Int -&gt; PState era -&gt; ShowS
forall era. [PState era] -&gt; ShowS
forall era. PState era -&gt; String
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: forall era. Int -&gt; PState era -&gt; ShowS
showsPrec :: Int -&gt; PState era -&gt; ShowS
$cshow :: forall era. PState era -&gt; String
show :: PState era -&gt; String
$cshowList :: forall era. [PState era] -&gt; ShowS
showList :: [PState era] -&gt; ShowS
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Show.html#Show"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679503786"><span id="local-6989586621679503796"><span class="annot"><span class="annottext">PState era -&gt; PState era -&gt; Bool
(PState era -&gt; PState era -&gt; Bool)
-&gt; (PState era -&gt; PState era -&gt; Bool) -&gt; Eq (PState era)
forall era. PState era -&gt; PState era -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: forall era. PState era -&gt; PState era -&gt; Bool
== :: PState era -&gt; PState era -&gt; Bool
$c/= :: forall era. PState era -&gt; PState era -&gt; Bool
/= :: PState era -&gt; PState era -&gt; Bool
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/ghc-prim-0.10.0/src/GHC.Classes.html#Eq"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679503802"><span id="local-6989586621679503804"><span class="annot"><span class="annottext">(forall x. PState era -&gt; Rep (PState era) x)
-&gt; (forall x. Rep (PState era) x -&gt; PState era)
-&gt; Generic (PState era)
forall x. Rep (PState era) x -&gt; PState era
forall x. PState era -&gt; Rep (PState era) x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
forall era x. Rep (PState era) x -&gt; PState era
forall era x. PState era -&gt; Rep (PState era) x
$cfrom :: forall era x. PState era -&gt; Rep (PState era) x
from :: forall x. PState era -&gt; Rep (PState era) x
$cto :: forall era x. Rep (PState era) x -&gt; PState era
to :: forall x. Rep (PState era) x -&gt; PState era
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Generics.html#Generic"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Generic</span></a></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-253"></span><span>
</span><span id="line-254"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679502653"><span id="local-6989586621679503807"><span id="local-6989586621679503811"><span id="local-6989586621679503817"><span class="annot"><span class="hs-identifier hs-type">NoThunks</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#PState"><span class="hs-identifier hs-type">PState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502653"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span></span></span><span>
</span><span id="line-255"></span><span>
</span><span id="line-256"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679502656"><span id="local-6989586621679503859"><span class="annot"><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/deepseq-1.4.8.1/src/Control.DeepSeq.html#NFData"><span class="hs-identifier hs-type">NFData</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#PState"><span class="hs-identifier hs-type">PState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502656"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-257"></span><span>
</span><span id="line-258"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679502658"><span id="local-6989586621679503892"><span id="local-6989586621679503896"><span class="annot"><a href="Cardano.Ledger.Core.Era.html#Era"><span class="hs-identifier hs-type">Era</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502658"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">EncCBOR</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#PState"><span class="hs-identifier hs-type">PState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502658"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-259"></span><span>  </span><span id="local-6989586621679503916"><span class="annot"><span class="annottext">encCBOR :: PState era -&gt; Encoding
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">encCBOR</span></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#PState"><span class="hs-identifier hs-type">PState</span></a></span><span> </span><span id="local-6989586621679503917"><span class="annot"><span class="annottext">Map
  (KeyHash 'StakePool (EraCrypto era)) (PoolParams (EraCrypto era))
</span><a href="#local-6989586621679503917"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621679503918"><span class="annot"><span class="annottext">Map
  (KeyHash 'StakePool (EraCrypto era)) (PoolParams (EraCrypto era))
</span><a href="#local-6989586621679503918"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span id="local-6989586621679503919"><span class="annot"><span class="annottext">Map (KeyHash 'StakePool (EraCrypto era)) EpochNo
</span><a href="#local-6989586621679503919"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span id="local-6989586621679503920"><span class="annot"><span class="annottext">Map (KeyHash 'StakePool (EraCrypto era)) Coin
</span><a href="#local-6989586621679503920"><span class="hs-identifier hs-var">d</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-260"></span><span>    </span><span class="annot"><span class="annottext">Word -&gt; Encoding
</span><span class="hs-identifier hs-var">encodeListLen</span></span><span> </span><span class="annot"><span class="annottext">Word
</span><span class="hs-number">4</span></span><span> </span><span class="annot"><span class="annottext">Encoding -&gt; Encoding -&gt; Encoding
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Map
  (KeyHash 'StakePool (EraCrypto era)) (PoolParams (EraCrypto era))
-&gt; Encoding
forall a. EncCBOR a =&gt; a -&gt; Encoding
</span><span class="hs-identifier hs-var">encCBOR</span></span><span> </span><span class="annot"><span class="annottext">Map
  (KeyHash 'StakePool (EraCrypto era)) (PoolParams (EraCrypto era))
</span><a href="#local-6989586621679503917"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">Encoding -&gt; Encoding -&gt; Encoding
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Map
  (KeyHash 'StakePool (EraCrypto era)) (PoolParams (EraCrypto era))
-&gt; Encoding
forall a. EncCBOR a =&gt; a -&gt; Encoding
</span><span class="hs-identifier hs-var">encCBOR</span></span><span> </span><span class="annot"><span class="annottext">Map
  (KeyHash 'StakePool (EraCrypto era)) (PoolParams (EraCrypto era))
</span><a href="#local-6989586621679503918"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="annot"><span class="annottext">Encoding -&gt; Encoding -&gt; Encoding
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Map (KeyHash 'StakePool (EraCrypto era)) EpochNo -&gt; Encoding
forall a. EncCBOR a =&gt; a -&gt; Encoding
</span><span class="hs-identifier hs-var">encCBOR</span></span><span> </span><span class="annot"><span class="annottext">Map (KeyHash 'StakePool (EraCrypto era)) EpochNo
</span><a href="#local-6989586621679503919"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">Encoding -&gt; Encoding -&gt; Encoding
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Map (KeyHash 'StakePool (EraCrypto era)) Coin -&gt; Encoding
forall a. EncCBOR a =&gt; a -&gt; Encoding
</span><span class="hs-identifier hs-var">encCBOR</span></span><span> </span><span class="annot"><span class="annottext">Map (KeyHash 'StakePool (EraCrypto era)) Coin
</span><a href="#local-6989586621679503920"><span class="hs-identifier hs-var">d</span></a></span><span>
</span><span id="line-261"></span><span>
</span><span id="line-262"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679502661"><span id="local-6989586621679503926"><span id="local-6989586621679503930"><span class="annot"><a href="Cardano.Ledger.Core.Era.html#Era"><span class="hs-identifier hs-type">Era</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502661"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">DecShareCBOR</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#PState"><span class="hs-identifier hs-type">PState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502661"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-263"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="Share"><span class="annot"><span class="hs-identifier hs-var">Share</span></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#PState"><span class="hs-identifier hs-type">PState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502661"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Interns</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Keys.Internal.html#KeyHash"><span class="hs-identifier hs-type">KeyHash</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Cardano.Ledger.Keys.Internal.html#StakePool"><span class="hs-identifier hs-type">StakePool</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Core.Era.html#EraCrypto"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502661"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-264"></span><span>  </span><span id="local-6989586621679503961"><span class="annot"><span class="annottext">decSharePlusCBOR :: forall s. StateT (Share (PState era)) (Decoder s) (PState era)
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">decSharePlusCBOR</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text
-&gt; (PState era -&gt; Int)
-&gt; StateT (Share (PState era)) (Decoder s) (PState era)
-&gt; StateT (Share (PState era)) (Decoder s) (PState era)
forall (m :: (* -&gt; *) -&gt; * -&gt; *) s a.
(MonadTrans m, Monad (m (Decoder s))) =&gt;
Text -&gt; (a -&gt; Int) -&gt; m (Decoder s) a -&gt; m (Decoder s) a
</span><span class="hs-identifier hs-var">decodeRecordNamedT</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;PState&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; PState era -&gt; Int
forall a b. a -&gt; b -&gt; a
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#const"><span class="hs-identifier hs-var">const</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">4</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(StateT (Share (PState era)) (Decoder s) (PState era)
 -&gt; StateT (Share (PState era)) (Decoder s) (PState era))
-&gt; StateT (Share (PState era)) (Decoder s) (PState era)
-&gt; StateT (Share (PState era)) (Decoder s) (PState era)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-265"></span><span>    </span><span id="local-6989586621679503962"><span class="annot"><span class="annottext">Map
  (KeyHash 'StakePool (EraCrypto era)) (PoolParams (EraCrypto era))
</span><a href="#local-6989586621679503962"><span class="hs-identifier hs-var">psStakePoolParams</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Lens'
  (Interns (KeyHash 'StakePool (EraCrypto era)))
  (Share
     (Map
        (KeyHash 'StakePool (EraCrypto era)) (PoolParams (EraCrypto era))))
-&gt; StateT
     (Interns (KeyHash 'StakePool (EraCrypto era)))
     (Decoder s)
     (Map
        (KeyHash 'StakePool (EraCrypto era)) (PoolParams (EraCrypto era)))
forall b bs s.
DecShareCBOR b =&gt;
Lens' bs (Share b) -&gt; StateT bs (Decoder s) b
</span><span class="hs-identifier hs-var">decSharePlusLensCBOR</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Lens'
  (Interns (KeyHash 'StakePool (EraCrypto era)),
   Interns (PoolParams (EraCrypto era)))
  (Interns (KeyHash 'StakePool (EraCrypto era)))
-&gt; Lens'
     (Interns (KeyHash 'StakePool (EraCrypto era)))
     (Interns (KeyHash 'StakePool (EraCrypto era)))
-&gt; Lens'
     (Interns (KeyHash 'StakePool (EraCrypto era)))
     (Interns (KeyHash 'StakePool (EraCrypto era)),
      Interns (PoolParams (EraCrypto era)))
forall a b c. Monoid a =&gt; Lens' a b -&gt; Lens' c b -&gt; Lens' c a
</span><span class="hs-identifier hs-var">toMemptyLens</span></span><span> </span><span class="annot"><span class="annottext">(Interns (KeyHash 'StakePool (EraCrypto era))
 -&gt; f (Interns (KeyHash 'StakePool (EraCrypto era))))
-&gt; (Interns (KeyHash 'StakePool (EraCrypto era)),
    Interns (PoolParams (EraCrypto era)))
-&gt; f (Interns (KeyHash 'StakePool (EraCrypto era)),
      Interns (PoolParams (EraCrypto era)))
forall s t a b. Field1 s t a b =&gt; Lens s t a b
Lens'
  (Interns (KeyHash 'StakePool (EraCrypto era)),
   Interns (PoolParams (EraCrypto era)))
  (Interns (KeyHash 'StakePool (EraCrypto era)))
</span><span class="hs-identifier hs-var">_1</span></span><span> </span><span class="annot"><span class="annottext">(Interns (KeyHash 'StakePool (EraCrypto era))
 -&gt; f (Interns (KeyHash 'StakePool (EraCrypto era))))
-&gt; Interns (KeyHash 'StakePool (EraCrypto era))
-&gt; f (Interns (KeyHash 'StakePool (EraCrypto era)))
forall a. a -&gt; a
Lens'
  (Interns (KeyHash 'StakePool (EraCrypto era)))
  (Interns (KeyHash 'StakePool (EraCrypto era)))
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#id"><span class="hs-identifier hs-var">id</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-266"></span><span>    </span><span id="local-6989586621679503973"><span class="annot"><span class="annottext">Map
  (KeyHash 'StakePool (EraCrypto era)) (PoolParams (EraCrypto era))
</span><a href="#local-6989586621679503973"><span class="hs-identifier hs-var">psFutureStakePoolParams</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Lens'
  (Interns (KeyHash 'StakePool (EraCrypto era)))
  (Share
     (Map
        (KeyHash 'StakePool (EraCrypto era)) (PoolParams (EraCrypto era))))
-&gt; StateT
     (Interns (KeyHash 'StakePool (EraCrypto era)))
     (Decoder s)
     (Map
        (KeyHash 'StakePool (EraCrypto era)) (PoolParams (EraCrypto era)))
forall b bs s.
DecShareCBOR b =&gt;
Lens' bs (Share b) -&gt; StateT bs (Decoder s) b
</span><span class="hs-identifier hs-var">decSharePlusLensCBOR</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Lens'
  (Interns (KeyHash 'StakePool (EraCrypto era)),
   Interns (PoolParams (EraCrypto era)))
  (Interns (KeyHash 'StakePool (EraCrypto era)))
-&gt; Lens'
     (Interns (KeyHash 'StakePool (EraCrypto era)))
     (Interns (KeyHash 'StakePool (EraCrypto era)))
-&gt; Lens'
     (Interns (KeyHash 'StakePool (EraCrypto era)))
     (Interns (KeyHash 'StakePool (EraCrypto era)),
      Interns (PoolParams (EraCrypto era)))
forall a b c. Monoid a =&gt; Lens' a b -&gt; Lens' c b -&gt; Lens' c a
</span><span class="hs-identifier hs-var">toMemptyLens</span></span><span> </span><span class="annot"><span class="annottext">(Interns (KeyHash 'StakePool (EraCrypto era))
 -&gt; f (Interns (KeyHash 'StakePool (EraCrypto era))))
-&gt; (Interns (KeyHash 'StakePool (EraCrypto era)),
    Interns (PoolParams (EraCrypto era)))
-&gt; f (Interns (KeyHash 'StakePool (EraCrypto era)),
      Interns (PoolParams (EraCrypto era)))
forall s t a b. Field1 s t a b =&gt; Lens s t a b
Lens'
  (Interns (KeyHash 'StakePool (EraCrypto era)),
   Interns (PoolParams (EraCrypto era)))
  (Interns (KeyHash 'StakePool (EraCrypto era)))
</span><span class="hs-identifier hs-var">_1</span></span><span> </span><span class="annot"><span class="annottext">(Interns (KeyHash 'StakePool (EraCrypto era))
 -&gt; f (Interns (KeyHash 'StakePool (EraCrypto era))))
-&gt; Interns (KeyHash 'StakePool (EraCrypto era))
-&gt; f (Interns (KeyHash 'StakePool (EraCrypto era)))
forall a. a -&gt; a
Lens'
  (Interns (KeyHash 'StakePool (EraCrypto era)))
  (Interns (KeyHash 'StakePool (EraCrypto era)))
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#id"><span class="hs-identifier hs-var">id</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-267"></span><span>    </span><span id="local-6989586621679503983"><span class="annot"><span class="annottext">Map (KeyHash 'StakePool (EraCrypto era)) EpochNo
</span><a href="#local-6989586621679503983"><span class="hs-identifier hs-var">psRetiring</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Lens'
  (Interns (KeyHash 'StakePool (EraCrypto era)))
  (Share (Map (KeyHash 'StakePool (EraCrypto era)) EpochNo))
-&gt; StateT
     (Interns (KeyHash 'StakePool (EraCrypto era)))
     (Decoder s)
     (Map (KeyHash 'StakePool (EraCrypto era)) EpochNo)
forall b bs s.
DecShareCBOR b =&gt;
Lens' bs (Share b) -&gt; StateT bs (Decoder s) b
</span><span class="hs-identifier hs-var">decSharePlusLensCBOR</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Lens'
  (Interns (KeyHash 'StakePool (EraCrypto era)), Interns EpochNo)
  (Interns (KeyHash 'StakePool (EraCrypto era)))
-&gt; Lens'
     (Interns (KeyHash 'StakePool (EraCrypto era)))
     (Interns (KeyHash 'StakePool (EraCrypto era)))
-&gt; Lens'
     (Interns (KeyHash 'StakePool (EraCrypto era)))
     (Interns (KeyHash 'StakePool (EraCrypto era)), Interns EpochNo)
forall a b c. Monoid a =&gt; Lens' a b -&gt; Lens' c b -&gt; Lens' c a
</span><span class="hs-identifier hs-var">toMemptyLens</span></span><span> </span><span class="annot"><span class="annottext">(Interns (KeyHash 'StakePool (EraCrypto era))
 -&gt; f (Interns (KeyHash 'StakePool (EraCrypto era))))
-&gt; (Interns (KeyHash 'StakePool (EraCrypto era)), Interns EpochNo)
-&gt; f (Interns (KeyHash 'StakePool (EraCrypto era)),
      Interns EpochNo)
forall s t a b. Field1 s t a b =&gt; Lens s t a b
Lens'
  (Interns (KeyHash 'StakePool (EraCrypto era)), Interns EpochNo)
  (Interns (KeyHash 'StakePool (EraCrypto era)))
</span><span class="hs-identifier hs-var">_1</span></span><span> </span><span class="annot"><span class="annottext">(Interns (KeyHash 'StakePool (EraCrypto era))
 -&gt; f (Interns (KeyHash 'StakePool (EraCrypto era))))
-&gt; Interns (KeyHash 'StakePool (EraCrypto era))
-&gt; f (Interns (KeyHash 'StakePool (EraCrypto era)))
forall a. a -&gt; a
Lens'
  (Interns (KeyHash 'StakePool (EraCrypto era)))
  (Interns (KeyHash 'StakePool (EraCrypto era)))
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#id"><span class="hs-identifier hs-var">id</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-268"></span><span>    </span><span id="local-6989586621679503993"><span class="annot"><span class="annottext">Map (KeyHash 'StakePool (EraCrypto era)) Coin
</span><a href="#local-6989586621679503993"><span class="hs-identifier hs-var">psDeposits</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Lens'
  (Interns (KeyHash 'StakePool (EraCrypto era)))
  (Share (Map (KeyHash 'StakePool (EraCrypto era)) Coin))
-&gt; StateT
     (Interns (KeyHash 'StakePool (EraCrypto era)))
     (Decoder s)
     (Map (KeyHash 'StakePool (EraCrypto era)) Coin)
forall b bs s.
DecShareCBOR b =&gt;
Lens' bs (Share b) -&gt; StateT bs (Decoder s) b
</span><span class="hs-identifier hs-var">decSharePlusLensCBOR</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Lens'
  (Interns (KeyHash 'StakePool (EraCrypto era)), Interns Coin)
  (Interns (KeyHash 'StakePool (EraCrypto era)))
-&gt; Lens'
     (Interns (KeyHash 'StakePool (EraCrypto era)))
     (Interns (KeyHash 'StakePool (EraCrypto era)))
-&gt; Lens'
     (Interns (KeyHash 'StakePool (EraCrypto era)))
     (Interns (KeyHash 'StakePool (EraCrypto era)), Interns Coin)
forall a b c. Monoid a =&gt; Lens' a b -&gt; Lens' c b -&gt; Lens' c a
</span><span class="hs-identifier hs-var">toMemptyLens</span></span><span> </span><span class="annot"><span class="annottext">(Interns (KeyHash 'StakePool (EraCrypto era))
 -&gt; f (Interns (KeyHash 'StakePool (EraCrypto era))))
-&gt; (Interns (KeyHash 'StakePool (EraCrypto era)), Interns Coin)
-&gt; f (Interns (KeyHash 'StakePool (EraCrypto era)), Interns Coin)
forall s t a b. Field1 s t a b =&gt; Lens s t a b
Lens'
  (Interns (KeyHash 'StakePool (EraCrypto era)), Interns Coin)
  (Interns (KeyHash 'StakePool (EraCrypto era)))
</span><span class="hs-identifier hs-var">_1</span></span><span> </span><span class="annot"><span class="annottext">(Interns (KeyHash 'StakePool (EraCrypto era))
 -&gt; f (Interns (KeyHash 'StakePool (EraCrypto era))))
-&gt; Interns (KeyHash 'StakePool (EraCrypto era))
-&gt; f (Interns (KeyHash 'StakePool (EraCrypto era)))
forall a. a -&gt; a
Lens'
  (Interns (KeyHash 'StakePool (EraCrypto era)))
  (Interns (KeyHash 'StakePool (EraCrypto era)))
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#id"><span class="hs-identifier hs-var">id</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-269"></span><span>    </span><span class="annot"><span class="annottext">PState era
-&gt; StateT
     (Interns (KeyHash 'StakePool (EraCrypto era)))
     (Decoder s)
     (PState era)
forall a.
a
-&gt; StateT
     (Interns (KeyHash 'StakePool (EraCrypto era))) (Decoder s) a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><a href="Cardano.Ledger.CertState.html#PState"><span class="hs-identifier hs-type">PState</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">Map
  (KeyHash 'StakePool (EraCrypto era)) (PoolParams (EraCrypto era))
psStakePoolParams :: Map
  (KeyHash 'StakePool (EraCrypto era)) (PoolParams (EraCrypto era))
psStakePoolParams :: Map
  (KeyHash 'StakePool (EraCrypto era)) (PoolParams (EraCrypto era))
</span><a href="Cardano.Ledger.CertState.html#psStakePoolParams"><span class="hs-identifier hs-var hs-var">psStakePoolParams</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Map
  (KeyHash 'StakePool (EraCrypto era)) (PoolParams (EraCrypto era))
psFutureStakePoolParams :: Map
  (KeyHash 'StakePool (EraCrypto era)) (PoolParams (EraCrypto era))
psFutureStakePoolParams :: Map
  (KeyHash 'StakePool (EraCrypto era)) (PoolParams (EraCrypto era))
</span><a href="Cardano.Ledger.CertState.html#psFutureStakePoolParams"><span class="hs-identifier hs-var hs-var">psFutureStakePoolParams</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Map (KeyHash 'StakePool (EraCrypto era)) EpochNo
psRetiring :: Map (KeyHash 'StakePool (EraCrypto era)) EpochNo
psRetiring :: Map (KeyHash 'StakePool (EraCrypto era)) EpochNo
</span><a href="Cardano.Ledger.CertState.html#psRetiring"><span class="hs-identifier hs-var hs-var">psRetiring</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Map (KeyHash 'StakePool (EraCrypto era)) Coin
psDeposits :: Map (KeyHash 'StakePool (EraCrypto era)) Coin
psDeposits :: Map (KeyHash 'StakePool (EraCrypto era)) Coin
</span><a href="Cardano.Ledger.CertState.html#psDeposits"><span class="hs-identifier hs-var hs-var">psDeposits</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-270"></span><span>
</span><span id="line-271"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679502683"><span id="local-6989586621679504011"><span id="local-6989586621679504015"><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Core.Era.html#Era"><span class="hs-identifier hs-type">Era</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502683"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">DecShareCBOR</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#PState"><span class="hs-identifier hs-type">PState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502683"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">DecCBOR</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#PState"><span class="hs-identifier hs-type">PState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502683"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-272"></span><span>  </span><span id="local-6989586621679504018"><span class="annot"><span class="annottext">decCBOR :: forall s. Decoder s (PState era)
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">decCBOR</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Decoder s (PState era)
forall a s. DecShareCBOR a =&gt; Decoder s a
</span><span class="hs-identifier hs-var">decNoShareCBOR</span></span><span>
</span><span id="line-273"></span><span>
</span><span id="line-274"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679502688"><span id="local-6989586621679504023"><span id="local-6989586621679504027"><span id="local-6989586621679504030"><span class="annot"><a href="Cardano.Ledger.Core.Era.html#Era"><span class="hs-identifier hs-type">Era</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502688"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#PState"><span class="hs-identifier hs-type">PState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502688"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-275"></span><span>  </span><span id="local-6989586621679504036"><span class="annot"><span class="annottext">toJSON :: PState era -&gt; Value
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">object</span></span><span> </span><span class="annot"><span class="annottext">([Pair] -&gt; Value) -&gt; (PState era -&gt; [Pair]) -&gt; PState era -&gt; Value
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">PState era -&gt; [Pair]
forall e a era. (KeyValue e a, Era era) =&gt; PState era -&gt; [a]
</span><a href="Cardano.Ledger.CertState.html#toPStatePair"><span class="hs-identifier hs-var">toPStatePair</span></a></span><span>
</span><span id="line-276"></span><span>  </span><span id="local-6989586621679504041"><span class="annot"><span class="annottext">toEncoding :: PState era -&gt; Encoding
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">toEncoding</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Series -&gt; Encoding
</span><span class="hs-identifier hs-var">pairs</span></span><span> </span><span class="annot"><span class="annottext">(Series -&gt; Encoding)
-&gt; (PState era -&gt; Series) -&gt; PState era -&gt; Encoding
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">[Series] -&gt; Series
forall a. Monoid a =&gt; [a] -&gt; a
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#mconcat"><span class="hs-identifier hs-var">mconcat</span></a></span><span> </span><span class="annot"><span class="annottext">([Series] -&gt; Series)
-&gt; (PState era -&gt; [Series]) -&gt; PState era -&gt; Series
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">PState era -&gt; [Series]
forall e a era. (KeyValue e a, Era era) =&gt; PState era -&gt; [a]
</span><a href="Cardano.Ledger.CertState.html#toPStatePair"><span class="hs-identifier hs-var">toPStatePair</span></a></span><span>
</span><span id="line-277"></span><span>
</span><span id="line-278"></span><span id="local-6989586621679502689"><span id="local-6989586621679502690"><span id="local-6989586621679502691"><span class="annot"><a href="Cardano.Ledger.CertState.html#toPStatePair"><span class="hs-identifier hs-type">toPStatePair</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">KeyValue</span></span><span> </span><span class="annot"><a href="#local-6989586621679502689"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502690"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Ledger.Core.Era.html#Era"><span class="hs-identifier hs-type">Era</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502691"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Cardano.Ledger.CertState.html#PState"><span class="hs-identifier hs-type">PState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502691"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679502690"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span></span></span></span><span>
</span><span id="line-279"></span><span id="toPStatePair"><span class="annot"><span class="annottext">toPStatePair :: forall e a era. (KeyValue e a, Era era) =&gt; PState era -&gt; [a]
</span><a href="Cardano.Ledger.CertState.html#toPStatePair"><span class="hs-identifier hs-var hs-var">toPStatePair</span></a></span></span><span> </span><span class="annot"><a href="Cardano.Ledger.CertState.html#PState"><span class="hs-identifier hs-type">PState</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621679504064"><span id="local-6989586621679504065"><span id="local-6989586621679504066"><span id="local-6989586621679504067"><span class="annot"><span class="annottext">Map (KeyHash 'StakePool (EraCrypto era)) EpochNo
Map (KeyHash 'StakePool (EraCrypto era)) Coin
Map
  (KeyHash 'StakePool (EraCrypto era)) (PoolParams (EraCrypto era))
psStakePoolParams :: forall era.
PState era
-&gt; Map
     (KeyHash 'StakePool (EraCrypto era)) (PoolParams (EraCrypto era))
psFutureStakePoolParams :: forall era.
PState era
-&gt; Map
     (KeyHash 'StakePool (EraCrypto era)) (PoolParams (EraCrypto era))
psRetiring :: forall era.
PState era -&gt; Map (KeyHash 'StakePool (EraCrypto era)) EpochNo
psDeposits :: forall era.
PState era -&gt; Map (KeyHash 'StakePool (EraCrypto era)) Coin
psStakePoolParams :: Map
  (KeyHash 'StakePool (EraCrypto era)) (PoolParams (EraCrypto era))
psFutureStakePoolParams :: Map
  (KeyHash 'StakePool (EraCrypto era)) (PoolParams (EraCrypto era))
psRetiring :: Map (KeyHash 'StakePool (EraCrypto era)) EpochNo
psDeposits :: Map (KeyHash 'StakePool (EraCrypto era)) Coin
</span><a href="Cardano.Ledger.CertState.html#psStakePoolParams"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-280"></span><span>  </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;stakePoolParams&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key
-&gt; Map
     (KeyHash 'StakePool (EraCrypto era)) (PoolParams (EraCrypto era))
-&gt; a
forall v. ToJSON v =&gt; Key -&gt; v -&gt; a
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">Map
  (KeyHash 'StakePool (EraCrypto era)) (PoolParams (EraCrypto era))
</span><a href="#local-6989586621679504064"><span class="hs-identifier hs-var">psStakePoolParams</span></a></span><span>
</span><span id="line-281"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;futureStakePoolParams&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key
-&gt; Map
     (KeyHash 'StakePool (EraCrypto era)) (PoolParams (EraCrypto era))
-&gt; a
forall v. ToJSON v =&gt; Key -&gt; v -&gt; a
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">Map
  (KeyHash 'StakePool (EraCrypto era)) (PoolParams (EraCrypto era))
</span><a href="#local-6989586621679504065"><span class="hs-identifier hs-var">psFutureStakePoolParams</span></a></span><span>
</span><span id="line-282"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;retiring&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Map (KeyHash 'StakePool (EraCrypto era)) EpochNo -&gt; a
forall v. ToJSON v =&gt; Key -&gt; v -&gt; a
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">Map (KeyHash 'StakePool (EraCrypto era)) EpochNo
</span><a href="#local-6989586621679504066"><span class="hs-identifier hs-var">psRetiring</span></a></span><span>
</span><span id="line-283"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;deposits&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Map (KeyHash 'StakePool (EraCrypto era)) Coin -&gt; a
forall v. ToJSON v =&gt; Key -&gt; v -&gt; a
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">Map (KeyHash 'StakePool (EraCrypto era)) Coin
</span><a href="#local-6989586621679504067"><span class="hs-identifier hs-var">psDeposits</span></a></span><span>
</span><span id="line-284"></span><span>  </span><span class="hs-special">]</span><span>
</span><span id="line-285"></span><span>
</span><span id="line-286"></span><span class="hs-keyword">newtype</span><span> </span><span id="CommitteeState"><span class="annot"><a href="Cardano.Ledger.CertState.html#CommitteeState"><span class="hs-identifier hs-var">CommitteeState</span></a></span></span><span> </span><span id="local-6989586621679502698"><span class="annot"><a href="#local-6989586621679502698"><span class="hs-identifier hs-type">era</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="CommitteeState"><span class="annot"><a href="Cardano.Ledger.CertState.html#CommitteeState"><span class="hs-identifier hs-var">CommitteeState</span></a></span></span><span>
</span><span id="line-287"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="csCommitteeCreds"><span class="annot"><span class="annottext">forall era.
CommitteeState era
-&gt; Map
     (Credential 'ColdCommitteeRole (EraCrypto era))
     (Maybe (Credential 'HotCommitteeRole (EraCrypto era)))
</span><a href="Cardano.Ledger.CertState.html#csCommitteeCreds"><span class="hs-identifier hs-var hs-var">csCommitteeCreds</span></a></span></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-288"></span><span>      </span><span class="annot"><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#Map"><span class="hs-identifier hs-type">Map</span></a></span><span>
</span><span id="line-289"></span><span>        </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Credential.html#Credential"><span class="hs-identifier hs-type">Credential</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Cardano.Ledger.Keys.Internal.html#ColdCommitteeRole"><span class="hs-identifier hs-type">ColdCommitteeRole</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Core.Era.html#EraCrypto"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502698"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-290"></span><span>        </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Credential.html#Credential"><span class="hs-identifier hs-type">Credential</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Cardano.Ledger.Keys.Internal.html#HotCommitteeRole"><span class="hs-identifier hs-type">HotCommitteeRole</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Core.Era.html#EraCrypto"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502698"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-291"></span><span>  </span><span class="annot"><span class="hs-comment">-- ^ `Nothing` to indicate &quot;resigned&quot;.</span></span><span>
</span><span id="line-292"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-293"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679504071"><span id="local-6989586621679504077"><span class="annot"><span class="annottext">CommitteeState era -&gt; CommitteeState era -&gt; Bool
(CommitteeState era -&gt; CommitteeState era -&gt; Bool)
-&gt; (CommitteeState era -&gt; CommitteeState era -&gt; Bool)
-&gt; Eq (CommitteeState era)
forall era. CommitteeState era -&gt; CommitteeState era -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: forall era. CommitteeState era -&gt; CommitteeState era -&gt; Bool
== :: CommitteeState era -&gt; CommitteeState era -&gt; Bool
$c/= :: forall era. CommitteeState era -&gt; CommitteeState era -&gt; Bool
/= :: CommitteeState era -&gt; CommitteeState era -&gt; Bool
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/ghc-prim-0.10.0/src/GHC.Classes.html#Eq"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679504089"><span id="local-6989586621679504096"><span id="local-6989586621679504102"><span id="local-6989586621679504108"><span id="local-6989586621679504114"><span id="local-6989586621679504120"><span id="local-6989586621679504126"><span class="annot"><span class="annottext">Eq (CommitteeState era)
Eq (CommitteeState era) =&gt;
(CommitteeState era -&gt; CommitteeState era -&gt; Ordering)
-&gt; (CommitteeState era -&gt; CommitteeState era -&gt; Bool)
-&gt; (CommitteeState era -&gt; CommitteeState era -&gt; Bool)
-&gt; (CommitteeState era -&gt; CommitteeState era -&gt; Bool)
-&gt; (CommitteeState era -&gt; CommitteeState era -&gt; Bool)
-&gt; (CommitteeState era -&gt; CommitteeState era -&gt; CommitteeState era)
-&gt; (CommitteeState era -&gt; CommitteeState era -&gt; CommitteeState era)
-&gt; Ord (CommitteeState era)
CommitteeState era -&gt; CommitteeState era -&gt; Bool
CommitteeState era -&gt; CommitteeState era -&gt; Ordering
CommitteeState era -&gt; CommitteeState era -&gt; CommitteeState era
forall era. Eq (CommitteeState era)
forall a.
Eq a =&gt;
(a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
forall era. CommitteeState era -&gt; CommitteeState era -&gt; Bool
forall era. CommitteeState era -&gt; CommitteeState era -&gt; Ordering
forall era.
CommitteeState era -&gt; CommitteeState era -&gt; CommitteeState era
$ccompare :: forall era. CommitteeState era -&gt; CommitteeState era -&gt; Ordering
compare :: CommitteeState era -&gt; CommitteeState era -&gt; Ordering
$c&lt; :: forall era. CommitteeState era -&gt; CommitteeState era -&gt; Bool
&lt; :: CommitteeState era -&gt; CommitteeState era -&gt; Bool
$c&lt;= :: forall era. CommitteeState era -&gt; CommitteeState era -&gt; Bool
&lt;= :: CommitteeState era -&gt; CommitteeState era -&gt; Bool
$c&gt; :: forall era. CommitteeState era -&gt; CommitteeState era -&gt; Bool
&gt; :: CommitteeState era -&gt; CommitteeState era -&gt; Bool
$c&gt;= :: forall era. CommitteeState era -&gt; CommitteeState era -&gt; Bool
&gt;= :: CommitteeState era -&gt; CommitteeState era -&gt; Bool
$cmax :: forall era.
CommitteeState era -&gt; CommitteeState era -&gt; CommitteeState era
max :: CommitteeState era -&gt; CommitteeState era -&gt; CommitteeState era
$cmin :: forall era.
CommitteeState era -&gt; CommitteeState era -&gt; CommitteeState era
min :: CommitteeState era -&gt; CommitteeState era -&gt; CommitteeState era
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/ghc-prim-0.10.0/src/GHC.Classes.html#Ord"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></a></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679504142"><span id="local-6989586621679504148"><span id="local-6989586621679504152"><span class="annot"><span class="annottext">Int -&gt; CommitteeState era -&gt; ShowS
[CommitteeState era] -&gt; ShowS
CommitteeState era -&gt; String
(Int -&gt; CommitteeState era -&gt; ShowS)
-&gt; (CommitteeState era -&gt; String)
-&gt; ([CommitteeState era] -&gt; ShowS)
-&gt; Show (CommitteeState era)
forall era. Int -&gt; CommitteeState era -&gt; ShowS
forall era. [CommitteeState era] -&gt; ShowS
forall era. CommitteeState era -&gt; String
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: forall era. Int -&gt; CommitteeState era -&gt; ShowS
showsPrec :: Int -&gt; CommitteeState era -&gt; ShowS
$cshow :: forall era. CommitteeState era -&gt; String
show :: CommitteeState era -&gt; String
$cshowList :: forall era. [CommitteeState era] -&gt; ShowS
showList :: [CommitteeState era] -&gt; ShowS
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Show.html#Show"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679504157"><span id="local-6989586621679504159"><span class="annot"><span class="annottext">(forall x. CommitteeState era -&gt; Rep (CommitteeState era) x)
-&gt; (forall x. Rep (CommitteeState era) x -&gt; CommitteeState era)
-&gt; Generic (CommitteeState era)
forall x. Rep (CommitteeState era) x -&gt; CommitteeState era
forall x. CommitteeState era -&gt; Rep (CommitteeState era) x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
forall era x. Rep (CommitteeState era) x -&gt; CommitteeState era
forall era x. CommitteeState era -&gt; Rep (CommitteeState era) x
$cfrom :: forall era x. CommitteeState era -&gt; Rep (CommitteeState era) x
from :: forall x. CommitteeState era -&gt; Rep (CommitteeState era) x
$cto :: forall era x. Rep (CommitteeState era) x -&gt; CommitteeState era
to :: forall x. Rep (CommitteeState era) x -&gt; CommitteeState era
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Generics.html#Generic"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Generic</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679504162"><span id="local-6989586621679504168"><span id="local-6989586621679504174"><span class="annot"><span class="annottext">Context -&gt; CommitteeState era -&gt; IO (Maybe ThunkInfo)
Proxy (CommitteeState era) -&gt; String
(Context -&gt; CommitteeState era -&gt; IO (Maybe ThunkInfo))
-&gt; (Context -&gt; CommitteeState era -&gt; IO (Maybe ThunkInfo))
-&gt; (Proxy (CommitteeState era) -&gt; String)
-&gt; NoThunks (CommitteeState era)
forall era. Context -&gt; CommitteeState era -&gt; IO (Maybe ThunkInfo)
forall era. Proxy (CommitteeState era) -&gt; String
forall a.
(Context -&gt; a -&gt; IO (Maybe ThunkInfo))
-&gt; (Context -&gt; a -&gt; IO (Maybe ThunkInfo))
-&gt; (Proxy a -&gt; String)
-&gt; NoThunks a
$cnoThunks :: forall era. Context -&gt; CommitteeState era -&gt; IO (Maybe ThunkInfo)
noThunks :: Context -&gt; CommitteeState era -&gt; IO (Maybe ThunkInfo)
$cwNoThunks :: forall era. Context -&gt; CommitteeState era -&gt; IO (Maybe ThunkInfo)
wNoThunks :: Context -&gt; CommitteeState era -&gt; IO (Maybe ThunkInfo)
$cshowTypeOf :: forall era. Proxy (CommitteeState era) -&gt; String
showTypeOf :: Proxy (CommitteeState era) -&gt; String
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">NoThunks</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679504185"><span class="annot"><span class="annottext">CommitteeState era -&gt; ()
(CommitteeState era -&gt; ()) -&gt; NFData (CommitteeState era)
forall era. CommitteeState era -&gt; ()
forall a. (a -&gt; ()) -&gt; NFData a
$crnf :: forall era. CommitteeState era -&gt; ()
rnf :: CommitteeState era -&gt; ()
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/deepseq-1.4.8.1/src/Control.DeepSeq.html#NFData"><span class="hs-identifier hs-var hs-var hs-var hs-var">NFData</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679504194"><span class="annot"><span class="annottext">CommitteeState era
CommitteeState era -&gt; Default (CommitteeState era)
forall era. CommitteeState era
forall a. a -&gt; Default a
$cdef :: forall era. CommitteeState era
def :: CommitteeState era
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">Default</span></span></span><span class="hs-special">)</span><span>
</span><span id="line-294"></span><span>
</span><span id="line-295"></span><span id="local-6989586621679502736"><span id="local-6989586621679504206"><span id="local-6989586621679504215"><span id="local-6989586621679504224"><span class="hs-keyword">deriving</span><span> </span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Cardano.Ledger.Core.Era.html#Era"><span class="hs-identifier hs-type">Era</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502736"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">EncCBOR</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#CommitteeState"><span class="hs-identifier hs-type">CommitteeState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502736"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span></span></span><span>
</span><span id="line-296"></span><span>
</span><span id="line-297"></span><span class="hs-comment">-- TODO: Implement sharing: https://github.com/intersectmbo/cardano-ledger/issues/3486</span><span>
</span><span id="line-298"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679502738"><span id="local-6989586621679504248"><span id="local-6989586621679504253"><span class="annot"><a href="Cardano.Ledger.Core.Era.html#Era"><span class="hs-identifier hs-type">Era</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502738"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">DecShareCBOR</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#CommitteeState"><span class="hs-identifier hs-type">CommitteeState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502738"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-299"></span><span>  </span><span id="local-6989586621679504267"><span class="annot"><span class="annottext">decShareCBOR :: forall s.
Share (CommitteeState era) -&gt; Decoder s (CommitteeState era)
</span><a href="#local-6989586621679504267"><span class="hs-identifier hs-var hs-var hs-var hs-var">decShareCBOR</span></a></span></span><span> </span><span class="annot"><span class="annottext">Share (CommitteeState era)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map
  (Credential 'ColdCommitteeRole (EraCrypto era))
  (Maybe (Credential 'HotCommitteeRole (EraCrypto era)))
-&gt; CommitteeState era
forall era.
Map
  (Credential 'ColdCommitteeRole (EraCrypto era))
  (Maybe (Credential 'HotCommitteeRole (EraCrypto era)))
-&gt; CommitteeState era
</span><a href="Cardano.Ledger.CertState.html#CommitteeState"><span class="hs-identifier hs-var">CommitteeState</span></a></span><span> </span><span class="annot"><span class="annottext">(Map
   (Credential 'ColdCommitteeRole (EraCrypto era))
   (Maybe (Credential 'HotCommitteeRole (EraCrypto era)))
 -&gt; CommitteeState era)
-&gt; Decoder
     s
     (Map
        (Credential 'ColdCommitteeRole (EraCrypto era))
        (Maybe (Credential 'HotCommitteeRole (EraCrypto era))))
-&gt; Decoder s (CommitteeState era)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Decoder
  s
  (Map
     (Credential 'ColdCommitteeRole (EraCrypto era))
     (Maybe (Credential 'HotCommitteeRole (EraCrypto era))))
forall s.
Decoder
  s
  (Map
     (Credential 'ColdCommitteeRole (EraCrypto era))
     (Maybe (Credential 'HotCommitteeRole (EraCrypto era))))
forall a s. DecCBOR a =&gt; Decoder s a
</span><span class="hs-identifier hs-var">decCBOR</span></span><span>
</span><span id="line-300"></span><span>
</span><span id="line-301"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679502744"><span id="local-6989586621679504276"><span id="local-6989586621679504280"><span class="annot"><a href="Cardano.Ledger.Core.Era.html#Era"><span class="hs-identifier hs-type">Era</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502744"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">DecCBOR</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#CommitteeState"><span class="hs-identifier hs-type">CommitteeState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502744"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-302"></span><span>  </span><span id="local-6989586621679504283"><span class="annot"><span class="annottext">decCBOR :: forall s. Decoder s (CommitteeState era)
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">decCBOR</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Decoder s (CommitteeState era)
forall a s. DecShareCBOR a =&gt; Decoder s a
</span><span class="hs-identifier hs-var">decNoShareCBOR</span></span><span>
</span><span id="line-303"></span><span>
</span><span id="line-304"></span><span id="local-6989586621679502750"><span id="local-6989586621679504286"><span id="local-6989586621679504292"><span id="local-6989586621679504298"><span id="local-6989586621679504304"><span id="local-6989586621679504310"><span class="hs-keyword">deriving</span><span> </span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Cardano.Ledger.Core.Era.html#Era"><span class="hs-identifier hs-type">Era</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502750"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#CommitteeState"><span class="hs-identifier hs-type">CommitteeState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502750"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span></span></span></span></span><span>
</span><span id="line-305"></span><span>
</span><span id="line-306"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679502756"><span id="local-6989586621679504331"><span id="local-6989586621679504335"><span class="annot"><a href="Cardano.Ledger.Core.Era.html#Era"><span class="hs-identifier hs-type">Era</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502756"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToCBOR</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#CommitteeState"><span class="hs-identifier hs-type">CommitteeState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502756"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-307"></span><span>  </span><span id="local-6989586621679504340"><span class="annot"><span class="annottext">toCBOR :: CommitteeState era -&gt; Encoding
</span><a href="#local-6989586621679504340"><span class="hs-identifier hs-var hs-var hs-var hs-var">toCBOR</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall era t. (Era era, EncCBOR t) =&gt; t -&gt; Encoding
</span><a href="Cardano.Ledger.Core.Era.html#toEraCBOR"><span class="hs-identifier hs-var">toEraCBOR</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679502756"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-308"></span><span>
</span><span id="line-309"></span><span class="annot"><span class="hs-comment">-- | The state that tracks the voting entities (DReps and Constitutional Committee members)</span></span><span>
</span><span id="line-310"></span><span class="hs-keyword">data</span><span> </span><span id="VState"><span class="annot"><a href="Cardano.Ledger.CertState.html#VState"><span class="hs-identifier hs-var">VState</span></a></span></span><span> </span><span id="local-6989586621679502759"><span class="annot"><a href="#local-6989586621679502759"><span class="hs-identifier hs-type">era</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="VState"><span class="annot"><a href="Cardano.Ledger.CertState.html#VState"><span class="hs-identifier hs-var">VState</span></a></span></span><span>
</span><span id="line-311"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="vsDReps"><span class="annot"><span class="annottext">forall era.
VState era
-&gt; Map
     (Credential 'DRepRole (EraCrypto era)) (DRepState (EraCrypto era))
</span><a href="Cardano.Ledger.CertState.html#vsDReps"><span class="hs-identifier hs-var hs-var">vsDReps</span></a></span></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-312"></span><span>      </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span> </span><span class="annot"><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#Map"><span class="hs-identifier hs-type">Map</span></a></span><span>
</span><span id="line-313"></span><span>          </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Credential.html#Credential"><span class="hs-identifier hs-type">Credential</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Cardano.Ledger.Keys.Internal.html#DRepRole"><span class="hs-identifier hs-type">DRepRole</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Core.Era.html#EraCrypto"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502759"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-314"></span><span>          </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.DRep.html#DRepState"><span class="hs-identifier hs-type">DRepState</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Core.Era.html#EraCrypto"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502759"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-315"></span><span>       </span><span class="hs-special">)</span><span>
</span><span id="line-316"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="vsCommitteeState"><span class="annot"><span class="annottext">forall era. VState era -&gt; CommitteeState era
</span><a href="Cardano.Ledger.CertState.html#vsCommitteeState"><span class="hs-identifier hs-var hs-var">vsCommitteeState</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#CommitteeState"><span class="hs-identifier hs-type">CommitteeState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502759"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-317"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="vsNumDormantEpochs"><span class="annot"><span class="annottext">forall era. VState era -&gt; EpochNo
</span><a href="Cardano.Ledger.CertState.html#vsNumDormantEpochs"><span class="hs-identifier hs-var hs-var">vsNumDormantEpochs</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">EpochNo</span></span><span>
</span><span id="line-318"></span><span>  </span><span class="hs-comment">-- ^ Number of contiguous epochs in which there are exactly zero</span><span>
</span><span id="line-319"></span><span>  </span><span class="hs-comment">-- active governance proposals to vote on. It is incremented in every</span><span>
</span><span id="line-320"></span><span>  </span><span class="hs-comment">-- EPOCH rule if the number of active governance proposals to vote on</span><span>
</span><span id="line-321"></span><span>  </span><span class="hs-comment">-- continues to be zero. It is reset to zero when a new governance</span><span>
</span><span id="line-322"></span><span>  </span><span class="hs-comment">-- action is successfully proposed. We need this counter in order to</span><span>
</span><span id="line-323"></span><span>  </span><span class="hs-comment">-- bump DRep expiries through dormant periods when DReps do not have</span><span>
</span><span id="line-324"></span><span>  </span><span class="hs-comment">-- an opportunity to vote on anything.</span><span>
</span><span id="line-325"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-326"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679504348"><span id="local-6989586621679504356"><span id="local-6989586621679504360"><span class="annot"><span class="annottext">Int -&gt; VState era -&gt; ShowS
[VState era] -&gt; ShowS
VState era -&gt; String
(Int -&gt; VState era -&gt; ShowS)
-&gt; (VState era -&gt; String)
-&gt; ([VState era] -&gt; ShowS)
-&gt; Show (VState era)
forall era. Int -&gt; VState era -&gt; ShowS
forall era. [VState era] -&gt; ShowS
forall era. VState era -&gt; String
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: forall era. Int -&gt; VState era -&gt; ShowS
showsPrec :: Int -&gt; VState era -&gt; ShowS
$cshow :: forall era. VState era -&gt; String
show :: VState era -&gt; String
$cshowList :: forall era. [VState era] -&gt; ShowS
showList :: [VState era] -&gt; ShowS
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Show.html#Show"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679504364"><span id="local-6989586621679504371"><span class="annot"><span class="annottext">VState era -&gt; VState era -&gt; Bool
(VState era -&gt; VState era -&gt; Bool)
-&gt; (VState era -&gt; VState era -&gt; Bool) -&gt; Eq (VState era)
forall era. VState era -&gt; VState era -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: forall era. VState era -&gt; VState era -&gt; Bool
== :: VState era -&gt; VState era -&gt; Bool
$c/= :: forall era. VState era -&gt; VState era -&gt; Bool
/= :: VState era -&gt; VState era -&gt; Bool
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/ghc-prim-0.10.0/src/GHC.Classes.html#Eq"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679504376"><span id="local-6989586621679504378"><span class="annot"><span class="annottext">(forall x. VState era -&gt; Rep (VState era) x)
-&gt; (forall x. Rep (VState era) x -&gt; VState era)
-&gt; Generic (VState era)
forall x. Rep (VState era) x -&gt; VState era
forall x. VState era -&gt; Rep (VState era) x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
forall era x. Rep (VState era) x -&gt; VState era
forall era x. VState era -&gt; Rep (VState era) x
$cfrom :: forall era x. VState era -&gt; Rep (VState era) x
from :: forall x. VState era -&gt; Rep (VState era) x
$cto :: forall era x. Rep (VState era) x -&gt; VState era
to :: forall x. Rep (VState era) x -&gt; VState era
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Generics.html#Generic"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Generic</span></a></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-327"></span><span>
</span><span id="line-328"></span><span class="annot"><span class="hs-comment">-- | Function that looks up the deposit for currently registered DRep</span></span><span>
</span><span id="line-329"></span><span id="local-6989586621679502774"><span class="annot"><a href="Cardano.Ledger.CertState.html#lookupDepositVState"><span class="hs-identifier hs-type">lookupDepositVState</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Ledger.CertState.html#VState"><span class="hs-identifier hs-type">VState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502774"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.Ledger.Credential.html#Credential"><span class="hs-identifier hs-type">Credential</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Cardano.Ledger.Keys.Internal.html#DRepRole"><span class="hs-identifier hs-type">DRepRole</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Core.Era.html#EraCrypto"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502774"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="Cardano.Ledger.Coin.html#Coin"><span class="hs-identifier hs-type">Coin</span></a></span></span><span>
</span><span id="line-330"></span><span id="lookupDepositVState"><span class="annot"><span class="annottext">lookupDepositVState :: forall era.
VState era -&gt; Credential 'DRepRole (EraCrypto era) -&gt; Maybe Coin
</span><a href="Cardano.Ledger.CertState.html#lookupDepositVState"><span class="hs-identifier hs-var hs-var">lookupDepositVState</span></a></span></span><span> </span><span id="local-6989586621679504385"><span class="annot"><span class="annottext">VState era
</span><a href="#local-6989586621679504385"><span class="hs-identifier hs-var">vstate</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(DRepState (EraCrypto era) -&gt; Coin)
-&gt; Maybe (DRepState (EraCrypto era)) -&gt; Maybe Coin
forall a b. (a -&gt; b) -&gt; Maybe a -&gt; Maybe b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#fmap"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">DRepState (EraCrypto era) -&gt; Coin
forall c. DRepState c -&gt; Coin
</span><a href="Cardano.Ledger.DRep.html#drepDeposit"><span class="hs-identifier hs-var">drepDeposit</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe (DRepState (EraCrypto era)) -&gt; Maybe Coin)
-&gt; (Credential 'DRepRole (EraCrypto era)
    -&gt; Maybe (DRepState (EraCrypto era)))
-&gt; Credential 'DRepRole (EraCrypto era)
-&gt; Maybe Coin
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(Credential 'DRepRole (EraCrypto era)
 -&gt; Map
      (Credential 'DRepRole (EraCrypto era)) (DRepState (EraCrypto era))
 -&gt; Maybe (DRepState (EraCrypto era)))
-&gt; Map
     (Credential 'DRepRole (EraCrypto era)) (DRepState (EraCrypto era))
-&gt; Credential 'DRepRole (EraCrypto era)
-&gt; Maybe (DRepState (EraCrypto era))
forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#flip"><span class="hs-identifier hs-var">flip</span></a></span><span> </span><span class="annot"><span class="annottext">Credential 'DRepRole (EraCrypto era)
-&gt; Map
     (Credential 'DRepRole (EraCrypto era)) (DRepState (EraCrypto era))
-&gt; Maybe (DRepState (EraCrypto era))
forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Maybe a
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#lookup"><span class="hs-identifier hs-var">Map.lookup</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">VState era
</span><a href="#local-6989586621679504385"><span class="hs-identifier hs-var">vstate</span></a></span><span> </span><span class="annot"><span class="annottext">VState era
-&gt; Getting
     (Map
        (Credential 'DRepRole (EraCrypto era)) (DRepState (EraCrypto era)))
     (VState era)
     (Map
        (Credential 'DRepRole (EraCrypto era)) (DRepState (EraCrypto era)))
-&gt; Map
     (Credential 'DRepRole (EraCrypto era)) (DRepState (EraCrypto era))
forall s a. s -&gt; Getting a s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Getting
  (Map
     (Credential 'DRepRole (EraCrypto era)) (DRepState (EraCrypto era)))
  (VState era)
  (Map
     (Credential 'DRepRole (EraCrypto era)) (DRepState (EraCrypto era)))
forall era (f :: * -&gt; *).
Functor f =&gt;
(Map
   (Credential 'DRepRole (EraCrypto era)) (DRepState (EraCrypto era))
 -&gt; f (Map
         (Credential 'DRepRole (EraCrypto era))
         (DRepState (EraCrypto era))))
-&gt; VState era -&gt; f (VState era)
</span><a href="Cardano.Ledger.CertState.html#vsDRepsL"><span class="hs-identifier hs-var">vsDRepsL</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-331"></span><span>
</span><span id="line-332"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679502793"><span class="annot"><span class="hs-identifier hs-type">Default</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#VState"><span class="hs-identifier hs-type">VState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502793"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-333"></span><span>  </span><span id="local-6989586621679504395"><span class="annot"><span class="annottext">def :: VState era
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">def</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map
  (Credential 'DRepRole (EraCrypto era)) (DRepState (EraCrypto era))
-&gt; CommitteeState era -&gt; EpochNo -&gt; VState era
forall era.
Map
  (Credential 'DRepRole (EraCrypto era)) (DRepState (EraCrypto era))
-&gt; CommitteeState era -&gt; EpochNo -&gt; VState era
</span><a href="Cardano.Ledger.CertState.html#VState"><span class="hs-identifier hs-var">VState</span></a></span><span> </span><span class="annot"><span class="annottext">Map
  (Credential 'DRepRole (EraCrypto era)) (DRepState (EraCrypto era))
forall a. Default a =&gt; a
</span><span class="hs-identifier hs-var">def</span></span><span> </span><span class="annot"><span class="annottext">CommitteeState era
forall a. Default a =&gt; a
</span><span class="hs-identifier hs-var">def</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word64 -&gt; EpochNo
</span><span class="hs-identifier hs-var">EpochNo</span></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span>
</span><span id="line-334"></span><span>
</span><span id="line-335"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679502796"><span id="local-6989586621679504399"><span id="local-6989586621679504403"><span id="local-6989586621679504409"><span class="annot"><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/Data.Typeable.Internal.html#Typeable"><span class="hs-identifier hs-type">Typeable</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Core.Era.html#EraCrypto"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502796"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">NoThunks</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#VState"><span class="hs-identifier hs-type">VState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502796"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span></span></span><span>
</span><span id="line-336"></span><span>
</span><span id="line-337"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679502799"><span id="local-6989586621679504445"><span class="annot"><a href="Cardano.Ledger.Core.Era.html#Era"><span class="hs-identifier hs-type">Era</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502799"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/deepseq-1.4.8.1/src/Control.DeepSeq.html#NFData"><span class="hs-identifier hs-type">NFData</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#VState"><span class="hs-identifier hs-type">VState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502799"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-338"></span><span>
</span><span id="line-339"></span><span class="hs-comment">-- TODO: Implement sharing: https://github.com/intersectmbo/cardano-ledger/issues/3486</span><span>
</span><span id="line-340"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679502801"><span id="local-6989586621679504472"><span id="local-6989586621679504477"><span class="annot"><a href="Cardano.Ledger.Core.Era.html#Era"><span class="hs-identifier hs-type">Era</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502801"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">DecShareCBOR</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#VState"><span class="hs-identifier hs-type">VState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502801"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-341"></span><span>  </span><span id="local-6989586621679504487"><span class="annot"><span class="annottext">decShareCBOR :: forall s. Share (VState era) -&gt; Decoder s (VState era)
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">decShareCBOR</span></span></span><span> </span><span class="annot"><span class="annottext">Share (VState era)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-342"></span><span>    </span><span class="annot"><span class="annottext">Decode ('Closed 'Dense) (VState era) -&gt; Decoder s (VState era)
forall (w :: Wrapped) t s. Decode w t -&gt; Decoder s t
</span><span class="hs-identifier hs-var">decode</span></span><span> </span><span class="annot"><span class="annottext">(Decode ('Closed 'Dense) (VState era) -&gt; Decoder s (VState era))
-&gt; Decode ('Closed 'Dense) (VState era) -&gt; Decoder s (VState era)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-343"></span><span>      </span><span class="annot"><span class="annottext">(Map
   (Credential 'DRepRole (EraCrypto era)) (DRepState (EraCrypto era))
 -&gt; CommitteeState era -&gt; EpochNo -&gt; VState era)
-&gt; Decode
     ('Closed 'Dense)
     (Map
        (Credential 'DRepRole (EraCrypto era)) (DRepState (EraCrypto era))
      -&gt; CommitteeState era -&gt; EpochNo -&gt; VState era)
forall t. t -&gt; Decode ('Closed 'Dense) t
</span><span class="hs-identifier hs-var">RecD</span></span><span> </span><span class="annot"><span class="annottext">Map
  (Credential 'DRepRole (EraCrypto era)) (DRepState (EraCrypto era))
-&gt; CommitteeState era -&gt; EpochNo -&gt; VState era
forall era.
Map
  (Credential 'DRepRole (EraCrypto era)) (DRepState (EraCrypto era))
-&gt; CommitteeState era -&gt; EpochNo -&gt; VState era
</span><a href="Cardano.Ledger.CertState.html#VState"><span class="hs-identifier hs-var">VState</span></a></span><span>
</span><span id="line-344"></span><span>        </span><span class="annot"><span class="annottext">Decode
  ('Closed 'Dense)
  (Map
     (Credential 'DRepRole (EraCrypto era)) (DRepState (EraCrypto era))
   -&gt; CommitteeState era -&gt; EpochNo -&gt; VState era)
-&gt; Decode
     ('Closed Any)
     (Map
        (Credential 'DRepRole (EraCrypto era)) (DRepState (EraCrypto era)))
-&gt; Decode
     ('Closed 'Dense) (CommitteeState era -&gt; EpochNo -&gt; VState era)
forall (w1 :: Wrapped) a t (w :: Density).
Decode w1 (a -&gt; t) -&gt; Decode ('Closed w) a -&gt; Decode w1 t
</span><span class="hs-operator hs-var">&lt;!</span></span><span> </span><span class="annot"><span class="annottext">Decode
  ('Closed Any)
  (Map
     (Credential 'DRepRole (EraCrypto era)) (DRepState (EraCrypto era)))
forall t (w :: Wrapped). DecCBOR t =&gt; Decode w t
</span><span class="hs-identifier hs-var">From</span></span><span>
</span><span id="line-345"></span><span>        </span><span class="annot"><span class="annottext">Decode
  ('Closed 'Dense) (CommitteeState era -&gt; EpochNo -&gt; VState era)
-&gt; Decode ('Closed 'Dense) (CommitteeState era)
-&gt; Decode ('Closed 'Dense) (EpochNo -&gt; VState era)
forall (w1 :: Wrapped) a t (w :: Density).
Decode w1 (a -&gt; t) -&gt; Decode ('Closed w) a -&gt; Decode w1 t
</span><span class="hs-operator hs-var">&lt;!</span></span><span> </span><span class="annot"><span class="annottext">(forall s. Decoder s (CommitteeState era))
-&gt; Decode ('Closed 'Dense) (CommitteeState era)
forall t. (forall s. Decoder s t) -&gt; Decode ('Closed 'Dense) t
</span><span class="hs-identifier hs-var">D</span></span><span> </span><span class="annot"><span class="annottext">Decoder s (CommitteeState era)
forall s. Decoder s (CommitteeState era)
forall a s. DecShareCBOR a =&gt; Decoder s a
</span><span class="hs-identifier hs-var">decNoShareCBOR</span></span><span>
</span><span id="line-346"></span><span>        </span><span class="annot"><span class="annottext">Decode ('Closed 'Dense) (EpochNo -&gt; VState era)
-&gt; Decode ('Closed Any) EpochNo
-&gt; Decode ('Closed 'Dense) (VState era)
forall (w1 :: Wrapped) a t (w :: Density).
Decode w1 (a -&gt; t) -&gt; Decode ('Closed w) a -&gt; Decode w1 t
</span><span class="hs-operator hs-var">&lt;!</span></span><span> </span><span class="annot"><span class="annottext">Decode ('Closed Any) EpochNo
forall t (w :: Wrapped). DecCBOR t =&gt; Decode w t
</span><span class="hs-identifier hs-var">From</span></span><span>
</span><span id="line-347"></span><span>
</span><span id="line-348"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679502821"><span id="local-6989586621679504499"><span id="local-6989586621679504503"><span class="annot"><a href="Cardano.Ledger.Core.Era.html#Era"><span class="hs-identifier hs-type">Era</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502821"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">DecCBOR</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#VState"><span class="hs-identifier hs-type">VState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502821"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-349"></span><span>  </span><span id="local-6989586621679504506"><span class="annot"><span class="annottext">decCBOR :: forall s. Decoder s (VState era)
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">decCBOR</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Decoder s (VState era)
forall a s. DecShareCBOR a =&gt; Decoder s a
</span><span class="hs-identifier hs-var">decNoShareCBOR</span></span><span>
</span><span id="line-350"></span><span>
</span><span id="line-351"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679502824"><span id="local-6989586621679504514"><span id="local-6989586621679504518"><span class="annot"><a href="Cardano.Ledger.Core.Era.html#Era"><span class="hs-identifier hs-type">Era</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502824"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">EncCBOR</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#VState"><span class="hs-identifier hs-type">VState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502824"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-352"></span><span>  </span><span id="local-6989586621679504529"><span class="annot"><span class="annottext">encCBOR :: VState era -&gt; Encoding
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">encCBOR</span></span></span><span> </span><span class="annot"><a href="Cardano.Ledger.CertState.html#VState"><span class="hs-identifier hs-type">VState</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621679504530"><span id="local-6989586621679504531"><span id="local-6989586621679504532"><span class="annot"><span class="annottext">Map
  (Credential 'DRepRole (EraCrypto era)) (DRepState (EraCrypto era))
EpochNo
CommitteeState era
vsDReps :: forall era.
VState era
-&gt; Map
     (Credential 'DRepRole (EraCrypto era)) (DRepState (EraCrypto era))
vsCommitteeState :: forall era. VState era -&gt; CommitteeState era
vsNumDormantEpochs :: forall era. VState era -&gt; EpochNo
vsDReps :: Map
  (Credential 'DRepRole (EraCrypto era)) (DRepState (EraCrypto era))
vsCommitteeState :: CommitteeState era
vsNumDormantEpochs :: EpochNo
</span><a href="Cardano.Ledger.CertState.html#vsDReps"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-353"></span><span>    </span><span class="annot"><span class="annottext">Encode ('Closed 'Dense) (VState era) -&gt; Encoding
forall (w :: Wrapped) t. Encode w t -&gt; Encoding
</span><span class="hs-identifier hs-var">encode</span></span><span> </span><span class="annot"><span class="annottext">(Encode ('Closed 'Dense) (VState era) -&gt; Encoding)
-&gt; Encode ('Closed 'Dense) (VState era) -&gt; Encoding
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-354"></span><span>      </span><span class="annot"><span class="annottext">(Map
   (Credential 'DRepRole (EraCrypto era)) (DRepState (EraCrypto era))
 -&gt; CommitteeState era -&gt; EpochNo -&gt; VState era)
-&gt; Encode
     ('Closed 'Dense)
     (Map
        (Credential 'DRepRole (EraCrypto era)) (DRepState (EraCrypto era))
      -&gt; CommitteeState era -&gt; EpochNo -&gt; VState era)
forall t. t -&gt; Encode ('Closed 'Dense) t
</span><span class="hs-identifier hs-var">Rec</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era.
Map
  (Credential 'DRepRole (EraCrypto era)) (DRepState (EraCrypto era))
-&gt; CommitteeState era -&gt; EpochNo -&gt; VState era
</span><a href="Cardano.Ledger.CertState.html#VState"><span class="hs-identifier hs-var">VState</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679502824"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-355"></span><span>        </span><span class="annot"><span class="annottext">Encode
  ('Closed 'Dense)
  (Map
     (Credential 'DRepRole (EraCrypto era)) (DRepState (EraCrypto era))
   -&gt; CommitteeState era -&gt; EpochNo -&gt; VState era)
-&gt; Encode
     ('Closed 'Dense)
     (Map
        (Credential 'DRepRole (EraCrypto era)) (DRepState (EraCrypto era)))
-&gt; Encode
     ('Closed 'Dense) (CommitteeState era -&gt; EpochNo -&gt; VState era)
forall (w :: Wrapped) a t (r :: Density).
Encode w (a -&gt; t) -&gt; Encode ('Closed r) a -&gt; Encode w t
</span><span class="hs-operator hs-var">!&gt;</span></span><span> </span><span class="annot"><span class="annottext">Map
  (Credential 'DRepRole (EraCrypto era)) (DRepState (EraCrypto era))
-&gt; Encode
     ('Closed 'Dense)
     (Map
        (Credential 'DRepRole (EraCrypto era)) (DRepState (EraCrypto era)))
forall t. EncCBOR t =&gt; t -&gt; Encode ('Closed 'Dense) t
</span><span class="hs-identifier hs-var">To</span></span><span> </span><span class="annot"><span class="annottext">Map
  (Credential 'DRepRole (EraCrypto era)) (DRepState (EraCrypto era))
</span><a href="#local-6989586621679504530"><span class="hs-identifier hs-var">vsDReps</span></a></span><span>
</span><span id="line-356"></span><span>        </span><span class="annot"><span class="annottext">Encode
  ('Closed 'Dense) (CommitteeState era -&gt; EpochNo -&gt; VState era)
-&gt; Encode ('Closed 'Dense) (CommitteeState era)
-&gt; Encode ('Closed 'Dense) (EpochNo -&gt; VState era)
forall (w :: Wrapped) a t (r :: Density).
Encode w (a -&gt; t) -&gt; Encode ('Closed r) a -&gt; Encode w t
</span><span class="hs-operator hs-var">!&gt;</span></span><span> </span><span class="annot"><span class="annottext">CommitteeState era -&gt; Encode ('Closed 'Dense) (CommitteeState era)
forall t. EncCBOR t =&gt; t -&gt; Encode ('Closed 'Dense) t
</span><span class="hs-identifier hs-var">To</span></span><span> </span><span class="annot"><span class="annottext">CommitteeState era
</span><a href="#local-6989586621679504531"><span class="hs-identifier hs-var">vsCommitteeState</span></a></span><span>
</span><span id="line-357"></span><span>        </span><span class="annot"><span class="annottext">Encode ('Closed 'Dense) (EpochNo -&gt; VState era)
-&gt; Encode ('Closed 'Dense) EpochNo
-&gt; Encode ('Closed 'Dense) (VState era)
forall (w :: Wrapped) a t (r :: Density).
Encode w (a -&gt; t) -&gt; Encode ('Closed r) a -&gt; Encode w t
</span><span class="hs-operator hs-var">!&gt;</span></span><span> </span><span class="annot"><span class="annottext">EpochNo -&gt; Encode ('Closed 'Dense) EpochNo
forall t. EncCBOR t =&gt; t -&gt; Encode ('Closed 'Dense) t
</span><span class="hs-identifier hs-var">To</span></span><span> </span><span class="annot"><span class="annottext">EpochNo
</span><a href="#local-6989586621679504532"><span class="hs-identifier hs-var">vsNumDormantEpochs</span></a></span><span>
</span><span id="line-358"></span><span>
</span><span id="line-359"></span><span class="hs-comment">-- | The state associated with the DELPL rule, which combines the DELEG rule</span><span>
</span><span id="line-360"></span><span class="hs-comment">-- and the POOL rule.</span><span>
</span><span id="line-361"></span><span class="hs-keyword">data</span><span> </span><span id="CertState"><span class="annot"><a href="Cardano.Ledger.CertState.html#CertState"><span class="hs-identifier hs-var">CertState</span></a></span></span><span> </span><span id="local-6989586621679502834"><span class="annot"><a href="#local-6989586621679502834"><span class="hs-identifier hs-type">era</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="CertState"><span class="annot"><a href="Cardano.Ledger.CertState.html#CertState"><span class="hs-identifier hs-var">CertState</span></a></span></span><span>
</span><span id="line-362"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="certVState"><span class="annot"><span class="annottext">forall era. CertState era -&gt; VState era
</span><a href="Cardano.Ledger.CertState.html#certVState"><span class="hs-identifier hs-var hs-var">certVState</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#VState"><span class="hs-identifier hs-type">VState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502834"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-363"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="certPState"><span class="annot"><span class="annottext">forall era. CertState era -&gt; PState era
</span><a href="Cardano.Ledger.CertState.html#certPState"><span class="hs-identifier hs-var hs-var">certPState</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#PState"><span class="hs-identifier hs-type">PState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502834"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-364"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="certDState"><span class="annot"><span class="annottext">forall era. CertState era -&gt; DState era
</span><a href="Cardano.Ledger.CertState.html#certDState"><span class="hs-identifier hs-var hs-var">certDState</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#DState"><span class="hs-identifier hs-type">DState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502834"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-365"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-366"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679504540"><span id="local-6989586621679504546"><span id="local-6989586621679504550"><span class="annot"><span class="annottext">Int -&gt; CertState era -&gt; ShowS
[CertState era] -&gt; ShowS
CertState era -&gt; String
(Int -&gt; CertState era -&gt; ShowS)
-&gt; (CertState era -&gt; String)
-&gt; ([CertState era] -&gt; ShowS)
-&gt; Show (CertState era)
forall era. Int -&gt; CertState era -&gt; ShowS
forall era. [CertState era] -&gt; ShowS
forall era. CertState era -&gt; String
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: forall era. Int -&gt; CertState era -&gt; ShowS
showsPrec :: Int -&gt; CertState era -&gt; ShowS
$cshow :: forall era. CertState era -&gt; String
show :: CertState era -&gt; String
$cshowList :: forall era. [CertState era] -&gt; ShowS
showList :: [CertState era] -&gt; ShowS
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Show.html#Show"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679504553"><span id="local-6989586621679504558"><span class="annot"><span class="annottext">CertState era -&gt; CertState era -&gt; Bool
(CertState era -&gt; CertState era -&gt; Bool)
-&gt; (CertState era -&gt; CertState era -&gt; Bool) -&gt; Eq (CertState era)
forall era. CertState era -&gt; CertState era -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: forall era. CertState era -&gt; CertState era -&gt; Bool
== :: CertState era -&gt; CertState era -&gt; Bool
$c/= :: forall era. CertState era -&gt; CertState era -&gt; Bool
/= :: CertState era -&gt; CertState era -&gt; Bool
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/ghc-prim-0.10.0/src/GHC.Classes.html#Eq"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679504562"><span id="local-6989586621679504564"><span class="annot"><span class="annottext">(forall x. CertState era -&gt; Rep (CertState era) x)
-&gt; (forall x. Rep (CertState era) x -&gt; CertState era)
-&gt; Generic (CertState era)
forall x. Rep (CertState era) x -&gt; CertState era
forall x. CertState era -&gt; Rep (CertState era) x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
forall era x. Rep (CertState era) x -&gt; CertState era
forall era x. CertState era -&gt; Rep (CertState era) x
$cfrom :: forall era x. CertState era -&gt; Rep (CertState era) x
from :: forall x. CertState era -&gt; Rep (CertState era) x
$cto :: forall era x. Rep (CertState era) x -&gt; CertState era
to :: forall x. Rep (CertState era) x -&gt; CertState era
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Generics.html#Generic"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Generic</span></a></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-367"></span><span>
</span><span id="line-368"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679502846"><span id="local-6989586621679504568"><span id="local-6989586621679504572"><span id="local-6989586621679504578"><span class="annot"><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/Data.Typeable.Internal.html#Typeable"><span class="hs-identifier hs-type">Typeable</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Core.Era.html#EraCrypto"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502846"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">NoThunks</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#CertState"><span class="hs-identifier hs-type">CertState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502846"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span></span></span><span>
</span><span id="line-369"></span><span>
</span><span id="line-370"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679502848"><span id="local-6989586621679504611"><span class="annot"><a href="Cardano.Ledger.Core.Era.html#Era"><span class="hs-identifier hs-type">Era</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502848"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/deepseq-1.4.8.1/src/Control.DeepSeq.html#NFData"><span class="hs-identifier hs-type">NFData</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#CertState"><span class="hs-identifier hs-type">CertState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502848"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-371"></span><span>
</span><span id="line-372"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679502850"><span id="local-6989586621679504636"><span id="local-6989586621679504640"><span class="annot"><a href="Cardano.Ledger.Crypto.html#Crypto"><span class="hs-identifier hs-type">Crypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502850"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">EncCBOR</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#InstantaneousRewards"><span class="hs-identifier hs-type">InstantaneousRewards</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502850"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-373"></span><span>  </span><span id="local-6989586621679504655"><span class="annot"><span class="annottext">encCBOR :: InstantaneousRewards c -&gt; Encoding
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">encCBOR</span></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#InstantaneousRewards"><span class="hs-identifier hs-type">InstantaneousRewards</span></a></span><span> </span><span id="local-6989586621679504656"><span class="annot"><span class="annottext">Map (Credential 'Staking c) Coin
</span><a href="#local-6989586621679504656"><span class="hs-identifier hs-var">irR</span></a></span></span><span> </span><span id="local-6989586621679504657"><span class="annot"><span class="annottext">Map (Credential 'Staking c) Coin
</span><a href="#local-6989586621679504657"><span class="hs-identifier hs-var">irT</span></a></span></span><span> </span><span id="local-6989586621679504658"><span class="annot"><span class="annottext">DeltaCoin
</span><a href="#local-6989586621679504658"><span class="hs-identifier hs-var">dR</span></a></span></span><span> </span><span id="local-6989586621679504659"><span class="annot"><span class="annottext">DeltaCoin
</span><a href="#local-6989586621679504659"><span class="hs-identifier hs-var">dT</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-374"></span><span>    </span><span class="annot"><span class="annottext">Word -&gt; Encoding
</span><span class="hs-identifier hs-var">encodeListLen</span></span><span> </span><span class="annot"><span class="annottext">Word
</span><span class="hs-number">4</span></span><span> </span><span class="annot"><span class="annottext">Encoding -&gt; Encoding -&gt; Encoding
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Map (Credential 'Staking c) Coin -&gt; Encoding
forall a. EncCBOR a =&gt; a -&gt; Encoding
</span><span class="hs-identifier hs-var">encCBOR</span></span><span> </span><span class="annot"><span class="annottext">Map (Credential 'Staking c) Coin
</span><a href="#local-6989586621679504656"><span class="hs-identifier hs-var">irR</span></a></span><span> </span><span class="annot"><span class="annottext">Encoding -&gt; Encoding -&gt; Encoding
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Map (Credential 'Staking c) Coin -&gt; Encoding
forall a. EncCBOR a =&gt; a -&gt; Encoding
</span><span class="hs-identifier hs-var">encCBOR</span></span><span> </span><span class="annot"><span class="annottext">Map (Credential 'Staking c) Coin
</span><a href="#local-6989586621679504657"><span class="hs-identifier hs-var">irT</span></a></span><span> </span><span class="annot"><span class="annottext">Encoding -&gt; Encoding -&gt; Encoding
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">DeltaCoin -&gt; Encoding
forall a. EncCBOR a =&gt; a -&gt; Encoding
</span><span class="hs-identifier hs-var">encCBOR</span></span><span> </span><span class="annot"><span class="annottext">DeltaCoin
</span><a href="#local-6989586621679504658"><span class="hs-identifier hs-var">dR</span></a></span><span> </span><span class="annot"><span class="annottext">Encoding -&gt; Encoding -&gt; Encoding
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">DeltaCoin -&gt; Encoding
forall a. EncCBOR a =&gt; a -&gt; Encoding
</span><span class="hs-identifier hs-var">encCBOR</span></span><span> </span><span class="annot"><span class="annottext">DeltaCoin
</span><a href="#local-6989586621679504659"><span class="hs-identifier hs-var">dT</span></a></span><span>
</span><span id="line-375"></span><span>
</span><span id="line-376"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679502852"><span id="local-6989586621679504665"><span id="local-6989586621679504669"><span class="annot"><a href="Cardano.Ledger.Crypto.html#Crypto"><span class="hs-identifier hs-type">Crypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502852"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">DecShareCBOR</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#InstantaneousRewards"><span class="hs-identifier hs-type">InstantaneousRewards</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502852"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-377"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="Share"><span class="annot"><span class="hs-identifier hs-var">Share</span></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#InstantaneousRewards"><span class="hs-identifier hs-type">InstantaneousRewards</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502852"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Interns</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Credential.html#Credential"><span class="hs-identifier hs-type">Credential</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Cardano.Ledger.Keys.Internal.html#Staking"><span class="hs-identifier hs-type">Staking</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502852"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-378"></span><span>  </span><span id="local-6989586621679504698"><span class="annot"><span class="annottext">decSharePlusCBOR :: forall s.
StateT
  (Share (InstantaneousRewards c))
  (Decoder s)
  (InstantaneousRewards c)
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">decSharePlusCBOR</span></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-379"></span><span>    </span><span class="annot"><span class="annottext">Text
-&gt; (InstantaneousRewards c -&gt; Int)
-&gt; StateT
     (Share (InstantaneousRewards c))
     (Decoder s)
     (InstantaneousRewards c)
-&gt; StateT
     (Share (InstantaneousRewards c))
     (Decoder s)
     (InstantaneousRewards c)
forall (m :: (* -&gt; *) -&gt; * -&gt; *) s a.
(MonadTrans m, Monad (m (Decoder s))) =&gt;
Text -&gt; (a -&gt; Int) -&gt; m (Decoder s) a -&gt; m (Decoder s) a
</span><span class="hs-identifier hs-var">decodeRecordNamedT</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;InstantaneousRewards&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; InstantaneousRewards c -&gt; Int
forall a b. a -&gt; b -&gt; a
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#const"><span class="hs-identifier hs-var">const</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">4</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(StateT
   (Share (InstantaneousRewards c))
   (Decoder s)
   (InstantaneousRewards c)
 -&gt; StateT
      (Share (InstantaneousRewards c))
      (Decoder s)
      (InstantaneousRewards c))
-&gt; StateT
     (Share (InstantaneousRewards c))
     (Decoder s)
     (InstantaneousRewards c)
-&gt; StateT
     (Share (InstantaneousRewards c))
     (Decoder s)
     (InstantaneousRewards c)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-380"></span><span>      </span><span id="local-6989586621679504699"><span class="annot"><span class="annottext">Map (Credential 'Staking c) Coin
</span><a href="#local-6989586621679504699"><span class="hs-identifier hs-var">irR</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Lens'
  (Interns (Credential 'Staking c))
  (Share (Map (Credential 'Staking c) Coin))
-&gt; StateT
     (Interns (Credential 'Staking c))
     (Decoder s)
     (Map (Credential 'Staking c) Coin)
forall b bs s.
DecShareCBOR b =&gt;
Lens' bs (Share b) -&gt; StateT bs (Decoder s) b
</span><span class="hs-identifier hs-var">decSharePlusLensCBOR</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Lens'
  (Interns (Credential 'Staking c), Interns Coin)
  (Interns (Credential 'Staking c))
-&gt; Lens'
     (Interns (Credential 'Staking c)) (Interns (Credential 'Staking c))
-&gt; Lens'
     (Interns (Credential 'Staking c))
     (Interns (Credential 'Staking c), Interns Coin)
forall a b c. Monoid a =&gt; Lens' a b -&gt; Lens' c b -&gt; Lens' c a
</span><span class="hs-identifier hs-var">toMemptyLens</span></span><span> </span><span class="annot"><span class="annottext">(Interns (Credential 'Staking c)
 -&gt; f (Interns (Credential 'Staking c)))
-&gt; (Interns (Credential 'Staking c), Interns Coin)
-&gt; f (Interns (Credential 'Staking c), Interns Coin)
forall s t a b. Field1 s t a b =&gt; Lens s t a b
Lens'
  (Interns (Credential 'Staking c), Interns Coin)
  (Interns (Credential 'Staking c))
</span><span class="hs-identifier hs-var">_1</span></span><span> </span><span class="annot"><span class="annottext">(Interns (Credential 'Staking c)
 -&gt; f (Interns (Credential 'Staking c)))
-&gt; Interns (Credential 'Staking c)
-&gt; f (Interns (Credential 'Staking c))
forall a. a -&gt; a
Lens'
  (Interns (Credential 'Staking c)) (Interns (Credential 'Staking c))
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#id"><span class="hs-identifier hs-var">id</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-381"></span><span>      </span><span id="local-6989586621679504709"><span class="annot"><span class="annottext">Map (Credential 'Staking c) Coin
</span><a href="#local-6989586621679504709"><span class="hs-identifier hs-var">irT</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Lens'
  (Interns (Credential 'Staking c))
  (Share (Map (Credential 'Staking c) Coin))
-&gt; StateT
     (Interns (Credential 'Staking c))
     (Decoder s)
     (Map (Credential 'Staking c) Coin)
forall b bs s.
DecShareCBOR b =&gt;
Lens' bs (Share b) -&gt; StateT bs (Decoder s) b
</span><span class="hs-identifier hs-var">decSharePlusLensCBOR</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Lens'
  (Interns (Credential 'Staking c), Interns Coin)
  (Interns (Credential 'Staking c))
-&gt; Lens'
     (Interns (Credential 'Staking c)) (Interns (Credential 'Staking c))
-&gt; Lens'
     (Interns (Credential 'Staking c))
     (Interns (Credential 'Staking c), Interns Coin)
forall a b c. Monoid a =&gt; Lens' a b -&gt; Lens' c b -&gt; Lens' c a
</span><span class="hs-identifier hs-var">toMemptyLens</span></span><span> </span><span class="annot"><span class="annottext">(Interns (Credential 'Staking c)
 -&gt; f (Interns (Credential 'Staking c)))
-&gt; (Interns (Credential 'Staking c), Interns Coin)
-&gt; f (Interns (Credential 'Staking c), Interns Coin)
forall s t a b. Field1 s t a b =&gt; Lens s t a b
Lens'
  (Interns (Credential 'Staking c), Interns Coin)
  (Interns (Credential 'Staking c))
</span><span class="hs-identifier hs-var">_1</span></span><span> </span><span class="annot"><span class="annottext">(Interns (Credential 'Staking c)
 -&gt; f (Interns (Credential 'Staking c)))
-&gt; Interns (Credential 'Staking c)
-&gt; f (Interns (Credential 'Staking c))
forall a. a -&gt; a
Lens'
  (Interns (Credential 'Staking c)) (Interns (Credential 'Staking c))
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#id"><span class="hs-identifier hs-var">id</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-382"></span><span>      </span><span id="local-6989586621679504719"><span class="annot"><span class="annottext">DeltaCoin
</span><a href="#local-6989586621679504719"><span class="hs-identifier hs-var">dR</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Decoder s DeltaCoin
-&gt; StateT (Interns (Credential 'Staking c)) (Decoder s) DeltaCoin
forall (m :: * -&gt; *) a.
Monad m =&gt;
m a -&gt; StateT (Interns (Credential 'Staking c)) m a
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/transformers-0.6.1.0/src/Control.Monad.Trans.Class.html#lift"><span class="hs-identifier hs-var">lift</span></a></span><span> </span><span class="annot"><span class="annottext">Decoder s DeltaCoin
forall s. Decoder s DeltaCoin
forall a s. DecCBOR a =&gt; Decoder s a
</span><span class="hs-identifier hs-var">decCBOR</span></span><span>
</span><span id="line-383"></span><span>      </span><span id="local-6989586621679504720"><span class="annot"><span class="annottext">DeltaCoin
</span><a href="#local-6989586621679504720"><span class="hs-identifier hs-var">dT</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Decoder s DeltaCoin
-&gt; StateT (Interns (Credential 'Staking c)) (Decoder s) DeltaCoin
forall (m :: * -&gt; *) a.
Monad m =&gt;
m a -&gt; StateT (Interns (Credential 'Staking c)) m a
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/transformers-0.6.1.0/src/Control.Monad.Trans.Class.html#lift"><span class="hs-identifier hs-var">lift</span></a></span><span> </span><span class="annot"><span class="annottext">Decoder s DeltaCoin
forall s. Decoder s DeltaCoin
forall a s. DecCBOR a =&gt; Decoder s a
</span><span class="hs-identifier hs-var">decCBOR</span></span><span>
</span><span id="line-384"></span><span>      </span><span class="annot"><span class="annottext">InstantaneousRewards c
-&gt; StateT
     (Interns (Credential 'Staking c))
     (Decoder s)
     (InstantaneousRewards c)
forall a.
a -&gt; StateT (Interns (Credential 'Staking c)) (Decoder s) a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">(InstantaneousRewards c
 -&gt; StateT
      (Interns (Credential 'Staking c))
      (Decoder s)
      (InstantaneousRewards c))
-&gt; InstantaneousRewards c
-&gt; StateT
     (Interns (Credential 'Staking c))
     (Decoder s)
     (InstantaneousRewards c)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Map (Credential 'Staking c) Coin
-&gt; Map (Credential 'Staking c) Coin
-&gt; DeltaCoin
-&gt; DeltaCoin
-&gt; InstantaneousRewards c
forall c.
Map (Credential 'Staking c) Coin
-&gt; Map (Credential 'Staking c) Coin
-&gt; DeltaCoin
-&gt; DeltaCoin
-&gt; InstantaneousRewards c
</span><a href="Cardano.Ledger.CertState.html#InstantaneousRewards"><span class="hs-identifier hs-var">InstantaneousRewards</span></a></span><span> </span><span class="annot"><span class="annottext">Map (Credential 'Staking c) Coin
</span><a href="#local-6989586621679504699"><span class="hs-identifier hs-var">irR</span></a></span><span> </span><span class="annot"><span class="annottext">Map (Credential 'Staking c) Coin
</span><a href="#local-6989586621679504709"><span class="hs-identifier hs-var">irT</span></a></span><span> </span><span class="annot"><span class="annottext">DeltaCoin
</span><a href="#local-6989586621679504719"><span class="hs-identifier hs-var">dR</span></a></span><span> </span><span class="annot"><span class="annottext">DeltaCoin
</span><a href="#local-6989586621679504720"><span class="hs-identifier hs-var">dT</span></a></span><span>
</span><span id="line-385"></span><span>
</span><span id="line-386"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679502861"><span id="local-6989586621679504728"><span id="local-6989586621679504732"><span class="annot"><a href="Cardano.Ledger.Core.Era.html#Era"><span class="hs-identifier hs-type">Era</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502861"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">EncCBOR</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#CertState"><span class="hs-identifier hs-type">CertState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502861"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-387"></span><span>  </span><span id="local-6989586621679504742"><span class="annot"><span class="annottext">encCBOR :: CertState era -&gt; Encoding
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">encCBOR</span></span></span><span> </span><span class="annot"><a href="Cardano.Ledger.CertState.html#CertState"><span class="hs-identifier hs-type">CertState</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621679504743"><span class="annot"><span class="annottext">PState era
certPState :: forall era. CertState era -&gt; PState era
certPState :: PState era
</span><a href="Cardano.Ledger.CertState.html#certPState"><span class="hs-identifier hs-var hs-var">certPState</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679504744"><span class="annot"><span class="annottext">DState era
certDState :: forall era. CertState era -&gt; DState era
certDState :: DState era
</span><a href="Cardano.Ledger.CertState.html#certDState"><span class="hs-identifier hs-var hs-var">certDState</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679504745"><span class="annot"><span class="annottext">VState era
certVState :: forall era. CertState era -&gt; VState era
certVState :: VState era
</span><a href="Cardano.Ledger.CertState.html#certVState"><span class="hs-identifier hs-var hs-var">certVState</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-388"></span><span>    </span><span class="annot"><span class="annottext">Word -&gt; Encoding
</span><span class="hs-identifier hs-var">encodeListLen</span></span><span> </span><span class="annot"><span class="annottext">Word
</span><span class="hs-number">3</span></span><span>
</span><span id="line-389"></span><span>      </span><span class="annot"><span class="annottext">Encoding -&gt; Encoding -&gt; Encoding
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">VState era -&gt; Encoding
forall a. EncCBOR a =&gt; a -&gt; Encoding
</span><span class="hs-identifier hs-var">encCBOR</span></span><span> </span><span class="annot"><span class="annottext">VState era
</span><a href="#local-6989586621679504745"><span class="hs-identifier hs-var">certVState</span></a></span><span>
</span><span id="line-390"></span><span>      </span><span class="annot"><span class="annottext">Encoding -&gt; Encoding -&gt; Encoding
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">PState era -&gt; Encoding
forall a. EncCBOR a =&gt; a -&gt; Encoding
</span><span class="hs-identifier hs-var">encCBOR</span></span><span> </span><span class="annot"><span class="annottext">PState era
</span><a href="#local-6989586621679504743"><span class="hs-identifier hs-var">certPState</span></a></span><span>
</span><span id="line-391"></span><span>      </span><span class="annot"><span class="annottext">Encoding -&gt; Encoding -&gt; Encoding
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">DState era -&gt; Encoding
forall a. EncCBOR a =&gt; a -&gt; Encoding
</span><span class="hs-identifier hs-var">encCBOR</span></span><span> </span><span class="annot"><span class="annottext">DState era
</span><a href="#local-6989586621679504744"><span class="hs-identifier hs-var">certDState</span></a></span><span>
</span><span id="line-392"></span><span>
</span><span id="line-393"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679502863"><span id="local-6989586621679504751"><span id="local-6989586621679504755"><span class="annot"><a href="Cardano.Ledger.Core.Era.html#Era"><span class="hs-identifier hs-type">Era</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502863"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">DecShareCBOR</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#CertState"><span class="hs-identifier hs-type">CertState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502863"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-394"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="Share"><span class="annot"><span class="hs-identifier hs-var">Share</span></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#CertState"><span class="hs-identifier hs-type">CertState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502863"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Interns</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Credential.html#Credential"><span class="hs-identifier hs-type">Credential</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Cardano.Ledger.Keys.Internal.html#Staking"><span class="hs-identifier hs-type">Staking</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Core.Era.html#EraCrypto"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502863"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Interns</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Keys.Internal.html#KeyHash"><span class="hs-identifier hs-type">KeyHash</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Cardano.Ledger.Keys.Internal.html#StakePool"><span class="hs-identifier hs-type">StakePool</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Core.Era.html#EraCrypto"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502863"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-395"></span><span>  </span><span id="local-6989586621679504779"><span class="annot"><span class="annottext">decSharePlusCBOR :: forall s.
StateT (Share (CertState era)) (Decoder s) (CertState era)
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">decSharePlusCBOR</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text
-&gt; (CertState era -&gt; Int)
-&gt; StateT (Share (CertState era)) (Decoder s) (CertState era)
-&gt; StateT (Share (CertState era)) (Decoder s) (CertState era)
forall (m :: (* -&gt; *) -&gt; * -&gt; *) s a.
(MonadTrans m, Monad (m (Decoder s))) =&gt;
Text -&gt; (a -&gt; Int) -&gt; m (Decoder s) a -&gt; m (Decoder s) a
</span><span class="hs-identifier hs-var">decodeRecordNamedT</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;CertState&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; CertState era -&gt; Int
forall a b. a -&gt; b -&gt; a
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#const"><span class="hs-identifier hs-var">const</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">3</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(StateT (Share (CertState era)) (Decoder s) (CertState era)
 -&gt; StateT (Share (CertState era)) (Decoder s) (CertState era))
-&gt; StateT (Share (CertState era)) (Decoder s) (CertState era)
-&gt; StateT (Share (CertState era)) (Decoder s) (CertState era)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-396"></span><span>    </span><span id="local-6989586621679504780"><span class="annot"><span class="annottext">VState era
</span><a href="#local-6989586621679504780"><span class="hs-identifier hs-var">certVState</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Decoder s (VState era)
-&gt; StateT
     (Interns (Credential 'Staking (EraCrypto era)),
      Interns (KeyHash 'StakePool (EraCrypto era)))
     (Decoder s)
     (VState era)
forall (m :: * -&gt; *) a.
Monad m =&gt;
m a
-&gt; StateT
     (Interns (Credential 'Staking (EraCrypto era)),
      Interns (KeyHash 'StakePool (EraCrypto era)))
     m
     a
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/transformers-0.6.1.0/src/Control.Monad.Trans.Class.html#lift"><span class="hs-identifier hs-var">lift</span></a></span><span> </span><span class="annot"><span class="annottext">Decoder s (VState era)
forall a s. DecShareCBOR a =&gt; Decoder s a
</span><span class="hs-identifier hs-var">decNoShareCBOR</span></span><span> </span><span class="hs-comment">-- TODO: add sharing of DRep credentials</span><span>
</span><span id="line-397"></span><span>    </span><span id="local-6989586621679504781"><span class="annot"><span class="annottext">PState era
</span><a href="#local-6989586621679504781"><span class="hs-identifier hs-var">certPState</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Lens'
  (Interns (Credential 'Staking (EraCrypto era)),
   Interns (KeyHash 'StakePool (EraCrypto era)))
  (Share (PState era))
-&gt; StateT
     (Interns (Credential 'Staking (EraCrypto era)),
      Interns (KeyHash 'StakePool (EraCrypto era)))
     (Decoder s)
     (PState era)
forall b bs s.
DecShareCBOR b =&gt;
Lens' bs (Share b) -&gt; StateT bs (Decoder s) b
</span><span class="hs-identifier hs-var">decSharePlusLensCBOR</span></span><span> </span><span class="annot"><span class="annottext">(Share (PState era) -&gt; f (Share (PState era)))
-&gt; (Interns (Credential 'Staking (EraCrypto era)),
    Interns (KeyHash 'StakePool (EraCrypto era)))
-&gt; f (Interns (Credential 'Staking (EraCrypto era)),
      Interns (KeyHash 'StakePool (EraCrypto era)))
(Interns (KeyHash 'StakePool (EraCrypto era))
 -&gt; f (Interns (KeyHash 'StakePool (EraCrypto era))))
-&gt; (Interns (Credential 'Staking (EraCrypto era)),
    Interns (KeyHash 'StakePool (EraCrypto era)))
-&gt; f (Interns (Credential 'Staking (EraCrypto era)),
      Interns (KeyHash 'StakePool (EraCrypto era)))
forall s t a b. Field2 s t a b =&gt; Lens s t a b
Lens'
  (Interns (Credential 'Staking (EraCrypto era)),
   Interns (KeyHash 'StakePool (EraCrypto era)))
  (Share (PState era))
Lens
  (Interns (Credential 'Staking (EraCrypto era)),
   Interns (KeyHash 'StakePool (EraCrypto era)))
  (Interns (Credential 'Staking (EraCrypto era)),
   Interns (KeyHash 'StakePool (EraCrypto era)))
  (Interns (KeyHash 'StakePool (EraCrypto era)))
  (Interns (KeyHash 'StakePool (EraCrypto era)))
</span><span class="hs-identifier hs-var">_2</span></span><span>
</span><span id="line-398"></span><span>    </span><span id="local-6989586621679504786"><span class="annot"><span class="annottext">DState era
</span><a href="#local-6989586621679504786"><span class="hs-identifier hs-var">certDState</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">StateT
  (Interns (Credential 'Staking (EraCrypto era)),
   Interns (KeyHash 'StakePool (EraCrypto era)))
  (Decoder s)
  (DState era)
StateT (Share (DState era)) (Decoder s) (DState era)
forall s. StateT (Share (DState era)) (Decoder s) (DState era)
forall a s. DecShareCBOR a =&gt; StateT (Share a) (Decoder s) a
</span><span class="hs-identifier hs-var">decSharePlusCBOR</span></span><span>
</span><span id="line-399"></span><span>    </span><span class="annot"><span class="annottext">CertState era
-&gt; StateT
     (Interns (Credential 'Staking (EraCrypto era)),
      Interns (KeyHash 'StakePool (EraCrypto era)))
     (Decoder s)
     (CertState era)
forall a.
a
-&gt; StateT
     (Interns (Credential 'Staking (EraCrypto era)),
      Interns (KeyHash 'StakePool (EraCrypto era)))
     (Decoder s)
     a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><a href="Cardano.Ledger.CertState.html#CertState"><span class="hs-identifier hs-type">CertState</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">PState era
certPState :: PState era
certPState :: PState era
</span><a href="Cardano.Ledger.CertState.html#certPState"><span class="hs-identifier hs-var hs-var">certPState</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">DState era
certDState :: DState era
certDState :: DState era
</span><a href="Cardano.Ledger.CertState.html#certDState"><span class="hs-identifier hs-var hs-var">certDState</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">VState era
certVState :: VState era
certVState :: VState era
</span><a href="Cardano.Ledger.CertState.html#certVState"><span class="hs-identifier hs-var hs-var">certVState</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-400"></span><span>
</span><span id="line-401"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679502875"><span class="annot"><span class="hs-identifier hs-type">Default</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#CertState"><span class="hs-identifier hs-type">CertState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502875"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-402"></span><span>  </span><span id="local-6989586621679504794"><span class="annot"><span class="annottext">def :: CertState era
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">def</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">VState era -&gt; PState era -&gt; DState era -&gt; CertState era
forall era. VState era -&gt; PState era -&gt; DState era -&gt; CertState era
</span><a href="Cardano.Ledger.CertState.html#CertState"><span class="hs-identifier hs-var">CertState</span></a></span><span> </span><span class="annot"><span class="annottext">VState era
forall a. Default a =&gt; a
</span><span class="hs-identifier hs-var">def</span></span><span> </span><span class="annot"><span class="annottext">PState era
forall a. Default a =&gt; a
</span><span class="hs-identifier hs-var">def</span></span><span> </span><span class="annot"><span class="annottext">DState era
forall a. Default a =&gt; a
</span><span class="hs-identifier hs-var">def</span></span><span>
</span><span id="line-403"></span><span>
</span><span id="line-404"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679502879"><span id="local-6989586621679504799"><span id="local-6989586621679504803"><span id="local-6989586621679504806"><span class="annot"><a href="Cardano.Ledger.Core.Era.html#Era"><span class="hs-identifier hs-type">Era</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502879"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#CertState"><span class="hs-identifier hs-type">CertState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502879"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-405"></span><span>  </span><span id="local-6989586621679504812"><span class="annot"><span class="annottext">toJSON :: CertState era -&gt; Value
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">object</span></span><span> </span><span class="annot"><span class="annottext">([Pair] -&gt; Value)
-&gt; (CertState era -&gt; [Pair]) -&gt; CertState era -&gt; Value
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">CertState era -&gt; [Pair]
forall e a era. (KeyValue e a, Era era) =&gt; CertState era -&gt; [a]
</span><a href="Cardano.Ledger.CertState.html#toCertStatePairs"><span class="hs-identifier hs-var">toCertStatePairs</span></a></span><span>
</span><span id="line-406"></span><span>  </span><span id="local-6989586621679504817"><span class="annot"><span class="annottext">toEncoding :: CertState era -&gt; Encoding
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">toEncoding</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Series -&gt; Encoding
</span><span class="hs-identifier hs-var">pairs</span></span><span> </span><span class="annot"><span class="annottext">(Series -&gt; Encoding)
-&gt; (CertState era -&gt; Series) -&gt; CertState era -&gt; Encoding
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">[Series] -&gt; Series
forall a. Monoid a =&gt; [a] -&gt; a
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#mconcat"><span class="hs-identifier hs-var">mconcat</span></a></span><span> </span><span class="annot"><span class="annottext">([Series] -&gt; Series)
-&gt; (CertState era -&gt; [Series]) -&gt; CertState era -&gt; Series
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">CertState era -&gt; [Series]
forall e a era. (KeyValue e a, Era era) =&gt; CertState era -&gt; [a]
</span><a href="Cardano.Ledger.CertState.html#toCertStatePairs"><span class="hs-identifier hs-var">toCertStatePairs</span></a></span><span>
</span><span id="line-407"></span><span>
</span><span id="line-408"></span><span id="local-6989586621679502880"><span id="local-6989586621679502881"><span id="local-6989586621679502882"><span class="annot"><a href="Cardano.Ledger.CertState.html#toCertStatePairs"><span class="hs-identifier hs-type">toCertStatePairs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">KeyValue</span></span><span> </span><span class="annot"><a href="#local-6989586621679502880"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502881"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Ledger.Core.Era.html#Era"><span class="hs-identifier hs-type">Era</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502882"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Cardano.Ledger.CertState.html#CertState"><span class="hs-identifier hs-type">CertState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502882"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679502881"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span></span></span></span><span>
</span><span id="line-409"></span><span id="toCertStatePairs"><span class="annot"><span class="annottext">toCertStatePairs :: forall e a era. (KeyValue e a, Era era) =&gt; CertState era -&gt; [a]
</span><a href="Cardano.Ledger.CertState.html#toCertStatePairs"><span class="hs-identifier hs-var hs-var">toCertStatePairs</span></a></span></span><span> </span><span class="annot"><a href="Cardano.Ledger.CertState.html#CertState"><span class="hs-identifier hs-type">CertState</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621679504826"><span id="local-6989586621679504827"><span id="local-6989586621679504828"><span class="annot"><span class="annottext">VState era
PState era
DState era
certVState :: forall era. CertState era -&gt; VState era
certPState :: forall era. CertState era -&gt; PState era
certDState :: forall era. CertState era -&gt; DState era
certVState :: VState era
certPState :: PState era
certDState :: DState era
</span><a href="Cardano.Ledger.CertState.html#certVState"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-410"></span><span>  </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;dstate&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; DState era -&gt; a
forall v. ToJSON v =&gt; Key -&gt; v -&gt; a
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">DState era
</span><a href="#local-6989586621679504828"><span class="hs-identifier hs-var">certDState</span></a></span><span>
</span><span id="line-411"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;pstate&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; PState era -&gt; a
forall v. ToJSON v =&gt; Key -&gt; v -&gt; a
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">PState era
</span><a href="#local-6989586621679504827"><span class="hs-identifier hs-var">certPState</span></a></span><span>
</span><span id="line-412"></span><span>  </span><span class="hs-special">]</span><span>
</span><span id="line-413"></span><span>
</span><span id="line-414"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679502887"><span class="annot"><span class="hs-identifier hs-type">Default</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#InstantaneousRewards"><span class="hs-identifier hs-type">InstantaneousRewards</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502887"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-415"></span><span>  </span><span id="local-6989586621679504834"><span class="annot"><span class="annottext">def :: InstantaneousRewards c
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">def</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map (Credential 'Staking c) Coin
-&gt; Map (Credential 'Staking c) Coin
-&gt; DeltaCoin
-&gt; DeltaCoin
-&gt; InstantaneousRewards c
forall c.
Map (Credential 'Staking c) Coin
-&gt; Map (Credential 'Staking c) Coin
-&gt; DeltaCoin
-&gt; DeltaCoin
-&gt; InstantaneousRewards c
</span><a href="Cardano.Ledger.CertState.html#InstantaneousRewards"><span class="hs-identifier hs-var">InstantaneousRewards</span></a></span><span> </span><span class="annot"><span class="annottext">Map (Credential 'Staking c) Coin
forall k a. Map k a
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#empty"><span class="hs-identifier hs-var">Map.empty</span></a></span><span> </span><span class="annot"><span class="annottext">Map (Credential 'Staking c) Coin
forall k a. Map k a
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#empty"><span class="hs-identifier hs-var">Map.empty</span></a></span><span> </span><span class="annot"><span class="annottext">DeltaCoin
forall a. Monoid a =&gt; a
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#mempty"><span class="hs-identifier hs-var">mempty</span></a></span><span> </span><span class="annot"><span class="annottext">DeltaCoin
forall a. Monoid a =&gt; a
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#mempty"><span class="hs-identifier hs-var">mempty</span></a></span><span>
</span><span id="line-416"></span><span>
</span><span id="line-417"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679502876"><span class="annot"><span class="hs-identifier hs-type">Default</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#DState"><span class="hs-identifier hs-type">DState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502876"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-418"></span><span>  </span><span id="local-6989586621679504838"><span class="annot"><span class="annottext">def :: DState era
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">def</span></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-419"></span><span>    </span><span class="annot"><span class="annottext">UMap (EraCrypto era)
-&gt; Map
     (FutureGenDeleg (EraCrypto era)) (GenDelegPair (EraCrypto era))
-&gt; GenDelegs (EraCrypto era)
-&gt; InstantaneousRewards (EraCrypto era)
-&gt; DState era
forall era.
UMap (EraCrypto era)
-&gt; Map
     (FutureGenDeleg (EraCrypto era)) (GenDelegPair (EraCrypto era))
-&gt; GenDelegs (EraCrypto era)
-&gt; InstantaneousRewards (EraCrypto era)
-&gt; DState era
</span><a href="Cardano.Ledger.CertState.html#DState"><span class="hs-identifier hs-var">DState</span></a></span><span>
</span><span id="line-420"></span><span>      </span><span class="annot"><span class="annottext">UMap (EraCrypto era)
forall c. UMap c
</span><a href="Cardano.Ledger.UMap.html#empty"><span class="hs-identifier hs-var">UM.empty</span></a></span><span>
</span><span id="line-421"></span><span>      </span><span class="annot"><span class="annottext">Map (FutureGenDeleg (EraCrypto era)) (GenDelegPair (EraCrypto era))
forall k a. Map k a
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#empty"><span class="hs-identifier hs-var">Map.empty</span></a></span><span>
</span><span id="line-422"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map
  (KeyHash 'Genesis (EraCrypto era)) (GenDelegPair (EraCrypto era))
-&gt; GenDelegs (EraCrypto era)
forall c. Map (KeyHash 'Genesis c) (GenDelegPair c) -&gt; GenDelegs c
</span><a href="Cardano.Ledger.Keys.Internal.html#GenDelegs"><span class="hs-identifier hs-var">GenDelegs</span></a></span><span> </span><span class="annot"><span class="annottext">Map
  (KeyHash 'Genesis (EraCrypto era)) (GenDelegPair (EraCrypto era))
forall k a. Map k a
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#empty"><span class="hs-identifier hs-var">Map.empty</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-423"></span><span>      </span><span class="annot"><span class="annottext">InstantaneousRewards (EraCrypto era)
forall a. Default a =&gt; a
</span><span class="hs-identifier hs-var">def</span></span><span>
</span><span id="line-424"></span><span>
</span><span id="line-425"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679502877"><span class="annot"><span class="hs-identifier hs-type">Default</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#PState"><span class="hs-identifier hs-type">PState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502877"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-426"></span><span>  </span><span id="local-6989586621679504842"><span class="annot"><span class="annottext">def :: PState c
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">def</span></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-427"></span><span>    </span><span class="annot"><span class="annottext">Map (KeyHash 'StakePool (EraCrypto c)) (PoolParams (EraCrypto c))
-&gt; Map
     (KeyHash 'StakePool (EraCrypto c)) (PoolParams (EraCrypto c))
-&gt; Map (KeyHash 'StakePool (EraCrypto c)) EpochNo
-&gt; Map (KeyHash 'StakePool (EraCrypto c)) Coin
-&gt; PState c
forall era.
Map
  (KeyHash 'StakePool (EraCrypto era)) (PoolParams (EraCrypto era))
-&gt; Map
     (KeyHash 'StakePool (EraCrypto era)) (PoolParams (EraCrypto era))
-&gt; Map (KeyHash 'StakePool (EraCrypto era)) EpochNo
-&gt; Map (KeyHash 'StakePool (EraCrypto era)) Coin
-&gt; PState era
</span><a href="Cardano.Ledger.CertState.html#PState"><span class="hs-identifier hs-var">PState</span></a></span><span> </span><span class="annot"><span class="annottext">Map (KeyHash 'StakePool (EraCrypto c)) (PoolParams (EraCrypto c))
forall k a. Map k a
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#empty"><span class="hs-identifier hs-var">Map.empty</span></a></span><span> </span><span class="annot"><span class="annottext">Map (KeyHash 'StakePool (EraCrypto c)) (PoolParams (EraCrypto c))
forall k a. Map k a
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#empty"><span class="hs-identifier hs-var">Map.empty</span></a></span><span> </span><span class="annot"><span class="annottext">Map (KeyHash 'StakePool (EraCrypto c)) EpochNo
forall k a. Map k a
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#empty"><span class="hs-identifier hs-var">Map.empty</span></a></span><span> </span><span class="annot"><span class="annottext">Map (KeyHash 'StakePool (EraCrypto c)) Coin
forall k a. Map k a
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#empty"><span class="hs-identifier hs-var">Map.empty</span></a></span><span>
</span><span id="line-428"></span><span>
</span><span id="line-429"></span><span id="local-6989586621679502894"><span class="annot"><a href="Cardano.Ledger.CertState.html#rewards"><span class="hs-identifier hs-type">rewards</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Ledger.CertState.html#DState"><span class="hs-identifier hs-type">DState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502894"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.Ledger.UMap.html#UView"><span class="hs-identifier hs-type">UView</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Core.Era.html#EraCrypto"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502894"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Credential.html#Credential"><span class="hs-identifier hs-type">Credential</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Cardano.Ledger.Keys.Internal.html#Staking"><span class="hs-identifier hs-type">Staking</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Core.Era.html#EraCrypto"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502894"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="Cardano.Ledger.UMap.html#RDPair"><span class="hs-identifier hs-type">RDPair</span></a></span></span><span>
</span><span id="line-430"></span><span id="rewards"><span class="annot"><span class="annottext">rewards :: forall era.
DState era
-&gt; UView
     (EraCrypto era) (Credential 'Staking (EraCrypto era)) RDPair
</span><a href="Cardano.Ledger.CertState.html#rewards"><span class="hs-identifier hs-var hs-var">rewards</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UMap (EraCrypto era)
-&gt; UView
     (EraCrypto era) (Credential 'Staking (EraCrypto era)) RDPair
forall c. UMap c -&gt; UView c (Credential 'Staking c) RDPair
</span><a href="Cardano.Ledger.UMap.html#RewDepUView"><span class="hs-identifier hs-var">RewDepUView</span></a></span><span> </span><span class="annot"><span class="annottext">(UMap (EraCrypto era)
 -&gt; UView
      (EraCrypto era) (Credential 'Staking (EraCrypto era)) RDPair)
-&gt; (DState era -&gt; UMap (EraCrypto era))
-&gt; DState era
-&gt; UView
     (EraCrypto era) (Credential 'Staking (EraCrypto era)) RDPair
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">DState era -&gt; UMap (EraCrypto era)
forall era. DState era -&gt; UMap (EraCrypto era)
</span><a href="Cardano.Ledger.CertState.html#dsUnified"><span class="hs-identifier hs-var">dsUnified</span></a></span><span>
</span><span id="line-431"></span><span>
</span><span id="line-432"></span><span id="local-6989586621679502896"><span class="annot"><a href="Cardano.Ledger.CertState.html#delegations"><span class="hs-identifier hs-type">delegations</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-433"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.CertState.html#DState"><span class="hs-identifier hs-type">DState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502896"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-434"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.UMap.html#UView"><span class="hs-identifier hs-type">UView</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Core.Era.html#EraCrypto"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502896"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Credential.html#Credential"><span class="hs-identifier hs-type">Credential</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Cardano.Ledger.Keys.Internal.html#Staking"><span class="hs-identifier hs-type">Staking</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Core.Era.html#EraCrypto"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502896"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Keys.Internal.html#KeyHash"><span class="hs-identifier hs-type">KeyHash</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Cardano.Ledger.Keys.Internal.html#StakePool"><span class="hs-identifier hs-type">StakePool</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Core.Era.html#EraCrypto"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502896"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span><span>
</span><span id="line-435"></span><span id="delegations"><span class="annot"><span class="annottext">delegations :: forall era.
DState era
-&gt; UView
     (EraCrypto era)
     (Credential 'Staking (EraCrypto era))
     (KeyHash 'StakePool (EraCrypto era))
</span><a href="Cardano.Ledger.CertState.html#delegations"><span class="hs-identifier hs-var hs-var">delegations</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UMap (EraCrypto era)
-&gt; UView
     (EraCrypto era)
     (Credential 'Staking (EraCrypto era))
     (KeyHash 'StakePool (EraCrypto era))
forall c.
UMap c -&gt; UView c (Credential 'Staking c) (KeyHash 'StakePool c)
</span><a href="Cardano.Ledger.UMap.html#SPoolUView"><span class="hs-identifier hs-var">SPoolUView</span></a></span><span> </span><span class="annot"><span class="annottext">(UMap (EraCrypto era)
 -&gt; UView
      (EraCrypto era)
      (Credential 'Staking (EraCrypto era))
      (KeyHash 'StakePool (EraCrypto era)))
-&gt; (DState era -&gt; UMap (EraCrypto era))
-&gt; DState era
-&gt; UView
     (EraCrypto era)
     (Credential 'Staking (EraCrypto era))
     (KeyHash 'StakePool (EraCrypto era))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">DState era -&gt; UMap (EraCrypto era)
forall era. DState era -&gt; UMap (EraCrypto era)
</span><a href="Cardano.Ledger.CertState.html#dsUnified"><span class="hs-identifier hs-var">dsUnified</span></a></span><span>
</span><span id="line-436"></span><span>
</span><span id="line-437"></span><span class="annot"><span class="hs-comment">-- | get the actual ptrs map, we don't need a view</span></span><span>
</span><span id="line-438"></span><span id="local-6989586621679502898"><span class="annot"><a href="Cardano.Ledger.CertState.html#ptrsMap"><span class="hs-identifier hs-type">ptrsMap</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Ledger.CertState.html#DState"><span class="hs-identifier hs-type">DState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502898"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#Map"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="annot"><a href="Cardano.Ledger.Credential.html#Ptr"><span class="hs-identifier hs-type">Ptr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Credential.html#Credential"><span class="hs-identifier hs-type">Credential</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Cardano.Ledger.Keys.Internal.html#Staking"><span class="hs-identifier hs-type">Staking</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Core.Era.html#EraCrypto"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502898"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span><span>
</span><span id="line-439"></span><span id="ptrsMap"><span class="annot"><span class="annottext">ptrsMap :: forall era.
DState era -&gt; Map Ptr (Credential 'Staking (EraCrypto era))
</span><a href="Cardano.Ledger.CertState.html#ptrsMap"><span class="hs-identifier hs-var hs-var">ptrsMap</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#DState"><span class="hs-identifier hs-type">DState</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">dsUnified :: forall era. DState era -&gt; UMap (EraCrypto era)
</span><a href="Cardano.Ledger.CertState.html#dsUnified"><span class="hs-identifier hs-var">dsUnified</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Cardano.Ledger.UMap.html#UMap"><span class="hs-identifier hs-type">UMap</span></a></span><span> </span><span class="annot"><span class="annottext">Map (Credential 'Staking (EraCrypto era)) (UMElem (EraCrypto era))
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679504843"><span class="annot"><span class="annottext">Map Ptr (Credential 'Staking (EraCrypto era))
</span><a href="#local-6989586621679504843"><span class="hs-identifier hs-var">ptrmap</span></a></span></span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map Ptr (Credential 'Staking (EraCrypto era))
</span><a href="#local-6989586621679504843"><span class="hs-identifier hs-var">ptrmap</span></a></span><span>
</span><span id="line-440"></span><span>
</span><span id="line-441"></span><span class="hs-comment">-- ==========================================================</span><span>
</span><span id="line-442"></span><span class="hs-comment">-- Functions that handle Deposits</span><span>
</span><span id="line-443"></span><span>
</span><span id="line-444"></span><span class="hs-comment">-- | One only pays a deposit on the initial pool registration. So return the</span><span>
</span><span id="line-445"></span><span class="hs-comment">--   the Deposits unchanged if the keyhash already exists. There are legal</span><span>
</span><span id="line-446"></span><span class="hs-comment">--   situations where a pool may be registered multiple times.</span><span>
</span><span id="line-447"></span><span id="local-6989586621679502902"><span class="annot"><a href="Cardano.Ledger.CertState.html#payPoolDeposit"><span class="hs-identifier hs-type">payPoolDeposit</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-448"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.Core.PParams.html#EraPParams"><span class="hs-identifier hs-type">EraPParams</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502902"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-449"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.Keys.Internal.html#KeyHash"><span class="hs-identifier hs-type">KeyHash</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Cardano.Ledger.Keys.Internal.html#StakePool"><span class="hs-identifier hs-type">StakePool</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Core.Era.html#EraCrypto"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502902"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-450"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.Core.PParams.html#PParams"><span class="hs-identifier hs-type">PParams</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502902"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-451"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.CertState.html#PState"><span class="hs-identifier hs-type">PState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502902"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-452"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.CertState.html#PState"><span class="hs-identifier hs-type">PState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502902"><span class="hs-identifier hs-type">era</span></a></span></span><span>
</span><span id="line-453"></span><span id="payPoolDeposit"><span class="annot"><span class="annottext">payPoolDeposit :: forall era.
EraPParams era =&gt;
KeyHash 'StakePool (EraCrypto era)
-&gt; PParams era -&gt; PState era -&gt; PState era
</span><a href="Cardano.Ledger.CertState.html#payPoolDeposit"><span class="hs-identifier hs-var hs-var">payPoolDeposit</span></a></span></span><span> </span><span id="local-6989586621679504849"><span class="annot"><span class="annottext">KeyHash 'StakePool (EraCrypto era)
</span><a href="#local-6989586621679504849"><span class="hs-identifier hs-var">keyhash</span></a></span></span><span> </span><span id="local-6989586621679504850"><span class="annot"><span class="annottext">PParams era
</span><a href="#local-6989586621679504850"><span class="hs-identifier hs-var">pp</span></a></span></span><span> </span><span id="local-6989586621679504851"><span class="annot"><span class="annottext">PState era
</span><a href="#local-6989586621679504851"><span class="hs-identifier hs-var">pstate</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PState era
</span><a href="#local-6989586621679504851"><span class="hs-identifier hs-var">pstate</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><a href="Cardano.Ledger.CertState.html#psDeposits"><span class="hs-identifier hs-var">psDeposits</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679504852"><span class="hs-identifier hs-type">newpool</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-454"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-455"></span><span>    </span><span id="local-6989586621679504853"><span class="annot"><span class="annottext">pool :: Map (KeyHash 'StakePool (EraCrypto era)) Coin
</span><a href="#local-6989586621679504853"><span class="hs-identifier hs-var hs-var">pool</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PState era -&gt; Map (KeyHash 'StakePool (EraCrypto era)) Coin
forall era.
PState era -&gt; Map (KeyHash 'StakePool (EraCrypto era)) Coin
</span><a href="Cardano.Ledger.CertState.html#psDeposits"><span class="hs-identifier hs-var">psDeposits</span></a></span><span> </span><span class="annot"><span class="annottext">PState era
</span><a href="#local-6989586621679504851"><span class="hs-identifier hs-var">pstate</span></a></span><span>
</span><span id="line-456"></span><span>    </span><span class="hs-glyph">!</span><span id="local-6989586621679504854"><span class="annot"><span class="annottext">deposit :: Coin
</span><a href="#local-6989586621679504854"><span class="hs-identifier hs-var hs-var">deposit</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PParams era
</span><a href="#local-6989586621679504850"><span class="hs-identifier hs-var">pp</span></a></span><span> </span><span class="annot"><span class="annottext">PParams era -&gt; Getting Coin (PParams era) Coin -&gt; Coin
forall s a. s -&gt; Getting a s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Getting Coin (PParams era) Coin
forall era. EraPParams era =&gt; Lens' (PParams era) Coin
Lens' (PParams era) Coin
</span><a href="Cardano.Ledger.Core.PParams.html#ppPoolDepositL"><span class="hs-identifier hs-var">ppPoolDepositL</span></a></span><span>
</span><span id="line-457"></span><span>    </span><span id="local-6989586621679504852"><span class="annot"><span class="annottext">newpool :: Map (KeyHash 'StakePool (EraCrypto era)) Coin
</span><a href="#local-6989586621679504852"><span class="hs-identifier hs-var hs-var">newpool</span></a></span></span><span>
</span><span id="line-458"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">KeyHash 'StakePool (EraCrypto era)
-&gt; Map (KeyHash 'StakePool (EraCrypto era)) Coin -&gt; Bool
forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Bool
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#notMember"><span class="hs-identifier hs-var">Map.notMember</span></a></span><span> </span><span class="annot"><span class="annottext">KeyHash 'StakePool (EraCrypto era)
</span><a href="#local-6989586621679504849"><span class="hs-identifier hs-var">keyhash</span></a></span><span> </span><span class="annot"><span class="annottext">Map (KeyHash 'StakePool (EraCrypto era)) Coin
</span><a href="#local-6989586621679504853"><span class="hs-identifier hs-var">pool</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">KeyHash 'StakePool (EraCrypto era)
-&gt; Coin
-&gt; Map (KeyHash 'StakePool (EraCrypto era)) Coin
-&gt; Map (KeyHash 'StakePool (EraCrypto era)) Coin
forall k a. Ord k =&gt; k -&gt; a -&gt; Map k a -&gt; Map k a
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/containers-0.6.7/src/Data.Map.Strict.Internal.html#insert"><span class="hs-identifier hs-var">Map.insert</span></a></span><span> </span><span class="annot"><span class="annottext">KeyHash 'StakePool (EraCrypto era)
</span><a href="#local-6989586621679504849"><span class="hs-identifier hs-var">keyhash</span></a></span><span> </span><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621679504854"><span class="hs-identifier hs-var">deposit</span></a></span><span> </span><span class="annot"><span class="annottext">Map (KeyHash 'StakePool (EraCrypto era)) Coin
</span><a href="#local-6989586621679504853"><span class="hs-identifier hs-var">pool</span></a></span><span>
</span><span id="line-459"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map (KeyHash 'StakePool (EraCrypto era)) Coin
</span><a href="#local-6989586621679504853"><span class="hs-identifier hs-var">pool</span></a></span><span>
</span><span id="line-460"></span><span>
</span><span id="line-461"></span><span id="local-6989586621679502911"><span class="annot"><a href="Cardano.Ledger.CertState.html#refundPoolDeposit"><span class="hs-identifier hs-type">refundPoolDeposit</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Ledger.Keys.Internal.html#KeyHash"><span class="hs-identifier hs-type">KeyHash</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Cardano.Ledger.Keys.Internal.html#StakePool"><span class="hs-identifier hs-type">StakePool</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Core.Era.html#EraCrypto"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502911"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.Ledger.CertState.html#PState"><span class="hs-identifier hs-type">PState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502911"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Coin.html#Coin"><span class="hs-identifier hs-type">Coin</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Ledger.CertState.html#PState"><span class="hs-identifier hs-type">PState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502911"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-462"></span><span id="refundPoolDeposit"><span class="annot"><span class="annottext">refundPoolDeposit :: forall era.
KeyHash 'StakePool (EraCrypto era)
-&gt; PState era -&gt; (Coin, PState era)
</span><a href="Cardano.Ledger.CertState.html#refundPoolDeposit"><span class="hs-identifier hs-var hs-var">refundPoolDeposit</span></a></span></span><span> </span><span id="local-6989586621679504862"><span class="annot"><span class="annottext">KeyHash 'StakePool (EraCrypto era)
</span><a href="#local-6989586621679504862"><span class="hs-identifier hs-var">keyhash</span></a></span></span><span> </span><span id="local-6989586621679504863"><span class="annot"><span class="annottext">PState era
</span><a href="#local-6989586621679504863"><span class="hs-identifier hs-var">pstate</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621679504864"><span class="hs-identifier hs-var">coin</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">PState era
</span><a href="#local-6989586621679504863"><span class="hs-identifier hs-var">pstate</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><a href="Cardano.Ledger.CertState.html#psDeposits"><span class="hs-identifier hs-var">psDeposits</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679504865"><span class="hs-identifier hs-type">newpool</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-463"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-464"></span><span>    </span><span id="local-6989586621679504866"><span class="annot"><span class="annottext">pool :: Map (KeyHash 'StakePool (EraCrypto era)) Coin
</span><a href="#local-6989586621679504866"><span class="hs-identifier hs-var hs-var">pool</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PState era -&gt; Map (KeyHash 'StakePool (EraCrypto era)) Coin
forall era.
PState era -&gt; Map (KeyHash 'StakePool (EraCrypto era)) Coin
</span><a href="Cardano.Ledger.CertState.html#psDeposits"><span class="hs-identifier hs-var">psDeposits</span></a></span><span> </span><span class="annot"><span class="annottext">PState era
</span><a href="#local-6989586621679504863"><span class="hs-identifier hs-var">pstate</span></a></span><span>
</span><span id="line-465"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621679504864"><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621679504864"><span class="hs-identifier hs-var">coin</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679504865"><span class="annot"><span class="annottext">Map (KeyHash 'StakePool (EraCrypto era)) Coin
</span><a href="#local-6989586621679504865"><span class="hs-identifier hs-var">newpool</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">KeyHash 'StakePool (EraCrypto era)
-&gt; Map (KeyHash 'StakePool (EraCrypto era)) Coin -&gt; Maybe Coin
forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Maybe a
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#lookup"><span class="hs-identifier hs-var">Map.lookup</span></a></span><span> </span><span class="annot"><span class="annottext">KeyHash 'StakePool (EraCrypto era)
</span><a href="#local-6989586621679504862"><span class="hs-identifier hs-var">keyhash</span></a></span><span> </span><span class="annot"><span class="annottext">Map (KeyHash 'StakePool (EraCrypto era)) Coin
</span><a href="#local-6989586621679504866"><span class="hs-identifier hs-var">pool</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-466"></span><span>      </span><span class="annot"><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621679504867"><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621679504867"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621679504867"><span class="hs-identifier hs-var">c</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">KeyHash 'StakePool (EraCrypto era)
-&gt; Map (KeyHash 'StakePool (EraCrypto era)) Coin
-&gt; Map (KeyHash 'StakePool (EraCrypto era)) Coin
forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Map k a
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#delete"><span class="hs-identifier hs-var">Map.delete</span></a></span><span> </span><span class="annot"><span class="annottext">KeyHash 'StakePool (EraCrypto era)
</span><a href="#local-6989586621679504862"><span class="hs-identifier hs-var">keyhash</span></a></span><span> </span><span class="annot"><span class="annottext">Map (KeyHash 'StakePool (EraCrypto era)) Coin
</span><a href="#local-6989586621679504866"><span class="hs-identifier hs-var">pool</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-467"></span><span>      </span><span class="annot"><span class="annottext">Maybe Coin
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Coin
forall a. Monoid a =&gt; a
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#mempty"><span class="hs-identifier hs-var">mempty</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Map (KeyHash 'StakePool (EraCrypto era)) Coin
</span><a href="#local-6989586621679504866"><span class="hs-identifier hs-var">pool</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-468"></span><span>
</span><span id="line-469"></span><span class="annot"><span class="hs-comment">-- | A composite of all the Deposits the system is obligated to eventually pay back.</span></span><span>
</span><span id="line-470"></span><span class="hs-keyword">data</span><span> </span><span id="Obligations"><span class="annot"><a href="Cardano.Ledger.CertState.html#Obligations"><span class="hs-identifier hs-var">Obligations</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Obligations"><span class="annot"><a href="Cardano.Ledger.CertState.html#Obligations"><span class="hs-identifier hs-var">Obligations</span></a></span></span><span>
</span><span id="line-471"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="oblStake"><span class="annot"><span class="annottext">Obligations -&gt; Coin
</span><a href="Cardano.Ledger.CertState.html#oblStake"><span class="hs-identifier hs-var hs-var">oblStake</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="Cardano.Ledger.Coin.html#Coin"><span class="hs-identifier hs-type">Coin</span></a></span><span>
</span><span id="line-472"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="oblPool"><span class="annot"><span class="annottext">Obligations -&gt; Coin
</span><a href="Cardano.Ledger.CertState.html#oblPool"><span class="hs-identifier hs-var hs-var">oblPool</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="Cardano.Ledger.Coin.html#Coin"><span class="hs-identifier hs-type">Coin</span></a></span><span>
</span><span id="line-473"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="oblDRep"><span class="annot"><span class="annottext">Obligations -&gt; Coin
</span><a href="Cardano.Ledger.CertState.html#oblDRep"><span class="hs-identifier hs-var hs-var">oblDRep</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="Cardano.Ledger.Coin.html#Coin"><span class="hs-identifier hs-type">Coin</span></a></span><span>
</span><span id="line-474"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="oblProposal"><span class="annot"><span class="annottext">Obligations -&gt; Coin
</span><a href="Cardano.Ledger.CertState.html#oblProposal"><span class="hs-identifier hs-var hs-var">oblProposal</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="Cardano.Ledger.Coin.html#Coin"><span class="hs-identifier hs-type">Coin</span></a></span><span>
</span><span id="line-475"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-476"></span><span>
</span><span id="line-477"></span><span class="hs-comment">-- | Calculate total possible refunds in the system that are related to certificates</span><span>
</span><span id="line-478"></span><span class="hs-comment">--</span><span>
</span><span id="line-479"></span><span class="hs-comment">-- There is an invariant that the sum of all the fields should be the same as the</span><span>
</span><span id="line-480"></span><span class="hs-comment">-- utxosDeposited field of the UTxOState. Note that this does not depend upon the current</span><span>
</span><span id="line-481"></span><span class="hs-comment">-- values of the Key and Pool deposits of the PParams.</span><span>
</span><span id="line-482"></span><span id="local-6989586621679502916"><span class="annot"><a href="Cardano.Ledger.CertState.html#obligationCertState"><span class="hs-identifier hs-type">obligationCertState</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Ledger.CertState.html#CertState"><span class="hs-identifier hs-type">CertState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502916"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.Ledger.CertState.html#Obligations"><span class="hs-identifier hs-type">Obligations</span></a></span></span><span>
</span><span id="line-483"></span><span id="obligationCertState"><span class="annot"><span class="annottext">obligationCertState :: forall era. CertState era -&gt; Obligations
</span><a href="Cardano.Ledger.CertState.html#obligationCertState"><span class="hs-identifier hs-var hs-var">obligationCertState</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#CertState"><span class="hs-identifier hs-type">CertState</span></a></span><span> </span><span class="annot"><a href="Cardano.Ledger.CertState.html#VState"><span class="hs-identifier hs-type">VState</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621679504879"><span class="annot"><span class="annottext">Map
  (Credential 'DRepRole (EraCrypto era)) (DRepState (EraCrypto era))
vsDReps :: forall era.
VState era
-&gt; Map
     (Credential 'DRepRole (EraCrypto era)) (DRepState (EraCrypto era))
vsDReps :: Map
  (Credential 'DRepRole (EraCrypto era)) (DRepState (EraCrypto era))
</span><a href="Cardano.Ledger.CertState.html#vsDReps"><span class="hs-identifier hs-var hs-var">vsDReps</span></a></span></span><span class="hs-special">}</span><span> </span><span class="annot"><a href="Cardano.Ledger.CertState.html#PState"><span class="hs-identifier hs-type">PState</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621679504880"><span class="annot"><span class="annottext">Map (KeyHash 'StakePool (EraCrypto era)) Coin
psDeposits :: forall era.
PState era -&gt; Map (KeyHash 'StakePool (EraCrypto era)) Coin
psDeposits :: Map (KeyHash 'StakePool (EraCrypto era)) Coin
</span><a href="Cardano.Ledger.CertState.html#psDeposits"><span class="hs-identifier hs-var hs-var">psDeposits</span></a></span></span><span class="hs-special">}</span><span> </span><span class="annot"><a href="Cardano.Ledger.CertState.html#DState"><span class="hs-identifier hs-type">DState</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621679504881"><span class="annot"><span class="annottext">UMap (EraCrypto era)
dsUnified :: forall era. DState era -&gt; UMap (EraCrypto era)
dsUnified :: UMap (EraCrypto era)
</span><a href="Cardano.Ledger.CertState.html#dsUnified"><span class="hs-identifier hs-var hs-var">dsUnified</span></a></span></span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-484"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679504883"><span class="annot"><span class="annottext">accum :: Coin -&gt; DRepState c -&gt; Coin
</span><a href="#local-6989586621679504883"><span class="hs-identifier hs-var hs-var">accum</span></a></span></span><span> </span><span id="local-6989586621679504884"><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621679504884"><span class="hs-identifier hs-var">ans</span></a></span></span><span> </span><span id="local-6989586621679504885"><span class="annot"><span class="annottext">DRepState c
</span><a href="#local-6989586621679504885"><span class="hs-identifier hs-var">drepState</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621679504884"><span class="hs-identifier hs-var">ans</span></a></span><span> </span><span class="annot"><span class="annottext">Coin -&gt; Coin -&gt; Coin
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">DRepState c -&gt; Coin
forall c. DRepState c -&gt; Coin
</span><a href="Cardano.Ledger.DRep.html#drepDeposit"><span class="hs-identifier hs-var">drepDeposit</span></a></span><span> </span><span class="annot"><span class="annottext">DRepState c
</span><a href="#local-6989586621679504885"><span class="hs-identifier hs-var">drepState</span></a></span><span>
</span><span id="line-485"></span><span>   </span><span class="hs-keyword">in</span><span> </span><span class="annot"><a href="Cardano.Ledger.CertState.html#Obligations"><span class="hs-identifier hs-type">Obligations</span></a></span><span>
</span><span id="line-486"></span><span>        </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">oblStake :: Coin
</span><a href="Cardano.Ledger.CertState.html#oblStake"><span class="hs-identifier hs-var">oblStake</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CompactForm Coin -&gt; Coin
forall a. Compactible a =&gt; CompactForm a -&gt; a
</span><a href="Cardano.Ledger.Compactible.html#fromCompact"><span class="hs-identifier hs-var">UM.fromCompact</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">UView (EraCrypto era) (Credential 'Staking (EraCrypto era)) RDPair
-&gt; CompactForm Coin
forall c k. UView c k RDPair -&gt; CompactForm Coin
</span><a href="Cardano.Ledger.UMap.html#sumDepositUView"><span class="hs-identifier hs-var">UM.sumDepositUView</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">UMap (EraCrypto era)
-&gt; UView
     (EraCrypto era) (Credential 'Staking (EraCrypto era)) RDPair
forall c. UMap c -&gt; UView c (Credential 'Staking c) RDPair
</span><a href="Cardano.Ledger.UMap.html#RewDepUView"><span class="hs-identifier hs-var">RewDepUView</span></a></span><span> </span><span class="annot"><span class="annottext">UMap (EraCrypto era)
</span><a href="#local-6989586621679504881"><span class="hs-identifier hs-var">dsUnified</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-487"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">oblPool :: Coin
</span><a href="Cardano.Ledger.CertState.html#oblPool"><span class="hs-identifier hs-var">oblPool</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Coin -&gt; Coin -&gt; Coin)
-&gt; Coin -&gt; Map (KeyHash 'StakePool (EraCrypto era)) Coin -&gt; Coin
forall b a.
(b -&gt; a -&gt; b)
-&gt; b -&gt; Map (KeyHash 'StakePool (EraCrypto era)) a -&gt; b
forall (t :: * -&gt; *) b a.
Foldable t =&gt;
(b -&gt; a -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/Data.Foldable.html#foldl%27"><span class="hs-identifier hs-var">foldl'</span></a></span><span> </span><span class="annot"><span class="annottext">Coin -&gt; Coin -&gt; Coin
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%3C%3E"><span class="hs-operator hs-var">(&lt;&gt;)</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; Coin
</span><a href="Cardano.Ledger.Coin.html#Coin"><span class="hs-identifier hs-var">Coin</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Map (KeyHash 'StakePool (EraCrypto era)) Coin
</span><a href="#local-6989586621679504880"><span class="hs-identifier hs-var">psDeposits</span></a></span><span>
</span><span id="line-488"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">oblDRep :: Coin
</span><a href="Cardano.Ledger.CertState.html#oblDRep"><span class="hs-identifier hs-var">oblDRep</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Coin -&gt; DRepState (EraCrypto era) -&gt; Coin)
-&gt; Coin
-&gt; Map
     (Credential 'DRepRole (EraCrypto era)) (DRepState (EraCrypto era))
-&gt; Coin
forall b a.
(b -&gt; a -&gt; b)
-&gt; b -&gt; Map (Credential 'DRepRole (EraCrypto era)) a -&gt; b
forall (t :: * -&gt; *) b a.
Foldable t =&gt;
(b -&gt; a -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/Data.Foldable.html#foldl%27"><span class="hs-identifier hs-var">foldl'</span></a></span><span> </span><span class="annot"><span class="annottext">Coin -&gt; DRepState (EraCrypto era) -&gt; Coin
forall {c}. Coin -&gt; DRepState c -&gt; Coin
</span><a href="#local-6989586621679504883"><span class="hs-identifier hs-var">accum</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; Coin
</span><a href="Cardano.Ledger.Coin.html#Coin"><span class="hs-identifier hs-var">Coin</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Map
  (Credential 'DRepRole (EraCrypto era)) (DRepState (EraCrypto era))
</span><a href="#local-6989586621679504879"><span class="hs-identifier hs-var">vsDReps</span></a></span><span>
</span><span id="line-489"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">oblProposal :: Coin
</span><a href="Cardano.Ledger.CertState.html#oblProposal"><span class="hs-identifier hs-var">oblProposal</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Coin
</span><a href="Cardano.Ledger.Coin.html#Coin"><span class="hs-identifier hs-var">Coin</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">0</span></span><span>
</span><span id="line-490"></span><span>        </span><span class="hs-special">}</span><span>
</span><span id="line-491"></span><span>
</span><span id="line-492"></span><span class="annot"><a href="Cardano.Ledger.CertState.html#sumObligation"><span class="hs-identifier hs-type">sumObligation</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Ledger.CertState.html#Obligations"><span class="hs-identifier hs-type">Obligations</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.Ledger.Coin.html#Coin"><span class="hs-identifier hs-type">Coin</span></a></span><span>
</span><span id="line-493"></span><span id="sumObligation"><span class="annot"><span class="annottext">sumObligation :: Obligations -&gt; Coin
</span><a href="Cardano.Ledger.CertState.html#sumObligation"><span class="hs-identifier hs-var hs-var">sumObligation</span></a></span></span><span> </span><span id="local-6989586621679504888"><span class="annot"><span class="annottext">Obligations
</span><a href="#local-6989586621679504888"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Obligations -&gt; Coin
</span><a href="Cardano.Ledger.CertState.html#oblStake"><span class="hs-identifier hs-var">oblStake</span></a></span><span> </span><span class="annot"><span class="annottext">Obligations
</span><a href="#local-6989586621679504888"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Coin -&gt; Coin -&gt; Coin
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Obligations -&gt; Coin
</span><a href="Cardano.Ledger.CertState.html#oblPool"><span class="hs-identifier hs-var">oblPool</span></a></span><span> </span><span class="annot"><span class="annottext">Obligations
</span><a href="#local-6989586621679504888"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Coin -&gt; Coin -&gt; Coin
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Obligations -&gt; Coin
</span><a href="Cardano.Ledger.CertState.html#oblDRep"><span class="hs-identifier hs-var">oblDRep</span></a></span><span> </span><span class="annot"><span class="annottext">Obligations
</span><a href="#local-6989586621679504888"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Coin -&gt; Coin -&gt; Coin
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Obligations -&gt; Coin
</span><a href="Cardano.Ledger.CertState.html#oblProposal"><span class="hs-identifier hs-var">oblProposal</span></a></span><span> </span><span class="annot"><span class="annottext">Obligations
</span><a href="#local-6989586621679504888"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-494"></span><span>
</span><span id="line-495"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679504891"><span id="local-6989586621679504895"><span class="annot"><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#Semigroup"><span class="hs-identifier hs-type">Semigroup</span></a></span><span> </span><span class="annot"><a href="Cardano.Ledger.CertState.html#Obligations"><span class="hs-identifier hs-type">Obligations</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-496"></span><span>  </span><span id="local-6989586621679504904"><span class="annot"><span class="annottext">Obligations
</span><a href="#local-6989586621679504904"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679504905"><span class="annot"><span class="annottext">&lt;&gt; :: Obligations -&gt; Obligations -&gt; Obligations
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%3C%3E"><span class="hs-operator hs-var hs-var hs-var hs-var">&lt;&gt;</span></a></span></span><span> </span><span id="local-6989586621679504906"><span class="annot"><span class="annottext">Obligations
</span><a href="#local-6989586621679504906"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-497"></span><span>    </span><span class="annot"><a href="Cardano.Ledger.CertState.html#Obligations"><span class="hs-identifier hs-type">Obligations</span></a></span><span>
</span><span id="line-498"></span><span>      </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">oblStake :: Coin
</span><a href="Cardano.Ledger.CertState.html#oblStake"><span class="hs-identifier hs-var">oblStake</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Obligations -&gt; Coin
</span><a href="Cardano.Ledger.CertState.html#oblStake"><span class="hs-identifier hs-var">oblStake</span></a></span><span> </span><span class="annot"><span class="annottext">Obligations
</span><a href="#local-6989586621679504904"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Coin -&gt; Coin -&gt; Coin
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Obligations -&gt; Coin
</span><a href="Cardano.Ledger.CertState.html#oblStake"><span class="hs-identifier hs-var">oblStake</span></a></span><span> </span><span class="annot"><span class="annottext">Obligations
</span><a href="#local-6989586621679504906"><span class="hs-identifier hs-var">y</span></a></span><span>
</span><span id="line-499"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">oblPool :: Coin
</span><a href="Cardano.Ledger.CertState.html#oblPool"><span class="hs-identifier hs-var">oblPool</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Obligations -&gt; Coin
</span><a href="Cardano.Ledger.CertState.html#oblPool"><span class="hs-identifier hs-var">oblPool</span></a></span><span> </span><span class="annot"><span class="annottext">Obligations
</span><a href="#local-6989586621679504904"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Coin -&gt; Coin -&gt; Coin
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Obligations -&gt; Coin
</span><a href="Cardano.Ledger.CertState.html#oblPool"><span class="hs-identifier hs-var">oblPool</span></a></span><span> </span><span class="annot"><span class="annottext">Obligations
</span><a href="#local-6989586621679504906"><span class="hs-identifier hs-var">y</span></a></span><span>
</span><span id="line-500"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">oblDRep :: Coin
</span><a href="Cardano.Ledger.CertState.html#oblDRep"><span class="hs-identifier hs-var">oblDRep</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Obligations -&gt; Coin
</span><a href="Cardano.Ledger.CertState.html#oblDRep"><span class="hs-identifier hs-var">oblDRep</span></a></span><span> </span><span class="annot"><span class="annottext">Obligations
</span><a href="#local-6989586621679504904"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Coin -&gt; Coin -&gt; Coin
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Obligations -&gt; Coin
</span><a href="Cardano.Ledger.CertState.html#oblDRep"><span class="hs-identifier hs-var">oblDRep</span></a></span><span> </span><span class="annot"><span class="annottext">Obligations
</span><a href="#local-6989586621679504906"><span class="hs-identifier hs-var">y</span></a></span><span>
</span><span id="line-501"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">oblProposal :: Coin
</span><a href="Cardano.Ledger.CertState.html#oblProposal"><span class="hs-identifier hs-var">oblProposal</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Obligations -&gt; Coin
</span><a href="Cardano.Ledger.CertState.html#oblProposal"><span class="hs-identifier hs-var">oblProposal</span></a></span><span> </span><span class="annot"><span class="annottext">Obligations
</span><a href="#local-6989586621679504904"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Coin -&gt; Coin -&gt; Coin
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Obligations -&gt; Coin
</span><a href="Cardano.Ledger.CertState.html#oblProposal"><span class="hs-identifier hs-var">oblProposal</span></a></span><span> </span><span class="annot"><span class="annottext">Obligations
</span><a href="#local-6989586621679504906"><span class="hs-identifier hs-var">y</span></a></span><span>
</span><span id="line-502"></span><span>      </span><span class="hs-special">}</span><span>
</span><span id="line-503"></span><span>
</span><span id="line-504"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679504911"><span id="local-6989586621679504915"><span class="annot"><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#Monoid"><span class="hs-identifier hs-type">Monoid</span></a></span><span> </span><span class="annot"><a href="Cardano.Ledger.CertState.html#Obligations"><span class="hs-identifier hs-type">Obligations</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-505"></span><span>  </span><span id="local-6989586621679504918"><span class="annot"><span class="annottext">mempty :: Obligations
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#mempty"><span class="hs-identifier hs-var hs-var hs-var hs-var">mempty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Cardano.Ledger.CertState.html#Obligations"><span class="hs-identifier hs-type">Obligations</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">oblStake :: Coin
</span><a href="Cardano.Ledger.CertState.html#oblStake"><span class="hs-identifier hs-var">oblStake</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Coin
</span><a href="Cardano.Ledger.Coin.html#Coin"><span class="hs-identifier hs-var">Coin</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">0</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">oblPool :: Coin
</span><a href="Cardano.Ledger.CertState.html#oblPool"><span class="hs-identifier hs-var">oblPool</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Coin
</span><a href="Cardano.Ledger.Coin.html#Coin"><span class="hs-identifier hs-var">Coin</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">0</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">oblDRep :: Coin
</span><a href="Cardano.Ledger.CertState.html#oblDRep"><span class="hs-identifier hs-var">oblDRep</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Coin
</span><a href="Cardano.Ledger.Coin.html#Coin"><span class="hs-identifier hs-var">Coin</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">0</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">oblProposal :: Coin
</span><a href="Cardano.Ledger.CertState.html#oblProposal"><span class="hs-identifier hs-var">oblProposal</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Coin
</span><a href="Cardano.Ledger.Coin.html#Coin"><span class="hs-identifier hs-var">Coin</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">0</span></span><span class="hs-special">}</span><span>
</span><span id="line-506"></span><span>
</span><span id="line-507"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679504920"><span id="local-6989586621679504925"><span class="annot"><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Show.html#Show"><span class="hs-identifier hs-type">Show</span></a></span><span> </span><span class="annot"><a href="Cardano.Ledger.CertState.html#Obligations"><span class="hs-identifier hs-type">Obligations</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-508"></span><span>  </span><span id="local-6989586621679504939"><span class="annot"><span class="annottext">show :: Obligations -&gt; String
</span><a href="#local-6989586621679504939"><span class="hs-identifier hs-var hs-var hs-var hs-var">show</span></a></span></span><span> </span><span id="local-6989586621679504941"><span class="annot"><span class="annottext">Obligations
</span><a href="#local-6989586621679504941"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-509"></span><span>    </span><span class="annot"><span class="annottext">Context -&gt; String
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/Data.OldList.html#unlines"><span class="hs-identifier hs-var">unlines</span></a></span><span>
</span><span id="line-510"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Total Obligations = &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">Coin -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Show.html#show"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Obligations -&gt; Coin
</span><a href="Cardano.Ledger.CertState.html#sumObligation"><span class="hs-identifier hs-var">sumObligation</span></a></span><span> </span><span class="annot"><span class="annottext">Obligations
</span><a href="#local-6989586621679504941"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-511"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;   Stake deposits = &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">Coin -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Show.html#show"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Obligations -&gt; Coin
</span><a href="Cardano.Ledger.CertState.html#oblStake"><span class="hs-identifier hs-var">oblStake</span></a></span><span> </span><span class="annot"><span class="annottext">Obligations
</span><a href="#local-6989586621679504941"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-512"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;   Pool deposits = &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">Coin -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Show.html#show"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Obligations -&gt; Coin
</span><a href="Cardano.Ledger.CertState.html#oblPool"><span class="hs-identifier hs-var">oblPool</span></a></span><span> </span><span class="annot"><span class="annottext">Obligations
</span><a href="#local-6989586621679504941"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-513"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;   DRep deposits = &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">Coin -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Show.html#show"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Obligations -&gt; Coin
</span><a href="Cardano.Ledger.CertState.html#oblDRep"><span class="hs-identifier hs-var">oblDRep</span></a></span><span> </span><span class="annot"><span class="annottext">Obligations
</span><a href="#local-6989586621679504941"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-514"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;   Proposal deposits = &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">Coin -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Show.html#show"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Obligations -&gt; Coin
</span><a href="Cardano.Ledger.CertState.html#oblProposal"><span class="hs-identifier hs-var">oblProposal</span></a></span><span> </span><span class="annot"><span class="annottext">Obligations
</span><a href="#local-6989586621679504941"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-515"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-516"></span><span>
</span><span id="line-517"></span><span class="hs-comment">-- | Compute the total deposits from the Certs of a TxBody.</span><span>
</span><span id="line-518"></span><span class="hs-comment">--</span><span>
</span><span id="line-519"></span><span class="hs-comment">-- This is the contribution of a TxBody towards the deposit pot (utxosDeposit field of</span><span>
</span><span id="line-520"></span><span class="hs-comment">-- the UTxOState) of the system</span><span>
</span><span id="line-521"></span><span id="local-6989586621679502929"><span class="annot"><a href="Cardano.Ledger.CertState.html#certsTotalDepositsTxBody"><span class="hs-identifier hs-type">certsTotalDepositsTxBody</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Ledger.Core.html#EraTxBody"><span class="hs-identifier hs-type">EraTxBody</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502929"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Cardano.Ledger.Core.PParams.html#PParams"><span class="hs-identifier hs-type">PParams</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502929"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.Ledger.CertState.html#CertState"><span class="hs-identifier hs-type">CertState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502929"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.Ledger.Core.html#TxBody"><span class="hs-identifier hs-type">TxBody</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502929"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.Ledger.Coin.html#Coin"><span class="hs-identifier hs-type">Coin</span></a></span></span><span>
</span><span id="line-522"></span><span id="certsTotalDepositsTxBody"><span class="annot"><span class="annottext">certsTotalDepositsTxBody :: forall era.
EraTxBody era =&gt;
PParams era -&gt; CertState era -&gt; TxBody era -&gt; Coin
</span><a href="Cardano.Ledger.CertState.html#certsTotalDepositsTxBody"><span class="hs-identifier hs-var hs-var">certsTotalDepositsTxBody</span></a></span></span><span> </span><span id="local-6989586621679504946"><span class="annot"><span class="annottext">PParams era
</span><a href="#local-6989586621679504946"><span class="hs-identifier hs-var">pp</span></a></span></span><span> </span><span class="annot"><a href="Cardano.Ledger.CertState.html#CertState"><span class="hs-identifier hs-type">CertState</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621679504947"><span class="annot"><span class="annottext">PState era
certPState :: forall era. CertState era -&gt; PState era
certPState :: PState era
</span><a href="Cardano.Ledger.CertState.html#certPState"><span class="hs-identifier hs-var hs-var">certPState</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-523"></span><span>  </span><span class="annot"><span class="annottext">PParams era
-&gt; (KeyHash 'StakePool (EraCrypto era) -&gt; Bool)
-&gt; TxBody era
-&gt; Coin
forall era.
EraTxBody era =&gt;
PParams era
-&gt; (KeyHash 'StakePool (EraCrypto era) -&gt; Bool)
-&gt; TxBody era
-&gt; Coin
</span><a href="Cardano.Ledger.Core.html#getTotalDepositsTxBody"><span class="hs-identifier hs-var">getTotalDepositsTxBody</span></a></span><span> </span><span class="annot"><span class="annottext">PParams era
</span><a href="#local-6989586621679504946"><span class="hs-identifier hs-var">pp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">KeyHash 'StakePool (EraCrypto era)
-&gt; Map
     (KeyHash 'StakePool (EraCrypto era)) (PoolParams (EraCrypto era))
-&gt; Bool
forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Bool
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#member"><span class="hs-operator hs-var">`Map.member`</span></a></span><span> </span><span class="annot"><span class="annottext">PState era
-&gt; Map
     (KeyHash 'StakePool (EraCrypto era)) (PoolParams (EraCrypto era))
forall era.
PState era
-&gt; Map
     (KeyHash 'StakePool (EraCrypto era)) (PoolParams (EraCrypto era))
</span><a href="Cardano.Ledger.CertState.html#psStakePoolParams"><span class="hs-identifier hs-var">psStakePoolParams</span></a></span><span> </span><span class="annot"><span class="annottext">PState era
</span><a href="#local-6989586621679504947"><span class="hs-identifier hs-var">certPState</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-524"></span><span>
</span><span id="line-525"></span><span class="hs-comment">-- | Compute the total refunds from the Certs of a TxBody.</span><span>
</span><span id="line-526"></span><span class="hs-comment">--</span><span>
</span><span id="line-527"></span><span class="hs-comment">-- This is the contribution of a TxBody towards the total 'Obligations' of the system</span><span>
</span><span id="line-528"></span><span class="hs-comment">-- See `Obligations` and `obligationCertState` for more information.</span><span>
</span><span id="line-529"></span><span id="local-6989586621679504950"><span class="annot"><a href="Cardano.Ledger.CertState.html#certsTotalRefundsTxBody"><span class="hs-identifier hs-type">certsTotalRefundsTxBody</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Ledger.Core.html#EraTxBody"><span class="hs-identifier hs-type">EraTxBody</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679504950"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Cardano.Ledger.Core.PParams.html#PParams"><span class="hs-identifier hs-type">PParams</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679504950"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.Ledger.CertState.html#CertState"><span class="hs-identifier hs-type">CertState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679504950"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.Ledger.Core.html#TxBody"><span class="hs-identifier hs-type">TxBody</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679504950"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.Ledger.Coin.html#Coin"><span class="hs-identifier hs-type">Coin</span></a></span></span><span>
</span><span id="line-530"></span><span id="certsTotalRefundsTxBody"><span class="annot"><span class="annottext">certsTotalRefundsTxBody :: forall era.
EraTxBody era =&gt;
PParams era -&gt; CertState era -&gt; TxBody era -&gt; Coin
</span><a href="Cardano.Ledger.CertState.html#certsTotalRefundsTxBody"><span class="hs-identifier hs-var hs-var">certsTotalRefundsTxBody</span></a></span></span><span> </span><span id="local-6989586621679504953"><span class="annot"><span class="annottext">PParams era
</span><a href="#local-6989586621679504953"><span class="hs-identifier hs-var">pp</span></a></span></span><span> </span><span class="annot"><a href="Cardano.Ledger.CertState.html#CertState"><span class="hs-identifier hs-type">CertState</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621679504954"><span class="annot"><span class="annottext">DState era
certDState :: forall era. CertState era -&gt; DState era
certDState :: DState era
</span><a href="Cardano.Ledger.CertState.html#certDState"><span class="hs-identifier hs-var hs-var">certDState</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679504955"><span class="annot"><span class="annottext">VState era
certVState :: forall era. CertState era -&gt; VState era
certVState :: VState era
</span><a href="Cardano.Ledger.CertState.html#certVState"><span class="hs-identifier hs-var hs-var">certVState</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-531"></span><span>  </span><span class="annot"><span class="annottext">PParams era
-&gt; (Credential 'Staking (EraCrypto era) -&gt; Maybe Coin)
-&gt; (Credential 'DRepRole (EraCrypto era) -&gt; Maybe Coin)
-&gt; TxBody era
-&gt; Coin
forall era.
EraTxBody era =&gt;
PParams era
-&gt; (Credential 'Staking (EraCrypto era) -&gt; Maybe Coin)
-&gt; (Credential 'DRepRole (EraCrypto era) -&gt; Maybe Coin)
-&gt; TxBody era
-&gt; Coin
</span><a href="Cardano.Ledger.Core.html#getTotalRefundsTxBody"><span class="hs-identifier hs-var">getTotalRefundsTxBody</span></a></span><span> </span><span class="annot"><span class="annottext">PParams era
</span><a href="#local-6989586621679504953"><span class="hs-identifier hs-var">pp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DState era -&gt; Credential 'Staking (EraCrypto era) -&gt; Maybe Coin
forall era.
DState era -&gt; StakeCredential (EraCrypto era) -&gt; Maybe Coin
</span><a href="Cardano.Ledger.CertState.html#lookupDepositDState"><span class="hs-identifier hs-var">lookupDepositDState</span></a></span><span> </span><span class="annot"><span class="annottext">DState era
</span><a href="#local-6989586621679504954"><span class="hs-identifier hs-var">certDState</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">VState era -&gt; Credential 'DRepRole (EraCrypto era) -&gt; Maybe Coin
forall era.
VState era -&gt; Credential 'DRepRole (EraCrypto era) -&gt; Maybe Coin
</span><a href="Cardano.Ledger.CertState.html#lookupDepositVState"><span class="hs-identifier hs-var">lookupDepositVState</span></a></span><span> </span><span class="annot"><span class="annottext">VState era
</span><a href="#local-6989586621679504955"><span class="hs-identifier hs-var">certVState</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-532"></span><span>
</span><span id="line-533"></span><span class="hs-comment">-- =======================================================</span><span>
</span><span id="line-534"></span><span class="hs-comment">-- Lenses for CertState and its subsidiary types</span><span>
</span><span id="line-535"></span><span>
</span><span id="line-536"></span><span class="hs-comment">-- ========================================</span><span>
</span><span id="line-537"></span><span class="hs-comment">-- CertState</span><span>
</span><span id="line-538"></span><span>
</span><span id="line-539"></span><span id="local-6989586621679502935"><span class="annot"><a href="Cardano.Ledger.CertState.html#certDStateL"><span class="hs-identifier hs-type">certDStateL</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Lens'</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#CertState"><span class="hs-identifier hs-type">CertState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502935"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#DState"><span class="hs-identifier hs-type">DState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502935"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-540"></span><span id="certDStateL"><span class="annot"><span class="annottext">certDStateL :: forall era (f :: * -&gt; *).
Functor f =&gt;
(DState era -&gt; f (DState era))
-&gt; CertState era -&gt; f (CertState era)
</span><a href="Cardano.Ledger.CertState.html#certDStateL"><span class="hs-identifier hs-var hs-var">certDStateL</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(CertState era -&gt; DState era)
-&gt; (CertState era -&gt; DState era -&gt; CertState era)
-&gt; Lens (CertState era) (CertState era) (DState era) (DState era)
forall s a b t. (s -&gt; a) -&gt; (s -&gt; b -&gt; t) -&gt; Lens s t a b
</span><span class="hs-identifier hs-var">lens</span></span><span> </span><span class="annot"><span class="annottext">CertState era -&gt; DState era
forall era. CertState era -&gt; DState era
</span><a href="Cardano.Ledger.CertState.html#certDState"><span class="hs-identifier hs-var">certDState</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679504959"><span class="annot"><span class="annottext">CertState era
</span><a href="#local-6989586621679504959"><span class="hs-identifier hs-var">ds</span></a></span></span><span> </span><span id="local-6989586621679504960"><span class="annot"><span class="annottext">DState era
</span><a href="#local-6989586621679504960"><span class="hs-identifier hs-var">u</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">CertState era
</span><a href="#local-6989586621679504959"><span class="hs-identifier hs-var">ds</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><a href="Cardano.Ledger.CertState.html#certDState"><span class="hs-identifier hs-var">certDState</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679504960"><span class="hs-identifier hs-type">u</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-541"></span><span>
</span><span id="line-542"></span><span id="local-6989586621679502942"><span class="annot"><a href="Cardano.Ledger.CertState.html#certPStateL"><span class="hs-identifier hs-type">certPStateL</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Lens'</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#CertState"><span class="hs-identifier hs-type">CertState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502942"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#PState"><span class="hs-identifier hs-type">PState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502942"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-543"></span><span id="certPStateL"><span class="annot"><span class="annottext">certPStateL :: forall era (f :: * -&gt; *).
Functor f =&gt;
(PState era -&gt; f (PState era))
-&gt; CertState era -&gt; f (CertState era)
</span><a href="Cardano.Ledger.CertState.html#certPStateL"><span class="hs-identifier hs-var hs-var">certPStateL</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(CertState era -&gt; PState era)
-&gt; (CertState era -&gt; PState era -&gt; CertState era)
-&gt; Lens (CertState era) (CertState era) (PState era) (PState era)
forall s a b t. (s -&gt; a) -&gt; (s -&gt; b -&gt; t) -&gt; Lens s t a b
</span><span class="hs-identifier hs-var">lens</span></span><span> </span><span class="annot"><span class="annottext">CertState era -&gt; PState era
forall era. CertState era -&gt; PState era
</span><a href="Cardano.Ledger.CertState.html#certPState"><span class="hs-identifier hs-var">certPState</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679504963"><span class="annot"><span class="annottext">CertState era
</span><a href="#local-6989586621679504963"><span class="hs-identifier hs-var">ds</span></a></span></span><span> </span><span id="local-6989586621679504964"><span class="annot"><span class="annottext">PState era
</span><a href="#local-6989586621679504964"><span class="hs-identifier hs-var">u</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">CertState era
</span><a href="#local-6989586621679504963"><span class="hs-identifier hs-var">ds</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><a href="Cardano.Ledger.CertState.html#certPState"><span class="hs-identifier hs-var">certPState</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679504964"><span class="hs-identifier hs-type">u</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-544"></span><span>
</span><span id="line-545"></span><span id="local-6989586621679502945"><span class="annot"><a href="Cardano.Ledger.CertState.html#certVStateL"><span class="hs-identifier hs-type">certVStateL</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Lens'</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#CertState"><span class="hs-identifier hs-type">CertState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502945"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#VState"><span class="hs-identifier hs-type">VState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502945"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-546"></span><span id="certVStateL"><span class="annot"><span class="annottext">certVStateL :: forall era (f :: * -&gt; *).
Functor f =&gt;
(VState era -&gt; f (VState era))
-&gt; CertState era -&gt; f (CertState era)
</span><a href="Cardano.Ledger.CertState.html#certVStateL"><span class="hs-identifier hs-var hs-var">certVStateL</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(CertState era -&gt; VState era)
-&gt; (CertState era -&gt; VState era -&gt; CertState era)
-&gt; Lens (CertState era) (CertState era) (VState era) (VState era)
forall s a b t. (s -&gt; a) -&gt; (s -&gt; b -&gt; t) -&gt; Lens s t a b
</span><span class="hs-identifier hs-var">lens</span></span><span> </span><span class="annot"><span class="annottext">CertState era -&gt; VState era
forall era. CertState era -&gt; VState era
</span><a href="Cardano.Ledger.CertState.html#certVState"><span class="hs-identifier hs-var">certVState</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679504967"><span class="annot"><span class="annottext">CertState era
</span><a href="#local-6989586621679504967"><span class="hs-identifier hs-var">ds</span></a></span></span><span> </span><span id="local-6989586621679504968"><span class="annot"><span class="annottext">VState era
</span><a href="#local-6989586621679504968"><span class="hs-identifier hs-var">u</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">CertState era
</span><a href="#local-6989586621679504967"><span class="hs-identifier hs-var">ds</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><a href="Cardano.Ledger.CertState.html#certVState"><span class="hs-identifier hs-var">certVState</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679504968"><span class="hs-identifier hs-type">u</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-547"></span><span>
</span><span id="line-548"></span><span class="hs-comment">-- ===================================</span><span>
</span><span id="line-549"></span><span class="hs-comment">-- DState</span><span>
</span><span id="line-550"></span><span>
</span><span id="line-551"></span><span id="local-6989586621679502948"><span class="annot"><a href="Cardano.Ledger.CertState.html#dsUnifiedL"><span class="hs-identifier hs-type">dsUnifiedL</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Lens'</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#DState"><span class="hs-identifier hs-type">DState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502948"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.UMap.html#UMap"><span class="hs-identifier hs-type">UMap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Core.Era.html#EraCrypto"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502948"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span><span>
</span><span id="line-552"></span><span id="dsUnifiedL"><span class="annot"><span class="annottext">dsUnifiedL :: forall era (f :: * -&gt; *).
Functor f =&gt;
(UMap (EraCrypto era) -&gt; f (UMap (EraCrypto era)))
-&gt; DState era -&gt; f (DState era)
</span><a href="Cardano.Ledger.CertState.html#dsUnifiedL"><span class="hs-identifier hs-var hs-var">dsUnifiedL</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(DState era -&gt; UMap (EraCrypto era))
-&gt; (DState era -&gt; UMap (EraCrypto era) -&gt; DState era)
-&gt; Lens
     (DState era)
     (DState era)
     (UMap (EraCrypto era))
     (UMap (EraCrypto era))
forall s a b t. (s -&gt; a) -&gt; (s -&gt; b -&gt; t) -&gt; Lens s t a b
</span><span class="hs-identifier hs-var">lens</span></span><span> </span><span class="annot"><span class="annottext">DState era -&gt; UMap (EraCrypto era)
forall era. DState era -&gt; UMap (EraCrypto era)
</span><a href="Cardano.Ledger.CertState.html#dsUnified"><span class="hs-identifier hs-var">dsUnified</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679504971"><span class="annot"><span class="annottext">DState era
</span><a href="#local-6989586621679504971"><span class="hs-identifier hs-var">ds</span></a></span></span><span> </span><span id="local-6989586621679504972"><span class="annot"><span class="annottext">UMap (EraCrypto era)
</span><a href="#local-6989586621679504972"><span class="hs-identifier hs-var">u</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">DState era
</span><a href="#local-6989586621679504971"><span class="hs-identifier hs-var">ds</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><a href="Cardano.Ledger.CertState.html#dsUnified"><span class="hs-identifier hs-var">dsUnified</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679504972"><span class="hs-identifier hs-type">u</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-553"></span><span>
</span><span id="line-554"></span><span id="local-6989586621679502951"><span class="annot"><a href="Cardano.Ledger.CertState.html#dsGenDelegsL"><span class="hs-identifier hs-type">dsGenDelegsL</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Lens'</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#DState"><span class="hs-identifier hs-type">DState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502951"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Keys.Internal.html#GenDelegs"><span class="hs-identifier hs-type">GenDelegs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Core.Era.html#EraCrypto"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502951"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span><span>
</span><span id="line-555"></span><span id="dsGenDelegsL"><span class="annot"><span class="annottext">dsGenDelegsL :: forall era (f :: * -&gt; *).
Functor f =&gt;
(GenDelegs (EraCrypto era) -&gt; f (GenDelegs (EraCrypto era)))
-&gt; DState era -&gt; f (DState era)
</span><a href="Cardano.Ledger.CertState.html#dsGenDelegsL"><span class="hs-identifier hs-var hs-var">dsGenDelegsL</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(DState era -&gt; GenDelegs (EraCrypto era))
-&gt; (DState era -&gt; GenDelegs (EraCrypto era) -&gt; DState era)
-&gt; Lens
     (DState era)
     (DState era)
     (GenDelegs (EraCrypto era))
     (GenDelegs (EraCrypto era))
forall s a b t. (s -&gt; a) -&gt; (s -&gt; b -&gt; t) -&gt; Lens s t a b
</span><span class="hs-identifier hs-var">lens</span></span><span> </span><span class="annot"><span class="annottext">DState era -&gt; GenDelegs (EraCrypto era)
forall era. DState era -&gt; GenDelegs (EraCrypto era)
</span><a href="Cardano.Ledger.CertState.html#dsGenDelegs"><span class="hs-identifier hs-var">dsGenDelegs</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679504975"><span class="annot"><span class="annottext">DState era
</span><a href="#local-6989586621679504975"><span class="hs-identifier hs-var">ds</span></a></span></span><span> </span><span id="local-6989586621679504976"><span class="annot"><span class="annottext">GenDelegs (EraCrypto era)
</span><a href="#local-6989586621679504976"><span class="hs-identifier hs-var">u</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">DState era
</span><a href="#local-6989586621679504975"><span class="hs-identifier hs-var">ds</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><a href="Cardano.Ledger.CertState.html#dsGenDelegs"><span class="hs-identifier hs-var">dsGenDelegs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679504976"><span class="hs-identifier hs-type">u</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-556"></span><span>
</span><span id="line-557"></span><span id="local-6989586621679502954"><span class="annot"><a href="Cardano.Ledger.CertState.html#dsIRewardsL"><span class="hs-identifier hs-type">dsIRewardsL</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Lens'</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#DState"><span class="hs-identifier hs-type">DState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502954"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#InstantaneousRewards"><span class="hs-identifier hs-type">InstantaneousRewards</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Core.Era.html#EraCrypto"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502954"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span><span>
</span><span id="line-558"></span><span id="dsIRewardsL"><span class="annot"><span class="annottext">dsIRewardsL :: forall era (f :: * -&gt; *).
Functor f =&gt;
(InstantaneousRewards (EraCrypto era)
 -&gt; f (InstantaneousRewards (EraCrypto era)))
-&gt; DState era -&gt; f (DState era)
</span><a href="Cardano.Ledger.CertState.html#dsIRewardsL"><span class="hs-identifier hs-var hs-var">dsIRewardsL</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(DState era -&gt; InstantaneousRewards (EraCrypto era))
-&gt; (DState era
    -&gt; InstantaneousRewards (EraCrypto era) -&gt; DState era)
-&gt; Lens
     (DState era)
     (DState era)
     (InstantaneousRewards (EraCrypto era))
     (InstantaneousRewards (EraCrypto era))
forall s a b t. (s -&gt; a) -&gt; (s -&gt; b -&gt; t) -&gt; Lens s t a b
</span><span class="hs-identifier hs-var">lens</span></span><span> </span><span class="annot"><span class="annottext">DState era -&gt; InstantaneousRewards (EraCrypto era)
forall era. DState era -&gt; InstantaneousRewards (EraCrypto era)
</span><a href="Cardano.Ledger.CertState.html#dsIRewards"><span class="hs-identifier hs-var">dsIRewards</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679504979"><span class="annot"><span class="annottext">DState era
</span><a href="#local-6989586621679504979"><span class="hs-identifier hs-var">ds</span></a></span></span><span> </span><span id="local-6989586621679504980"><span class="annot"><span class="annottext">InstantaneousRewards (EraCrypto era)
</span><a href="#local-6989586621679504980"><span class="hs-identifier hs-var">u</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">DState era
</span><a href="#local-6989586621679504979"><span class="hs-identifier hs-var">ds</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><a href="Cardano.Ledger.CertState.html#dsIRewards"><span class="hs-identifier hs-var">dsIRewards</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679504980"><span class="hs-identifier hs-type">u</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-559"></span><span>
</span><span id="line-560"></span><span id="local-6989586621679502957"><span class="annot"><a href="Cardano.Ledger.CertState.html#dsFutureGenDelegsL"><span class="hs-identifier hs-type">dsFutureGenDelegsL</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Lens'</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#DState"><span class="hs-identifier hs-type">DState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502957"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#Map"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#FutureGenDeleg"><span class="hs-identifier hs-type">FutureGenDeleg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Core.Era.html#EraCrypto"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502957"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Keys.Internal.html#GenDelegPair"><span class="hs-identifier hs-type">GenDelegPair</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Core.Era.html#EraCrypto"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502957"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span></span><span>
</span><span id="line-561"></span><span id="dsFutureGenDelegsL"><span class="annot"><span class="annottext">dsFutureGenDelegsL :: forall era (f :: * -&gt; *).
Functor f =&gt;
(Map
   (FutureGenDeleg (EraCrypto era)) (GenDelegPair (EraCrypto era))
 -&gt; f (Map
         (FutureGenDeleg (EraCrypto era)) (GenDelegPair (EraCrypto era))))
-&gt; DState era -&gt; f (DState era)
</span><a href="Cardano.Ledger.CertState.html#dsFutureGenDelegsL"><span class="hs-identifier hs-var hs-var">dsFutureGenDelegsL</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(DState era
 -&gt; Map
      (FutureGenDeleg (EraCrypto era)) (GenDelegPair (EraCrypto era)))
-&gt; (DState era
    -&gt; Map
         (FutureGenDeleg (EraCrypto era)) (GenDelegPair (EraCrypto era))
    -&gt; DState era)
-&gt; Lens
     (DState era)
     (DState era)
     (Map
        (FutureGenDeleg (EraCrypto era)) (GenDelegPair (EraCrypto era)))
     (Map
        (FutureGenDeleg (EraCrypto era)) (GenDelegPair (EraCrypto era)))
forall s a b t. (s -&gt; a) -&gt; (s -&gt; b -&gt; t) -&gt; Lens s t a b
</span><span class="hs-identifier hs-var">lens</span></span><span> </span><span class="annot"><span class="annottext">DState era
-&gt; Map
     (FutureGenDeleg (EraCrypto era)) (GenDelegPair (EraCrypto era))
forall era.
DState era
-&gt; Map
     (FutureGenDeleg (EraCrypto era)) (GenDelegPair (EraCrypto era))
</span><a href="Cardano.Ledger.CertState.html#dsFutureGenDelegs"><span class="hs-identifier hs-var">dsFutureGenDelegs</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679504983"><span class="annot"><span class="annottext">DState era
</span><a href="#local-6989586621679504983"><span class="hs-identifier hs-var">ds</span></a></span></span><span> </span><span id="local-6989586621679504984"><span class="annot"><span class="annottext">Map (FutureGenDeleg (EraCrypto era)) (GenDelegPair (EraCrypto era))
</span><a href="#local-6989586621679504984"><span class="hs-identifier hs-var">u</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">DState era
</span><a href="#local-6989586621679504983"><span class="hs-identifier hs-var">ds</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><a href="Cardano.Ledger.CertState.html#dsFutureGenDelegs"><span class="hs-identifier hs-var">dsFutureGenDelegs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679504984"><span class="hs-identifier hs-type">u</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-562"></span><span>
</span><span id="line-563"></span><span class="hs-comment">-- ===================================</span><span>
</span><span id="line-564"></span><span class="hs-comment">-- PState</span><span>
</span><span id="line-565"></span><span>
</span><span id="line-566"></span><span id="local-6989586621679502960"><span class="annot"><a href="Cardano.Ledger.CertState.html#psStakePoolParamsL"><span class="hs-identifier hs-type">psStakePoolParamsL</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Lens'</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#PState"><span class="hs-identifier hs-type">PState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502960"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#Map"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Keys.Internal.html#KeyHash"><span class="hs-identifier hs-type">KeyHash</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Cardano.Ledger.Keys.Internal.html#StakePool"><span class="hs-identifier hs-type">StakePool</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Core.Era.html#EraCrypto"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502960"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.PoolParams.html#PoolParams"><span class="hs-identifier hs-type">PoolParams</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Core.Era.html#EraCrypto"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502960"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span></span><span>
</span><span id="line-567"></span><span id="psStakePoolParamsL"><span class="annot"><span class="annottext">psStakePoolParamsL :: forall era (f :: * -&gt; *).
Functor f =&gt;
(Map
   (KeyHash 'StakePool (EraCrypto era)) (PoolParams (EraCrypto era))
 -&gt; f (Map
         (KeyHash 'StakePool (EraCrypto era)) (PoolParams (EraCrypto era))))
-&gt; PState era -&gt; f (PState era)
</span><a href="Cardano.Ledger.CertState.html#psStakePoolParamsL"><span class="hs-identifier hs-var hs-var">psStakePoolParamsL</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(PState era
 -&gt; Map
      (KeyHash 'StakePool (EraCrypto era)) (PoolParams (EraCrypto era)))
-&gt; (PState era
    -&gt; Map
         (KeyHash 'StakePool (EraCrypto era)) (PoolParams (EraCrypto era))
    -&gt; PState era)
-&gt; Lens
     (PState era)
     (PState era)
     (Map
        (KeyHash 'StakePool (EraCrypto era)) (PoolParams (EraCrypto era)))
     (Map
        (KeyHash 'StakePool (EraCrypto era)) (PoolParams (EraCrypto era)))
forall s a b t. (s -&gt; a) -&gt; (s -&gt; b -&gt; t) -&gt; Lens s t a b
</span><span class="hs-identifier hs-var">lens</span></span><span> </span><span class="annot"><span class="annottext">PState era
-&gt; Map
     (KeyHash 'StakePool (EraCrypto era)) (PoolParams (EraCrypto era))
forall era.
PState era
-&gt; Map
     (KeyHash 'StakePool (EraCrypto era)) (PoolParams (EraCrypto era))
</span><a href="Cardano.Ledger.CertState.html#psStakePoolParams"><span class="hs-identifier hs-var">psStakePoolParams</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679504987"><span class="annot"><span class="annottext">PState era
</span><a href="#local-6989586621679504987"><span class="hs-identifier hs-var">ds</span></a></span></span><span> </span><span id="local-6989586621679504988"><span class="annot"><span class="annottext">Map
  (KeyHash 'StakePool (EraCrypto era)) (PoolParams (EraCrypto era))
</span><a href="#local-6989586621679504988"><span class="hs-identifier hs-var">u</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">PState era
</span><a href="#local-6989586621679504987"><span class="hs-identifier hs-var">ds</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><a href="Cardano.Ledger.CertState.html#psStakePoolParams"><span class="hs-identifier hs-var">psStakePoolParams</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679504988"><span class="hs-identifier hs-type">u</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-568"></span><span>
</span><span id="line-569"></span><span id="local-6989586621679504989"><span class="annot"><a href="Cardano.Ledger.CertState.html#psFutureStakePoolParamsL"><span class="hs-identifier hs-type">psFutureStakePoolParamsL</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Lens'</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#PState"><span class="hs-identifier hs-type">PState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679504989"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#Map"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Keys.Internal.html#KeyHash"><span class="hs-identifier hs-type">KeyHash</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Cardano.Ledger.Keys.Internal.html#StakePool"><span class="hs-identifier hs-type">StakePool</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Core.Era.html#EraCrypto"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679504989"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.PoolParams.html#PoolParams"><span class="hs-identifier hs-type">PoolParams</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Core.Era.html#EraCrypto"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679504989"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span></span><span>
</span><span id="line-570"></span><span id="psFutureStakePoolParamsL"><span class="annot"><span class="annottext">psFutureStakePoolParamsL :: forall era (f :: * -&gt; *).
Functor f =&gt;
(Map
   (KeyHash 'StakePool (EraCrypto era)) (PoolParams (EraCrypto era))
 -&gt; f (Map
         (KeyHash 'StakePool (EraCrypto era)) (PoolParams (EraCrypto era))))
-&gt; PState era -&gt; f (PState era)
</span><a href="Cardano.Ledger.CertState.html#psFutureStakePoolParamsL"><span class="hs-identifier hs-var hs-var">psFutureStakePoolParamsL</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(PState era
 -&gt; Map
      (KeyHash 'StakePool (EraCrypto era)) (PoolParams (EraCrypto era)))
-&gt; (PState era
    -&gt; Map
         (KeyHash 'StakePool (EraCrypto era)) (PoolParams (EraCrypto era))
    -&gt; PState era)
-&gt; Lens
     (PState era)
     (PState era)
     (Map
        (KeyHash 'StakePool (EraCrypto era)) (PoolParams (EraCrypto era)))
     (Map
        (KeyHash 'StakePool (EraCrypto era)) (PoolParams (EraCrypto era)))
forall s a b t. (s -&gt; a) -&gt; (s -&gt; b -&gt; t) -&gt; Lens s t a b
</span><span class="hs-identifier hs-var">lens</span></span><span> </span><span class="annot"><span class="annottext">PState era
-&gt; Map
     (KeyHash 'StakePool (EraCrypto era)) (PoolParams (EraCrypto era))
forall era.
PState era
-&gt; Map
     (KeyHash 'StakePool (EraCrypto era)) (PoolParams (EraCrypto era))
</span><a href="Cardano.Ledger.CertState.html#psFutureStakePoolParams"><span class="hs-identifier hs-var">psFutureStakePoolParams</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679504992"><span class="annot"><span class="annottext">PState era
</span><a href="#local-6989586621679504992"><span class="hs-identifier hs-var">ds</span></a></span></span><span> </span><span id="local-6989586621679504993"><span class="annot"><span class="annottext">Map
  (KeyHash 'StakePool (EraCrypto era)) (PoolParams (EraCrypto era))
</span><a href="#local-6989586621679504993"><span class="hs-identifier hs-var">u</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">PState era
</span><a href="#local-6989586621679504992"><span class="hs-identifier hs-var">ds</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><a href="Cardano.Ledger.CertState.html#psFutureStakePoolParams"><span class="hs-identifier hs-var">psFutureStakePoolParams</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679504993"><span class="hs-identifier hs-type">u</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-571"></span><span>
</span><span id="line-572"></span><span id="local-6989586621679502965"><span class="annot"><a href="Cardano.Ledger.CertState.html#psRetiringL"><span class="hs-identifier hs-type">psRetiringL</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Lens'</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#PState"><span class="hs-identifier hs-type">PState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502965"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#Map"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Keys.Internal.html#KeyHash"><span class="hs-identifier hs-type">KeyHash</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Cardano.Ledger.Keys.Internal.html#StakePool"><span class="hs-identifier hs-type">StakePool</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Core.Era.html#EraCrypto"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502965"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-identifier hs-type">EpochNo</span></span><span class="hs-special">)</span></span><span>
</span><span id="line-573"></span><span id="psRetiringL"><span class="annot"><span class="annottext">psRetiringL :: forall era (f :: * -&gt; *).
Functor f =&gt;
(Map (KeyHash 'StakePool (EraCrypto era)) EpochNo
 -&gt; f (Map (KeyHash 'StakePool (EraCrypto era)) EpochNo))
-&gt; PState era -&gt; f (PState era)
</span><a href="Cardano.Ledger.CertState.html#psRetiringL"><span class="hs-identifier hs-var hs-var">psRetiringL</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(PState era -&gt; Map (KeyHash 'StakePool (EraCrypto era)) EpochNo)
-&gt; (PState era
    -&gt; Map (KeyHash 'StakePool (EraCrypto era)) EpochNo -&gt; PState era)
-&gt; Lens
     (PState era)
     (PState era)
     (Map (KeyHash 'StakePool (EraCrypto era)) EpochNo)
     (Map (KeyHash 'StakePool (EraCrypto era)) EpochNo)
forall s a b t. (s -&gt; a) -&gt; (s -&gt; b -&gt; t) -&gt; Lens s t a b
</span><span class="hs-identifier hs-var">lens</span></span><span> </span><span class="annot"><span class="annottext">PState era -&gt; Map (KeyHash 'StakePool (EraCrypto era)) EpochNo
forall era.
PState era -&gt; Map (KeyHash 'StakePool (EraCrypto era)) EpochNo
</span><a href="Cardano.Ledger.CertState.html#psRetiring"><span class="hs-identifier hs-var">psRetiring</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679504996"><span class="annot"><span class="annottext">PState era
</span><a href="#local-6989586621679504996"><span class="hs-identifier hs-var">ds</span></a></span></span><span> </span><span id="local-6989586621679504997"><span class="annot"><span class="annottext">Map (KeyHash 'StakePool (EraCrypto era)) EpochNo
</span><a href="#local-6989586621679504997"><span class="hs-identifier hs-var">u</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">PState era
</span><a href="#local-6989586621679504996"><span class="hs-identifier hs-var">ds</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><a href="Cardano.Ledger.CertState.html#psRetiring"><span class="hs-identifier hs-var">psRetiring</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679504997"><span class="hs-identifier hs-type">u</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-574"></span><span>
</span><span id="line-575"></span><span id="local-6989586621679502968"><span class="annot"><a href="Cardano.Ledger.CertState.html#psDepositsL"><span class="hs-identifier hs-type">psDepositsL</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Lens'</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#PState"><span class="hs-identifier hs-type">PState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502968"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#Map"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Keys.Internal.html#KeyHash"><span class="hs-identifier hs-type">KeyHash</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Cardano.Ledger.Keys.Internal.html#StakePool"><span class="hs-identifier hs-type">StakePool</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Core.Era.html#EraCrypto"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502968"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="Cardano.Ledger.Coin.html#Coin"><span class="hs-identifier hs-type">Coin</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-576"></span><span id="psDepositsL"><span class="annot"><span class="annottext">psDepositsL :: forall era (f :: * -&gt; *).
Functor f =&gt;
(Map (KeyHash 'StakePool (EraCrypto era)) Coin
 -&gt; f (Map (KeyHash 'StakePool (EraCrypto era)) Coin))
-&gt; PState era -&gt; f (PState era)
</span><a href="Cardano.Ledger.CertState.html#psDepositsL"><span class="hs-identifier hs-var hs-var">psDepositsL</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(PState era -&gt; Map (KeyHash 'StakePool (EraCrypto era)) Coin)
-&gt; (PState era
    -&gt; Map (KeyHash 'StakePool (EraCrypto era)) Coin -&gt; PState era)
-&gt; Lens
     (PState era)
     (PState era)
     (Map (KeyHash 'StakePool (EraCrypto era)) Coin)
     (Map (KeyHash 'StakePool (EraCrypto era)) Coin)
forall s a b t. (s -&gt; a) -&gt; (s -&gt; b -&gt; t) -&gt; Lens s t a b
</span><span class="hs-identifier hs-var">lens</span></span><span> </span><span class="annot"><span class="annottext">PState era -&gt; Map (KeyHash 'StakePool (EraCrypto era)) Coin
forall era.
PState era -&gt; Map (KeyHash 'StakePool (EraCrypto era)) Coin
</span><a href="Cardano.Ledger.CertState.html#psDeposits"><span class="hs-identifier hs-var">psDeposits</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679505000"><span class="annot"><span class="annottext">PState era
</span><a href="#local-6989586621679505000"><span class="hs-identifier hs-var">ds</span></a></span></span><span> </span><span id="local-6989586621679505001"><span class="annot"><span class="annottext">Map (KeyHash 'StakePool (EraCrypto era)) Coin
</span><a href="#local-6989586621679505001"><span class="hs-identifier hs-var">u</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">PState era
</span><a href="#local-6989586621679505000"><span class="hs-identifier hs-var">ds</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><a href="Cardano.Ledger.CertState.html#psDeposits"><span class="hs-identifier hs-var">psDeposits</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679505001"><span class="hs-identifier hs-type">u</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-577"></span><span>
</span><span id="line-578"></span><span class="hs-comment">-- ===================================</span><span>
</span><span id="line-579"></span><span class="hs-comment">-- VState</span><span>
</span><span id="line-580"></span><span>
</span><span id="line-581"></span><span id="local-6989586621679502791"><span class="annot"><a href="Cardano.Ledger.CertState.html#vsDRepsL"><span class="hs-identifier hs-type">vsDRepsL</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Lens'</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#VState"><span class="hs-identifier hs-type">VState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502791"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#Map"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Credential.html#Credential"><span class="hs-identifier hs-type">Credential</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Cardano.Ledger.Keys.Internal.html#DRepRole"><span class="hs-identifier hs-type">DRepRole</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Core.Era.html#EraCrypto"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502791"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.DRep.html#DRepState"><span class="hs-identifier hs-type">DRepState</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Core.Era.html#EraCrypto"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502791"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span></span><span>
</span><span id="line-582"></span><span id="vsDRepsL"><span class="annot"><span class="annottext">vsDRepsL :: forall era (f :: * -&gt; *).
Functor f =&gt;
(Map
   (Credential 'DRepRole (EraCrypto era)) (DRepState (EraCrypto era))
 -&gt; f (Map
         (Credential 'DRepRole (EraCrypto era))
         (DRepState (EraCrypto era))))
-&gt; VState era -&gt; f (VState era)
</span><a href="Cardano.Ledger.CertState.html#vsDRepsL"><span class="hs-identifier hs-var hs-var">vsDRepsL</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(VState era
 -&gt; Map
      (Credential 'DRepRole (EraCrypto era)) (DRepState (EraCrypto era)))
-&gt; (VState era
    -&gt; Map
         (Credential 'DRepRole (EraCrypto era)) (DRepState (EraCrypto era))
    -&gt; VState era)
-&gt; Lens
     (VState era)
     (VState era)
     (Map
        (Credential 'DRepRole (EraCrypto era)) (DRepState (EraCrypto era)))
     (Map
        (Credential 'DRepRole (EraCrypto era)) (DRepState (EraCrypto era)))
forall s a b t. (s -&gt; a) -&gt; (s -&gt; b -&gt; t) -&gt; Lens s t a b
</span><span class="hs-identifier hs-var">lens</span></span><span> </span><span class="annot"><span class="annottext">VState era
-&gt; Map
     (Credential 'DRepRole (EraCrypto era)) (DRepState (EraCrypto era))
forall era.
VState era
-&gt; Map
     (Credential 'DRepRole (EraCrypto era)) (DRepState (EraCrypto era))
</span><a href="Cardano.Ledger.CertState.html#vsDReps"><span class="hs-identifier hs-var">vsDReps</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679505004"><span class="annot"><span class="annottext">VState era
</span><a href="#local-6989586621679505004"><span class="hs-identifier hs-var">vs</span></a></span></span><span> </span><span id="local-6989586621679505005"><span class="annot"><span class="annottext">Map
  (Credential 'DRepRole (EraCrypto era)) (DRepState (EraCrypto era))
</span><a href="#local-6989586621679505005"><span class="hs-identifier hs-var">u</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">VState era
</span><a href="#local-6989586621679505004"><span class="hs-identifier hs-var">vs</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><a href="Cardano.Ledger.CertState.html#vsDReps"><span class="hs-identifier hs-var">vsDReps</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679505005"><span class="hs-identifier hs-type">u</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-583"></span><span>
</span><span id="line-584"></span><span id="local-6989586621679502973"><span class="annot"><a href="Cardano.Ledger.CertState.html#vsCommitteeStateL"><span class="hs-identifier hs-type">vsCommitteeStateL</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Lens'</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#VState"><span class="hs-identifier hs-type">VState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502973"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#CommitteeState"><span class="hs-identifier hs-type">CommitteeState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502973"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-585"></span><span id="vsCommitteeStateL"><span class="annot"><span class="annottext">vsCommitteeStateL :: forall era (f :: * -&gt; *).
Functor f =&gt;
(CommitteeState era -&gt; f (CommitteeState era))
-&gt; VState era -&gt; f (VState era)
</span><a href="Cardano.Ledger.CertState.html#vsCommitteeStateL"><span class="hs-identifier hs-var hs-var">vsCommitteeStateL</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(VState era -&gt; CommitteeState era)
-&gt; (VState era -&gt; CommitteeState era -&gt; VState era)
-&gt; Lens
     (VState era) (VState era) (CommitteeState era) (CommitteeState era)
forall s a b t. (s -&gt; a) -&gt; (s -&gt; b -&gt; t) -&gt; Lens s t a b
</span><span class="hs-identifier hs-var">lens</span></span><span> </span><span class="annot"><span class="annottext">VState era -&gt; CommitteeState era
forall era. VState era -&gt; CommitteeState era
</span><a href="Cardano.Ledger.CertState.html#vsCommitteeState"><span class="hs-identifier hs-var">vsCommitteeState</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679505008"><span class="annot"><span class="annottext">VState era
</span><a href="#local-6989586621679505008"><span class="hs-identifier hs-var">vs</span></a></span></span><span> </span><span id="local-6989586621679505009"><span class="annot"><span class="annottext">CommitteeState era
</span><a href="#local-6989586621679505009"><span class="hs-identifier hs-var">u</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">VState era
</span><a href="#local-6989586621679505008"><span class="hs-identifier hs-var">vs</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><a href="Cardano.Ledger.CertState.html#vsCommitteeState"><span class="hs-identifier hs-var">vsCommitteeState</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679505009"><span class="hs-identifier hs-type">u</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-586"></span><span>
</span><span id="line-587"></span><span id="local-6989586621679502976"><span class="annot"><a href="Cardano.Ledger.CertState.html#vsNumDormantEpochsL"><span class="hs-identifier hs-type">vsNumDormantEpochsL</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Lens'</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#VState"><span class="hs-identifier hs-type">VState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502976"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-identifier hs-type">EpochNo</span></span></span><span>
</span><span id="line-588"></span><span id="vsNumDormantEpochsL"><span class="annot"><span class="annottext">vsNumDormantEpochsL :: forall era (f :: * -&gt; *).
Functor f =&gt;
(EpochNo -&gt; f EpochNo) -&gt; VState era -&gt; f (VState era)
</span><a href="Cardano.Ledger.CertState.html#vsNumDormantEpochsL"><span class="hs-identifier hs-var hs-var">vsNumDormantEpochsL</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(VState era -&gt; EpochNo)
-&gt; (VState era -&gt; EpochNo -&gt; VState era)
-&gt; Lens (VState era) (VState era) EpochNo EpochNo
forall s a b t. (s -&gt; a) -&gt; (s -&gt; b -&gt; t) -&gt; Lens s t a b
</span><span class="hs-identifier hs-var">lens</span></span><span> </span><span class="annot"><span class="annottext">VState era -&gt; EpochNo
forall era. VState era -&gt; EpochNo
</span><a href="Cardano.Ledger.CertState.html#vsNumDormantEpochs"><span class="hs-identifier hs-var">vsNumDormantEpochs</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679505012"><span class="annot"><span class="annottext">VState era
</span><a href="#local-6989586621679505012"><span class="hs-identifier hs-var">vs</span></a></span></span><span> </span><span id="local-6989586621679505013"><span class="annot"><span class="annottext">EpochNo
</span><a href="#local-6989586621679505013"><span class="hs-identifier hs-var">u</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">VState era
</span><a href="#local-6989586621679505012"><span class="hs-identifier hs-var">vs</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><a href="Cardano.Ledger.CertState.html#vsNumDormantEpochs"><span class="hs-identifier hs-var">vsNumDormantEpochs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679505013"><span class="hs-identifier hs-type">u</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-589"></span><span>
</span><span id="line-590"></span><span id="local-6989586621679502979"><span class="annot"><a href="Cardano.Ledger.CertState.html#csCommitteeCredsL"><span class="hs-identifier hs-type">csCommitteeCredsL</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-591"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Lens'</span></span><span>
</span><span id="line-592"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#CommitteeState"><span class="hs-identifier hs-type">CommitteeState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502979"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-593"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#Map"><span class="hs-identifier hs-type">Map</span></a></span><span>
</span><span id="line-594"></span><span>        </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Credential.html#Credential"><span class="hs-identifier hs-type">Credential</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Cardano.Ledger.Keys.Internal.html#ColdCommitteeRole"><span class="hs-identifier hs-type">ColdCommitteeRole</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Core.Era.html#EraCrypto"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502979"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-595"></span><span>        </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Credential.html#Credential"><span class="hs-identifier hs-type">Credential</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Cardano.Ledger.Keys.Internal.html#HotCommitteeRole"><span class="hs-identifier hs-type">HotCommitteeRole</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Core.Era.html#EraCrypto"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679502979"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-596"></span><span>    </span><span class="hs-special">)</span></span><span>
</span><span id="line-597"></span><span id="csCommitteeCredsL"><span class="annot"><span class="annottext">csCommitteeCredsL :: forall era (f :: * -&gt; *).
Functor f =&gt;
(Map
   (Credential 'ColdCommitteeRole (EraCrypto era))
   (Maybe (Credential 'HotCommitteeRole (EraCrypto era)))
 -&gt; f (Map
         (Credential 'ColdCommitteeRole (EraCrypto era))
         (Maybe (Credential 'HotCommitteeRole (EraCrypto era)))))
-&gt; CommitteeState era -&gt; f (CommitteeState era)
</span><a href="Cardano.Ledger.CertState.html#csCommitteeCredsL"><span class="hs-identifier hs-var hs-var">csCommitteeCredsL</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(CommitteeState era
 -&gt; Map
      (Credential 'ColdCommitteeRole (EraCrypto era))
      (Maybe (Credential 'HotCommitteeRole (EraCrypto era))))
-&gt; (CommitteeState era
    -&gt; Map
         (Credential 'ColdCommitteeRole (EraCrypto era))
         (Maybe (Credential 'HotCommitteeRole (EraCrypto era)))
    -&gt; CommitteeState era)
-&gt; Lens
     (CommitteeState era)
     (CommitteeState era)
     (Map
        (Credential 'ColdCommitteeRole (EraCrypto era))
        (Maybe (Credential 'HotCommitteeRole (EraCrypto era))))
     (Map
        (Credential 'ColdCommitteeRole (EraCrypto era))
        (Maybe (Credential 'HotCommitteeRole (EraCrypto era))))
forall s a b t. (s -&gt; a) -&gt; (s -&gt; b -&gt; t) -&gt; Lens s t a b
</span><span class="hs-identifier hs-var">lens</span></span><span> </span><span class="annot"><span class="annottext">CommitteeState era
-&gt; Map
     (Credential 'ColdCommitteeRole (EraCrypto era))
     (Maybe (Credential 'HotCommitteeRole (EraCrypto era)))
forall era.
CommitteeState era
-&gt; Map
     (Credential 'ColdCommitteeRole (EraCrypto era))
     (Maybe (Credential 'HotCommitteeRole (EraCrypto era)))
</span><a href="Cardano.Ledger.CertState.html#csCommitteeCreds"><span class="hs-identifier hs-var">csCommitteeCreds</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679505016"><span class="annot"><span class="annottext">CommitteeState era
</span><a href="#local-6989586621679505016"><span class="hs-identifier hs-var">cs</span></a></span></span><span> </span><span id="local-6989586621679505017"><span class="annot"><span class="annottext">Map
  (Credential 'ColdCommitteeRole (EraCrypto era))
  (Maybe (Credential 'HotCommitteeRole (EraCrypto era)))
</span><a href="#local-6989586621679505017"><span class="hs-identifier hs-var">u</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">CommitteeState era
</span><a href="#local-6989586621679505016"><span class="hs-identifier hs-var">cs</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><a href="Cardano.Ledger.CertState.html#csCommitteeCreds"><span class="hs-identifier hs-var">csCommitteeCreds</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679505017"><span class="hs-identifier hs-type">u</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-598"></span></pre></body></html>