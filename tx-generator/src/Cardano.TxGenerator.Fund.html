<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE GADTs #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE ScopedTypeVariables #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE TypeApplications #-}</span><span>
</span><span id="line-4"></span><span class="annot"><span class="hs-comment">{-|
Module      : Cardano.TxGenerator.Fund
Description : A type for funds to build transactions with.
-}</span></span><span>
</span><span id="line-8"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Cardano.TxGenerator.Fund</span><span>
</span><span id="line-9"></span><span>    </span><span class="hs-special">(</span><span>
</span><span id="line-10"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Types</span></span><span>
</span><span id="line-11"></span><span>    </span><span class="annot"><span class="hs-comment">-- $Types</span></span><span>
</span><span id="line-12"></span><span>      </span><span class="annot"><a href="Cardano.TxGenerator.Fund.html#Fund"><span class="hs-identifier">Fund</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-13"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.TxGenerator.Fund.html#FundInEra"><span class="hs-identifier">FundInEra</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-14"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Accessors</span></span><span>
</span><span id="line-15"></span><span>    </span><span class="annot"><span class="hs-comment">-- $Accessors</span></span><span>
</span><span id="line-16"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.TxGenerator.Fund.html#getFundTxIn"><span class="hs-identifier">getFundTxIn</span></a></span><span>
</span><span id="line-17"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.TxGenerator.Fund.html#getFundKey"><span class="hs-identifier">getFundKey</span></a></span><span>
</span><span id="line-18"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.TxGenerator.Fund.html#getFundLovelace"><span class="hs-identifier">getFundLovelace</span></a></span><span>
</span><span id="line-19"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.TxGenerator.Fund.html#getFundWitness"><span class="hs-identifier">getFundWitness</span></a></span><span>
</span><span id="line-20"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-21"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-22"></span><span>
</span><span id="line-23"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/Data.Function.html"><span class="hs-identifier">Data.Function</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/Data.Function.html#on"><span class="hs-identifier">on</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-24"></span><span>
</span><span id="line-25"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="file:///nix/store/bss88hay1dshpzm18jhm97dmcnjhsx7y-cardano-api-lib-cardano-api-8.38.0.1-haddock-doc/share/doc/cardano-api/html/src/Cardano.Api.html"><span class="hs-identifier">Cardano.Api</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Api</span></span><span>
</span><span id="line-26"></span><span>
</span><span id="line-27"></span><span>
</span><span id="line-28"></span><span class="hs-comment">-- $Types</span><span>
</span><span id="line-29"></span><span class="hs-comment">--</span><span>
</span><span id="line-30"></span><span class="hs-comment">-- Outputs that are available for spending.</span><span>
</span><span id="line-31"></span><span class="hs-comment">-- When building a new transaction, they provide the `TxIn` parts.</span><span>
</span><span id="line-32"></span><span>
</span><span id="line-33"></span><span class="hs-comment">-- | `FundInEra` has field naming conventions suggesting anticipated</span><span>
</span><span id="line-34"></span><span class="hs-comment">-- use of lenses.</span><span>
</span><span id="line-35"></span><span class="hs-keyword">data</span><span> </span><span id="FundInEra"><span class="annot"><a href="Cardano.TxGenerator.Fund.html#FundInEra"><span class="hs-identifier hs-var">FundInEra</span></a></span></span><span> </span><span id="local-6989586621679798562"><span class="annot"><a href="#local-6989586621679798562"><span class="hs-identifier hs-type">era</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="FundInEra"><span class="annot"><a href="Cardano.TxGenerator.Fund.html#FundInEra"><span class="hs-identifier hs-var">FundInEra</span></a></span></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-36"></span><span>    </span><span id="_fundTxIn"><span class="annot"><span class="annottext">forall era. FundInEra era -&gt; TxIn
</span><a href="Cardano.TxGenerator.Fund.html#_fundTxIn"><span class="hs-identifier hs-var hs-var">_fundTxIn</span></a></span></span><span>       </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><span class="hs-identifier hs-type">TxIn</span></span><span>
</span><span id="line-37"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="_fundWitness"><span class="annot"><span class="annottext">forall era. FundInEra era -&gt; Witness WitCtxTxIn era
</span><a href="Cardano.TxGenerator.Fund.html#_fundWitness"><span class="hs-identifier hs-var hs-var">_fundWitness</span></a></span></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Witness</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">WitCtxTxIn</span></span><span> </span><span class="annot"><a href="#local-6989586621679798562"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-38"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="_fundVal"><span class="annot"><span class="annottext">forall era. FundInEra era -&gt; TxOutValue era
</span><a href="Cardano.TxGenerator.Fund.html#_fundVal"><span class="hs-identifier hs-var hs-var">_fundVal</span></a></span></span><span>        </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">TxOutValue</span></span><span> </span><span class="annot"><a href="#local-6989586621679798562"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-39"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="_fundSigningKey"><span class="annot"><span class="annottext">forall era. FundInEra era -&gt; Maybe (SigningKey PaymentKey)
</span><a href="Cardano.TxGenerator.Fund.html#_fundSigningKey"><span class="hs-identifier hs-var hs-var">_fundSigningKey</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">SigningKey</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">PaymentKey</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-40"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-41"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679798638"><span id="local-6989586621679798651"><span id="local-6989586621679798655"><span class="annot"><span class="annottext">Int -&gt; FundInEra era -&gt; ShowS
[FundInEra era] -&gt; ShowS
FundInEra era -&gt; String
(Int -&gt; FundInEra era -&gt; ShowS)
-&gt; (FundInEra era -&gt; String)
-&gt; ([FundInEra era] -&gt; ShowS)
-&gt; Show (FundInEra era)
forall era. Int -&gt; FundInEra era -&gt; ShowS
forall era. [FundInEra era] -&gt; ShowS
forall era. FundInEra era -&gt; String
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: forall era. Int -&gt; FundInEra era -&gt; ShowS
showsPrec :: Int -&gt; FundInEra era -&gt; ShowS
$cshow :: forall era. FundInEra era -&gt; String
show :: FundInEra era -&gt; String
$cshowList :: forall era. [FundInEra era] -&gt; ShowS
showList :: [FundInEra era] -&gt; ShowS
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Show.html#Show"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-42"></span><span>
</span><span id="line-43"></span><span class="annot"><span class="hs-comment">-- | `InAnyCardanoEra` helps form heterogenous collections wrt. eras.</span></span><span>
</span><span id="line-44"></span><span class="hs-keyword">newtype</span><span> </span><span id="Fund"><span class="annot"><a href="Cardano.TxGenerator.Fund.html#Fund"><span class="hs-identifier hs-var">Fund</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Fund"><span class="annot"><a href="Cardano.TxGenerator.Fund.html#Fund"><span class="hs-identifier hs-var">Fund</span></a></span></span><span> </span><span class="hs-special">{</span><span id="unFund"><span class="annot"><span class="annottext">Fund -&gt; InAnyCardanoEra FundInEra
</span><a href="Cardano.TxGenerator.Fund.html#unFund"><span class="hs-identifier hs-var hs-var">unFund</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">InAnyCardanoEra</span></span><span> </span><span class="annot"><a href="Cardano.TxGenerator.Fund.html#FundInEra"><span class="hs-identifier hs-type">FundInEra</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-45"></span><span>
</span><span id="line-46"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679798664"><span class="annot"><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/ghc-prim-0.10.0/src/GHC.Classes.html#Eq"><span class="hs-identifier hs-type">Eq</span></a></span><span> </span><span class="annot"><a href="Cardano.TxGenerator.Fund.html#Fund"><span class="hs-identifier hs-type">Fund</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-47"></span><span>    </span><span id="local-6989586621679798670"><span class="annot"><span class="annottext">== :: Fund -&gt; Fund -&gt; Bool
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/ghc-prim-0.10.0/src/GHC.Classes.html#%3D%3D"><span class="hs-operator hs-var hs-var hs-var hs-var">(==)</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TxIn -&gt; TxIn -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/ghc-prim-0.10.0/src/GHC.Classes.html#%3D%3D"><span class="hs-operator hs-var">(==)</span></a></span><span> </span><span class="annot"><span class="annottext">(TxIn -&gt; TxIn -&gt; Bool) -&gt; (Fund -&gt; TxIn) -&gt; Fund -&gt; Fund -&gt; Bool
forall b c a. (b -&gt; b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; a -&gt; c
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/Data.Function.html#on"><span class="hs-operator hs-var">`on`</span></a></span><span> </span><span class="annot"><span class="annottext">Fund -&gt; TxIn
</span><a href="Cardano.TxGenerator.Fund.html#getFundTxIn"><span class="hs-identifier hs-var">getFundTxIn</span></a></span><span>
</span><span id="line-48"></span><span>
</span><span id="line-49"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679798675"><span id="local-6989586621679798679"><span id="local-6989586621679798682"><span id="local-6989586621679798685"><span id="local-6989586621679798688"><span id="local-6989586621679798691"><span class="annot"><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/ghc-prim-0.10.0/src/GHC.Classes.html#Ord"><span class="hs-identifier hs-type">Ord</span></a></span><span> </span><span class="annot"><a href="Cardano.TxGenerator.Fund.html#Fund"><span class="hs-identifier hs-type">Fund</span></a></span></span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-50"></span><span>    </span><span id="local-6989586621679798696"><span class="annot"><span class="annottext">compare :: Fund -&gt; Fund -&gt; Ordering
</span><a href="#local-6989586621679798696"><span class="hs-identifier hs-var hs-var hs-var hs-var">compare</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TxIn -&gt; TxIn -&gt; Ordering
forall a. Ord a =&gt; a -&gt; a -&gt; Ordering
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/ghc-prim-0.10.0/src/GHC.Classes.html#compare"><span class="hs-identifier hs-var">compare</span></a></span><span> </span><span class="annot"><span class="annottext">(TxIn -&gt; TxIn -&gt; Ordering)
-&gt; (Fund -&gt; TxIn) -&gt; Fund -&gt; Fund -&gt; Ordering
forall b c a. (b -&gt; b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; a -&gt; c
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/Data.Function.html#on"><span class="hs-operator hs-var">`on`</span></a></span><span> </span><span class="annot"><span class="annottext">Fund -&gt; TxIn
</span><a href="Cardano.TxGenerator.Fund.html#getFundTxIn"><span class="hs-identifier hs-var">getFundTxIn</span></a></span><span>
</span><span id="line-51"></span><span>
</span><span id="line-52"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679798699"><span id="local-6989586621679798704"><span class="annot"><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Show.html#Show"><span class="hs-identifier hs-type">Show</span></a></span><span> </span><span class="annot"><a href="Cardano.TxGenerator.Fund.html#Fund"><span class="hs-identifier hs-type">Fund</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-53"></span><span>  </span><span id="local-6989586621679798706"><span class="annot"><span class="annottext">show :: Fund -&gt; String
</span><a href="#local-6989586621679798706"><span class="hs-identifier hs-var hs-var hs-var hs-var">show</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.TxGenerator.Fund.html#Fund"><span class="hs-identifier hs-type">Fund</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">InAnyCardanoEra</span></span><span> </span><span class="annot"><span class="annottext">CardanoEra era
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679798710"><span class="annot"><span class="annottext">FundInEra era
</span><a href="#local-6989586621679798710"><span class="hs-identifier hs-var">f</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FundInEra era -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Show.html#show"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">FundInEra era
</span><a href="#local-6989586621679798710"><span class="hs-identifier hs-var">f</span></a></span><span>
</span><span id="line-54"></span><span>
</span><span id="line-55"></span><span>
</span><span id="line-56"></span><span class="hs-comment">-- $Accessors</span><span>
</span><span id="line-57"></span><span class="hs-comment">--</span><span>
</span><span id="line-58"></span><span class="hs-comment">-- Accessors for the various fields of `FundInEra` starting from a</span><span>
</span><span id="line-59"></span><span class="hs-comment">-- `Fund`.</span><span>
</span><span id="line-60"></span><span>
</span><span id="line-61"></span><span class="annot"><span class="hs-comment">-- | The `TxIn` is only a `TxId` and `TxIx` pair, and so era-independent.</span></span><span>
</span><span id="line-62"></span><span class="annot"><a href="Cardano.TxGenerator.Fund.html#getFundTxIn"><span class="hs-identifier hs-type">getFundTxIn</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.TxGenerator.Fund.html#Fund"><span class="hs-identifier hs-type">Fund</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TxIn</span></span><span>
</span><span id="line-63"></span><span id="getFundTxIn"><span class="annot"><span class="annottext">getFundTxIn :: Fund -&gt; TxIn
</span><a href="Cardano.TxGenerator.Fund.html#getFundTxIn"><span class="hs-identifier hs-var hs-var">getFundTxIn</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.TxGenerator.Fund.html#Fund"><span class="hs-identifier hs-type">Fund</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">InAnyCardanoEra</span></span><span> </span><span class="annot"><span class="annottext">CardanoEra era
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679798716"><span class="annot"><span class="annottext">FundInEra era
</span><a href="#local-6989586621679798716"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FundInEra era -&gt; TxIn
forall era. FundInEra era -&gt; TxIn
</span><a href="Cardano.TxGenerator.Fund.html#_fundTxIn"><span class="hs-identifier hs-var">_fundTxIn</span></a></span><span> </span><span class="annot"><span class="annottext">FundInEra era
</span><a href="#local-6989586621679798716"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-64"></span><span>
</span><span id="line-65"></span><span class="annot"><span class="hs-comment">-- | Signing keys are optional as far as funds go.</span></span><span>
</span><span id="line-66"></span><span class="annot"><a href="Cardano.TxGenerator.Fund.html#getFundKey"><span class="hs-identifier hs-type">getFundKey</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.TxGenerator.Fund.html#Fund"><span class="hs-identifier hs-type">Fund</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">SigningKey</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">PaymentKey</span></span><span class="hs-special">)</span><span>
</span><span id="line-67"></span><span id="getFundKey"><span class="annot"><span class="annottext">getFundKey :: Fund -&gt; Maybe (SigningKey PaymentKey)
</span><a href="Cardano.TxGenerator.Fund.html#getFundKey"><span class="hs-identifier hs-var hs-var">getFundKey</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.TxGenerator.Fund.html#Fund"><span class="hs-identifier hs-type">Fund</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">InAnyCardanoEra</span></span><span> </span><span class="annot"><span class="annottext">CardanoEra era
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679798718"><span class="annot"><span class="annottext">FundInEra era
</span><a href="#local-6989586621679798718"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FundInEra era -&gt; Maybe (SigningKey PaymentKey)
forall era. FundInEra era -&gt; Maybe (SigningKey PaymentKey)
</span><a href="Cardano.TxGenerator.Fund.html#_fundSigningKey"><span class="hs-identifier hs-var">_fundSigningKey</span></a></span><span> </span><span class="annot"><span class="annottext">FundInEra era
</span><a href="#local-6989586621679798718"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-68"></span><span>
</span><span id="line-69"></span><span class="annot"><span class="hs-comment">-- | Converting a `TxOutValue` to `Lovelace` requires case analysis.</span></span><span>
</span><span id="line-70"></span><span class="annot"><a href="Cardano.TxGenerator.Fund.html#getFundLovelace"><span class="hs-identifier hs-type">getFundLovelace</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.TxGenerator.Fund.html#Fund"><span class="hs-identifier hs-type">Fund</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Lovelace</span></span><span>
</span><span id="line-71"></span><span id="getFundLovelace"><span class="annot"><span class="annottext">getFundLovelace :: Fund -&gt; Lovelace
</span><a href="Cardano.TxGenerator.Fund.html#getFundLovelace"><span class="hs-identifier hs-var hs-var">getFundLovelace</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.TxGenerator.Fund.html#Fund"><span class="hs-identifier hs-type">Fund</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">InAnyCardanoEra</span></span><span> </span><span class="annot"><span class="annottext">CardanoEra era
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679798721"><span class="annot"><span class="annottext">FundInEra era
</span><a href="#local-6989586621679798721"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">FundInEra era -&gt; TxOutValue era
forall era. FundInEra era -&gt; TxOutValue era
</span><a href="Cardano.TxGenerator.Fund.html#_fundVal"><span class="hs-identifier hs-var">_fundVal</span></a></span><span> </span><span class="annot"><span class="annottext">FundInEra era
</span><a href="#local-6989586621679798721"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-72"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">TxOutValueByron</span></span><span> </span><span id="local-6989586621679798723"><span class="annot"><span class="annottext">Lovelace
</span><a href="#local-6989586621679798723"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Lovelace
</span><a href="#local-6989586621679798723"><span class="hs-identifier hs-var">l</span></a></span><span>
</span><span id="line-73"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">TxOutValueShelleyBased</span></span><span> </span><span id="local-6989586621679798727"><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621679798727"><span class="hs-identifier hs-var">era</span></a></span></span><span> </span><span id="local-6989586621679798728"><span class="annot"><span class="annottext">Value (ShelleyLedgerEra era)
</span><a href="#local-6989586621679798728"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Value -&gt; Lovelace
</span><span class="hs-identifier hs-var">selectLovelace</span></span><span> </span><span class="annot"><span class="annottext">(Value -&gt; Lovelace) -&gt; Value -&gt; Lovelace
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era -&gt; Value (ShelleyLedgerEra era) -&gt; Value
forall era.
ShelleyBasedEra era -&gt; Value (ShelleyLedgerEra era) -&gt; Value
</span><span class="hs-identifier hs-var">Api.fromLedgerValue</span></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621679798727"><span class="hs-identifier hs-var">era</span></a></span><span> </span><span class="annot"><span class="annottext">Value (ShelleyLedgerEra era)
</span><a href="#local-6989586621679798728"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-74"></span><span>
</span><span id="line-75"></span><span class="hs-comment">-- TODO: facilitate casting KeyWitnesses between eras -- Note [Era transitions]</span><span>
</span><span id="line-76"></span><span class="hs-comment">-- | The `Fund` alternative is checked against `cardanoEra`, but</span><span>
</span><span id="line-77"></span><span class="hs-comment">-- `getFundWitness` otherwise wraps `_fundWitness`.</span><span>
</span><span id="line-78"></span><span class="annot"><a href="Cardano.TxGenerator.Fund.html#getFundWitness"><span class="hs-identifier hs-type">getFundWitness</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679798603"><span class="annot"><a href="#local-6989586621679798603"><span class="hs-identifier hs-type">era</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IsShelleyBasedEra</span></span><span> </span><span class="annot"><a href="#local-6989586621679798603"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Cardano.TxGenerator.Fund.html#Fund"><span class="hs-identifier hs-type">Fund</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Witness</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">WitCtxTxIn</span></span><span> </span><span class="annot"><a href="#local-6989586621679798603"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-79"></span><span id="getFundWitness"><span class="annot"><span class="annottext">getFundWitness :: forall era. IsShelleyBasedEra era =&gt; Fund -&gt; Witness WitCtxTxIn era
</span><a href="Cardano.TxGenerator.Fund.html#getFundWitness"><span class="hs-identifier hs-var hs-var">getFundWitness</span></a></span></span><span> </span><span id="local-6989586621679798738"><span class="annot"><span class="annottext">Fund
</span><a href="#local-6989586621679798738"><span class="hs-identifier hs-var">fund</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era. IsCardanoEra era =&gt; CardanoEra era
</span><span class="hs-identifier hs-var">cardanoEra</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679798603"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Fund
</span><a href="#local-6989586621679798738"><span class="hs-identifier hs-var">fund</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-80"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CardanoEra era
</span><span class="hs-identifier hs-var">ByronEra</span></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.TxGenerator.Fund.html#Fund"><span class="hs-identifier hs-type">Fund</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">InAnyCardanoEra</span></span><span> </span><span class="annot"><span class="annottext">CardanoEra era
</span><span class="hs-identifier hs-var">ByronEra</span></span><span>   </span><span id="local-6989586621679798743"><span class="annot"><span class="annottext">FundInEra era
</span><a href="#local-6989586621679798743"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">FundInEra era -&gt; Witness WitCtxTxIn era
forall era. FundInEra era -&gt; Witness WitCtxTxIn era
</span><a href="Cardano.TxGenerator.Fund.html#_fundWitness"><span class="hs-identifier hs-var">_fundWitness</span></a></span><span> </span><span class="annot"><span class="annottext">FundInEra era
FundInEra era
</span><a href="#local-6989586621679798743"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-81"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CardanoEra era
</span><span class="hs-identifier hs-var">ShelleyEra</span></span><span> </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.TxGenerator.Fund.html#Fund"><span class="hs-identifier hs-type">Fund</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">InAnyCardanoEra</span></span><span> </span><span class="annot"><span class="annottext">CardanoEra era
</span><span class="hs-identifier hs-var">ShelleyEra</span></span><span> </span><span id="local-6989586621679798748"><span class="annot"><span class="annottext">FundInEra era
</span><a href="#local-6989586621679798748"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">FundInEra era -&gt; Witness WitCtxTxIn era
forall era. FundInEra era -&gt; Witness WitCtxTxIn era
</span><a href="Cardano.TxGenerator.Fund.html#_fundWitness"><span class="hs-identifier hs-var">_fundWitness</span></a></span><span> </span><span class="annot"><span class="annottext">FundInEra era
FundInEra era
</span><a href="#local-6989586621679798748"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-82"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CardanoEra era
</span><span class="hs-identifier hs-var">AllegraEra</span></span><span> </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.TxGenerator.Fund.html#Fund"><span class="hs-identifier hs-type">Fund</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">InAnyCardanoEra</span></span><span> </span><span class="annot"><span class="annottext">CardanoEra era
</span><span class="hs-identifier hs-var">AllegraEra</span></span><span> </span><span id="local-6989586621679798753"><span class="annot"><span class="annottext">FundInEra era
</span><a href="#local-6989586621679798753"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">FundInEra era -&gt; Witness WitCtxTxIn era
forall era. FundInEra era -&gt; Witness WitCtxTxIn era
</span><a href="Cardano.TxGenerator.Fund.html#_fundWitness"><span class="hs-identifier hs-var">_fundWitness</span></a></span><span> </span><span class="annot"><span class="annottext">FundInEra era
FundInEra era
</span><a href="#local-6989586621679798753"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-83"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CardanoEra era
</span><span class="hs-identifier hs-var">MaryEra</span></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.TxGenerator.Fund.html#Fund"><span class="hs-identifier hs-type">Fund</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">InAnyCardanoEra</span></span><span> </span><span class="annot"><span class="annottext">CardanoEra era
</span><span class="hs-identifier hs-var">MaryEra</span></span><span>    </span><span id="local-6989586621679798758"><span class="annot"><span class="annottext">FundInEra era
</span><a href="#local-6989586621679798758"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">FundInEra era -&gt; Witness WitCtxTxIn era
forall era. FundInEra era -&gt; Witness WitCtxTxIn era
</span><a href="Cardano.TxGenerator.Fund.html#_fundWitness"><span class="hs-identifier hs-var">_fundWitness</span></a></span><span> </span><span class="annot"><span class="annottext">FundInEra era
FundInEra era
</span><a href="#local-6989586621679798758"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-84"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CardanoEra era
</span><span class="hs-identifier hs-var">AlonzoEra</span></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.TxGenerator.Fund.html#Fund"><span class="hs-identifier hs-type">Fund</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">InAnyCardanoEra</span></span><span> </span><span class="annot"><span class="annottext">CardanoEra era
</span><span class="hs-identifier hs-var">AlonzoEra</span></span><span>  </span><span id="local-6989586621679798763"><span class="annot"><span class="annottext">FundInEra era
</span><a href="#local-6989586621679798763"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">FundInEra era -&gt; Witness WitCtxTxIn era
forall era. FundInEra era -&gt; Witness WitCtxTxIn era
</span><a href="Cardano.TxGenerator.Fund.html#_fundWitness"><span class="hs-identifier hs-var">_fundWitness</span></a></span><span> </span><span class="annot"><span class="annottext">FundInEra era
FundInEra era
</span><a href="#local-6989586621679798763"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-85"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CardanoEra era
</span><span class="hs-identifier hs-var">BabbageEra</span></span><span> </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.TxGenerator.Fund.html#Fund"><span class="hs-identifier hs-type">Fund</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">InAnyCardanoEra</span></span><span> </span><span class="annot"><span class="annottext">CardanoEra era
</span><span class="hs-identifier hs-var">BabbageEra</span></span><span> </span><span id="local-6989586621679798768"><span class="annot"><span class="annottext">FundInEra era
</span><a href="#local-6989586621679798768"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">FundInEra era -&gt; Witness WitCtxTxIn era
forall era. FundInEra era -&gt; Witness WitCtxTxIn era
</span><a href="Cardano.TxGenerator.Fund.html#_fundWitness"><span class="hs-identifier hs-var">_fundWitness</span></a></span><span> </span><span class="annot"><span class="annottext">FundInEra era
FundInEra era
</span><a href="#local-6989586621679798768"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-86"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CardanoEra era
</span><span class="hs-identifier hs-var">ConwayEra</span></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.TxGenerator.Fund.html#Fund"><span class="hs-identifier hs-type">Fund</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">InAnyCardanoEra</span></span><span> </span><span class="annot"><span class="annottext">CardanoEra era
</span><span class="hs-identifier hs-var">ConwayEra</span></span><span>  </span><span id="local-6989586621679798773"><span class="annot"><span class="annottext">FundInEra era
</span><a href="#local-6989586621679798773"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">FundInEra era -&gt; Witness WitCtxTxIn era
forall era. FundInEra era -&gt; Witness WitCtxTxIn era
</span><a href="Cardano.TxGenerator.Fund.html#_fundWitness"><span class="hs-identifier hs-var">_fundWitness</span></a></span><span> </span><span class="annot"><span class="annottext">FundInEra era
FundInEra era
</span><a href="#local-6989586621679798773"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-87"></span><span>  </span><span class="annot"><span class="annottext">(CardanoEra era, Fund)
</span><span class="hs-identifier">_</span></span><span>                                                  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; Witness WitCtxTxIn era
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Err.html#error"><span class="hs-identifier hs-var">error</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;getFundWitness: era mismatch&quot;</span></span><span>
</span><span id="line-88"></span><span>
</span><span id="line-89"></span><span class="hs-comment">{-
Note [Era transitions]
~~~~~~~~~~~~~~~~~~~~~~
getFundWitness *must* be a partial function since it makes no sense to spend funds in an earlier era that doesn't
support a specific feature). Currently, it's implemented here simply by enforcing via the type system a fund witness
only exists in the same era as the fund.
However, that is too constrained: this approach rules out era transitions for transactions, which is 1) a valid case
and 2) a potential use case for benchmarking.
-}</span><span>
</span><span id="line-98"></span></pre></body></html>