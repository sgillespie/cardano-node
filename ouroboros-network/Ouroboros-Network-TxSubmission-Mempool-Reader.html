<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Ouroboros.Network.TxSubmission.Mempool.Reader</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">ouroboros-network-0.11.0.0: A networking layer for the Ouroboros blockchain protocol</span><ul class="links" id="page-menu"><li id="quick-jump-button"><a href="#">Quick Jump</a></li><li><a href="src/Ouroboros.Network.TxSubmission.Mempool.Reader.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>Safe-Inferred</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Ouroboros.Network.TxSubmission.Mempool.Reader</p></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><span class="keyword">data</span> <a href="#t:TxSubmissionMempoolReader">TxSubmissionMempoolReader</a> txid tx idx m = <a href="#v:TxSubmissionMempoolReader">TxSubmissionMempoolReader</a> {<ul class="subs"><li><a href="#v:mempoolGetSnapshot">mempoolGetSnapshot</a> :: STM m (<a href="Ouroboros-Network-TxSubmission-Mempool-Reader.html#t:MempoolSnapshot" title="Ouroboros.Network.TxSubmission.Mempool.Reader">MempoolSnapshot</a> txid tx idx)</li><li><a href="#v:mempoolZeroIdx">mempoolZeroIdx</a> :: idx</li></ul>}</li><li class="src short"><span class="keyword">data</span> <a href="#t:MempoolSnapshot">MempoolSnapshot</a> txid tx idx = <a href="#v:MempoolSnapshot">MempoolSnapshot</a> {<ul class="subs"><li><a href="#v:mempoolTxIdsAfter">mempoolTxIdsAfter</a> :: idx -&gt; [(txid, idx, TxSizeInBytes)]</li><li><a href="#v:mempoolLookupTx">mempoolLookupTx</a> :: idx -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> tx</li><li><a href="#v:mempoolHasTx">mempoolHasTx</a> :: txid -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></li></ul>}</li><li class="src short"><a href="#v:mapMempoolSnapshot">mapMempoolSnapshot</a> :: (tx -&gt; tx') -&gt; <a href="Ouroboros-Network-TxSubmission-Mempool-Reader.html#t:MempoolSnapshot" title="Ouroboros.Network.TxSubmission.Mempool.Reader">MempoolSnapshot</a> txid tx idx -&gt; <a href="Ouroboros-Network-TxSubmission-Mempool-Reader.html#t:MempoolSnapshot" title="Ouroboros.Network.TxSubmission.Mempool.Reader">MempoolSnapshot</a> txid tx' idx</li><li class="src short"><a href="#v:mapTxSubmissionMempoolReader">mapTxSubmissionMempoolReader</a> :: MonadSTM m =&gt; (tx -&gt; tx') -&gt; <a href="Ouroboros-Network-TxSubmission-Mempool-Reader.html#t:TxSubmissionMempoolReader" title="Ouroboros.Network.TxSubmission.Mempool.Reader">TxSubmissionMempoolReader</a> txid tx idx m -&gt; <a href="Ouroboros-Network-TxSubmission-Mempool-Reader.html#t:TxSubmissionMempoolReader" title="Ouroboros.Network.TxSubmission.Mempool.Reader">TxSubmissionMempoolReader</a> txid tx' idx m</li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:TxSubmissionMempoolReader" class="def">TxSubmissionMempoolReader</a> txid tx idx m <a href="src/Ouroboros.Network.TxSubmission.Mempool.Reader.html#TxSubmissionMempoolReader" class="link">Source</a> <a href="#t:TxSubmissionMempoolReader" class="selflink">#</a></p><div class="doc"><p>The consensus layer functionality that the inbound and outbound side of
 the tx submission logic requires.</p><p>This is provided to the tx submission logic by the consensus layer.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:TxSubmissionMempoolReader" class="def">TxSubmissionMempoolReader</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:mempoolGetSnapshot" class="def">mempoolGetSnapshot</a> :: STM m (<a href="Ouroboros-Network-TxSubmission-Mempool-Reader.html#t:MempoolSnapshot" title="Ouroboros.Network.TxSubmission.Mempool.Reader">MempoolSnapshot</a> txid tx idx)</dfn><div class="doc"><p>In STM, grab a snapshot of the contents of the mempool. This allows
 further pure queries on the snapshot.</p></div></li><li><dfn class="src"><a id="v:mempoolZeroIdx" class="def">mempoolZeroIdx</a> :: idx</dfn><div class="doc"><p><code><a href="Ouroboros-Network-TxSubmission-Mempool-Reader.html#v:mempoolTxIdsAfter" title="Ouroboros.Network.TxSubmission.Mempool.Reader">mempoolTxIdsAfter</a></code> with <code><a href="Ouroboros-Network-TxSubmission-Mempool-Reader.html#v:mempoolZeroIdx" title="Ouroboros.Network.TxSubmission.Mempool.Reader">mempoolZeroIdx</a></code> is expected to give all
 txs currently in the mempool.</p></div></li></ul></div></td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:MempoolSnapshot" class="def">MempoolSnapshot</a> txid tx idx <a href="src/Ouroboros.Network.TxSubmission.Mempool.Reader.html#MempoolSnapshot" class="link">Source</a> <a href="#t:MempoolSnapshot" class="selflink">#</a></p><div class="doc"><p>A pure snapshot of the contents of the mempool. It allows fetching
 information about transactions in the mempool, and fetching individual
 transactions.</p><p>This uses a transaction sequence number type for identifying transactions
 within the mempool sequence. The sequence number is local to this mempool,
 unlike the transaction hash. This allows us to ask for all transactions
 after a known sequence number, to get new transactions. It is also used to
 look up individual transactions.</p><p>Note that it is expected that <code><a href="Ouroboros-Network-TxSubmission-Mempool-Reader.html#v:mempoolLookupTx" title="Ouroboros.Network.TxSubmission.Mempool.Reader">mempoolLookupTx</a></code> will often return <code><a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Maybe.html#v:Nothing" title="Data.Maybe">Nothing</a></code>
 even for tx sequence numbers returned in previous snapshots. This happens
 when the transaction has been removed from the mempool between snapshots.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:MempoolSnapshot" class="def">MempoolSnapshot</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:mempoolTxIdsAfter" class="def">mempoolTxIdsAfter</a> :: idx -&gt; [(txid, idx, TxSizeInBytes)]</dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:mempoolLookupTx" class="def">mempoolLookupTx</a> :: idx -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> tx</dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:mempoolHasTx" class="def">mempoolHasTx</a> :: txid -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr></table></div></div><div class="top"><p class="src"><a id="v:mapMempoolSnapshot" class="def">mapMempoolSnapshot</a> :: (tx -&gt; tx') -&gt; <a href="Ouroboros-Network-TxSubmission-Mempool-Reader.html#t:MempoolSnapshot" title="Ouroboros.Network.TxSubmission.Mempool.Reader">MempoolSnapshot</a> txid tx idx -&gt; <a href="Ouroboros-Network-TxSubmission-Mempool-Reader.html#t:MempoolSnapshot" title="Ouroboros.Network.TxSubmission.Mempool.Reader">MempoolSnapshot</a> txid tx' idx <a href="src/Ouroboros.Network.TxSubmission.Mempool.Reader.html#mapMempoolSnapshot" class="link">Source</a> <a href="#v:mapMempoolSnapshot" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:mapTxSubmissionMempoolReader" class="def">mapTxSubmissionMempoolReader</a> :: MonadSTM m =&gt; (tx -&gt; tx') -&gt; <a href="Ouroboros-Network-TxSubmission-Mempool-Reader.html#t:TxSubmissionMempoolReader" title="Ouroboros.Network.TxSubmission.Mempool.Reader">TxSubmissionMempoolReader</a> txid tx idx m -&gt; <a href="Ouroboros-Network-TxSubmission-Mempool-Reader.html#t:TxSubmissionMempoolReader" title="Ouroboros.Network.TxSubmission.Mempool.Reader">TxSubmissionMempoolReader</a> txid tx' idx m <a href="src/Ouroboros.Network.TxSubmission.Mempool.Reader.html#mapTxSubmissionMempoolReader" class="link">Source</a> <a href="#v:mapTxSubmissionMempoolReader" class="selflink">#</a></p></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.29.1</p></div></body></html>