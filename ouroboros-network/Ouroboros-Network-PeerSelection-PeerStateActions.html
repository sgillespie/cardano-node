<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Ouroboros.Network.PeerSelection.PeerStateActions</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">ouroboros-network-0.11.0.0: A networking layer for the Ouroboros blockchain protocol</span><ul class="links" id="page-menu"><li id="quick-jump-button"><a href="#">Quick Jump</a></li><li><a href="src/Ouroboros.Network.PeerSelection.PeerStateActions.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>Safe-Inferred</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Ouroboros.Network.PeerSelection.PeerStateActions</p></div><div id="table-of-contents"><div id="contents-list"><p class="caption" onclick="window.scrollTo(0,0)">Contents</p><ul><li><a href="#g:1">Introduction</a></li><li><a href="#g:2">Exceptions</a></li><li><a href="#g:3">Trace</a></li></ul></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><span class="keyword">data</span> <a href="#t:PeerStateActionsArguments">PeerStateActionsArguments</a> muxMode socket responderCtx peerAddr versionData versionNumber m a b = <a href="#v:PeerStateActionsArguments">PeerStateActionsArguments</a> {<ul class="subs"><li><a href="#v:spsTracer">spsTracer</a> :: Tracer m (<a href="Ouroboros-Network-PeerSelection-PeerStateActions.html#t:PeerSelectionActionsTrace" title="Ouroboros.Network.PeerSelection.PeerStateActions">PeerSelectionActionsTrace</a> peerAddr versionNumber)</li><li><a href="#v:spsDeactivateTimeout">spsDeactivateTimeout</a> :: <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/time-1.12.2/Data-Time-Clock.html#t:DiffTime" title="Data.Time.Clock">DiffTime</a></li><li><a href="#v:spsCloseConnectionTimeout">spsCloseConnectionTimeout</a> :: <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/time-1.12.2/Data-Time-Clock.html#t:DiffTime" title="Data.Time.Clock">DiffTime</a></li><li><a href="#v:spsConnectionManager">spsConnectionManager</a> :: MuxConnectionManager muxMode socket (<a href="Ouroboros-Network-NodeToNode.html#t:ExpandedInitiatorContext" title="Ouroboros.Network.NodeToNode">ExpandedInitiatorContext</a> peerAddr m) responderCtx peerAddr versionData versionNumber <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/Data-ByteString-Lazy.html#t:ByteString" title="Data.ByteString.Lazy">ByteString</a> m a b</li><li><a href="#v:spsExitPolicy">spsExitPolicy</a> :: <a href="Ouroboros-Network-ExitPolicy.html#t:ExitPolicy" title="Ouroboros.Network.ExitPolicy">ExitPolicy</a> a</li></ul>}</li><li class="src short"><span class="keyword">data</span> <a href="#t:PeerConnectionHandle">PeerConnectionHandle</a> (muxMode :: MuxMode) responderCtx peerAddr versionData bytes m a b</li><li class="src short"><a href="#v:withPeerStateActions">withPeerStateActions</a> :: <span class="keyword">forall</span> (muxMode :: MuxMode) socket responderCtx peerAddr versionData versionNumber m a b x. (<a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Control-Applicative.html#t:Alternative" title="Control.Applicative">Alternative</a> (STM m), MonadAsync m, MonadCatch m, MonadLabelledSTM m, MonadMask m, MonadTimer m, MonadThrow (STM m), HasInitiator muxMode <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Type-Equality.html#t:-126-" title="Data.Type.Equality">~</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Bool.html#v:True" title="Data.Bool">True</a>, <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Type-Reflection.html#t:Typeable" title="Type.Reflection">Typeable</a> versionNumber, <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Text-Show.html#t:Show" title="Text.Show">Show</a> versionNumber, <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> peerAddr, <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Type-Reflection.html#t:Typeable" title="Type.Reflection">Typeable</a> peerAddr, <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Text-Show.html#t:Show" title="Text.Show">Show</a> peerAddr) =&gt; <a href="Ouroboros-Network-PeerSelection-PeerStateActions.html#t:PeerStateActionsArguments" title="Ouroboros.Network.PeerSelection.PeerStateActions">PeerStateActionsArguments</a> muxMode socket responderCtx peerAddr versionData versionNumber m a b -&gt; (<a href="Ouroboros-Network-PeerSelection-Governor.html#t:PeerStateActions" title="Ouroboros.Network.PeerSelection.Governor">PeerStateActions</a> peerAddr (<a href="Ouroboros-Network-PeerSelection-PeerStateActions.html#t:PeerConnectionHandle" title="Ouroboros.Network.PeerSelection.PeerStateActions">PeerConnectionHandle</a> muxMode responderCtx peerAddr versionData <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/Data-ByteString-Lazy.html#t:ByteString" title="Data.ByteString.Lazy">ByteString</a> m a b) m -&gt; m x) -&gt; m x</li><li class="src short"><a href="#v:pchPeerSharing">pchPeerSharing</a> :: (versionData -&gt; PeerSharing) -&gt; <a href="Ouroboros-Network-PeerSelection-PeerStateActions.html#t:PeerConnectionHandle" title="Ouroboros.Network.PeerSelection.PeerStateActions">PeerConnectionHandle</a> muxMode responderCtx peerAddr versionData bytes m a b -&gt; PeerSharing</li><li class="src short"><span class="keyword">data</span> <a href="#t:PeerSelectionActionException">PeerSelectionActionException</a> = <span class="keyword">forall</span> e.<a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Control-Exception-Base.html#t:Exception" title="Control.Exception.Base">Exception</a> e =&gt;  <a href="#v:PeerSelectionActionException">PeerSelectionActionException</a> e</li><li class="src short"><span class="keyword">data</span> <a href="#t:EstablishConnectionException">EstablishConnectionException</a> versionNumber<ul class="subs"><li>= <a href="#v:ClientException">ClientException</a> !(HandshakeException versionNumber)</li><li>| <a href="#v:ServerException">ServerException</a> !(HandshakeException versionNumber)</li></ul></li><li class="src short"><span class="keyword">data</span> <a href="#t:PeerSelectionTimeoutException">PeerSelectionTimeoutException</a> peerAddr = <a href="#v:DeactivationTimeout">DeactivationTimeout</a> !(<a href="Ouroboros-Network-NodeToClient.html#t:ConnectionId" title="Ouroboros.Network.NodeToClient">ConnectionId</a> peerAddr)</li><li class="src short"><span class="keyword">data</span> <a href="#t:MonitorPeerConnectionBlocked">MonitorPeerConnectionBlocked</a> = <a href="#v:MonitorPeerConnectionBlocked">MonitorPeerConnectionBlocked</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:PeerSelectionActionsTrace">PeerSelectionActionsTrace</a> peerAddr vNumber<ul class="subs"><li>= <a href="#v:PeerStatusChanged">PeerStatusChanged</a> (<a href="Ouroboros-Network-PeerSelection-PeerStateActions.html#t:PeerStatusChangeType" title="Ouroboros.Network.PeerSelection.PeerStateActions">PeerStatusChangeType</a> peerAddr)</li><li>| <a href="#v:PeerStatusChangeFailure">PeerStatusChangeFailure</a> (<a href="Ouroboros-Network-PeerSelection-PeerStateActions.html#t:PeerStatusChangeType" title="Ouroboros.Network.PeerSelection.PeerStateActions">PeerStatusChangeType</a> peerAddr) (<a href="Ouroboros-Network-PeerSelection-PeerStateActions.html#t:FailureType" title="Ouroboros.Network.PeerSelection.PeerStateActions">FailureType</a> vNumber)</li><li>| <a href="#v:PeerMonitoringError">PeerMonitoringError</a> (<a href="Ouroboros-Network-NodeToClient.html#t:ConnectionId" title="Ouroboros.Network.NodeToClient">ConnectionId</a> peerAddr) <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Control-Exception-Base.html#t:SomeException" title="Control.Exception.Base">SomeException</a></li><li>| <a href="#v:PeerMonitoringResult">PeerMonitoringResult</a> (<a href="Ouroboros-Network-NodeToClient.html#t:ConnectionId" title="Ouroboros.Network.NodeToClient">ConnectionId</a> peerAddr) (<a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> (WithSomeProtocolTemperature FirstToFinishResult))</li></ul></li><li class="src short"><span class="keyword">data</span> <a href="#t:PeerStatusChangeType">PeerStatusChangeType</a> peerAddr<ul class="subs"><li>= <a href="#v:ColdToWarm">ColdToWarm</a> !(<a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> peerAddr) !peerAddr</li><li>| <a href="#v:WarmToHot">WarmToHot</a> !(<a href="Ouroboros-Network-NodeToClient.html#t:ConnectionId" title="Ouroboros.Network.NodeToClient">ConnectionId</a> peerAddr)</li><li>| <a href="#v:HotToWarm">HotToWarm</a> !(<a href="Ouroboros-Network-NodeToClient.html#t:ConnectionId" title="Ouroboros.Network.NodeToClient">ConnectionId</a> peerAddr)</li><li>| <a href="#v:WarmToCooling">WarmToCooling</a> !(<a href="Ouroboros-Network-NodeToClient.html#t:ConnectionId" title="Ouroboros.Network.NodeToClient">ConnectionId</a> peerAddr)</li><li>| <a href="#v:HotToCooling">HotToCooling</a> !(<a href="Ouroboros-Network-NodeToClient.html#t:ConnectionId" title="Ouroboros.Network.NodeToClient">ConnectionId</a> peerAddr)</li><li>| <a href="#v:CoolingToCold">CoolingToCold</a> !(<a href="Ouroboros-Network-NodeToClient.html#t:ConnectionId" title="Ouroboros.Network.NodeToClient">ConnectionId</a> peerAddr)</li></ul></li><li class="src short"><span class="keyword">data</span> <a href="#t:FailureType">FailureType</a> versionNumber<ul class="subs"><li>= <a href="#v:HandshakeClientFailure">HandshakeClientFailure</a> !(HandshakeException versionNumber)</li><li>| <a href="#v:HandshakeServerFailure">HandshakeServerFailure</a> !(HandshakeException versionNumber)</li><li>| <a href="#v:HandleFailure">HandleFailure</a> !<a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Control-Exception-Base.html#t:SomeException" title="Control.Exception.Base">SomeException</a></li><li>| <a href="#v:MuxStoppedFailure">MuxStoppedFailure</a></li><li>| <a href="#v:TimeoutError">TimeoutError</a></li><li>| <a href="#v:ActiveCold">ActiveCold</a></li><li>| <a href="#v:ApplicationFailure">ApplicationFailure</a> ![MiniProtocolException]</li></ul></li></ul></details></div><div id="interface"><a href="#g:1" id="g:1"><h1>Introduction</h1></a><div class="doc"><p>This module implements <code><a href="Ouroboros-Network-PeerSelection-PeerStateActions.html#v:withPeerStateActions" title="Ouroboros.Network.PeerSelection.PeerStateActions">withPeerStateActions</a></code>, giving the user access to the
 <code><a href="Ouroboros-Network-PeerSelection-Governor.html#t:PeerStateActions" title="Ouroboros.Network.PeerSelection.Governor">PeerStateActions</a></code> API, which provides the following capabilities:</p><dl><dt>synchronous promotions / demotions</dt><dd>* <code><a href="Ouroboros-Network-PeerSelection-Governor.html#v:establishPeerConnection" title="Ouroboros.Network.PeerSelection.Governor">establishPeerConnection</a></code>
        * <code><a href="Ouroboros-Network-PeerSelection-Governor.html#v:activatePeerConnection" title="Ouroboros.Network.PeerSelection.Governor">activatePeerConnection</a></code>
        * <code><a href="Ouroboros-Network-PeerSelection-Governor.html#v:deactivatePeerConnection" title="Ouroboros.Network.PeerSelection.Governor">deactivatePeerConnection</a></code>
        * <code><a href="Ouroboros-Network-PeerSelection-Governor.html#v:closePeerConnection" title="Ouroboros.Network.PeerSelection.Governor">closePeerConnection</a></code></dd><dt>monitoring</dt><dd><code><a href="Ouroboros-Network-PeerSelection-Governor.html#v:monitorPeerConnection" title="Ouroboros.Network.PeerSelection.Governor">monitorPeerConnection</a></code> - returns the state of the connection.</dd><dt>asynchronous demotions</dt><dd>happens when a mini-protocol terminates or errors.</dd></dl><h1>Synchronous promotions / demotions</h1><p>Synchronous promotions / demotions are used by
 <code><a href="Ouroboros-Network-PeerSelection-Governor.html#v:peerSelectionGovernor" title="Ouroboros.Network.PeerSelection.Governor">peerSelectionGovernor</a></code>.</p><dl><dt>synchronous <em>cold &#8594; warm</em> transition</dt><dd>This transition starts with creating or reusing an inbound connection, do
    handshake (functionality provided by connection manager), start
    established and warm mini-protocols, start monitoring thread specified
    below.</dd><dt>synchronous <em>warm &#8594; hot</em> transition</dt><dd>This transition quiesces warm protocols and starts hot protocols.  There
    is no timeout to quiesce warm mini-protocols.  The tip-sample protocol
    which is the only planned warm protocol has some states that have
    a longer timeout when the remote peer has agency, but it does not
    transfer much data.</dd><dt>synchronous <em>hot &#8594; warm</em> transition</dt><dd>Within a timeout, stop hot protocols and let the warm protocols continue
    running.  If the timeout expires the connection is closed.  Note that this
    will impact inbound side of a duplex connection.  We cannot do any
    better: closing is a cooperative action since we require to arrive at
    a well defined state of the multiplexer (no outstanding data in ingress
    queue).  This transition must use last to finish synchronisation of all
    hot mini-protocols.</dd><dt>synchronous <em>warm &#8594; cold</em> transition</dt><dd>Shutdown established and warm protocols.  As in the previous transition
    it must use last to finish synchronisation on established and warm
    protocol termination, if this synchronisation timeouts the connection is
    closed.</dd></dl><h1>Monitoring Loop</h1><p>The monitoring loop is responsible for taking an action when one of the
 mini-protocols either terminates or errors.  When a mini-protocol terminates</p><ul><li>if (mini-protocol was hot): trigger a synchronous <em>hot &#8594; warm</em> transition.</li><li>otherwise: close the connection.</li></ul><p>The monitoring loop is supposed to stop when the multiplexer stops.</p><p>Note that the monitoring loop must act as soon as one of the mini-protocols
 terminates or errors, hence the use of first to finish synchronisation.</p><p>The multiplexer guarantees that whenever one of the mini-protocols errors the
 connection is closed.  This simplifies the actions needed to be taken by the
 monitoring loop.</p><h1>Asynchronous demotions</h1><dl><dt>asynchronous <em>* &#8594; cold</em> transition</dt><dd>This demotion is triggered whenever any of the mini-protocol errors.  This
 does not require a further action by the monitoring loop: mux will close the
 connection, monitoring loop will terminate.</dd></dl><dl><dt>asynchronous <em>hot &#8594; warm</em> demotion </dt><dd>This demotion is triggered if a hot mini-protocol terminates cleanly.  In
 this case we trigger synchronous <em>hot &#8594; warm</em> demotion which will halt all
 hot mini-protocols and will notify the peer-to-peer governor about the
 change.</dd></dl><h1>Implementation details</h1><p><code><a href="Ouroboros-Network-PeerSelection-Governor.html#t:PeerStateActions" title="Ouroboros.Network.PeerSelection.Governor">PeerStateActions</a></code> are build on top of <code>ConnectionManager</code> which provides
 a primitive to present us a negotiated connection (i.e. after running
 the handshake) and the multiplexer api which allows to start mini-protocols
 and track their termination via an <code>STM</code> interface.  Each connection has an
 associated <code><a href="Ouroboros-Network-PeerSelection-PeerStateActions.html#t:PeerConnectionHandle" title="Ouroboros.Network.PeerSelection.PeerStateActions">PeerConnectionHandle</a></code> which holds all the data associated with
 a connection.</p><p>Most important are <code>pchMux :: Mux mode m</code> which allows us
 to interact with the multiplexer and <code>pchAppHandles</code>.  The latter contains
 information about each mini-protocol and its <code>STM</code> mini-protocol monitoring
 action.  <code>ahMiniProtocolResults</code> allows us to build last-to-finish
 <code>awaitAllResults</code> and first-to-finish <code>awaitFirstResult</code> synchronisations that
 we need in synchronous transitions and monitoring loop respectively.</p><p><code>ahControlVar</code> is a per-temperature <code>TVar</code> which holds <code><a href="Ouroboros-Network-NodeToNode.html#t:ControlMessage" title="Ouroboros.Network.NodeToNode">ControlMessage</a></code>.  It
 is passed from <code>ConnectionHandler</code> via <code>Handle</code>.  This variable allows
 us to terminate, quiesce or re-enable mini-protocols.</p><p>Below is a schematic illustration of function calls / threads and shared
 state variables.  Reads done just make assertions are not included.  The
 diagram does not include <code><a href="Ouroboros-Network-PeerSelection-Governor.html#v:establishPeerConnection" title="Ouroboros.Network.PeerSelection.Governor">establishPeerConnection</a></code>.</p><pre>Legend: &#9472;  - functions
        &#9474;&#9617; - threads
        &#9473;  - STM mutable variables

        &#9500;&#9472;&#9472;&#9654;&#9475; - write to a TVar
        &#9474;&#9664;&#9472;&#9472;&#9512; - read from a TVar
        &#9500;&#9472;&#9472;&#9654;&#9474; - function call

        PeerStateVar        - 'pchPeerStatus' 'TVar'
        MiniProtocolResults - 'ahMiniProtocolResults' 'TVar'
        ControlVar          - 'ahControlVar' 'TVar'




                    &#9484;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9488;
                    &#9474; &#9484;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9488;                               &#9474;
                    &#9474; &#9474;        &#9474;                               &#9474;
   &#9484;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9524;&#9472;&#9524;&#9472;&#9488;      &#9474;                               &#9474;
  &#9484;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9488;&#9474;      &#9660;                               &#9660;
 &#9484;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9488;&#9474;&#9474;   &#9484;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9488;     &#9484;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9488;
 &#9474;&#9617;&#9617;&#9617;&#9617;&#9617;&#9617;&#9617;&#9617;&#9617;&#9617;&#9617;&#9617;&#9617;&#9617;&#9617;&#9617;&#9617;&#9617;&#9617;&#9617;&#9474;&#9474;&#9474;   &#9474;                          &#9474;     &#9474;                     &#9474;
 &#9474;&#9617;peerMonitoringLoop&#9617;&#9474;&#9474;&#9496;   &#9474; deactivatePeerConnection &#9474;     &#9474; closePeerConnection &#9474;
 &#9474;&#9617;&#9617;&#9617;&#9617;&#9617;&#9617;&#9617;&#9617;&#9617;&#9617;&#9617;&#9617;&#9617;&#9617;&#9617;&#9617;&#9617;&#9617;&#9617;&#9617;&#9474;&#9496;    &#9474;                          &#9474;     &#9474;                     &#9474;
 &#9492;&#9516;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9496;     &#9492;&#9516;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9516;&#9472;&#9472;&#9472;&#9472;&#9496;     &#9492;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9516;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9496;
  &#9474;     &#9650;                    &#9474;   &#9650;                &#9474;              &#9650; &#9650; &#9474;
  &#9474; &#9484;&#9472;&#9472;&#9472;&#9532;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9496;   &#9474;                &#9474;              &#9474; &#9474; &#9474;
  &#9474; &#9474; &#9484;&#9472;&#9532;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9532;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9532;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9496; &#9474; &#9474;
  &#9474; &#9474; &#9474; &#9474;                        &#9474;     &#9484;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9532;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9496; &#9474;
  &#9474; &#9474; &#9474; &#9474;                        &#9474;     &#9474;          &#9474; &#9484;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9496;
&#9618;&#9618;&#9474;&#9618;&#9474;&#9618;&#9474;&#9618;&#9474;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9474;&#9618;&#9618;&#9618;&#9618;&#9618;&#9474;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9474;&#9618;&#9474;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;
&#9618; &#9474; &#9474; &#9474; &#9492;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9488;        &#9474;     &#9474;          &#9474; &#9474;                       &#9618;&#9618;&#9618;
&#9618; &#9660; &#9660; &#9660;                 &#9474;        &#9474;     &#9474;          &#9660; &#9660;                       &#9618; &#9618;&#9618;&#9618;
&#9618;&#9487;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9491;      &#9487;&#9527;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9527;&#9473;&#9473;&#9473;&#9473;&#9473;&#9527;&#9491;     &#9487;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9491;            &#9618; &#9618; &#9618;
&#9618;&#9475;              &#9475;&#9491;     &#9475;                &#9475;&#9491;    &#9475;                &#9475;&#9491;           &#9618; &#9618; &#9618;
&#9618;&#9475; PeerStateVar &#9475;&#9475;&#9491;    &#9475;  MiniProtocol  &#9475;&#9475;&#9491;   &#9475;  ControlVar    &#9475;&#9475;&#9491;          &#9618; &#9618; &#9618;
&#9618;&#9475;              &#9475;&#9475;&#9475;    &#9475;     Results    &#9475;&#9475;&#9475;   &#9475;  - established &#9475;&#9475;&#9475;          &#9618; &#9618; &#9618;
&#9618;&#9475;              &#9475;&#9475;&#9475;    &#9475;  - established &#9475;&#9475;&#9475;   &#9475;  - warm        &#9475;&#9475;&#9475;          &#9618; &#9618; &#9618;
&#9618;&#9495;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9499;&#9475;&#9475;    &#9475;  - warm        &#9475;&#9475;&#9475;   &#9475;  - hot         &#9475;&#9475;&#9475;          &#9618; &#9618; &#9618;
&#9618; &#9495;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9499;&#9475;    &#9475;  - hot         &#9475;&#9475;&#9475;   &#9475;                &#9475;&#9475;&#9475;          &#9618; &#9618; &#9618;
&#9618;  &#9495;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9499;    &#9475;                &#9475;&#9475;&#9475;   &#9475;                &#9475;&#9475;&#9475;          &#9618; &#9618; &#9618;
&#9618;  &#9650;                   &#9495;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9499;&#9475;&#9475;   &#9495;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9499;&#9475;&#9475;          &#9618; &#9618; &#9618;
&#9618;  &#9474;                    &#9495;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9499;&#9475;    &#9495;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9499;&#9475;          &#9618; &#9618; &#9618;
&#9618;  &#9474;                     &#9495;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9499;     &#9495;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9499;          &#9618; &#9618; &#9618;
&#9618;  &#9474;                                             &#9650;                          &#9618; &#9618; &#9618;
&#9618;  &#9474;                   PeerConnectionHandles     &#9474;                          &#9618; &#9618; &#9618;
&#9618;&#9618;&#9618;&#9474;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9474;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618; &#9618; &#9618;
 &#9618; &#9474;                                             &#9474;                            &#9618; &#9618;
 &#9618;&#9618;&#9474;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9474;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618; &#9618;
  &#9618;&#9474;                                             &#9474;                              &#9618;
  &#9618;&#9474;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9474;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;&#9618;
   &#9474;                   &#9484;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9496;
 &#9484;&#9472;&#9524;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9524;&#9472;&#9472;&#9488;
 &#9474;                        &#9474;
 &#9474; activatePeerConnection &#9474;
 &#9474;                        &#9474;
 &#9492;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9496;</pre><p>Notes:</p><p>All three upper boxes: <code>peerMonitoringLoop</code>, <code><a href="Ouroboros-Network-PeerSelection-Governor.html#v:deactivatePeerConnection" title="Ouroboros.Network.PeerSelection.Governor">deactivatePeerConnection</a></code> and
 <code><a href="Ouroboros-Network-PeerSelection-Governor.html#v:closePeerConnection" title="Ouroboros.Network.PeerSelection.Governor">closePeerConnection</a></code> are reading <code>ahMiniProtocolResults</code> via the
 last-to-finish <code>awaitAllResults</code> synchronisation.</p><p>All of the thin boxes are writing to <code>pchPeerStatus</code> variable; which is read
 by 'monitorPeerConnection.  Also all of them writing to <code>ahControlVar</code>:
 <code>peerMonitoringLoop</code> does that through a call to <code>deactivePeerConnection</code> or
 <code><a href="Ouroboros-Network-PeerSelection-Governor.html#v:closePeerConnection" title="Ouroboros.Network.PeerSelection.Governor">closePeerConnection</a></code>.</p></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:PeerStateActionsArguments" class="def">PeerStateActionsArguments</a> muxMode socket responderCtx peerAddr versionData versionNumber m a b <a href="src/Ouroboros.Network.PeerSelection.PeerStateActions.html#PeerStateActionsArguments" class="link">Source</a> <a href="#t:PeerStateActionsArguments" class="selflink">#</a></p><div class="doc"><p>Record of arguments of <code>peerSelectionActions</code>.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:PeerStateActionsArguments" class="def">PeerStateActionsArguments</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:spsTracer" class="def">spsTracer</a> :: Tracer m (<a href="Ouroboros-Network-PeerSelection-PeerStateActions.html#t:PeerSelectionActionsTrace" title="Ouroboros.Network.PeerSelection.PeerStateActions">PeerSelectionActionsTrace</a> peerAddr versionNumber)</dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:spsDeactivateTimeout" class="def">spsDeactivateTimeout</a> :: <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/time-1.12.2/Data-Time-Clock.html#t:DiffTime" title="Data.Time.Clock">DiffTime</a></dfn><div class="doc"><p>Peer deactivation timeout: timeouts stopping hot protocols.</p></div></li><li><dfn class="src"><a id="v:spsCloseConnectionTimeout" class="def">spsCloseConnectionTimeout</a> :: <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/time-1.12.2/Data-Time-Clock.html#t:DiffTime" title="Data.Time.Clock">DiffTime</a></dfn><div class="doc"><p>Timeout on closing connection: timeouts stopping established and warm
 peer protocols.</p></div></li><li><dfn class="src"><a id="v:spsConnectionManager" class="def">spsConnectionManager</a> :: MuxConnectionManager muxMode socket (<a href="Ouroboros-Network-NodeToNode.html#t:ExpandedInitiatorContext" title="Ouroboros.Network.NodeToNode">ExpandedInitiatorContext</a> peerAddr m) responderCtx peerAddr versionData versionNumber <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/Data-ByteString-Lazy.html#t:ByteString" title="Data.ByteString.Lazy">ByteString</a> m a b</dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:spsExitPolicy" class="def">spsExitPolicy</a> :: <a href="Ouroboros-Network-ExitPolicy.html#t:ExitPolicy" title="Ouroboros.Network.ExitPolicy">ExitPolicy</a> a</dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:PeerConnectionHandle" class="def">PeerConnectionHandle</a> (muxMode :: MuxMode) responderCtx peerAddr versionData bytes m a b <a href="src/Ouroboros.Network.PeerSelection.PeerStateActions.html#PeerConnectionHandle" class="link">Source</a> <a href="#t:PeerConnectionHandle" class="selflink">#</a></p><div class="doc"><p>Each established connection has access to <code><a href="Ouroboros-Network-PeerSelection-PeerStateActions.html#t:PeerConnectionHandle" title="Ouroboros.Network.PeerSelection.PeerStateActions">PeerConnectionHandle</a></code>.  It
 allows to promote / demote or close the connection, by having access to
 <code>Mux</code>, three bundles of miniprotocols: for hot, warm and established peers
 together with their state <code>StrictTVar</code>s.</p></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:PeerConnectionHandle">Instances</h4><details id="i:PeerConnectionHandle" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:PeerConnectionHandle:Show:1"></span> (<a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Text-Show.html#t:Show" title="Text.Show">Show</a> peerAddr, <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Text-Show.html#t:Show" title="Text.Show">Show</a> versionData) =&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Text-Show.html#t:Show" title="Text.Show">Show</a> (<a href="Ouroboros-Network-PeerSelection-PeerStateActions.html#t:PeerConnectionHandle" title="Ouroboros.Network.PeerSelection.PeerStateActions">PeerConnectionHandle</a> muxMode responderCtx peerAddr versionData bytes m a b)</span> <a href="src/Ouroboros.Network.PeerSelection.PeerStateActions.html#line-452" class="link">Source</a> <a href="#t:PeerConnectionHandle" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:PeerConnectionHandle:Show:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Ouroboros-Network-PeerSelection-PeerStateActions.html">Ouroboros.Network.PeerSelection.PeerStateActions</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Ouroboros-Network-PeerSelection-PeerStateActions.html#t:PeerConnectionHandle" title="Ouroboros.Network.PeerSelection.PeerStateActions">PeerConnectionHandle</a> muxMode responderCtx peerAddr versionData bytes m a b -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src" class="link">Source</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="Ouroboros-Network-PeerSelection-PeerStateActions.html#t:PeerConnectionHandle" title="Ouroboros.Network.PeerSelection.PeerStateActions">PeerConnectionHandle</a> muxMode responderCtx peerAddr versionData bytes m a b -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-String.html#t:String" title="Data.String">String</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src" class="link">Source</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Ouroboros-Network-PeerSelection-PeerStateActions.html#t:PeerConnectionHandle" title="Ouroboros.Network.PeerSelection.PeerStateActions">PeerConnectionHandle</a> muxMode responderCtx peerAddr versionData bytes m a b] -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src" class="link">Source</a> <a href="#v:showList" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:withPeerStateActions" class="def">withPeerStateActions</a> :: <span class="keyword">forall</span> (muxMode :: MuxMode) socket responderCtx peerAddr versionData versionNumber m a b x. (<a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Control-Applicative.html#t:Alternative" title="Control.Applicative">Alternative</a> (STM m), MonadAsync m, MonadCatch m, MonadLabelledSTM m, MonadMask m, MonadTimer m, MonadThrow (STM m), HasInitiator muxMode <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Type-Equality.html#t:-126-" title="Data.Type.Equality">~</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Bool.html#v:True" title="Data.Bool">True</a>, <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Type-Reflection.html#t:Typeable" title="Type.Reflection">Typeable</a> versionNumber, <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Text-Show.html#t:Show" title="Text.Show">Show</a> versionNumber, <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> peerAddr, <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Type-Reflection.html#t:Typeable" title="Type.Reflection">Typeable</a> peerAddr, <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Text-Show.html#t:Show" title="Text.Show">Show</a> peerAddr) =&gt; <a href="Ouroboros-Network-PeerSelection-PeerStateActions.html#t:PeerStateActionsArguments" title="Ouroboros.Network.PeerSelection.PeerStateActions">PeerStateActionsArguments</a> muxMode socket responderCtx peerAddr versionData versionNumber m a b -&gt; (<a href="Ouroboros-Network-PeerSelection-Governor.html#t:PeerStateActions" title="Ouroboros.Network.PeerSelection.Governor">PeerStateActions</a> peerAddr (<a href="Ouroboros-Network-PeerSelection-PeerStateActions.html#t:PeerConnectionHandle" title="Ouroboros.Network.PeerSelection.PeerStateActions">PeerConnectionHandle</a> muxMode responderCtx peerAddr versionData <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/bytestring-0.11.5.2/Data-ByteString-Lazy.html#t:ByteString" title="Data.ByteString.Lazy">ByteString</a> m a b) m -&gt; m x) -&gt; m x <a href="src/Ouroboros.Network.PeerSelection.PeerStateActions.html#withPeerStateActions" class="link">Source</a> <a href="#v:withPeerStateActions" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:pchPeerSharing" class="def">pchPeerSharing</a> :: (versionData -&gt; PeerSharing) -&gt; <a href="Ouroboros-Network-PeerSelection-PeerStateActions.html#t:PeerConnectionHandle" title="Ouroboros.Network.PeerSelection.PeerStateActions">PeerConnectionHandle</a> muxMode responderCtx peerAddr versionData bytes m a b -&gt; PeerSharing <a href="src/Ouroboros.Network.PeerSelection.PeerStateActions.html#pchPeerSharing" class="link">Source</a> <a href="#v:pchPeerSharing" class="selflink">#</a></p></div><a href="#g:2" id="g:2"><h1>Exceptions</h1></a><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:PeerSelectionActionException" class="def">PeerSelectionActionException</a> <a href="src/Ouroboros.Network.PeerSelection.PeerStateActions.html#PeerSelectionActionException" class="link">Source</a> <a href="#t:PeerSelectionActionException" class="selflink">#</a></p><div class="doc"><p>Parent exception of all peer selection action exceptions.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><span class="keyword">forall</span> e.<a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Control-Exception-Base.html#t:Exception" title="Control.Exception.Base">Exception</a> e =&gt;  <a id="v:PeerSelectionActionException" class="def">PeerSelectionActionException</a> e</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:PeerSelectionActionException">Instances</h4><details id="i:PeerSelectionActionException" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:PeerSelectionActionException:Exception:1"></span> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Control-Exception-Base.html#t:Exception" title="Control.Exception.Base">Exception</a> <a href="Ouroboros-Network-PeerSelection-PeerStateActions.html#t:PeerSelectionActionException" title="Ouroboros.Network.PeerSelection.PeerStateActions">PeerSelectionActionException</a></span> <a href="src/Ouroboros.Network.PeerSelection.PeerStateActions.html#line-473" class="link">Source</a> <a href="#t:PeerSelectionActionException" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:PeerSelectionActionException:Exception:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Ouroboros-Network-PeerSelection-PeerStateActions.html">Ouroboros.Network.PeerSelection.PeerStateActions</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:toException">toException</a> :: <a href="Ouroboros-Network-PeerSelection-PeerStateActions.html#t:PeerSelectionActionException" title="Ouroboros.Network.PeerSelection.PeerStateActions">PeerSelectionActionException</a> -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Control-Exception-Base.html#t:SomeException" title="Control.Exception.Base">SomeException</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src" class="link">Source</a> <a href="#v:toException" class="selflink">#</a></p><p class="src"><a href="#v:fromException">fromException</a> :: <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Control-Exception-Base.html#t:SomeException" title="Control.Exception.Base">SomeException</a> -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="Ouroboros-Network-PeerSelection-PeerStateActions.html#t:PeerSelectionActionException" title="Ouroboros.Network.PeerSelection.PeerStateActions">PeerSelectionActionException</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src" class="link">Source</a> <a href="#v:fromException" class="selflink">#</a></p><p class="src"><a href="#v:displayException">displayException</a> :: <a href="Ouroboros-Network-PeerSelection-PeerStateActions.html#t:PeerSelectionActionException" title="Ouroboros.Network.PeerSelection.PeerStateActions">PeerSelectionActionException</a> -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-String.html#t:String" title="Data.String">String</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src" class="link">Source</a> <a href="#v:displayException" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:PeerSelectionActionException:Show:2"></span> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Text-Show.html#t:Show" title="Text.Show">Show</a> <a href="Ouroboros-Network-PeerSelection-PeerStateActions.html#t:PeerSelectionActionException" title="Ouroboros.Network.PeerSelection.PeerStateActions">PeerSelectionActionException</a></span> <a href="src/Ouroboros.Network.PeerSelection.PeerStateActions.html#line-470" class="link">Source</a> <a href="#t:PeerSelectionActionException" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:PeerSelectionActionException:Show:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Ouroboros-Network-PeerSelection-PeerStateActions.html">Ouroboros.Network.PeerSelection.PeerStateActions</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Ouroboros-Network-PeerSelection-PeerStateActions.html#t:PeerSelectionActionException" title="Ouroboros.Network.PeerSelection.PeerStateActions">PeerSelectionActionException</a> -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src" class="link">Source</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="Ouroboros-Network-PeerSelection-PeerStateActions.html#t:PeerSelectionActionException" title="Ouroboros.Network.PeerSelection.PeerStateActions">PeerSelectionActionException</a> -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-String.html#t:String" title="Data.String">String</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src" class="link">Source</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Ouroboros-Network-PeerSelection-PeerStateActions.html#t:PeerSelectionActionException" title="Ouroboros.Network.PeerSelection.PeerStateActions">PeerSelectionActionException</a>] -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src" class="link">Source</a> <a href="#v:showList" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:EstablishConnectionException" class="def">EstablishConnectionException</a> versionNumber <a href="src/Ouroboros.Network.PeerSelection.PeerStateActions.html#EstablishConnectionException" class="link">Source</a> <a href="#t:EstablishConnectionException" class="selflink">#</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:ClientException" class="def">ClientException</a> !(HandshakeException versionNumber)</td><td class="doc"><p>Handshake client failed</p></td></tr><tr><td class="src"><a id="v:ServerException" class="def">ServerException</a> !(HandshakeException versionNumber)</td><td class="doc"><p>Handshake server failed</p></td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:EstablishConnectionException">Instances</h4><details id="i:EstablishConnectionException" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:EstablishConnectionException:Exception:1"></span> (<a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Text-Show.html#t:Show" title="Text.Show">Show</a> versionNumber, <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Type-Reflection.html#t:Typeable" title="Type.Reflection">Typeable</a> versionNumber) =&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Control-Exception-Base.html#t:Exception" title="Control.Exception.Base">Exception</a> (<a href="Ouroboros-Network-PeerSelection-PeerStateActions.html#t:EstablishConnectionException" title="Ouroboros.Network.PeerSelection.PeerStateActions">EstablishConnectionException</a> versionNumber)</span> <a href="src/Ouroboros.Network.PeerSelection.PeerStateActions.html#line-500" class="link">Source</a> <a href="#t:EstablishConnectionException" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:EstablishConnectionException:Exception:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Ouroboros-Network-PeerSelection-PeerStateActions.html">Ouroboros.Network.PeerSelection.PeerStateActions</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:toException">toException</a> :: <a href="Ouroboros-Network-PeerSelection-PeerStateActions.html#t:EstablishConnectionException" title="Ouroboros.Network.PeerSelection.PeerStateActions">EstablishConnectionException</a> versionNumber -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Control-Exception-Base.html#t:SomeException" title="Control.Exception.Base">SomeException</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src" class="link">Source</a> <a href="#v:toException" class="selflink">#</a></p><p class="src"><a href="#v:fromException">fromException</a> :: <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Control-Exception-Base.html#t:SomeException" title="Control.Exception.Base">SomeException</a> -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> (<a href="Ouroboros-Network-PeerSelection-PeerStateActions.html#t:EstablishConnectionException" title="Ouroboros.Network.PeerSelection.PeerStateActions">EstablishConnectionException</a> versionNumber) <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src" class="link">Source</a> <a href="#v:fromException" class="selflink">#</a></p><p class="src"><a href="#v:displayException">displayException</a> :: <a href="Ouroboros-Network-PeerSelection-PeerStateActions.html#t:EstablishConnectionException" title="Ouroboros.Network.PeerSelection.PeerStateActions">EstablishConnectionException</a> versionNumber -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-String.html#t:String" title="Data.String">String</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src" class="link">Source</a> <a href="#v:displayException" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:EstablishConnectionException:Show:2"></span> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Text-Show.html#t:Show" title="Text.Show">Show</a> versionNumber =&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Text-Show.html#t:Show" title="Text.Show">Show</a> (<a href="Ouroboros-Network-PeerSelection-PeerStateActions.html#t:EstablishConnectionException" title="Ouroboros.Network.PeerSelection.PeerStateActions">EstablishConnectionException</a> versionNumber)</span> <a href="src/Ouroboros.Network.PeerSelection.PeerStateActions.html#line-498" class="link">Source</a> <a href="#t:EstablishConnectionException" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:EstablishConnectionException:Show:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Ouroboros-Network-PeerSelection-PeerStateActions.html">Ouroboros.Network.PeerSelection.PeerStateActions</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Ouroboros-Network-PeerSelection-PeerStateActions.html#t:EstablishConnectionException" title="Ouroboros.Network.PeerSelection.PeerStateActions">EstablishConnectionException</a> versionNumber -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src" class="link">Source</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="Ouroboros-Network-PeerSelection-PeerStateActions.html#t:EstablishConnectionException" title="Ouroboros.Network.PeerSelection.PeerStateActions">EstablishConnectionException</a> versionNumber -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-String.html#t:String" title="Data.String">String</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src" class="link">Source</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Ouroboros-Network-PeerSelection-PeerStateActions.html#t:EstablishConnectionException" title="Ouroboros.Network.PeerSelection.PeerStateActions">EstablishConnectionException</a> versionNumber] -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src" class="link">Source</a> <a href="#v:showList" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:PeerSelectionTimeoutException" class="def">PeerSelectionTimeoutException</a> peerAddr <a href="src/Ouroboros.Network.PeerSelection.PeerStateActions.html#PeerSelectionTimeoutException" class="link">Source</a> <a href="#t:PeerSelectionTimeoutException" class="selflink">#</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:DeactivationTimeout" class="def">DeactivationTimeout</a> !(<a href="Ouroboros-Network-NodeToClient.html#t:ConnectionId" title="Ouroboros.Network.NodeToClient">ConnectionId</a> peerAddr)</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:PeerSelectionTimeoutException">Instances</h4><details id="i:PeerSelectionTimeoutException" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:PeerSelectionTimeoutException:Exception:1"></span> (<a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Text-Show.html#t:Show" title="Text.Show">Show</a> peerAddr, <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Type-Reflection.html#t:Typeable" title="Type.Reflection">Typeable</a> peerAddr) =&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Control-Exception-Base.html#t:Exception" title="Control.Exception.Base">Exception</a> (<a href="Ouroboros-Network-PeerSelection-PeerStateActions.html#t:PeerSelectionTimeoutException" title="Ouroboros.Network.PeerSelection.PeerStateActions">PeerSelectionTimeoutException</a> peerAddr)</span> <a href="src/Ouroboros.Network.PeerSelection.PeerStateActions.html#line-511" class="link">Source</a> <a href="#t:PeerSelectionTimeoutException" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:PeerSelectionTimeoutException:Exception:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Ouroboros-Network-PeerSelection-PeerStateActions.html">Ouroboros.Network.PeerSelection.PeerStateActions</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:toException">toException</a> :: <a href="Ouroboros-Network-PeerSelection-PeerStateActions.html#t:PeerSelectionTimeoutException" title="Ouroboros.Network.PeerSelection.PeerStateActions">PeerSelectionTimeoutException</a> peerAddr -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Control-Exception-Base.html#t:SomeException" title="Control.Exception.Base">SomeException</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src" class="link">Source</a> <a href="#v:toException" class="selflink">#</a></p><p class="src"><a href="#v:fromException">fromException</a> :: <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Control-Exception-Base.html#t:SomeException" title="Control.Exception.Base">SomeException</a> -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> (<a href="Ouroboros-Network-PeerSelection-PeerStateActions.html#t:PeerSelectionTimeoutException" title="Ouroboros.Network.PeerSelection.PeerStateActions">PeerSelectionTimeoutException</a> peerAddr) <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src" class="link">Source</a> <a href="#v:fromException" class="selflink">#</a></p><p class="src"><a href="#v:displayException">displayException</a> :: <a href="Ouroboros-Network-PeerSelection-PeerStateActions.html#t:PeerSelectionTimeoutException" title="Ouroboros.Network.PeerSelection.PeerStateActions">PeerSelectionTimeoutException</a> peerAddr -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-String.html#t:String" title="Data.String">String</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src" class="link">Source</a> <a href="#v:displayException" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:PeerSelectionTimeoutException:Show:2"></span> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Text-Show.html#t:Show" title="Text.Show">Show</a> peerAddr =&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Text-Show.html#t:Show" title="Text.Show">Show</a> (<a href="Ouroboros-Network-PeerSelection-PeerStateActions.html#t:PeerSelectionTimeoutException" title="Ouroboros.Network.PeerSelection.PeerStateActions">PeerSelectionTimeoutException</a> peerAddr)</span> <a href="src/Ouroboros.Network.PeerSelection.PeerStateActions.html#line-509" class="link">Source</a> <a href="#t:PeerSelectionTimeoutException" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:PeerSelectionTimeoutException:Show:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Ouroboros-Network-PeerSelection-PeerStateActions.html">Ouroboros.Network.PeerSelection.PeerStateActions</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Ouroboros-Network-PeerSelection-PeerStateActions.html#t:PeerSelectionTimeoutException" title="Ouroboros.Network.PeerSelection.PeerStateActions">PeerSelectionTimeoutException</a> peerAddr -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src" class="link">Source</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="Ouroboros-Network-PeerSelection-PeerStateActions.html#t:PeerSelectionTimeoutException" title="Ouroboros.Network.PeerSelection.PeerStateActions">PeerSelectionTimeoutException</a> peerAddr -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-String.html#t:String" title="Data.String">String</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src" class="link">Source</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Ouroboros-Network-PeerSelection-PeerStateActions.html#t:PeerSelectionTimeoutException" title="Ouroboros.Network.PeerSelection.PeerStateActions">PeerSelectionTimeoutException</a> peerAddr] -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src" class="link">Source</a> <a href="#v:showList" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:MonitorPeerConnectionBlocked" class="def">MonitorPeerConnectionBlocked</a> <a href="src/Ouroboros.Network.PeerSelection.PeerStateActions.html#MonitorPeerConnectionBlocked" class="link">Source</a> <a href="#t:MonitorPeerConnectionBlocked" class="selflink">#</a></p><div class="doc"><p>Throw an exception when <code><a href="Ouroboros-Network-PeerSelection-Governor.html#v:monitorPeerConnection" title="Ouroboros.Network.PeerSelection.Governor">monitorPeerConnection</a></code> blocks.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:MonitorPeerConnectionBlocked" class="def">MonitorPeerConnectionBlocked</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:MonitorPeerConnectionBlocked">Instances</h4><details id="i:MonitorPeerConnectionBlocked" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:MonitorPeerConnectionBlocked:Exception:1"></span> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Control-Exception-Base.html#t:Exception" title="Control.Exception.Base">Exception</a> <a href="Ouroboros-Network-PeerSelection-PeerStateActions.html#t:MonitorPeerConnectionBlocked" title="Ouroboros.Network.PeerSelection.PeerStateActions">MonitorPeerConnectionBlocked</a></span> <a href="src/Ouroboros.Network.PeerSelection.PeerStateActions.html#line-488" class="link">Source</a> <a href="#t:MonitorPeerConnectionBlocked" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:MonitorPeerConnectionBlocked:Exception:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Ouroboros-Network-PeerSelection-PeerStateActions.html">Ouroboros.Network.PeerSelection.PeerStateActions</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:toException">toException</a> :: <a href="Ouroboros-Network-PeerSelection-PeerStateActions.html#t:MonitorPeerConnectionBlocked" title="Ouroboros.Network.PeerSelection.PeerStateActions">MonitorPeerConnectionBlocked</a> -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Control-Exception-Base.html#t:SomeException" title="Control.Exception.Base">SomeException</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src" class="link">Source</a> <a href="#v:toException" class="selflink">#</a></p><p class="src"><a href="#v:fromException">fromException</a> :: <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Control-Exception-Base.html#t:SomeException" title="Control.Exception.Base">SomeException</a> -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="Ouroboros-Network-PeerSelection-PeerStateActions.html#t:MonitorPeerConnectionBlocked" title="Ouroboros.Network.PeerSelection.PeerStateActions">MonitorPeerConnectionBlocked</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src" class="link">Source</a> <a href="#v:fromException" class="selflink">#</a></p><p class="src"><a href="#v:displayException">displayException</a> :: <a href="Ouroboros-Network-PeerSelection-PeerStateActions.html#t:MonitorPeerConnectionBlocked" title="Ouroboros.Network.PeerSelection.PeerStateActions">MonitorPeerConnectionBlocked</a> -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-String.html#t:String" title="Data.String">String</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src" class="link">Source</a> <a href="#v:displayException" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:MonitorPeerConnectionBlocked:Show:2"></span> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Text-Show.html#t:Show" title="Text.Show">Show</a> <a href="Ouroboros-Network-PeerSelection-PeerStateActions.html#t:MonitorPeerConnectionBlocked" title="Ouroboros.Network.PeerSelection.PeerStateActions">MonitorPeerConnectionBlocked</a></span> <a href="src/Ouroboros.Network.PeerSelection.PeerStateActions.html#line-486" class="link">Source</a> <a href="#t:MonitorPeerConnectionBlocked" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:MonitorPeerConnectionBlocked:Show:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Ouroboros-Network-PeerSelection-PeerStateActions.html">Ouroboros.Network.PeerSelection.PeerStateActions</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Ouroboros-Network-PeerSelection-PeerStateActions.html#t:MonitorPeerConnectionBlocked" title="Ouroboros.Network.PeerSelection.PeerStateActions">MonitorPeerConnectionBlocked</a> -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src" class="link">Source</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="Ouroboros-Network-PeerSelection-PeerStateActions.html#t:MonitorPeerConnectionBlocked" title="Ouroboros.Network.PeerSelection.PeerStateActions">MonitorPeerConnectionBlocked</a> -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-String.html#t:String" title="Data.String">String</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src" class="link">Source</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Ouroboros-Network-PeerSelection-PeerStateActions.html#t:MonitorPeerConnectionBlocked" title="Ouroboros.Network.PeerSelection.PeerStateActions">MonitorPeerConnectionBlocked</a>] -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src" class="link">Source</a> <a href="#v:showList" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><a href="#g:3" id="g:3"><h1>Trace</h1></a><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:PeerSelectionActionsTrace" class="def">PeerSelectionActionsTrace</a> peerAddr vNumber <a href="src/Ouroboros.Network.PeerSelection.PeerStateActions.html#PeerSelectionActionsTrace" class="link">Source</a> <a href="#t:PeerSelectionActionsTrace" class="selflink">#</a></p><div class="doc"><p>Traces produced by <code>peerSelectionActions</code>.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:PeerStatusChanged" class="def">PeerStatusChanged</a> (<a href="Ouroboros-Network-PeerSelection-PeerStateActions.html#t:PeerStatusChangeType" title="Ouroboros.Network.PeerSelection.PeerStateActions">PeerStatusChangeType</a> peerAddr)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:PeerStatusChangeFailure" class="def">PeerStatusChangeFailure</a> (<a href="Ouroboros-Network-PeerSelection-PeerStateActions.html#t:PeerStatusChangeType" title="Ouroboros.Network.PeerSelection.PeerStateActions">PeerStatusChangeType</a> peerAddr) (<a href="Ouroboros-Network-PeerSelection-PeerStateActions.html#t:FailureType" title="Ouroboros.Network.PeerSelection.PeerStateActions">FailureType</a> vNumber)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:PeerMonitoringError" class="def">PeerMonitoringError</a> (<a href="Ouroboros-Network-NodeToClient.html#t:ConnectionId" title="Ouroboros.Network.NodeToClient">ConnectionId</a> peerAddr) <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Control-Exception-Base.html#t:SomeException" title="Control.Exception.Base">SomeException</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:PeerMonitoringResult" class="def">PeerMonitoringResult</a> (<a href="Ouroboros-Network-NodeToClient.html#t:ConnectionId" title="Ouroboros.Network.NodeToClient">ConnectionId</a> peerAddr) (<a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> (WithSomeProtocolTemperature FirstToFinishResult))</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:PeerSelectionActionsTrace">Instances</h4><details id="i:PeerSelectionActionsTrace" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:PeerSelectionActionsTrace:Show:1"></span> (<a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Text-Show.html#t:Show" title="Text.Show">Show</a> peerAddr, <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Text-Show.html#t:Show" title="Text.Show">Show</a> vNumber) =&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Text-Show.html#t:Show" title="Text.Show">Show</a> (<a href="Ouroboros-Network-PeerSelection-PeerStateActions.html#t:PeerSelectionActionsTrace" title="Ouroboros.Network.PeerSelection.PeerStateActions">PeerSelectionActionsTrace</a> peerAddr vNumber)</span> <a href="src/Ouroboros.Network.PeerSelection.PeerStateActions.html#line-1179" class="link">Source</a> <a href="#t:PeerSelectionActionsTrace" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:PeerSelectionActionsTrace:Show:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Ouroboros-Network-PeerSelection-PeerStateActions.html">Ouroboros.Network.PeerSelection.PeerStateActions</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Ouroboros-Network-PeerSelection-PeerStateActions.html#t:PeerSelectionActionsTrace" title="Ouroboros.Network.PeerSelection.PeerStateActions">PeerSelectionActionsTrace</a> peerAddr vNumber -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src" class="link">Source</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="Ouroboros-Network-PeerSelection-PeerStateActions.html#t:PeerSelectionActionsTrace" title="Ouroboros.Network.PeerSelection.PeerStateActions">PeerSelectionActionsTrace</a> peerAddr vNumber -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-String.html#t:String" title="Data.String">String</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src" class="link">Source</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Ouroboros-Network-PeerSelection-PeerStateActions.html#t:PeerSelectionActionsTrace" title="Ouroboros.Network.PeerSelection.PeerStateActions">PeerSelectionActionsTrace</a> peerAddr vNumber] -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src" class="link">Source</a> <a href="#v:showList" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:PeerStatusChangeType" class="def">PeerStatusChangeType</a> peerAddr <a href="src/Ouroboros.Network.PeerSelection.PeerStateActions.html#PeerStatusChangeType" class="link">Source</a> <a href="#t:PeerStatusChangeType" class="selflink">#</a></p><div class="doc"><p>All transitions.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:ColdToWarm" class="def">ColdToWarm</a></td><td class="doc"><p>During the <code><a href="Ouroboros-Network-PeerSelection-PeerStateActions.html#v:ColdToWarm" title="Ouroboros.Network.PeerSelection.PeerStateActions">ColdToWarm</a></code> transition we have the remote address, and only
 if establishing connection (establishing bearer &amp; handshake negotiation)
 is successful we have access to full <code><a href="Ouroboros-Network-NodeToClient.html#t:ConnectionId" title="Ouroboros.Network.NodeToClient">ConnectionId</a></code>.</p></td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src">!(<a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> peerAddr)</dfn><div class="doc"><p>local peer address</p></div></li><li><dfn class="src">!peerAddr</dfn><div class="doc"><p>remote peer address</p></div></li></ul></div></td></tr><tr><td class="src"><a id="v:WarmToHot" class="def">WarmToHot</a> !(<a href="Ouroboros-Network-NodeToClient.html#t:ConnectionId" title="Ouroboros.Network.NodeToClient">ConnectionId</a> peerAddr)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:HotToWarm" class="def">HotToWarm</a> !(<a href="Ouroboros-Network-NodeToClient.html#t:ConnectionId" title="Ouroboros.Network.NodeToClient">ConnectionId</a> peerAddr)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:WarmToCooling" class="def">WarmToCooling</a> !(<a href="Ouroboros-Network-NodeToClient.html#t:ConnectionId" title="Ouroboros.Network.NodeToClient">ConnectionId</a> peerAddr)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:HotToCooling" class="def">HotToCooling</a> !(<a href="Ouroboros-Network-NodeToClient.html#t:ConnectionId" title="Ouroboros.Network.NodeToClient">ConnectionId</a> peerAddr)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:CoolingToCold" class="def">CoolingToCold</a> !(<a href="Ouroboros-Network-NodeToClient.html#t:ConnectionId" title="Ouroboros.Network.NodeToClient">ConnectionId</a> peerAddr)</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:PeerStatusChangeType">Instances</h4><details id="i:PeerStatusChangeType" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:PeerStatusChangeType:Show:1"></span> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Text-Show.html#t:Show" title="Text.Show">Show</a> peerAddr =&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Text-Show.html#t:Show" title="Text.Show">Show</a> (<a href="Ouroboros-Network-PeerSelection-PeerStateActions.html#t:PeerStatusChangeType" title="Ouroboros.Network.PeerSelection.PeerStateActions">PeerStatusChangeType</a> peerAddr)</span> <a href="src/Ouroboros.Network.PeerSelection.PeerStateActions.html#line-1170" class="link">Source</a> <a href="#t:PeerStatusChangeType" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:PeerStatusChangeType:Show:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Ouroboros-Network-PeerSelection-PeerStateActions.html">Ouroboros.Network.PeerSelection.PeerStateActions</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Ouroboros-Network-PeerSelection-PeerStateActions.html#t:PeerStatusChangeType" title="Ouroboros.Network.PeerSelection.PeerStateActions">PeerStatusChangeType</a> peerAddr -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src" class="link">Source</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="Ouroboros-Network-PeerSelection-PeerStateActions.html#t:PeerStatusChangeType" title="Ouroboros.Network.PeerSelection.PeerStateActions">PeerStatusChangeType</a> peerAddr -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-String.html#t:String" title="Data.String">String</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src" class="link">Source</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Ouroboros-Network-PeerSelection-PeerStateActions.html#t:PeerStatusChangeType" title="Ouroboros.Network.PeerSelection.PeerStateActions">PeerStatusChangeType</a> peerAddr] -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src" class="link">Source</a> <a href="#v:showList" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:FailureType" class="def">FailureType</a> versionNumber <a href="src/Ouroboros.Network.PeerSelection.PeerStateActions.html#FailureType" class="link">Source</a> <a href="#t:FailureType" class="selflink">#</a></p><div class="doc"><p>Type of failure with additional exception context; We don't log handshake
 errors as this will be done by the handshake tracer.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:HandshakeClientFailure" class="def">HandshakeClientFailure</a> !(HandshakeException versionNumber)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:HandshakeServerFailure" class="def">HandshakeServerFailure</a> !(HandshakeException versionNumber)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:HandleFailure" class="def">HandleFailure</a> !<a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Control-Exception-Base.html#t:SomeException" title="Control.Exception.Base">SomeException</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:MuxStoppedFailure" class="def">MuxStoppedFailure</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:TimeoutError" class="def">TimeoutError</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:ActiveCold" class="def">ActiveCold</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:ApplicationFailure" class="def">ApplicationFailure</a> ![MiniProtocolException]</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:FailureType">Instances</h4><details id="i:FailureType" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:FailureType:Show:1"></span> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Text-Show.html#t:Show" title="Text.Show">Show</a> versionNumber =&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Text-Show.html#t:Show" title="Text.Show">Show</a> (<a href="Ouroboros-Network-PeerSelection-PeerStateActions.html#t:FailureType" title="Ouroboros.Network.PeerSelection.PeerStateActions">FailureType</a> versionNumber)</span> <a href="src/Ouroboros.Network.PeerSelection.PeerStateActions.html#line-1154" class="link">Source</a> <a href="#t:FailureType" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:FailureType:Show:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Ouroboros-Network-PeerSelection-PeerStateActions.html">Ouroboros.Network.PeerSelection.PeerStateActions</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Ouroboros-Network-PeerSelection-PeerStateActions.html#t:FailureType" title="Ouroboros.Network.PeerSelection.PeerStateActions">FailureType</a> versionNumber -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src" class="link">Source</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="Ouroboros-Network-PeerSelection-PeerStateActions.html#t:FailureType" title="Ouroboros.Network.PeerSelection.PeerStateActions">FailureType</a> versionNumber -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Data-String.html#t:String" title="Data.String">String</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src" class="link">Source</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Ouroboros-Network-PeerSelection-PeerStateActions.html#t:FailureType" title="Ouroboros.Network.PeerSelection.PeerStateActions">FailureType</a> versionNumber] -&gt; <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="file:///nix/store/9f69j6hfgwz5xdil7lfn1c1mbhrhidl1-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src" class="link">Source</a> <a href="#v:showList" class="selflink">#</a></p></div></details></td></tr></table></details></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.29.1</p></div></body></html>